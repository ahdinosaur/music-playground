{
  "version": 3,
  "sources": [
    "node_modules/browser-pack-flat/_prelude",
    "node_modules/browserify/lib/_empty.js",
    "node_modules/buffer/index.js",
    "node_modules/browserify/node_modules/events/events.js",
    "node_modules/plucker/index.js",
    "node_modules/fast-safe-stringify/index.js",
    "node_modules/state-copy/index.js",
    "node_modules/copy-text-to-clipboard/index.js",
    "node_modules/choo-devtools/lib/copy.js",
    "node_modules/nanologger/node_modules/xtend/immutable.js",
    "node_modules/nanologger/index.js",
    "node_modules/object-change-callsite/index.js",
    "node_modules/choo-devtools/lib/debug.js",
    "node_modules/choo-devtools/lib/help.js",
    "node_modules/base64-js/index.js",
    "node_modules/ieee754/index.js",
    "node_modules/clone/clone.js",
    "node_modules/nanoscheduler/index.js",
    "node_modules/remove-array-items/index.js",
    "node_modules/choo-devtools/lib/log.js",
    "node_modules/on-performance/browser.js",
    "node_modules/choo-hooks/index.js",
    "node_modules/choo-devtools/lib/logger.js",
    "node_modules/choo-devtools/lib/perf.js",
    "node_modules/prettier-bytes/index.js",
    "node_modules/choo-devtools/lib/storage.js",
    "node_modules/global/window.js",
    "node_modules/wayfarer/get-all-routes.js",
    "node_modules/choo-devtools/index.js",
    "node_modules/nanolru/index.js",
    "node_modules/choo/component/cache.js",
    "node_modules/choo/node_modules/xtend/immutable.js",
    "node_modules/document-ready/index.js",
    "node_modules/nanotiming/browser.js",
    "node_modules/nanobus/index.js",
    "node_modules/nanohref/index.js",
    "node_modules/nanoassert/index.js",
    "node_modules/nanomorph/lib/events.js",
    "node_modules/nanomorph/lib/morph.js",
    "node_modules/nanomorph/index.js",
    "node_modules/nanoquery/browser.js",
    "node_modules/nanoraf/index.js",
    "node_modules/wayfarer/node_modules/xtend/immutable.js",
    "node_modules/wayfarer/node_modules/xtend/mutable.js",
    "node_modules/wayfarer/trie.js",
    "node_modules/wayfarer/index.js",
    "node_modules/nanorouter/index.js",
    "node_modules/scroll-to-anchor/index.js",
    "node_modules/choo/index.js",
    "node_modules/soundfont-player/instruments.json",
    "node_modules/audio-loader/lib/base64.js",
    "node_modules/audio-loader/lib/index.js",
    "node_modules/audio-loader/lib/fetch.js",
    "node_modules/sample-player/lib/events.js",
    "node_modules/midimessage/dist/index.min.js",
    "node_modules/sample-player/lib/midi.js",
    "node_modules/sample-player/node_modules/note-parser/index.js",
    "node_modules/sample-player/lib/notes.js",
    "node_modules/adsr/index.js",
    "node_modules/sample-player/lib/player.js",
    "node_modules/sample-player/lib/scheduler.js",
    "node_modules/sample-player/lib/index.js",
    "node_modules/note-parser/dist/note-parser.js",
    "node_modules/soundfont-player/lib/legacy.js",
    "node_modules/soundfont-player/lib/index.js",
    "stores/instrument.js",
    "node_modules/tonal-note/build/es5.js",
    "node_modules/tonal-array/build/es5.js",
    "node_modules/tonal-interval/build/es5.js",
    "node_modules/tonal-pcset/build/es5.js",
    "node_modules/tonal-dictionary/build/es5.js",
    "node_modules/tonal-distance/build/es5.js",
    "node_modules/tonal-chord/build/es5.js",
    "node_modules/tonal-scale/build/es5.js",
    "node_modules/tonal/build/es5.js",
    "stores/scale.js",
    "node_modules/browser-resolve/empty.js",
    "node_modules/global/document.js",
    "node_modules/on-load/index.js",
    "node_modules/nanocomponent/index.js",
    "node_modules/choo/component/index.js",
    "node_modules/clamp/index.js",
    "node_modules/color-name/index.js",
    "node_modules/defined/index.js",
    "node_modules/is-plain-obj/index.js",
    "node_modules/color-parse/index.js",
    "node_modules/color-space/rgb.js",
    "node_modules/color-space/hsl.js",
    "node_modules/color-rgba/index.js",
    "node_modules/color-normalize/index.js",
    "node_modules/dtype/index.js",
    "node_modules/pick-by-alias/index.js",
    "node_modules/gl-util/context.js",
    "node_modules/glslify/browser.js",
    "node_modules/negative-zero/index.js",
    "node_modules/object-assign/index.js",
    "node_modules/regl/dist/regl.js",
    "node_modules/on-idle/index.js",
    "node_modules/parse-unit/index.js",
    "node_modules/to-float32/index.js",
    "node_modules/to-px/browser.js",
    "node_modules/bit-twiddle/twiddle.js",
    "node_modules/dup/dup.js",
    "node_modules/typedarray-pool/pool.js",
    "node_modules/weak-map/weak-map.js",
    "node_modules/gl-waveform/index.js",
    "node_modules/is-browser/client.js",
    "node_modules/parse-rect/index.js",
    "node_modules/negative-index/index.js",
    "node_modules/offset/index.js",
    "components/waveform.js",
    "node_modules/nanohtml/lib/append-child.js",
    "stores/keyboard.js",
    "stores/player.js",
    "stores/waveform.js",
    "stores/microphone.js",
    "views/main.js",
    "views/keyboard.js",
    "views/scale.js",
    "views/instrument.js",
    "views/player.js",
    "views/microphone.js",
    "views/waveform.js"
  ],
  "names": [
    "_$events_10",
    "_$buffer_11",
    "t",
    "e",
    "r",
    "exports",
    "parent",
    "createModuleFactory",
    "module",
    "_typeof",
    "Symbol",
    "iterator",
    "obj",
    "constructor",
    "prototype",
    "Buffer",
    "SlowBuffer",
    "length",
    "alloc",
    "INSPECT_MAX_BYTES",
    "K_MAX_LENGTH",
    "createBuffer",
    "RangeError",
    "buf",
    "Uint8Array",
    "__proto__",
    "arg",
    "encodingOrOffset",
    "TypeError",
    "allocUnsafe",
    "from",
    "value",
    "string",
    "encoding",
    "isEncoding",
    "byteLength",
    "actual",
    "write",
    "slice",
    "ArrayBuffer",
    "isView",
    "fromArrayLike",
    "isInstance",
    "buffer",
    "array",
    "byteOffset",
    "valueOf",
    "b",
    "isBuffer",
    "len",
    "checked",
    "copy",
    "numberIsNaN",
    "type",
    "Array",
    "isArray",
    "data",
    "toPrimitive",
    "assertSize",
    "size",
    "i",
    "toString",
    "mustMatch",
    "arguments",
    "loweredCase",
    "utf8ToBytes",
    "base64ToBytes",
    "toLowerCase",
    "swap",
    "n",
    "m",
    "bidirectionalIndexOf",
    "val",
    "dir",
    "arrayIndexOf",
    "indexOf",
    "call",
    "lastIndexOf",
    "arr",
    "indexSize",
    "arrLength",
    "valLength",
    "String",
    "read",
    "readUInt16BE",
    "foundIndex",
    "found",
    "j",
    "hexWrite",
    "offset",
    "Number",
    "remaining",
    "strLen",
    "parsed",
    "parseInt",
    "substr",
    "utf8Write",
    "blitBuffer",
    "asciiWrite",
    "str",
    "byteArray",
    "push",
    "charCodeAt",
    "latin1Write",
    "base64Write",
    "ucs2Write",
    "units",
    "c",
    "hi",
    "lo",
    "base64Slice",
    "start",
    "end",
    "_$base64Js_6",
    "fromByteArray",
    "utf8Slice",
    "Math",
    "min",
    "res",
    "secondByte",
    "thirdByte",
    "fourthByte",
    "tempCodePoint",
    "firstByte",
    "codePoint",
    "bytesPerSequence",
    "codePoints",
    "MAX_ARGUMENTS_LENGTH",
    "fromCharCode",
    "apply",
    "kMaxLength",
    "TYPED_ARRAY_SUPPORT",
    "foo",
    "console",
    "error",
    "Object",
    "defineProperty",
    "enumerable",
    "get",
    "this",
    "species",
    "configurable",
    "writable",
    "poolSize",
    "fill",
    "allocUnsafeSlow",
    "_isBuffer",
    "compare",
    "a",
    "x",
    "y",
    "concat",
    "list",
    "pos",
    "swap16",
    "swap32",
    "swap64",
    "hexSlice",
    "asciiSlice",
    "latin1Slice",
    "utf16leSlice",
    "toLocaleString",
    "equals",
    "inspect",
    "max",
    "replace",
    "trim",
    "target",
    "thisStart",
    "thisEnd",
    "thisCopy",
    "targetCopy",
    "includes",
    "isFinite",
    "Error",
    "toJSON",
    "_arr",
    "ret",
    "out",
    "bytes",
    "checkOffset",
    "ext",
    "checkInt",
    "checkIEEE754",
    "writeFloat",
    "littleEndian",
    "noAssert",
    "_$ieee754_44",
    "writeDouble",
    "newBuf",
    "subarray",
    "readUIntLE",
    "mul",
    "readUIntBE",
    "readUInt8",
    "readUInt16LE",
    "readUInt32LE",
    "readUInt32BE",
    "readIntLE",
    "pow",
    "readIntBE",
    "readInt8",
    "readInt16LE",
    "readInt16BE",
    "readInt32LE",
    "readInt32BE",
    "readFloatLE",
    "readFloatBE",
    "readDoubleLE",
    "readDoubleBE",
    "writeUIntLE",
    "writeUIntBE",
    "writeUInt8",
    "writeUInt16LE",
    "writeUInt16BE",
    "writeUInt32LE",
    "writeUInt32BE",
    "writeIntLE",
    "limit",
    "sub",
    "writeIntBE",
    "writeInt8",
    "writeInt16LE",
    "writeInt16BE",
    "writeInt32LE",
    "writeInt32BE",
    "writeFloatLE",
    "writeFloatBE",
    "writeDoubleLE",
    "writeDoubleBE",
    "targetStart",
    "copyWithin",
    "set",
    "code",
    "INVALID_BASE64_RE",
    "leadSurrogate",
    "toByteArray",
    "split",
    "src",
    "dst",
    "name",
    "objectCreate",
    "create",
    "proto",
    "F",
    "objectKeys",
    "keys",
    "k",
    "hasOwnProperty",
    "bind",
    "Function",
    "context",
    "fn",
    "EventEmitter",
    "_events",
    "_eventsCount",
    "_maxListeners",
    "hasDefineProperty",
    "defaultMaxListeners",
    "o",
    "err",
    "$getMaxListeners",
    "that",
    "_addListener",
    "listener",
    "prepend",
    "events",
    "existing",
    "newListener",
    "emit",
    "unshift",
    "warned",
    "w",
    "emitter",
    "count",
    "warn",
    "message",
    "onceWrapper",
    "fired",
    "removeListener",
    "wrapFn",
    "args",
    "_onceWrap",
    "state",
    "wrapped",
    "_listeners",
    "unwrap",
    "evlistener",
    "arrayClone",
    "listenerCount",
    "pluck",
    "path",
    "object",
    "l",
    "setMaxListeners",
    "isNaN",
    "getMaxListeners",
    "er",
    "handler",
    "doError",
    "isFn",
    "self",
    "listeners",
    "arg1",
    "arg2",
    "arg3",
    "addListener",
    "on",
    "prependListener",
    "once",
    "prependOnceListener",
    "position",
    "originalListener",
    "shift",
    "index",
    "pop",
    "removeAllListeners",
    "key",
    "rawListeners",
    "eventNames",
    "Reflect",
    "ownKeys",
    "stringify",
    "decirc",
    "stack",
    "___typeof_38",
    "Circle",
    "forceDecirc",
    "JSON",
    "_$fastSafeStringify_38",
    "default",
    "_$stateCopy_92",
    "input",
    "el",
    "document",
    "createElement",
    "setAttribute",
    "style",
    "contain",
    "left",
    "fontSize",
    "selection",
    "getSelection",
    "originalRange",
    "rangeCount",
    "getRangeAt",
    "body",
    "appendChild",
    "select",
    "selectionStart",
    "selectionEnd",
    "success",
    "execCommand",
    "removeChild",
    "removeAllRanges",
    "addRange",
    "_$copyTextToClipboard_33",
    "_$copy_13",
    "isStateString",
    "isChooPath",
    "window",
    "choo",
    "_$immutable_55",
    "source",
    "emojis",
    "trace",
    "debug",
    "info",
    "fatal",
    "levels",
    "defaultColors",
    "foreground",
    "background",
    "black",
    "red",
    "green",
    "yellow",
    "blue",
    "magenta",
    "cyan",
    "white",
    "brightBlack",
    "Nanologger",
    "opts",
    "_name",
    "_colors",
    "colors",
    "logLevel",
    "localStorage",
    "getItem",
    "_logLevel",
    "color",
    "pad",
    "strip",
    "join",
    "_$nanologger_54",
    "_print",
    "level",
    "date",
    "time",
    "Date",
    "getHours",
    "getMinutes",
    "getSeconds",
    "emoji",
    "msgColor",
    "objs",
    "msg",
    "test",
    "forEach",
    "log",
    "enabledMessage",
    "_$debug_14",
    "app",
    "localEmitter",
    "callback",
    "enabled",
    "attr",
    "callsite",
    "Proxy",
    "prop",
    "deleteProperty",
    "bool",
    "print",
    "cmd",
    "desc",
    "noop",
    "_$help_15",
    "setTimeout",
    "b64",
    "lens",
    "getLens",
    "validLen",
    "placeHoldersLen",
    "tmp",
    "Arr",
    "curByte",
    "revLookup",
    "uint8",
    "extraBytes",
    "parts",
    "len2",
    "encodeChunk",
    "lookup",
    "num",
    "output",
    "isLE",
    "mLen",
    "nBytes",
    "eLen",
    "eMax",
    "eBias",
    "nBits",
    "d",
    "s",
    "NaN",
    "rt",
    "abs",
    "floor",
    "LN2",
    "clone",
    "_instanceof",
    "nativeMap",
    "nativeSet",
    "nativePromise",
    "Map",
    "_",
    "Set",
    "Promise",
    "circular",
    "depth",
    "includeNonEnumerable",
    "allParents",
    "allChildren",
    "useBuffer",
    "_clone",
    "child",
    "resolve",
    "reject",
    "then",
    "__isArray",
    "__isRegExp",
    "RegExp",
    "__getRegExpFlags",
    "lastIndex",
    "__isDate",
    "getTime",
    "getPrototypeOf",
    "keyChild",
    "valueChild",
    "entryChild",
    "add",
    "attrs",
    "getOwnPropertyDescriptor",
    "getOwnPropertySymbols",
    "symbols",
    "symbol",
    "descriptor",
    "allPropertyNames",
    "getOwnPropertyNames",
    "propertyName",
    "__objToStr",
    "re",
    "flags",
    "global",
    "ignoreCase",
    "multiline",
    "clonePrototype",
    "_$clone_26",
    "hasWindow",
    "NanoScheduler",
    "hasIdle",
    "requestIdleCallback",
    "method",
    "scheduled",
    "queue",
    "cb",
    "schedule",
    "idleDeadline",
    "timeRemaining",
    "_$removeArrayItems_80",
    "startIdx",
    "removeCount",
    "scheduler",
    "_$nanoscheduler_63",
    "_nanoScheduler",
    "_log",
    "MAX_HISTORY_LENGTH",
    "__noop_16",
    "_$log_16",
    "shouldDebug",
    "history",
    "shouldWarn",
    "showHistory",
    "table",
    "Event",
    "_state",
    "ex",
    "_history",
    "entry",
    "__scheduler_73",
    "entryTypes",
    "_$browser_73",
    "PerformanceObserver",
    "_onperformance",
    "stop",
    "observer",
    "parseEntries",
    "performance",
    "observe",
    "splice",
    "getEntries",
    "entryType",
    "clearMeasures",
    "clearResourceTimings",
    "__scheduler_20",
    "ChooHooks",
    "hasIdleCallback",
    "hasPerformance",
    "getEntriesByName",
    "use",
    "render",
    "_$chooHooks_20",
    "onresourcetimingbufferfull",
    "timing",
    "eventName",
    "morph",
    "route",
    "eventListener",
    "event",
    "timingName",
    "match",
    "traceId",
    "rBuf",
    "renderListener",
    "timings",
    "_timing",
    "uuid",
    "exec",
    "_emitLoaded",
    "logListener",
    "unhandledListener",
    "unhandled",
    "DOMContentLoaded",
    "usesListener",
    "interactive",
    "domInteractive",
    "navigationStart",
    "loaded",
    "domContentLoadedEventEnd",
    "duration",
    "reduce",
    "sum",
    "toFixed",
    "__scheduler_17",
    "_$logger_17",
    "initialRender",
    "hooks",
    "logger",
    "filter",
    "fps",
    "times",
    "BAR",
    "Perf",
    "stats",
    "rename",
    "PerfEntry",
    "totalTime",
    "median",
    "Name",
    "__noop_18",
    "_$perf_18",
    "perf",
    "all",
    "core",
    "components",
    "entries",
    "stat",
    "filtered",
    "maxTime",
    "maxMedian",
    "fmt",
    "map",
    "numbers",
    "sort",
    "middle",
    "createBar",
    "round",
    "_$prettierBytes_78",
    "___typeof_78",
    "neg",
    "exponent",
    "unit",
    "clr",
    "__noop_19",
    "_$storage_19",
    "navigator",
    "storage",
    "estimate",
    "usage",
    "quota",
    "persisted",
    "protocol",
    "location",
    "win",
    "_$window_42",
    "_$getAllRoutes_105",
    "router",
    "tree",
    "_trie",
    "trie",
    "transform",
    "previous",
    "prev",
    "routes",
    "nodes",
    "__EventEmitter_12",
    "LRU",
    "cache",
    "head",
    "tail",
    "maxAge",
    "_$nanolru_56",
    "clear",
    "remove",
    "element",
    "_unlink",
    "next",
    "peek",
    "_checkAge",
    "modified",
    "now",
    "evict",
    "ChooComponentCache",
    "lru",
    "newCall",
    "Cls",
    "_$cache_21",
    "Component",
    "id",
    "_$immutable_24",
    "__hasOwnProperty_24",
    "_$documentReady_35",
    "readyState",
    "addEventListener",
    "__perf_64",
    "__scheduler_64",
    "nanotiming",
    "disabled",
    "DISABLE_NANOTIMING",
    "mark",
    "__noop_64",
    "MAX_SAFE_INTEGER",
    "startName",
    "endName",
    "measureName",
    "measure",
    "clearMarks",
    "_$nanotiming_64",
    "Nanobus",
    "_starListeners",
    "_$nanobus_50",
    "emitTiming",
    "_emit",
    "ilength",
    "safeExternalLink",
    "protocolLink",
    "assert",
    "notEqual",
    "notOk",
    "equal",
    "ok",
    "_$events_58",
    "eventsLength",
    "updateAttribute",
    "newNode",
    "oldNode",
    "removeAttribute",
    "_$morph_59",
    "nodeType",
    "nodeName",
    "oldAttrs",
    "attributes",
    "newAttrs",
    "attrNamespaceURI",
    "attrValue",
    "attrName",
    "namespaceURI",
    "localName",
    "getAttributeNS",
    "setAttributeNS",
    "hasAttribute",
    "getAttribute",
    "specified",
    "hasAttributeNS",
    "removeAttributeNS",
    "nodeValue",
    "newValue",
    "oldValue",
    "firstChild",
    "placeholder",
    "ev",
    "__TEXT_NODE_57",
    "walk",
    "isSameNode",
    "tagName",
    "getComponentId",
    "updateChildren",
    "node",
    "dataset",
    "nanomorphComponentId",
    "oldChild",
    "newChild",
    "morphed",
    "oldMatch",
    "childNodes",
    "same",
    "replaceChild",
    "insertBefore",
    "_$nanomorph_57",
    "oldTree",
    "newTree",
    "options",
    "childrenOnly",
    "reg",
    "__hasOwnProperty_107",
    "_$mutable_108",
    "__hasOwnProperty_108",
    "Trie",
    "_$trie_109",
    "createNode",
    "thisRoute",
    "$$",
    "wildcard",
    "params",
    "search",
    "decodeURIComponent",
    "_$immutable_107",
    "mount",
    "_$Wayfarer_106",
    "Wayfarer",
    "dft",
    "_default",
    "_wayfarer",
    "matched",
    "Route",
    "isLocalFile",
    "___typeof_62",
    "origin",
    "stripElectron",
    "prefix",
    "normalize",
    "suffix",
    "Nanorouter",
    "pathname",
    "routename",
    "isElectron",
    "decodeURI",
    "_$nanorouter_62",
    "_$scrollToAnchor_88",
    "anchor",
    "querySelector",
    "scrollIntoView",
    "_$Choo_23",
    "Choo",
    "HISTORY_OBJECT",
    "DOMCONTENTLOADED",
    "DOMTITLECHANGE",
    "REPLACESTATE",
    "PUSHSTATE",
    "NAVIGATE",
    "POPSTATE",
    "RENDER",
    "_historyEnabled",
    "_hrefEnabled",
    "href",
    "_hashEnabled",
    "hash",
    "_hasWindow",
    "_cache",
    "_loaded",
    "_stores",
    "_tree",
    "initialState",
    "curry",
    "title",
    "storeName",
    "endTiming",
    "root",
    "_matchRoute",
    "pushState",
    "replaceState",
    "onpopstate",
    "button",
    "ctrlKey",
    "metaKey",
    "altKey",
    "shiftKey",
    "defaultPrevented",
    "traverse",
    "parentNode",
    "hostname",
    "port",
    "preventDefault",
    "_setCache",
    "initStore",
    "_prerender",
    "raf",
    "requestAnimationFrame",
    "redrawScheduled",
    "_args",
    "_$nanoraf_61",
    "renderTiming",
    "morphTiming",
    "selector",
    "___typeof_23",
    "html",
    "outerHTML",
    "locationOverride",
    "queryString",
    "_handler",
    "query",
    "a0",
    "a1",
    "a2",
    "a3",
    "routeTiming",
    "renderComponent",
    "_$instruments_89",
    "_$base64_3",
    "decode",
    "sBase64",
    "nBlocksSize",
    "nMod3",
    "nMod4",
    "nChr",
    "sB64Enc",
    "nInLen",
    "nOutLen",
    "ceil",
    "taBytes",
    "nUint24",
    "nOutIdx",
    "nInIdx",
    "___typeof_5",
    "fromRegex",
    "__prefix_5",
    "pre",
    "load",
    "ac",
    "defVal",
    "loader",
    "loadArrayBuffer",
    "isAudioFileName",
    "loadAudioFile",
    "loadPromise",
    "loadArrayData",
    "loadObjectData",
    "isJsonFileName",
    "loadJsonFile",
    "isBase64Audio",
    "loadBase64Audio",
    "isJsFileName",
    "loadMidiJSFile",
    "done",
    "decodeAudioData",
    "fetch",
    "url",
    "req",
    "XMLHttpRequest",
    "responseType",
    "open",
    "onload",
    "status",
    "response",
    "statusText",
    "onerror",
    "send",
    "promise",
    "dest",
    "promises",
    "only",
    "audio",
    "parse",
    "midiJsToJson",
    "begin",
    "_$lib_5",
    "loadAudio",
    "_$events_81",
    "player",
    "fn1",
    "fn2",
    "old",
    "_$indexMin_48",
    "define",
    "amd",
    "midimessage",
    "require",
    "h",
    "1",
    "_event",
    "_data",
    "receivedTime",
    "_messageCode",
    "channel",
    "messageType",
    "velocity",
    "pressure",
    "controllerNumber",
    "controllerValue",
    "channelModeMessage",
    "program",
    "pitchBend",
    "_$midi_83",
    "listenToMidi",
    "started",
    "gain",
    "vel",
    "onmidimessage",
    "mm",
    "play",
    "REGEX",
    "SEMITONES",
    "isTonic",
    "tuning",
    "p",
    "letter",
    "toUpperCase",
    "acc",
    "pc",
    "step",
    "alt",
    "chroma",
    "oct",
    "midi",
    "freq",
    "midiToFreq",
    "tonicOf",
    "parser",
    "regex",
    "_$noteParser_87",
    "toMidi",
    "_$notes_84",
    "buffers",
    "toKey",
    "mapper",
    "mapped",
    "when",
    "dec",
    "assign",
    "cents",
    "_$adsr_2",
    "audioContext",
    "createGain",
    "voltage",
    "_voltage",
    "createBufferSource",
    "sampleRate",
    "getChannelData",
    "flat",
    "loop",
    "scale",
    "startValue",
    "endValue",
    "_startAmount",
    "_endAmount",
    "_multiplier",
    "connect",
    "defineProperties",
    "props",
    "attack",
    "decay",
    "sustain",
    "release",
    "getReleaseDuration",
    "at",
    "startAmount",
    "endAmount",
    "_decayFrom",
    "_startedAt",
    "cancelScheduledValues",
    "setValueAtTime",
    "linearRampToValueAtTime",
    "setTargetAtTime",
    "getTimeConstant",
    "isTarget",
    "endTime",
    "expFalloff",
    "valueAtTime",
    "fromTime",
    "toTime",
    "onended",
    "Float32Array",
    "EMPTY",
    "DEFAULTS",
    "loopStart",
    "loopEnd",
    "isNum",
    "PARAMS",
    "_$player_85",
    "connected",
    "nextId",
    "tracked",
    "AudioBuffer",
    "currentTime",
    "disconnect",
    "env",
    "ids",
    "onevent",
    "adsr",
    "playbackRate",
    "stopAt",
    "___typeof_86",
    "isArr",
    "OPTS",
    "_$scheduler_86",
    "note",
    "SamplePlayer",
    "_$lib_82",
    "___typeof_67",
    "u",
    "A",
    "f",
    "build",
    "charAt",
    "_$noteParser_67",
    "NoteParser",
    "Soundfont",
    "ctx",
    "nameToUrl",
    "instruments",
    "oscillatorPlayer",
    "defaultOptions",
    "destination",
    "vcoType",
    "vco",
    "createOscillator",
    "frequency",
    "vca",
    "onready",
    "instrument",
    "inst",
    "loadBuffers",
    "noteToMidi",
    "_$legacy_91",
    "___typeof_90",
    "isSoundfontURL",
    "sf",
    "format",
    "isUrl",
    "toUrl",
    "soundfont",
    "notes",
    "_$lib_90",
    "_$es5_100",
    "NAMES",
    "names",
    "accTypes",
    "SHARPS",
    "FLATS",
    "__REGEX_100",
    "tokenize",
    "NO_NOTE",
    "freeze",
    "octStr",
    "SEMI",
    "__props_100",
    "tokens",
    "__midiToFreq_100",
    "L2",
    "L440",
    "stepToLetter",
    "fillStr",
    "altToAcc",
    "op",
    "fromProps",
    "baseNote",
    "_a",
    "fromMidi",
    "sharps",
    "simplify",
    "sameAcc",
    "useSharps",
    "freqToMidi",
    "v",
    "enharmonic",
    "_$es5_95",
    "compact",
    "height",
    "range",
    "rotate",
    "unique",
    "shuffle",
    "rnd",
    "random",
    "permutations",
    "perm",
    "newPerm",
    "_$es5_99",
    "__REGEX_99",
    "SIZES",
    "CLASSES",
    "__NAMES_99",
    "__tokenize_99",
    "NO_IVL",
    "q",
    "simple",
    "semitones",
    "__fillStr_99",
    "qToAlt",
    "altToQ",
    "numToStep",
    "properties",
    "ic",
    "__cache_99",
    "__props_99",
    "__build_99",
    "_b",
    "_c",
    "IN",
    "IQ",
    "types",
    "ivl",
    "intervalProps",
    "invert",
    "fromSemitones",
    "_$es5_101",
    "chr",
    "pcsetNum",
    "isChroma",
    "__REGEX_101",
    "IVLS",
    "chromas",
    "clen",
    "modes",
    "binary",
    "intervals",
    "isEqual",
    "s1",
    "s2",
    "isSubsetOf",
    "isSupersetOf",
    "_$es5_97",
    "dictionary",
    "raw",
    "ivls",
    "alias",
    "allKeys",
    "dict",
    "combine",
    "__scale_97",
    "chromatic",
    "lydian",
    "major",
    "mixolydian",
    "dorian",
    "aeolian",
    "phrygian",
    "locrian",
    "melodic minor",
    "melodic minor second mode",
    "lydian augmented",
    "lydian dominant",
    "melodic minor fifth mode",
    "locrian #2",
    "altered",
    "harmonic minor",
    "phrygian dominant",
    "half-whole diminished",
    "diminished",
    "major pentatonic",
    "lydian pentatonic",
    "mixolydian pentatonic",
    "locrian pentatonic",
    "minor pentatonic",
    "minor six pentatonic",
    "minor hexatonic",
    "flat three pentatonic",
    "flat six pentatonic",
    "major flat two pentatonic",
    "whole tone pentatonic",
    "ionian pentatonic",
    "lydian #5P pentatonic",
    "lydian dominant pentatonic",
    "minor #7M pentatonic",
    "super locrian pentatonic",
    "in-sen",
    "iwato",
    "hirajoshi",
    "kumoijoshi",
    "pelog",
    "vietnamese 1",
    "vietnamese 2",
    "prometheus",
    "prometheus neopolitan",
    "ritusen",
    "scriabin",
    "piongio",
    "major blues",
    "minor blues",
    "composite blues",
    "augmented",
    "augmented heptatonic",
    "dorian #4",
    "lydian diminished",
    "whole tone",
    "leading whole tone",
    "lydian minor",
    "locrian major",
    "neopolitan",
    "neopolitan minor",
    "neopolitan major",
    "neopolitan major pentatonic",
    "romanian minor",
    "double harmonic lydian",
    "harmonic major",
    "double harmonic major",
    "egyptian",
    "hungarian minor",
    "hungarian major",
    "oriental",
    "spanish heptatonic",
    "flamenco",
    "balinese",
    "todi raga",
    "malkos raga",
    "kafi raga",
    "purvi raga",
    "persian",
    "bebop",
    "bebop dominant",
    "bebop minor",
    "bebop major",
    "bebop locrian",
    "minor bebop",
    "mystery #1",
    "enigmatic",
    "minor six diminished",
    "ionian augmented",
    "lydian #9",
    "ichikosucho",
    "six tone symmetric",
    "chord",
    "4",
    "5",
    "7",
    "9",
    "11",
    "13",
    "64",
    "M",
    "M#5",
    "M#5add9",
    "M13",
    "M13#11",
    "M6",
    "M6#11",
    "M69",
    "M69#11",
    "M7#11",
    "M7#5",
    "M7#5sus4",
    "M7#9#11",
    "M7add13",
    "M7b5",
    "M7b6",
    "M7b9",
    "M7sus4",
    "M9",
    "M9#11",
    "M9#5",
    "M9#5sus4",
    "M9b5",
    "M9sus4",
    "Madd9",
    "Maj7",
    "Mb5",
    "Mb6",
    "Msus2",
    "Msus4",
    "Maddb9",
    "11b9",
    "13#11",
    "13#9",
    "13#9#11",
    "13b5",
    "13b9",
    "13b9#11",
    "13no5",
    "13sus4",
    "69#11",
    "7#11",
    "7#11b13",
    "7#5",
    "7#5#9",
    "7#5b9",
    "7#5b9#11",
    "7#5sus4",
    "7#9",
    "7#9#11",
    "7#9#11b13",
    "7#9b13",
    "7add6",
    "7b13",
    "7b5",
    "7b6",
    "7b9",
    "7b9#11",
    "7b9#9",
    "7b9b13",
    "7b9b13#11",
    "7no5",
    "7sus4",
    "7sus4b9",
    "7sus4b9b13",
    "9#11",
    "9#11b13",
    "9#5",
    "9#5#11",
    "9b13",
    "9b5",
    "9no5",
    "9sus4",
    "m#5",
    "m11",
    "m11A 5",
    "m11b5",
    "m13",
    "m6",
    "m69",
    "m7",
    "m7#5",
    "m7add11",
    "m7b5",
    "m9",
    "m9#5",
    "m9b5",
    "mMaj7",
    "mMaj7b6",
    "mM9",
    "mM9b6",
    "mb6M7",
    "mb6b9",
    "o7",
    "o7M7",
    "oM7",
    "sus24",
    "+add#9",
    "madd4",
    "madd9",
    "pcset",
    "_$es5_98",
    "FIFTHS",
    "FIFTH_OCTS",
    "STEPS",
    "encoder",
    "ref",
    "encodeNote",
    "encodeIvl",
    "transpose",
    "interval",
    "tr",
    "decodeIvl",
    "addIntervals",
    "ivl1",
    "ivl2",
    "i1",
    "i2",
    "trFifths",
    "fifths",
    "to",
    "transposeBy",
    "subtract",
    "_$es5_96",
    "__fn_96",
    "__cache_96",
    "__names_96",
    "NO_CHORD",
    "setnum",
    "__props_96",
    "__tokenize_96",
    "NUM_TYPES",
    "nameOrTonic",
    "tonic",
    "exists",
    "supersets",
    "isSuperset",
    "subsets",
    "isSubset",
    "_$es5_102",
    "__fn_102",
    "__cache_102",
    "NO_SCALE",
    "__props_102",
    "__names_102",
    "__intervals_102",
    "__tokenize_102",
    "__notes_102",
    "substring",
    "modeNames",
    "tonics",
    "chords",
    "inScale",
    "toScale",
    "_$es5_103",
    "__transpose_103",
    "__note_103",
    "__midi_103",
    "__chord_103",
    "__scale_103",
    "Note",
    "Interval",
    "Distance",
    "Dictionary",
    "Scale",
    "Chord",
    "PcSet",
    "_$empty_8",
    "_$document_41",
    "doccy",
    "topLevel",
    "watch",
    "KEY_ID",
    "KEY_ATTR",
    "INDEX",
    "MutationObserver",
    "mutations",
    "attributeName",
    "eachMutation",
    "removedNodes",
    "turnoff",
    "addedNodes",
    "turnon",
    "mutation",
    "off",
    "beginObserve",
    "documentElement",
    "childList",
    "subtree",
    "attributeOldValue",
    "attributeFilter",
    "onloadid",
    "_$onLoad_72",
    "caller",
    "OL_KEY_ID",
    "OL_ATTR_ID",
    "Nanocomponent",
    "_id",
    "_ncID",
    "_olID",
    "_proxy",
    "_rootNodeName",
    "_rerender",
    "_handleLoad",
    "_handleUnload",
    "_arguments",
    "getElementById",
    "nanocomponent",
    "_$nanocomponent_51",
    "updateTiming",
    "shouldUpdate",
    "update",
    "desiredHtml",
    "_handleRender",
    "afterupdate",
    "_createProxy",
    "_reset",
    "beforerender",
    "unload",
    "afterreorder",
    "createTiming",
    "rerender",
    "createElementTiming",
    "_brandNode",
    "_ensureID",
    "proxy",
    "_$component_22",
    "_$clamp_25",
    "_$colorName_27",
    "aliceblue",
    "antiquewhite",
    "aqua",
    "aquamarine",
    "azure",
    "beige",
    "bisque",
    "blanchedalmond",
    "blueviolet",
    "brown",
    "burlywood",
    "cadetblue",
    "chartreuse",
    "chocolate",
    "coral",
    "cornflowerblue",
    "cornsilk",
    "crimson",
    "darkblue",
    "darkcyan",
    "darkgoldenrod",
    "darkgray",
    "darkgreen",
    "darkgrey",
    "darkkhaki",
    "darkmagenta",
    "darkolivegreen",
    "darkorange",
    "darkorchid",
    "darkred",
    "darksalmon",
    "darkseagreen",
    "darkslateblue",
    "darkslategray",
    "darkslategrey",
    "darkturquoise",
    "darkviolet",
    "deeppink",
    "deepskyblue",
    "dimgray",
    "dimgrey",
    "dodgerblue",
    "firebrick",
    "floralwhite",
    "forestgreen",
    "fuchsia",
    "gainsboro",
    "ghostwhite",
    "gold",
    "goldenrod",
    "gray",
    "greenyellow",
    "grey",
    "honeydew",
    "hotpink",
    "indianred",
    "indigo",
    "ivory",
    "khaki",
    "lavender",
    "lavenderblush",
    "lawngreen",
    "lemonchiffon",
    "lightblue",
    "lightcoral",
    "lightcyan",
    "lightgoldenrodyellow",
    "lightgray",
    "lightgreen",
    "lightgrey",
    "lightpink",
    "lightsalmon",
    "lightseagreen",
    "lightskyblue",
    "lightslategray",
    "lightslategrey",
    "lightsteelblue",
    "lightyellow",
    "lime",
    "limegreen",
    "linen",
    "maroon",
    "mediumaquamarine",
    "mediumblue",
    "mediumorchid",
    "mediumpurple",
    "mediumseagreen",
    "mediumslateblue",
    "mediumspringgreen",
    "mediumturquoise",
    "mediumvioletred",
    "midnightblue",
    "mintcream",
    "mistyrose",
    "moccasin",
    "navajowhite",
    "navy",
    "oldlace",
    "olive",
    "olivedrab",
    "orange",
    "orangered",
    "orchid",
    "palegoldenrod",
    "palegreen",
    "paleturquoise",
    "palevioletred",
    "papayawhip",
    "peachpuff",
    "peru",
    "pink",
    "plum",
    "powderblue",
    "purple",
    "rebeccapurple",
    "rosybrown",
    "royalblue",
    "saddlebrown",
    "salmon",
    "sandybrown",
    "seagreen",
    "seashell",
    "sienna",
    "silver",
    "skyblue",
    "slateblue",
    "slategray",
    "slategrey",
    "snow",
    "springgreen",
    "steelblue",
    "tan",
    "teal",
    "thistle",
    "tomato",
    "turquoise",
    "violet",
    "wheat",
    "whitesmoke",
    "yellowgreen",
    "_$defined_34",
    "_$isPlainObj_46",
    "_$colorParse_29",
    "cstr",
    "space",
    "alpha",
    "base",
    "parseFloat",
    "baseHues",
    "R",
    "g",
    "G",
    "B",
    "hue",
    "H",
    "saturation",
    "S",
    "lightness",
    "L",
    "brightness",
    "opacity",
    "values",
    "_$hsl_31",
    "rgb",
    "hsl",
    "t1",
    "t2",
    "t3",
    "_$colorNormalize_28",
    "dtype",
    "Int8Array",
    "Int16Array",
    "Int32Array",
    "Uint16Array",
    "Uint32Array",
    "Float64Array",
    "Uint8ClampedArray",
    "_$colorRgba_30",
    "_$pickByAlias_76",
    "keepRest",
    "result",
    "toList",
    "occupied",
    "aliases",
    "CACHE",
    "resize",
    "container",
    "width",
    "canvas",
    "pixelRatio",
    "innerWidth",
    "innerHeight",
    "bounds",
    "getBoundingClientRect",
    "right",
    "bottom",
    "top",
    "isCanvas",
    "getContext",
    "createCanvas",
    "_$context_39",
    "drawArrays",
    "drawElements",
    "gl",
    "_$browser_43",
    "strings",
    "exprs",
    "_$negativeZero_66",
    "is",
    "__hasOwnProperty_68",
    "propIsEnumerable",
    "propertyIsEnumerable",
    "_$objectAssign_68",
    "test1",
    "test2",
    "test3",
    "factory",
    "dftOpts",
    "__hasWindow_71",
    "_$parseUnit_75",
    "___typeof_79",
    "isTypedArray",
    "extend",
    "raise",
    "check",
    "pred",
    "encolon",
    "checkOneOf",
    "constructorKeys",
    "leftPad",
    "ShaderFile",
    "lines",
    "hasErrors",
    "ShaderLine",
    "number",
    "line",
    "errors",
    "ShaderError",
    "fileNumber",
    "lineNumber",
    "file",
    "guessCommand",
    "pat",
    "pat2",
    "guessCallSite",
    "parseSource",
    "command",
    "files",
    "unknown",
    "0",
    "lineNumberInfo",
    "nameInfo",
    "atob",
    "saveCommandRef",
    "_commandRef",
    "commandRaise",
    "callSite",
    "checkCommandType",
    "GL_UNSIGNED_SHORT_4_4_4_4",
    "GL_UNSIGNED_SHORT_5_5_5_1",
    "GL_UNSIGNED_SHORT_5_6_5",
    "GL_UNSIGNED_INT_24_8_WEBGL",
    "TYPE_SIZE",
    "pixelSize",
    "channels",
    "isPow2",
    "check$1",
    "optional",
    "block",
    "parameter",
    "param",
    "possibilities",
    "commandParameter",
    "commandType",
    "nni",
    "oneOf",
    "shaderError",
    "shader",
    "getShaderParameter",
    "COMPILE_STATUS",
    "errLog",
    "getShaderInfoLog",
    "typeName",
    "FRAGMENT_SHADER",
    "errMsg",
    "styles",
    "token",
    "tokenPat",
    "chrome",
    "linkError",
    "fragShader",
    "vertShader",
    "getProgramParameter",
    "LINK_STATUS",
    "getProgramInfoLog",
    "fragParse",
    "header",
    "saveDrawInfo",
    "uniforms",
    "stringStore",
    "addProps",
    "_fragId",
    "static",
    "frag",
    "_vertId",
    "vert",
    "uniformSet",
    "_uniformSet",
    "dynamic",
    "attributeSet",
    "_attributeSet",
    "_hasCount",
    "framebufferFormat",
    "attachment",
    "texFormats",
    "rbFormats",
    "texture",
    "_texture",
    "internalformat",
    "renderbuffer",
    "_renderbuffer",
    "texture2D",
    "mipData",
    "limits",
    "maxTextureSize",
    "wrapS",
    "wrapT",
    "mipmask",
    "minFilter",
    "extensions",
    "magFilter",
    "genMipmaps",
    "mipimages",
    "images",
    "mw",
    "mh",
    "img",
    "compressed",
    "rowSize",
    "unpackAlignment",
    "textureCube",
    "faces",
    "face",
    "mipmaps",
    "VARIABLE_COUNTER",
    "DynamicVariable",
    "escapeStr",
    "toAccessorString",
    "splitParts",
    "firstChar",
    "lastChar",
    "subparts",
    "isDynamic",
    "_reglType",
    "unbox",
    "accessor",
    "cancel",
    "cancelAnimationFrame",
    "clearTimeout",
    "clock",
    "parseExtensions",
    "getElement",
    "GL_BYTE$1",
    "GL_UNSIGNED_BYTE$2",
    "GL_SHORT$1",
    "GL_UNSIGNED_SHORT$1",
    "GL_INT$1",
    "GL_UNSIGNED_INT$1",
    "GL_FLOAT$2",
    "log2",
    "createPool",
    "bufferPool",
    "sz",
    "bin",
    "free",
    "allocType",
    "freeType",
    "pool",
    "zero",
    "isNDArrayLike",
    "shape",
    "stride",
    "flattenUtils",
    "array_",
    "flatten",
    "out_",
    "nx",
    "ny",
    "ptr",
    "row",
    "flatten3D",
    "flattenRec",
    "nz",
    "ptr_",
    "col",
    "arrayTypes",
    "[object Int8Array]",
    "[object Int16Array]",
    "[object Int32Array]",
    "[object Uint8Array]",
    "[object Uint8ClampedArray]",
    "[object Uint16Array]",
    "[object Uint32Array]",
    "[object Float32Array]",
    "[object Float64Array]",
    "[object ArrayBuffer]",
    "glTypes",
    "int8",
    "int16",
    "int32",
    "uint16",
    "uint32",
    "float",
    "float32",
    "usageTypes",
    "stream",
    "arrayFlatten",
    "arrayShape",
    "GL_STATIC_DRAW",
    "GL_UNSIGNED_BYTE$3",
    "GL_FLOAT$3",
    "DTYPES_SIZES",
    "typedArrayCode",
    "copyArray",
    "inp",
    "shapeX",
    "shapeY",
    "strideX",
    "strideY",
    "primTypes",
    "points",
    "point",
    "triangles",
    "triangle",
    "line loop",
    "line strip",
    "triangle strip",
    "triangle fan",
    "GL_POINTS",
    "GL_LINES",
    "GL_TRIANGLES",
    "GL_BYTE$2",
    "GL_UNSIGNED_BYTE$4",
    "GL_SHORT$2",
    "GL_UNSIGNED_SHORT$2",
    "GL_INT$2",
    "GL_UNSIGNED_INT$2",
    "GL_ELEMENT_ARRAY_BUFFER",
    "GL_STATIC_DRAW$1",
    "FLOAT",
    "INT",
    "GL_UNSIGNED_SHORT$4",
    "convertToHalfFloat",
    "ushorts",
    "sgn",
    "exp",
    "frac",
    "isArrayLike",
    "isPow2$1",
    "GL_COMPRESSED_TEXTURE_FORMATS",
    "GL_TEXTURE_2D$1",
    "GL_TEXTURE_CUBE_MAP$1",
    "GL_TEXTURE_CUBE_MAP_POSITIVE_X$1",
    "GL_RGBA$1",
    "GL_ALPHA",
    "GL_RGB",
    "GL_LUMINANCE",
    "GL_LUMINANCE_ALPHA",
    "GL_RGBA4",
    "GL_RGB5_A1",
    "GL_RGB565",
    "GL_UNSIGNED_SHORT_4_4_4_4$1",
    "GL_UNSIGNED_SHORT_5_5_5_1$1",
    "GL_UNSIGNED_SHORT_5_6_5$1",
    "GL_UNSIGNED_INT_24_8_WEBGL$1",
    "GL_DEPTH_COMPONENT",
    "GL_DEPTH_STENCIL",
    "GL_SRGB_EXT",
    "GL_SRGB_ALPHA_EXT",
    "GL_HALF_FLOAT_OES$1",
    "GL_COMPRESSED_RGB_S3TC_DXT1_EXT",
    "GL_COMPRESSED_RGBA_S3TC_DXT1_EXT",
    "GL_COMPRESSED_RGBA_S3TC_DXT3_EXT",
    "GL_COMPRESSED_RGBA_S3TC_DXT5_EXT",
    "GL_COMPRESSED_RGB_ATC_WEBGL",
    "GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",
    "GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",
    "GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG",
    "GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG",
    "GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",
    "GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",
    "GL_COMPRESSED_RGB_ETC1_WEBGL",
    "GL_UNSIGNED_BYTE$5",
    "GL_UNSIGNED_SHORT$3",
    "GL_UNSIGNED_INT$3",
    "GL_FLOAT$4",
    "GL_TEXTURE_WRAP_S",
    "GL_TEXTURE_WRAP_T",
    "GL_REPEAT",
    "GL_CLAMP_TO_EDGE$1",
    "GL_MIRRORED_REPEAT",
    "GL_TEXTURE_MAG_FILTER",
    "GL_TEXTURE_MIN_FILTER",
    "GL_NEAREST$1",
    "GL_LINEAR",
    "GL_NEAREST_MIPMAP_NEAREST$1",
    "GL_LINEAR_MIPMAP_NEAREST$1",
    "GL_NEAREST_MIPMAP_LINEAR$1",
    "GL_LINEAR_MIPMAP_LINEAR$1",
    "GL_GENERATE_MIPMAP_HINT",
    "GL_DONT_CARE",
    "GL_FASTEST",
    "GL_NICEST",
    "GL_TEXTURE_MAX_ANISOTROPY_EXT",
    "GL_UNPACK_ALIGNMENT",
    "GL_UNPACK_FLIP_Y_WEBGL",
    "GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL",
    "GL_UNPACK_COLORSPACE_CONVERSION_WEBGL",
    "GL_BROWSER_DEFAULT_WEBGL",
    "GL_TEXTURE0$1",
    "MIPMAP_FILTERS",
    "CHANNELS_FORMAT",
    "FORMAT_CHANNELS",
    "objectName",
    "CANVAS_CLASS",
    "CONTEXT2D_CLASS",
    "BITMAP_CLASS",
    "IMAGE_CLASS",
    "VIDEO_CLASS",
    "PIXEL_CLASSES",
    "TYPE_SIZES",
    "FORMAT_SIZES_SPECIAL",
    "isNumericArray",
    "isRectArray",
    "classString",
    "isCanvasElement",
    "isPixelData",
    "className",
    "typedArrayCode$1",
    "preConvert",
    "image",
    "postConvert",
    "getTextureSize",
    "isMipmap",
    "isCube",
    "total",
    "GL_RENDERBUFFER",
    "GL_RGBA4$1",
    "FORMAT_SIZES",
    "getRenderbufferSize",
    "GL_FRAMEBUFFER$1",
    "GL_RENDERBUFFER$1",
    "GL_TEXTURE_2D$2",
    "GL_TEXTURE_CUBE_MAP_POSITIVE_X$2",
    "GL_COLOR_ATTACHMENT0$1",
    "GL_DEPTH_ATTACHMENT",
    "GL_STENCIL_ATTACHMENT",
    "GL_DEPTH_STENCIL_ATTACHMENT",
    "GL_FRAMEBUFFER_COMPLETE$1",
    "GL_DEPTH_COMPONENT$1",
    "colorTextureFormatEnums",
    "textureFormatChannels",
    "textureTypeSizes",
    "GL_DEPTH_COMPONENT16$1",
    "GL_STENCIL_INDEX8$1",
    "GL_DEPTH_STENCIL$2",
    "colorRenderbufferFormatEnums",
    "statusCode",
    "GL_FLOAT$6",
    "AttributeRecord",
    "z",
    "normalized",
    "divisor",
    "GL_FRAGMENT_SHADER",
    "GL_VERTEX_SHADER",
    "GL_ACTIVE_UNIFORMS",
    "GL_ACTIVE_ATTRIBUTES",
    "GL_RGBA$3",
    "GL_UNSIGNED_BYTE$7",
    "GL_PACK_ALIGNMENT",
    "GL_FLOAT$7",
    "CUTE_COMPONENTS",
    "GL_UNSIGNED_BYTE$8",
    "ATTRIB_STATE_POINTER",
    "ATTRIB_STATE_CONSTANT",
    "DYN_FUNC$1",
    "DYN_PROP$1",
    "DYN_CONTEXT$1",
    "DYN_STATE$1",
    "DYN_THUNK",
    "S_DITHER",
    "S_BLEND_ENABLE",
    "S_BLEND_COLOR",
    "S_BLEND_EQUATION",
    "S_BLEND_FUNC",
    "S_DEPTH_ENABLE",
    "S_DEPTH_FUNC",
    "S_DEPTH_RANGE",
    "S_DEPTH_MASK",
    "S_COLOR_MASK",
    "S_CULL_ENABLE",
    "S_CULL_FACE",
    "S_FRONT_FACE",
    "S_LINE_WIDTH",
    "S_POLYGON_OFFSET_ENABLE",
    "S_POLYGON_OFFSET_OFFSET",
    "S_SAMPLE_ALPHA",
    "S_SAMPLE_ENABLE",
    "S_SAMPLE_COVERAGE",
    "S_STENCIL_ENABLE",
    "S_STENCIL_MASK",
    "S_STENCIL_FUNC",
    "S_STENCIL_OPFRONT",
    "S_STENCIL_OPBACK",
    "S_SCISSOR_ENABLE",
    "S_SCISSOR_BOX",
    "S_VIEWPORT",
    "S_PROFILE",
    "S_FRAMEBUFFER",
    "S_VERT",
    "S_FRAG",
    "S_ELEMENTS",
    "S_PRIMITIVE",
    "S_COUNT",
    "S_OFFSET",
    "S_INSTANCES",
    "S_FRAMEBUFFER_WIDTH",
    "S_FRAMEBUFFER_HEIGHT",
    "S_VIEWPORT_WIDTH",
    "S_VIEWPORT_HEIGHT",
    "S_DRAWINGBUFFER_WIDTH",
    "S_DRAWINGBUFFER_HEIGHT",
    "NESTED_OPTIONS",
    "GL_ARRAY_BUFFER$1",
    "GL_ELEMENT_ARRAY_BUFFER$1",
    "GL_TEXTURE_2D$3",
    "GL_TEXTURE_CUBE_MAP$2",
    "GL_CULL_FACE",
    "GL_BLEND",
    "GL_DITHER",
    "GL_STENCIL_TEST",
    "GL_DEPTH_TEST",
    "GL_SCISSOR_TEST",
    "GL_POLYGON_OFFSET_FILL",
    "GL_SAMPLE_ALPHA_TO_COVERAGE",
    "GL_SAMPLE_COVERAGE",
    "GL_FLOAT$8",
    "GL_FLOAT_VEC2",
    "GL_FLOAT_VEC3",
    "GL_FLOAT_VEC4",
    "GL_INT$3",
    "GL_INT_VEC2",
    "GL_INT_VEC3",
    "GL_INT_VEC4",
    "GL_BOOL",
    "GL_BOOL_VEC2",
    "GL_BOOL_VEC3",
    "GL_BOOL_VEC4",
    "GL_FLOAT_MAT2",
    "GL_FLOAT_MAT3",
    "GL_FLOAT_MAT4",
    "GL_SAMPLER_2D",
    "GL_SAMPLER_CUBE",
    "GL_TRIANGLES$1",
    "GL_FRONT",
    "GL_BACK",
    "GL_CW",
    "GL_CCW",
    "GL_MIN_EXT",
    "GL_MAX_EXT",
    "GL_ALWAYS",
    "GL_KEEP",
    "GL_ZERO",
    "GL_ONE",
    "GL_FUNC_ADD",
    "GL_LESS",
    "GL_FRAMEBUFFER$2",
    "GL_COLOR_ATTACHMENT0$2",
    "blendFuncs",
    "one",
    "src color",
    "one minus src color",
    "src alpha",
    "one minus src alpha",
    "dst color",
    "one minus dst color",
    "dst alpha",
    "one minus dst alpha",
    "constant color",
    "one minus constant color",
    "constant alpha",
    "one minus constant alpha",
    "src alpha saturate",
    "invalidBlendCombinations",
    "compareFuncs",
    "never",
    "less",
    "<",
    "=",
    "==",
    "===",
    "lequal",
    "<=",
    "greater",
    ">",
    "notequal",
    "!=",
    "!==",
    "gequal",
    ">=",
    "always",
    "stencilOps",
    "keep",
    "increment",
    "decrement",
    "increment wrap",
    "decrement wrap",
    "shaderType",
    "orientationType",
    "cw",
    "ccw",
    "isBufferArgs",
    "sortState",
    "Declaration",
    "thisDep",
    "contextDep",
    "propDep",
    "append",
    "isStatic",
    "decl",
    "createStaticDecl",
    "createDynamicDecl",
    "dyn",
    "numArgs",
    "SCOPE_DECL",
    "reglCore",
    "bufferState",
    "elementState",
    "textureState",
    "framebufferState",
    "uniformState",
    "attributeState",
    "shaderState",
    "drawState",
    "contextState",
    "timer",
    "config",
    "Record",
    "blendEquations",
    "reverse subtract",
    "ext_blend_minmax",
    "extInstancing",
    "angle_instanced_arrays",
    "extDrawBuffers",
    "webgl_draw_buffers",
    "currentState",
    "dirty",
    "profile",
    "nextState",
    "GL_STATE_NAMES",
    "GL_FLAGS",
    "GL_VARIABLES",
    "propName",
    "stateFlag",
    "sname",
    "cap",
    "init",
    "stateVariable",
    "func",
    "drawingBufferWidth",
    "drawingBufferHeight",
    "sharedState",
    "current",
    "draw",
    "elements",
    "framebuffer",
    "sharedConstants",
    "backBuffer",
    "drawBuffer",
    "maxDrawbuffers",
    "drawCallCounter",
    "createREGLEnvironment",
    "varCounter",
    "linkedNames",
    "linkedValues",
    "vars",
    "def",
    "scope",
    "exit",
    "entryToString",
    "exitToString",
    "save",
    "globalBlock",
    "procedures",
    "link",
    "proc",
    "bodyToString",
    "cond",
    "thenBlock",
    "elseBlock",
    "thenToString",
    "elseToString",
    "else",
    "elseClause",
    "compile",
    "batchId",
    "SHARED",
    "shared",
    "CHECK",
    "commandStr",
    "nextVars",
    "currentVars",
    "variable",
    "constants",
    "invoke",
    "argList",
    "attribCache",
    "scopeAttribs",
    "scopeAttrib",
    "binding",
    "emitContext",
    "CONTEXT",
    "contextEnter",
    "defn",
    "emitPollFramebuffer",
    "skipCheck",
    "EXT_DRAW_BUFFERS",
    "GL",
    "FRAMEBUFFER_STATE",
    "NEXT",
    "DRAW_BUFFERS",
    "BACK_BUFFER",
    "emitPollState",
    "CURRENT_VARS",
    "NEXT_VARS",
    "CURRENT_STATE",
    "NEXT_STATE",
    "CURRENT",
    "ifte",
    "emitSetOptions",
    "flag",
    "injectExtensions",
    "instancing",
    "emitProfile",
    "useScope",
    "incrementCounter",
    "CPU_START",
    "QUERY_COUNTER",
    "USE_PROFILE",
    "STATS",
    "TIMER",
    "profileArg",
    "perfCounter",
    "emitProfileStart",
    "emitProfileEnd",
    "scopeProfile",
    "enable",
    "emitAttributes",
    "attribute",
    "record",
    "ATTRIBUTE",
    "LOCATION",
    "BINDING",
    "STATE",
    "BUFFER",
    "CONST_COMPONENTS",
    "COMMON_KEYS",
    "emitBuffer",
    "SIZE",
    "TYPE",
    "DIVISOR",
    "emitConstant",
    "emitUniforms",
    "infix",
    "VALUE",
    "uniform",
    "TEX_VALUE",
    "MAT_VALUE",
    "dim",
    "checkType",
    "checkVector",
    "checkTexture",
    "unroll",
    "TEX",
    "matSize",
    "STORAGE",
    "emitDraw",
    "outer",
    "inner",
    "DRAW_STATE",
    "drawOptions",
    "ELEMENTS",
    "contextDynamic",
    "emitValue",
    "INSTANCES",
    "EXT_INSTANCING",
    "PRIMITIVE",
    "OFFSET",
    "COUNT",
    "MISSING",
    "DYNAMIC",
    "ELEMENT_TYPE",
    "elementsStatic",
    "emitInstancing",
    "emitRegular",
    "createBody",
    "emitBody",
    "parentEnv",
    "emitDrawBody",
    "emitBatchDynamicShaderBody",
    "emitBatchBody",
    "BATCH_ID",
    "PROPS",
    "isInnerDefn",
    "isOuterDefn",
    "needsContext",
    "needsFramebuffer",
    "progCache",
    "PROGRAM",
    "progVar",
    "PROG_ID",
    "CACHED_PROC",
    "splatObject",
    "globals",
    "objectRef",
    "deps",
    "procs",
    "poll",
    "refresh",
    "common",
    "INSTANCING",
    "maxAttributes",
    "staticOptions",
    "dynamicOptions",
    "KEY_NAMES",
    "checkKeys",
    "getFramebuffer",
    "FRAMEBUFFER",
    "FRAMEBUFFER_FUNC",
    "viewportAndScissor",
    "parseBox",
    "box",
    "BOX_W",
    "BOX_H",
    "dynBox",
    "BOX",
    "BOX_X",
    "BOX_Y",
    "viewport",
    "prevViewport",
    "VIEWPORT",
    "scissor_box",
    "getElements",
    "IS_BUFFER_ARGS",
    "ELEMENT_STATE",
    "elementDefn",
    "elementStream",
    "parseParam",
    "isOffset",
    "dynValue",
    "primitive",
    "dynPrimitive",
    "PRIM_TYPES",
    "prim",
    "dynCount",
    "instances",
    "parseStatic",
    "parseDynamic",
    "COMPARE_FUNCS",
    "srcRGB",
    "srcAlpha",
    "dstRGB",
    "dstAlpha",
    "BLEND_FUNCS",
    "INVALID_BLEND_COMBINATIONS",
    "SRC_RGB",
    "SRC_ALPHA",
    "BLEND_EQUATIONS",
    "RGB",
    "ALPHA",
    "checkProp",
    "cmp",
    "mask",
    "fail",
    "zfail",
    "zpass",
    "STENCIL_OPS",
    "factor",
    "lineWidthDims",
    "sampleValue",
    "sampleInvert",
    "parseShader",
    "fragId",
    "SHADER_STATE",
    "progDef",
    "copyBox",
    "profileEnable",
    "staticUniforms",
    "dynamicUniforms",
    "UNIFORMS",
    "reglType",
    "staticAttributes",
    "dynamicAttributes",
    "attributeDefs",
    "getBuffer",
    "constant",
    "VALID_KEYS",
    "isStream",
    "BUFFER_STATE",
    "defaultRecord",
    "emitReadRecord",
    "staticContext",
    "dynamicContext",
    "parseArguments",
    "drawCache",
    "saveShader",
    "opt",
    "batch",
    "progDefn",
    "batchCache",
    "GL_COLOR_BUFFER_BIT",
    "GL_DEPTH_BUFFER_BIT",
    "GL_STENCIL_BUFFER_BIT",
    "find",
    "haystack",
    "needle",
    "args_",
    "contextAttributes",
    "optionalExtensions",
    "devicePixelRatio",
    "onDone",
    "onDestroy",
    "border",
    "margin",
    "padding",
    "removeEventListener",
    "parseArgs",
    "glAttributes",
    "getContextAttributes",
    "contextLost",
    "isContextLost",
    "extensionState",
    "tryLoadExtension",
    "name_",
    "getExtension",
    "restore",
    "stringIds",
    "stringValues",
    "",
    "stats$$1",
    "bufferCount",
    "elementsCount",
    "framebufferCount",
    "shaderCount",
    "textureCount",
    "cubeCount",
    "renderbufferCount",
    "maxTextureUnits",
    "ext_disjoint_timer_query",
    "queryPool",
    "freeQuery",
    "pendingQueries",
    "PendingStats",
    "startQueryIndex",
    "endQueryIndex",
    "pendingStatsPool",
    "freePendingStats",
    "pendingStats",
    "pushScopeStats",
    "ps",
    "timeSum",
    "queryPtr",
    "beginQuery",
    "createQueryEXT",
    "beginQueryEXT",
    "endQuery",
    "endQueryEXT",
    "queryTime",
    "getQueryObjectEXT",
    "startPtr",
    "endPtr",
    "gpuTime",
    "getNumPendingQueries",
    "deleteQueryEXT",
    "createTimer",
    "START_TIME",
    "WIDTH",
    "HEIGHT",
    "tick",
    "viewportWidth",
    "viewportHeight",
    "framebufferWidth",
    "framebufferHeight",
    "maxAnisotropic",
    "ext_texture_filter_anisotropic",
    "getParameter",
    "maxColorAttachments",
    "readFloat",
    "oes_texture_float",
    "readFloatTexture",
    "createTexture",
    "bindTexture",
    "texImage2D",
    "fbo",
    "createFramebuffer",
    "bindFramebuffer",
    "framebufferTexture2D",
    "checkFramebufferStatus",
    "clearColor",
    "pixels",
    "readPixels",
    "getError",
    "deleteFramebuffer",
    "deleteTexture",
    "npotTextureCube",
    "userAgent",
    "appVersion",
    "cubeTexture",
    "activeTexture",
    "colorBits",
    "depthBits",
    "stencilBits",
    "subpixelBits",
    "pointSizeDims",
    "maxViewportDims",
    "maxCombinedTextureUnits",
    "maxCubeMapSize",
    "maxRenderbufferSize",
    "maxVertexUniforms",
    "maxVertexTextureUnits",
    "maxVaryingVectors",
    "maxFragmentUniforms",
    "glsl",
    "renderer",
    "vendor",
    "version",
    "wrapLimits",
    "NUM_ATTRIBUTES",
    "attributeBindings",
    "bufferSet",
    "REGLBuffer",
    "dimension",
    "persistentData",
    "bindBuffer",
    "destroy",
    "streamPool",
    "initBufferFromTypedArray",
    "bufferData",
    "initBufferFromData",
    "persist",
    "flatData",
    "typedData",
    "transposeData",
    "disableVertexAttribArray",
    "handle",
    "deleteBuffer",
    "getTotalBufferSize",
    "deferInit",
    "persistent",
    "reglBuffer",
    "setSubData",
    "bufferSubData",
    "_buffer",
    "subdata",
    "offset_",
    "converted",
    "createStream",
    "destroyStream",
    "stream$$1",
    "wrapper",
    "_initBuffer",
    "elementSet",
    "elementCount",
    "elementTypes",
    "REGLElementBuffer",
    "primType",
    "vertCount",
    "oes_element_index_uint",
    "initElements",
    "predictedType",
    "destroyElements",
    "reglElements",
    "_elements",
    "fragShaders",
    "vertShaders",
    "ActiveInfo",
    "insertActiveInfo",
    "getShader",
    "createShader",
    "shaderSource",
    "compileShader",
    "programCache",
    "programList",
    "PROGRAM_COUNTER",
    "REGLProgram",
    "vertId",
    "uniformsCount",
    "attributesCount",
    "linkProgram",
    "createProgram",
    "attachShader",
    "numUniforms",
    "getActiveUniform",
    "getUniformLocation",
    "numAttributes",
    "getActiveAttrib",
    "getAttribLocation",
    "getMaxUniformsCount",
    "getMaxAttributesCount",
    "deleteShader",
    "deleteProgram",
    "reglPoll",
    "mipmapHint",
    "don't care",
    "dont care",
    "nice",
    "fast",
    "wrapModes",
    "repeat",
    "clamp",
    "mirror",
    "magFilters",
    "nearest",
    "linear",
    "minFilters",
    "mipmap",
    "nearest mipmap nearest",
    "linear mipmap nearest",
    "nearest mipmap linear",
    "linear mipmap linear",
    "colorSpace",
    "none",
    "browser",
    "textureTypes",
    "rgba4",
    "rgb565",
    "rgb5 a1",
    "textureFormats",
    "luminance",
    "luminance alpha",
    "rgba",
    "compressedTextureFormats",
    "ext_srgb",
    "srgb",
    "srgba",
    "oes_texture_half_float",
    "float16",
    "webgl_depth_texture",
    "depth stencil",
    "webgl_compressed_texture_s3tc",
    "rgb s3tc dxt1",
    "rgba s3tc dxt1",
    "rgba s3tc dxt3",
    "rgba s3tc dxt5",
    "webgl_compressed_texture_atc",
    "rgb atc",
    "rgba atc explicit alpha",
    "rgba atc interpolated alpha",
    "webgl_compressed_texture_pvrtc",
    "rgb pvrtc 4bppv1",
    "rgb pvrtc 2bppv1",
    "rgba pvrtc 4bppv1",
    "rgba pvrtc 2bppv1",
    "webgl_compressed_texture_etc1",
    "supportedCompressedFormats",
    "supportedFormats",
    "textureFormatsInvert",
    "textureTypesInvert",
    "magFiltersInvert",
    "minFiltersInvert",
    "wrapModesInvert",
    "colorFormats",
    "glenum",
    "TexFlags",
    "premultiplyAlpha",
    "flipY",
    "copyFlags",
    "other",
    "parseFlags",
    "alignment",
    "hasChannels",
    "radius",
    "hasFormat",
    "formatStr",
    "setFlags",
    "pixelStorei",
    "TexImage",
    "xOffset",
    "yOffset",
    "needsFree",
    "needsCopy",
    "parseImage",
    "viewW",
    "viewH",
    "shapeC",
    "strideC",
    "naturalWidth",
    "naturalHeight",
    "videoWidth",
    "videoHeight",
    "dd",
    "allocData",
    "setImage",
    "miplevel",
    "compressedTexImage2D",
    "copyTexImage2D",
    "nullData",
    "setSubImage",
    "texSubImage2D",
    "compressedTexSubImage2D",
    "copyTexSubImage2D",
    "imagePool",
    "allocImage",
    "freeImage",
    "MipMap",
    "parseMipMapFromShape",
    "parseMipMapFromObject",
    "imgData",
    "setMipMap",
    "mipPool",
    "allocMipMap",
    "freeMipMap",
    "TexInfo",
    "anisotropic",
    "parseTexInfo",
    "mag",
    "wrap",
    "optWrapS",
    "optWrapT",
    "hasMipMap",
    "setTexInfo",
    "texParameteri",
    "hint",
    "generateMipmap",
    "textureSet",
    "numTexUnits",
    "textureUnits",
    "REGLTexture",
    "refCount",
    "bindCount",
    "texInfo",
    "tempBind",
    "tempRestore",
    "unbind",
    "decRef",
    "getTotalTextureSize",
    "create2D",
    "reglTexture2D",
    "subimage",
    "x_",
    "y_",
    "level_",
    "imageData",
    "w_",
    "h_",
    "_w",
    "_h",
    "createCube",
    "a4",
    "a5",
    "reglTextureCube",
    "face_input",
    "radius_",
    "getTexture",
    "tex",
    "createTextureSet",
    "renderbufferState",
    "formatTypes",
    "stencil",
    "ext_color_buffer_half_float",
    "rgba16f",
    "rgb16f",
    "webgl_color_buffer_float",
    "rgba32f",
    "formatTypesInvert",
    "renderbufferSet",
    "REGLRenderbuffer",
    "rb",
    "bindRenderbuffer",
    "deleteRenderbuffer",
    "getTotalRenderbufferSize",
    "createRenderbuffer",
    "reglRenderbuffer",
    "renderbufferStorage",
    "wrapRenderbuffers",
    "cur",
    "setFBO",
    "colorTextureFormats",
    "colorRenderbufferFormats",
    "colorTypes",
    "FramebufferAttachment",
    "incRefAndCheckShape",
    "tw",
    "th",
    "attach",
    "framebufferRenderbuffer",
    "parseAttachment",
    "allocAttachment",
    "isTexture",
    "unwrapAttachment",
    "resizeAttachment",
    "framebufferSet",
    "REGLFramebuffer",
    "colorAttachments",
    "depthAttachment",
    "stencilAttachment",
    "depthStencilAttachment",
    "decFBORefs",
    "_destroy",
    "updateFramebuffer",
    "createFBO",
    "reglFramebuffer",
    "needsDepth",
    "needsStencil",
    "colorBuffer",
    "colorTexture",
    "colorFormat",
    "colorType",
    "colorCount",
    "depthBuffer",
    "stencilBuffer",
    "depthStencilBuffer",
    "depthStencilTexture",
    "depthTexture",
    "depthStencil",
    "commonColorAttachmentSize",
    "colorAttachmentSize",
    "_framebuffer",
    "reglFramebufferCube",
    "colorCubes",
    "cubeMapParams",
    "cube",
    "fb",
    "readPixelsImpl",
    "preserveDrawingBuffer",
    "wrapReadPixels",
    "rafCallbacks",
    "lossCallbacks",
    "restoreCallbacks",
    "destroyCallbacks",
    "activeRAF",
    "handleRAF",
    "_poll",
    "flush",
    "startRAF",
    "stopRAF",
    "handleContextLoss",
    "handleContextRestored",
    "compileProcedure",
    "separateDynamic",
    "staticItems",
    "dynamicItems",
    "option",
    "merge",
    "opBack",
    "opFront",
    "cpuTime",
    "compiled",
    "EMPTY_ARRAY",
    "clearImpl",
    "clearFlags",
    "clearDepth",
    "clearStencil",
    "frame",
    "pendingCancel",
    "pollViewport",
    "scissorBox",
    "regl",
    "framebuffer_reglType",
    "framebufferCube",
    "callbacks",
    "hasExtension",
    "_gl",
    "_refresh",
    "_$regl_79",
    "createREGL",
    "_$toFloat32_93",
    "fract32",
    "fract",
    "narr",
    "_$toPX_94",
    "toPX",
    "PIXELS_PER_INCH",
    "getSizeBrutal",
    "getPropertyInPX",
    "getComputedStyle",
    "getPropertyValue",
    "testDIV",
    "clientHeight",
    "px",
    "countTrailingZeros",
    "_$twiddle_7",
    "INT_BITS",
    "INT_MAX",
    "INT_MIN",
    "sign",
    "log10",
    "popCount",
    "nextPow2",
    "prevPow2",
    "parity",
    "REVERSE_TABLE",
    "tab",
    "reverse",
    "interleave2",
    "deinterleave2",
    "interleave3",
    "deinterleave3",
    "nextCombination",
    "___typeof_37",
    "_$dup_37",
    "dupe_array",
    "__TYPEDARRAY_POOL",
    "UINT8",
    "UINT16",
    "UINT32",
    "INT8",
    "INT16",
    "INT32",
    "DOUBLE",
    "DATA",
    "UINT8C",
    "hasUint8C",
    "POOL",
    "freeArrayBuffer",
    "log_n",
    "mallocArrayBuffer",
    "mallocUint8",
    "mallocUint16",
    "mallocUint32",
    "mallocInt8",
    "mallocInt16",
    "mallocInt32",
    "mallocFloat",
    "mallocDouble",
    "mallocUint8Clamped",
    "mallocDataView",
    "DataView",
    "mallocBuffer",
    "_$pool_104",
    "freeUint8",
    "freeUint16",
    "freeUint32",
    "freeInt8",
    "freeInt16",
    "freeInt32",
    "freeFloat32",
    "freeFloat",
    "freeFloat64",
    "freeDouble",
    "freeUint8Clamped",
    "freeDataView",
    "freeBuffer",
    "malloc",
    "mallocFloat32",
    "mallocFloat64",
    "clearCache",
    "ses",
    "weakMapPermitHostObjects",
    "doubleWeakMapCheckSilentFailure",
    "WeakMap",
    "HostWeakMap",
    "testMap",
    "testObject",
    "_$weakMap_110",
    "gopn",
    "defProp",
    "isExtensible",
    "HIDDEN_NAME_PREFIX",
    "HIDDEN_NAME",
    "crypto",
    "getRandomValues",
    "ab",
    "u8s",
    "u8",
    "isNotHiddenName",
    "originalGetPropertyNames",
    "getPropertyNames",
    "oldFreeze",
    "getHiddenRecord",
    "oldSeal",
    "seal",
    "oldPreventExtensions",
    "preventExtensions",
    "calledAsFunctionWarningDone",
    "OurWeakMap",
    "calledAsFunctionWarning",
    "get___",
    "constFunc",
    "opt_default",
    "hiddenRecord",
    "has___",
    "set___",
    "delete___",
    "has",
    "delete",
    "DoubleWeakMap",
    "dset",
    "hmap",
    "omap",
    "enableSwitching",
    "permitHostObjects___",
    "_slicedToArray",
    "_n",
    "_d",
    "_e",
    "_s",
    "_i",
    "return",
    "___typeof_40",
    "___toConsumableArray_40",
    "arr2",
    "f32",
    "isBrowser",
    "shaderCache",
    "Waveform",
    "_this",
    "mirrorProperty",
    "_dirty",
    "isClone",
    "thickness",
    "textures",
    "textures2",
    "lastY",
    "minY",
    "maxY",
    "blankTexture",
    "NaNTexture",
    "pushQueue",
    "toPx",
    "idBuffer",
    "N",
    "maxSampleCount",
    "shaderOptions",
    "samples.id",
    "samplesData",
    "samples.prev",
    "samples.next",
    "samples.shape",
    "samples.length",
    "samples.sum",
    "samples",
    "samples.sum2",
    "sum2",
    "samples.prevSum",
    "prevSamples",
    "samples.prevSum2",
    "fractions.id",
    "fractionsData",
    "fractions.prev",
    "fractions.next",
    "fractions.shape",
    "fractions.length",
    "fractions.sum",
    "fractions.sum2",
    "fractions.prevSum",
    "fractions.prevSum2",
    "passNum",
    "passId",
    "passOffset",
    "pxStep",
    "posShift",
    "sampleStep",
    "translate",
    "amplitude",
    "side",
    "blend",
    "equation",
    "scissor",
    "_ref",
    "clip",
    "_ref2",
    "_viewport",
    "drawRanges",
    "drawLine",
    "textureChannels",
    "flip",
    "rect",
    "_$parseRect_74",
    "_color",
    "_l",
    "_amplitude",
    "_range",
    "idx",
    "mode",
    "textureShape",
    "textureLength",
    "calc",
    "span",
    "pxPerSample",
    "passes",
    "firstTextureId",
    "clipWidth",
    "textureId",
    "clipLeft",
    "clipRight",
    "samplesNumber",
    "fractions",
    "nextSamples",
    "prevFractions",
    "nextFractions",
    "dataShape",
    "dataLength",
    "_this2",
    "pass",
    "_this3",
    "_len",
    "_key",
    "_pushQueue",
    "cancelFlush",
    "onIdle",
    "timerId",
    "didTimeout",
    "cancelIdleCallback",
    "_$onIdle_71",
    "floatSamples",
    "_i2",
    "_textureShape",
    "txtW",
    "txtH",
    "txtLen",
    "tillEndOfTxt",
    "ch",
    "txt",
    "txtFract",
    "txtData",
    "_i3",
    "dataLen",
    "_i4",
    "firstRowWidth",
    "writeTexture",
    "blockLen",
    "lastRowWidth",
    "f32data",
    "f32fract",
    "_i5",
    "pick",
    "storeData",
    "clientX",
    "offsetLeft",
    "scrollLeft",
    "offsetTop",
    "scrollTop",
    "offsetParent",
    "_$offset_70",
    "_calc",
    "translater",
    "translateri",
    "currTexture",
    "xShift",
    "avg",
    "average",
    "sdev",
    "_viewport2",
    "SCISSOR_TEST",
    "COLOR_BUFFRE_BIT",
    "DEPTH_BUFFER_BIT",
    "disable",
    "_$glWaveform_40",
    "_$waveform_1",
    "_Component",
    "instance",
    "Constructor",
    "ReferenceError",
    "local",
    "subClass",
    "superClass",
    "setPrototypeOf",
    "_createClass",
    "waveform",
    "trailingNewlineRegex",
    "leadingNewlineRegex",
    "trailingSpaceRegex",
    "leadingSpaceRegex",
    "multiSpaceRegex",
    "TEXT_TAGS",
    "VERBATIM_TAGS",
    "_$appendChild_53",
    "childs",
    "leader",
    "hadText",
    "lastChild",
    "createTextNode",
    "_nodeName",
    "store",
    "keyboards",
    "keyboard",
    "keyIndex",
    "instrumentId",
    "merger",
    "computeNotes",
    "sofar",
    "octave",
    "_toConsumableArray",
    "AudioContext",
    "createChannelMerger",
    "analyser",
    "createAnalyser",
    "lastNote",
    "analyse",
    "getFloatTimeDomainData",
    "waveformComponent",
    "noteFreq",
    "noteLength",
    "noteRepeats",
    "numSamples",
    "constraints",
    "microphone",
    "mediaDevices",
    "getUserMedia",
    "createMediaStreamSource",
    "nanohtml0",
    "nanohtml1",
    "onchange",
    "_$keyboard_118",
    "nanohtml2",
    "_$scale_122",
    "_$instrument_117",
    "onclick",
    "_$player_121",
    "_$microphone_120",
    "___typeof_123",
    "_$waveform_123"
  ],
  "mappings": "CAAA,WACA,ICCAA,EDAAC,EADA,SAAAC,GAAA,IAAAC,EAAA,OAAA,SAAAC,GAAA,OAAAD,GAAAD,EAAAC,EAAA,CAAAE,QAAA,GAAAC,OAAAF,GAAAD,EAAAE,SAAAF,EAAAE,SACAE,CAAA,SAAAC,EAAAH,gBEMA,aAAA,IAAAI,EAAA,mBAAAC,QAAA,iBAAAA,OAAAC,SAAA,SAAAC,GAAA,cAAAA,GAAA,SAAAA,GAAA,OAAAA,GAAA,mBAAAF,QAAAE,EAAAC,cAAAH,QAAAE,IAAAF,OAAAI,UAAA,gBAAAF,GAKAP,EAAQU,OAASA,EACjBV,EAAQW,WAqTR,SAAqBC,GAInB,OAHKA,GAAUA,IACbA,EAAS,GAEJF,EAAOG,OAAOD,IAxTvBZ,EAAQc,kBAAoB,GAE5B,IAAIC,EAAe,WAsDnB,SAASC,EAAcJ,GACrB,GAAIA,EAASG,EACX,MAAM,IAAIE,WAAW,cAAgBL,EAAS,kCAGhD,IAAIM,EAAM,IAAIC,WAAWP,GAEzB,OADAM,EAAIE,UAAYV,EAAOD,UAChBS,EAaT,SAASR,EAAQW,EAAKC,EAAkBV,GAEtC,GAAmB,iBAARS,EAAkB,CAC3B,GAAgC,iBAArBC,EACT,MAAM,IAAIC,UACR,sEAGJ,OAAOC,EAAYH,GAErB,OAAOI,EAAKJ,EAAKC,EAAkBV,GAgBrC,SAASa,EAAMC,EAAOJ,EAAkBV,GACtC,GAAqB,iBAAVc,EACT,OAiHJ,SAAqBC,EAAQC,GAK3B,GAJwB,iBAAbA,GAAsC,KAAbA,IAClCA,EAAW,SAGRlB,EAAOmB,WAAWD,GACrB,MAAM,IAAIL,UAAU,qBAAuBK,GAG7C,IAAIhB,EAAwC,EAA/BkB,EAAWH,EAAQC,GAC5BV,EAAMF,EAAaJ,GAEnBmB,EAASb,EAAIc,MAAML,EAAQC,GAS/B,OAPIG,IAAWnB,IAIbM,EAAMA,EAAIe,MAAM,EAAGF,IAGdb,EArBT,CAjHsBQ,EAAOJ,GAG3B,GAAIY,YAAYC,OAAOT,GACrB,OAAOU,EAAcV,GAGvB,GAAa,MAATA,EACF,MAAMH,UACJ,wHAAA,IACiDG,EADjD,YAAAtB,EACiDsB,KAIrD,GAAIW,EAAWX,EAAOQ,cACjBR,GAASW,EAAWX,EAAMY,OAAQJ,aACrC,OAkIJ,SAA0BK,EAAOC,EAAY5B,GAC3C,GAAI4B,EAAa,GAAKD,EAAMT,WAAaU,EACvC,MAAM,IAAIvB,WAAW,wCAGvB,GAAIsB,EAAMT,WAAaU,GAAc5B,GAAU,GAC7C,MAAM,IAAIK,WAAW,wCAGvB,IAAIC,EAWJ,OATEA,OAAA,IADEsB,QAAA,IAA4B5B,EACxB,IAAIO,WAAWoB,QAAA,IACZ3B,EACH,IAAIO,WAAWoB,EAAOC,GAEtB,IAAIrB,WAAWoB,EAAOC,EAAY5B,IAItCQ,UAAYV,EAAOD,UAChBS,EApBT,CAlI2BQ,EAAOJ,EAAkBV,GAGlD,GAAqB,iBAAVc,EACT,MAAM,IAAIH,UACR,yEAIJ,IAAIkB,EAAUf,EAAMe,SAAWf,EAAMe,UACrC,GAAe,MAAXA,GAAmBA,IAAYf,EACjC,OAAOhB,EAAOe,KAAKgB,EAASnB,EAAkBV,GAGhD,IAAI8B,EA2IN,SAAqBnC,GACnB,GAAIG,EAAOiC,SAASpC,GAAM,CACxB,IAAIqC,EAA4B,EAAtBC,EAAQtC,EAAIK,QAClBM,EAAMF,EAAa4B,GAEvB,OAAmB,IAAf1B,EAAIN,OACCM,GAGTX,EAAIuC,KAAK5B,EAAK,EAAG,EAAG0B,GACb1B,GAGT,YAAA,IAAIX,EAAIK,OACoB,iBAAfL,EAAIK,QAAuBmC,EAAYxC,EAAIK,QAC7CI,EAAa,GAEfoB,EAAc7B,GAGN,WAAbA,EAAIyC,MAAqBC,MAAMC,QAAQ3C,EAAI4C,MACtCf,EAAc7B,EAAI4C,WAD3B,EApBF,CA3IqBzB,GACnB,GAAIgB,EAAG,OAAOA,EAEd,GAAsB,oBAAXrC,QAAgD,MAAtBA,OAAO+C,aACH,mBAA9B1B,EAAMrB,OAAO+C,aACtB,OAAO1C,EAAOe,KACZC,EAAMrB,OAAO+C,aAAa,UAAW9B,EAAkBV,GAI3D,MAAM,IAAIW,UACR,wHAAA,IACiDG,EADjD,YAAAtB,EACiDsB,KAqBrD,SAAS2B,EAAYC,GACnB,GAAoB,iBAATA,EACT,MAAM,IAAI/B,UAAU,0CACf,GAAI+B,EAAO,EAChB,MAAM,IAAIrC,WAAW,cAAgBqC,EAAO,kCA4BhD,SAAS9B,EAAa8B,GAEpB,OADAD,EAAWC,GACJtC,EAAasC,EAAO,EAAI,EAAoB,EAAhBT,EAAQS,IAwC7C,SAASlB,EAAeG,GAGtB,IAFA,IAAI3B,EAAS2B,EAAM3B,OAAS,EAAI,EAA4B,EAAxBiC,EAAQN,EAAM3B,QAC9CM,EAAMF,EAAaJ,GACd2C,EAAI,EAAGA,EAAI3C,EAAQ2C,GAAK,EAC/BrC,EAAIqC,GAAgB,IAAXhB,EAAMgB,GAEjB,OAAOrC,EAmDT,SAAS2B,EAASjC,GAGhB,GAAIA,GAAUG,EACZ,MAAM,IAAIE,WAAW,0DACaF,EAAayC,SAAS,IAAM,UAEhE,OAAgB,EAAT5C,EA8FT,SAASkB,EAAYH,EAAQC,GAC3B,GAAIlB,EAAOiC,SAAShB,GAClB,OAAOA,EAAOf,OAEhB,GAAIsB,YAAYC,OAAOR,IAAWU,EAAWV,EAAQO,aACnD,OAAOP,EAAOG,WAEhB,GAAsB,iBAAXH,EACT,MAAM,IAAIJ,UACR,iGAAA,IAC0BI,EAD1B,YAAAvB,EAC0BuB,KAI9B,IAAIiB,EAAMjB,EAAOf,OACb6C,EAAaC,UAAU9C,OAAS,IAAA,IAAK8C,UAAU,GACnD,IAAKD,GAAqB,IAARb,EAAW,OAAO,EAIpC,IADA,IAAIe,GAAA,IAEF,OAAQ/B,GACN,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAOgB,EACT,IAAK,OACL,IAAK,QACH,OAAOgB,EAAYjC,GAAQf,OAC7B,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAa,EAANgC,EACT,IAAK,MACH,OAAOA,IAAQ,EACjB,IAAK,SACH,OAAOiB,EAAclC,GAAQf,OAC/B,QACE,GAAI+C,EACF,OAAOF,GAAa,EAAIG,EAAYjC,GAAQf,OAE9CgB,GAAY,GAAKA,GAAUkC,cAC3BH,GAAA,GAoFR,SAASI,EAAMrB,EAAGsB,EAAGC,GACnB,IAAIV,EAAIb,EAAEsB,GACVtB,EAAEsB,GAAKtB,EAAEuB,GACTvB,EAAEuB,GAAKV,EAyIT,SAASW,EAAsB5B,EAAQ6B,EAAK3B,EAAYZ,EAAUwC,GAEhE,GAAsB,IAAlB9B,EAAO1B,OAAc,OAAQ,EAmBjC,GAhB0B,iBAAf4B,GACTZ,EAAWY,EACXA,EAAa,GACJA,EAAa,WACtBA,EAAa,WACJA,GAAc,aACvBA,GAAc,YAGZO,EADJP,GAAcA,KAGZA,EAAa4B,EAAM,EAAK9B,EAAO1B,OAAS,GAItC4B,EAAa,IAAGA,EAAaF,EAAO1B,OAAS4B,GAC7CA,GAAcF,EAAO1B,OAAQ,CAC/B,GAAIwD,EAAK,OAAQ,EACZ5B,EAAaF,EAAO1B,OAAS,OAC7B,GAAI4B,EAAa,EAAG,CACzB,IAAI4B,EACC,OAAQ,EADJ5B,EAAa,EAUxB,GALmB,iBAAR2B,IACTA,EAAMzD,EAAOe,KAAK0C,EAAKvC,IAIrBlB,EAAOiC,SAASwB,GAElB,OAAmB,IAAfA,EAAIvD,QACE,EAEHyD,EAAa/B,EAAQ6B,EAAK3B,EAAYZ,EAAUwC,GAClD,GAAmB,iBAARD,EAEhB,OADAA,GAAY,IACgC,mBAAjChD,WAAWV,UAAU6D,QAC1BF,EACKjD,WAAWV,UAAU6D,QAAQC,KAAKjC,EAAQ6B,EAAK3B,GAE/CrB,WAAWV,UAAU+D,YAAYD,KAAKjC,EAAQ6B,EAAK3B,GAGvD6B,EAAa/B,EAAQ,CAAE6B,GAAO3B,EAAYZ,EAAUwC,GAG7D,MAAM,IAAI7C,UAAU,wCAGtB,SAAS8C,EAAcI,EAAKN,EAAK3B,EAAYZ,EAAUwC,GACrD,IA0BIb,EA1BAmB,EAAY,EACZC,EAAYF,EAAI7D,OAChBgE,EAAYT,EAAIvD,OAEpB,QAAA,IAAIgB,IAEe,UADjBA,EAAWiD,OAAOjD,GAAUkC,gBACY,UAAblC,GACV,YAAbA,GAAuC,aAAbA,GAAyB,CACrD,GAAI6C,EAAI7D,OAAS,GAAKuD,EAAIvD,OAAS,EACjC,OAAQ,EAEV8D,EAAY,EACZC,GAAa,EACbC,GAAa,EACbpC,GAAc,EAIlB,SAASsC,EAAM5D,EAAKqC,GAClB,OAAkB,IAAdmB,EACKxD,EAAIqC,GAEJrC,EAAI6D,aAAaxB,EAAImB,GAKhC,GAAIN,EAAK,CACP,IAAIY,GAAc,EAClB,IAAKzB,EAAIf,EAAYe,EAAIoB,EAAWpB,IAClC,GAAIuB,EAAKL,EAAKlB,KAAOuB,EAAKX,GAAqB,IAAhBa,EAAoB,EAAIzB,EAAIyB,IAEzD,IADoB,IAAhBA,IAAmBA,EAAazB,GAChCA,EAAIyB,EAAa,IAAMJ,EAAW,OAAOI,EAAaN,OAEtC,IAAhBM,IAAmBzB,GAAKA,EAAIyB,GAChCA,GAAc,OAKlB,IADIxC,EAAaoC,EAAYD,IAAWnC,EAAamC,EAAYC,GAC5DrB,EAAIf,EAAYe,GAAK,EAAGA,IAAK,CAEhC,IADA,IAAI0B,GAAA,EACKC,EAAI,EAAGA,EAAIN,EAAWM,IAC7B,GAAIJ,EAAKL,EAAKlB,EAAI2B,KAAOJ,EAAKX,EAAKe,GAAI,CACrCD,GAAA,EACA,MAGJ,GAAIA,EAAO,OAAO1B,EAItB,OAAQ,EAeV,SAAS4B,EAAUjE,EAAKS,EAAQyD,EAAQxE,GACtCwE,EAASC,OAAOD,IAAW,EAC3B,IAAIE,EAAYpE,EAAIN,OAASwE,EACxBxE,GAGHA,EAASyE,OAAOzE,IACH0E,IACX1E,EAAS0E,GAJX1E,EAAS0E,EAQX,IAAIC,EAAS5D,EAAOf,OAEhBA,EAAS2E,EAAS,IACpB3E,EAAS2E,EAAS,GAEpB,IAAK,IAAIhC,EAAI,EAAGA,EAAI3C,IAAU2C,EAAG,CAC/B,IAAIiC,EAASC,SAAS9D,EAAO+D,OAAW,EAAJnC,EAAO,GAAI,IAC/C,GAAIR,EAAYyC,GAAS,OAAOjC,EAChCrC,EAAIkE,EAAS7B,GAAKiC,EAEpB,OAAOjC,EAGT,SAASoC,EAAWzE,EAAKS,EAAQyD,EAAQxE,GACvC,OAAOgF,EAAWhC,EAAYjC,EAAQT,EAAIN,OAASwE,GAASlE,EAAKkE,EAAQxE,GAG3E,SAASiF,EAAY3E,EAAKS,EAAQyD,EAAQxE,GACxC,OAAOgF,EA63BT,SAAuBE,GAErB,IADA,IAAIC,EAAY,GACPxC,EAAI,EAAGA,EAAIuC,EAAIlF,SAAU2C,EAEhCwC,EAAUC,KAAyB,IAApBF,EAAIG,WAAW1C,IAEhC,OAAOwC,EANT,CA73BiCpE,GAAST,EAAKkE,EAAQxE,GAGvD,SAASsF,EAAahF,EAAKS,EAAQyD,EAAQxE,GACzC,OAAOiF,EAAW3E,EAAKS,EAAQyD,EAAQxE,GAGzC,SAASuF,EAAajF,EAAKS,EAAQyD,EAAQxE,GACzC,OAAOgF,EAAW/B,EAAclC,GAAST,EAAKkE,EAAQxE,GAGxD,SAASwF,EAAWlF,EAAKS,EAAQyD,EAAQxE,GACvC,OAAOgF,EA03BT,SAAyBE,EAAKO,GAG5B,IAFA,IAAIC,EAAGC,EAAIC,EACPT,EAAY,GACPxC,EAAI,EAAGA,EAAIuC,EAAIlF,WACjByF,GAAS,GAAK,KADa9C,EAIhCgD,GADAD,EAAIR,EAAIG,WAAW1C,KACT,EACViD,EAAKF,EAAI,IACTP,EAAUC,KAAKQ,GACfT,EAAUC,KAAKO,GAGjB,OAAOR,EAbT,CA13BmCpE,EAAQT,EAAIN,OAASwE,GAASlE,EAAKkE,EAAQxE,GAiF9E,SAAS6F,EAAavF,EAAKwF,EAAOC,GAChC,OAAc,IAAVD,GAAeC,IAAQzF,EAAIN,OACtBgG,EAAOC,cAAc3F,GAErB0F,EAAOC,cAAc3F,EAAIe,MAAMyE,EAAOC,IAIjD,SAASG,EAAW5F,EAAKwF,EAAOC,GAC9BA,EAAMI,KAAKC,IAAI9F,EAAIN,OAAQ+F,GAI3B,IAHA,IAAIM,EAAM,GAEN1D,EAAImD,EACDnD,EAAIoD,GAAK,CACd,IAQMO,EAAYC,EAAWC,EAAYC,EARrCC,EAAYpG,EAAIqC,GAChBgE,EAAY,KACZC,EAAoBF,EAAY,IAAQ,EACvCA,EAAY,IAAQ,EAClBA,EAAY,IAAQ,EACnB,EAER,GAAI/D,EAAIiE,GAAoBb,EAG1B,OAAQa,GACN,KAAK,EACCF,EAAY,MACdC,EAAYD,GAEd,MACF,KAAK,EAEyB,MAAV,KADlBJ,EAAahG,EAAIqC,EAAI,OAEnB8D,GAA6B,GAAZC,IAAqB,EAAoB,GAAbJ,GACzB,MAClBK,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAahG,EAAIqC,EAAI,GACrB4D,EAAYjG,EAAIqC,EAAI,GACQ,MAAV,IAAb2D,IAAsD,MAAV,IAAZC,KACnCE,GAA6B,GAAZC,IAAoB,IAAoB,GAAbJ,IAAsB,EAAmB,GAAZC,GACrD,OAAUE,EAAgB,OAAUA,EAAgB,SACtEE,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAahG,EAAIqC,EAAI,GACrB4D,EAAYjG,EAAIqC,EAAI,GACpB6D,EAAalG,EAAIqC,EAAI,GACO,MAAV,IAAb2D,IAAsD,MAAV,IAAZC,IAAsD,MAAV,IAAbC,KAClEC,GAA6B,GAAZC,IAAoB,IAAqB,GAAbJ,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,GAClF,OAAUC,EAAgB,UAC5CE,EAAYF,GAMJ,OAAdE,GAGFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QAErBA,GAAa,MACbN,EAAIjB,KAAKuB,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvBN,EAAIjB,KAAKuB,GACThE,GAAKiE,EAGP,OAQF,SAAgCC,GAC9B,IAAI7E,EAAM6E,EAAW7G,OACrB,GAAIgC,GAAO8E,EACT,OAAO7C,OAAO8C,aAAaC,MAAM/C,OAAQ4C,GAM3C,IAFA,IAAIR,EAAM,GACN1D,EAAI,EACDA,EAAIX,GACTqE,GAAOpC,OAAO8C,aAAaC,MACzB/C,OACA4C,EAAWxF,MAAMsB,EAAGA,GAAKmE,IAG7B,OAAOT,EAfT,CAR+BA,GA59B/BjH,EAAQ6H,WAAa9G,EAgBrBL,EAAOoH,oBAUP,WAEE,IACE,IAAIrD,EAAM,IAAItD,WAAW,GAEzB,OADAsD,EAAIrD,UAAY,CAAEA,UAAWD,WAAWV,UAAWsH,IAAK,WAAc,OAAO,KACxD,KAAdtD,EAAIsD,MACX,MAAOjI,GACP,OAAA,GAPJ,GARKY,EAAOoH,qBAA0C,oBAAZE,SACb,mBAAlBA,QAAQC,OACjBD,QAAQC,MACN,iJAgBJC,OAAOC,eAAezH,EAAOD,UAAW,SAAU,CAChD2H,YAAA,EACAC,IAAK,WACH,GAAK3H,EAAOiC,SAAS2F,MACrB,OAAOA,KAAKhG,UAIhB4F,OAAOC,eAAezH,EAAOD,UAAW,SAAU,CAChD2H,YAAA,EACAC,IAAK,WACH,GAAK3H,EAAOiC,SAAS2F,MACrB,OAAOA,KAAK9F,cAsCM,oBAAXnC,QAA4C,MAAlBA,OAAOkI,SACxC7H,EAAOL,OAAOkI,WAAa7H,GAC7BwH,OAAOC,eAAezH,EAAQL,OAAOkI,QAAS,CAC5C7G,MAAO,KACP8G,cAAA,EACAJ,YAAA,EACAK,UAAA,IAIJ/H,EAAOgI,SAAW,KA0DlBhI,EAAOe,KAAO,SAAUC,EAAOJ,EAAkBV,GAC/C,OAAOa,EAAKC,EAAOJ,EAAkBV,IAKvCF,EAAOD,UAAUW,UAAYD,WAAWV,UACxCC,EAAOU,UAAYD,WA8BnBT,EAAOG,MAAQ,SAAUyC,EAAMqF,EAAM/G,GACnC,OArBF,SAAgB0B,EAAMqF,EAAM/G,GAE1B,OADAyB,EAAWC,GACPA,GAAQ,EACHtC,EAAasC,QAAA,IAElBqF,EAIyB,iBAAb/G,EACVZ,EAAasC,GAAMqF,KAAKA,EAAM/G,GAC9BZ,EAAasC,GAAMqF,KAAKA,GAEvB3H,EAAasC,GAbtB,CAqBeA,EAAMqF,EAAM/G,IAW3BlB,EAAOc,YAAc,SAAU8B,GAC7B,OAAO9B,EAAY8B,IAKrB5C,EAAOkI,gBAAkB,SAAUtF,GACjC,OAAO9B,EAAY8B,IAqGrB5C,EAAOiC,SAAW,SAAmBD,GACnC,OAAY,MAALA,IAAA,IAAaA,EAAEmG,WACpBnG,IAAMhC,EAAOD,WAGjBC,EAAOoI,QAAU,SAAkBC,EAAGrG,GAGpC,GAFIL,EAAW0G,EAAG5H,cAAa4H,EAAIrI,EAAOe,KAAKsH,EAAGA,EAAE3D,OAAQ2D,EAAEjH,aAC1DO,EAAWK,EAAGvB,cAAauB,EAAIhC,EAAOe,KAAKiB,EAAGA,EAAE0C,OAAQ1C,EAAEZ,cACzDpB,EAAOiC,SAASoG,KAAOrI,EAAOiC,SAASD,GAC1C,MAAM,IAAInB,UACR,yEAIJ,GAAIwH,IAAMrG,EAAG,OAAO,EAKpB,IAHA,IAAIsG,EAAID,EAAEnI,OACNqI,EAAIvG,EAAE9B,OAED2C,EAAI,EAAGX,EAAMmE,KAAKC,IAAIgC,EAAGC,GAAI1F,EAAIX,IAAOW,EAC/C,GAAIwF,EAAExF,KAAOb,EAAEa,GAAI,CACjByF,EAAID,EAAExF,GACN0F,EAAIvG,EAAEa,GACN,MAIJ,OAAIyF,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,GAGTtI,EAAOmB,WAAa,SAAqBD,GACvC,OAAQiD,OAAOjD,GAAUkC,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAA,EACF,QACE,OAAA,IAINpD,EAAOwI,OAAS,SAAiBC,EAAMvI,GACrC,IAAKqC,MAAMC,QAAQiG,GACjB,MAAM,IAAI5H,UAAU,+CAGtB,GAAoB,IAAhB4H,EAAKvI,OACP,OAAOF,EAAOG,MAAM,GAGtB,IAAI0C,EACJ,QAAA,IAAI3C,EAEF,IADAA,EAAS,EACJ2C,EAAI,EAAGA,EAAI4F,EAAKvI,SAAU2C,EAC7B3C,GAAUuI,EAAK5F,GAAG3C,OAItB,IAAI0B,EAAS5B,EAAOc,YAAYZ,GAC5BwI,EAAM,EACV,IAAK7F,EAAI,EAAGA,EAAI4F,EAAKvI,SAAU2C,EAAG,CAChC,IAAIrC,EAAMiI,EAAK5F,GAIf,GAHIlB,EAAWnB,EAAKC,cAClBD,EAAMR,EAAOe,KAAKP,KAEfR,EAAOiC,SAASzB,GACnB,MAAM,IAAIK,UAAU,+CAEtBL,EAAI4B,KAAKR,EAAQ8G,GACjBA,GAAOlI,EAAIN,OAEb,OAAO0B,GAkDT5B,EAAOoB,WAAaA,EA8EpBpB,EAAOD,UAAUoI,WAAA,EAQjBnI,EAAOD,UAAU4I,OAAS,WACxB,IAAIzG,EAAM0F,KAAK1H,OACf,GAAIgC,EAAM,GAAM,EACd,MAAM,IAAI3B,WAAW,6CAEvB,IAAK,IAAIsC,EAAI,EAAGA,EAAIX,EAAKW,GAAK,EAC5BQ,EAAKuE,KAAM/E,EAAGA,EAAI,GAEpB,OAAO+E,MAGT5H,EAAOD,UAAU6I,OAAS,WACxB,IAAI1G,EAAM0F,KAAK1H,OACf,GAAIgC,EAAM,GAAM,EACd,MAAM,IAAI3B,WAAW,6CAEvB,IAAK,IAAIsC,EAAI,EAAGA,EAAIX,EAAKW,GAAK,EAC5BQ,EAAKuE,KAAM/E,EAAGA,EAAI,GAClBQ,EAAKuE,KAAM/E,EAAI,EAAGA,EAAI,GAExB,OAAO+E,MAGT5H,EAAOD,UAAU8I,OAAS,WACxB,IAAI3G,EAAM0F,KAAK1H,OACf,GAAIgC,EAAM,GAAM,EACd,MAAM,IAAI3B,WAAW,6CAEvB,IAAK,IAAIsC,EAAI,EAAGA,EAAIX,EAAKW,GAAK,EAC5BQ,EAAKuE,KAAM/E,EAAGA,EAAI,GAClBQ,EAAKuE,KAAM/E,EAAI,EAAGA,EAAI,GACtBQ,EAAKuE,KAAM/E,EAAI,EAAGA,EAAI,GACtBQ,EAAKuE,KAAM/E,EAAI,EAAGA,EAAI,GAExB,OAAO+E,MAGT5H,EAAOD,UAAU+C,SAAW,WAC1B,IAAI5C,EAAS0H,KAAK1H,OAClB,OAAe,IAAXA,EAAqB,GACA,IAArB8C,UAAU9C,OAAqBkG,EAAUwB,KAAM,EAAG1H,GA5HxD,SAAuBgB,EAAU8E,EAAOC,GACtC,IAAIhD,GAAA,EAcJ,SAAA,IALI+C,GAAuBA,EAAQ,KACjCA,EAAQ,GAINA,EAAQ4B,KAAK1H,OACf,MAAO,GAOT,SAAA,IAJI+F,GAAqBA,EAAM2B,KAAK1H,UAClC+F,EAAM2B,KAAK1H,QAGT+F,GAAO,EACT,MAAO,GAOT,IAHAA,KAAS,KACTD,KAAW,GAGT,MAAO,GAKT,IAFK9E,IAAUA,EAAW,UAGxB,OAAQA,GACN,IAAK,MACH,OAAO4H,EAASlB,KAAM5B,EAAOC,GAE/B,IAAK,OACL,IAAK,QACH,OAAOG,EAAUwB,KAAM5B,EAAOC,GAEhC,IAAK,QACH,OAAO8C,EAAWnB,KAAM5B,EAAOC,GAEjC,IAAK,SACL,IAAK,SACH,OAAO+C,EAAYpB,KAAM5B,EAAOC,GAElC,IAAK,SACH,OAAOF,EAAY6B,KAAM5B,EAAOC,GAElC,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOgD,EAAarB,KAAM5B,EAAOC,GAEnC,QACE,GAAIhD,EAAa,MAAM,IAAIpC,UAAU,qBAAuBK,GAC5DA,GAAYA,EAAW,IAAIkC,cAC3BH,GAAA,IA4DciE,MAAMU,KAAM5E,YAGlChD,EAAOD,UAAUmJ,eAAiBlJ,EAAOD,UAAU+C,SAEnD9C,EAAOD,UAAUoJ,OAAS,SAAiBnH,GACzC,IAAKhC,EAAOiC,SAASD,GAAI,MAAM,IAAInB,UAAU,6BAC7C,OAAI+G,OAAS5F,GACsB,IAA5BhC,EAAOoI,QAAQR,KAAM5F,IAG9BhC,EAAOD,UAAUqJ,QAAU,WACzB,IAAIhE,EAAM,GACNiE,EAAM/J,EAAQc,kBAGlB,OAFAgF,EAAMwC,KAAK9E,SAAS,MAAO,EAAGuG,GAAKC,QAAQ,UAAW,OAAOC,OACzD3B,KAAK1H,OAASmJ,IAAKjE,GAAO,SACvB,WAAaA,EAAM,KAG5BpF,EAAOD,UAAUqI,QAAU,SAAkBoB,EAAQxD,EAAOC,EAAKwD,EAAWC,GAI1E,GAHI/H,EAAW6H,EAAQ/I,cACrB+I,EAASxJ,EAAOe,KAAKyI,EAAQA,EAAO9E,OAAQ8E,EAAOpI,cAEhDpB,EAAOiC,SAASuH,GACnB,MAAM,IAAI3I,UACR,uFAAA,IAC2B2I,EAD3B,YAAA9J,EAC2B8J,KAiB/B,QAAA,IAbIxD,IACFA,EAAQ,QAAA,IAENC,IACFA,EAAMuD,EAASA,EAAOtJ,OAAS,QAAA,IAE7BuJ,IACFA,EAAY,QAAA,IAEVC,IACFA,EAAU9B,KAAK1H,QAGb8F,EAAQ,GAAKC,EAAMuD,EAAOtJ,QAAUuJ,EAAY,GAAKC,EAAU9B,KAAK1H,OACtE,MAAM,IAAIK,WAAW,sBAGvB,GAAIkJ,GAAaC,GAAW1D,GAASC,EACnC,OAAO,EAET,GAAIwD,GAAaC,EACf,OAAQ,EAEV,GAAI1D,GAASC,EACX,OAAO,EAQT,GAAI2B,OAAS4B,EAAQ,OAAO,EAS5B,IAPA,IAAIlB,GAJJoB,KAAa,IADbD,KAAe,GAMXlB,GAPJtC,KAAS,IADTD,KAAW,GASP9D,EAAMmE,KAAKC,IAAIgC,EAAGC,GAElBoB,EAAW/B,KAAKrG,MAAMkI,EAAWC,GACjCE,EAAaJ,EAAOjI,MAAMyE,EAAOC,GAE5BpD,EAAI,EAAGA,EAAIX,IAAOW,EACzB,GAAI8G,EAAS9G,KAAO+G,EAAW/G,GAAI,CACjCyF,EAAIqB,EAAS9G,GACb0F,EAAIqB,EAAW/G,GACf,MAIJ,OAAIyF,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,GA4HTtI,EAAOD,UAAU8J,SAAW,SAAmBpG,EAAK3B,EAAYZ,GAC9D,OAAoD,IAA7C0G,KAAKhE,QAAQH,EAAK3B,EAAYZ,IAGvClB,EAAOD,UAAU6D,QAAU,SAAkBH,EAAK3B,EAAYZ,GAC5D,OAAOsC,EAAqBoE,KAAMnE,EAAK3B,EAAYZ,GAAA,IAGrDlB,EAAOD,UAAU+D,YAAc,SAAsBL,EAAK3B,EAAYZ,GACpE,OAAOsC,EAAqBoE,KAAMnE,EAAK3B,EAAYZ,GAAA,IAgDrDlB,EAAOD,UAAUuB,MAAQ,SAAgBL,EAAQyD,EAAQxE,EAAQgB,GAE/D,QAAA,IAAIwD,EACFxD,EAAW,OACXhB,EAAS0H,KAAK1H,OACdwE,EAAS,OAEJ,QAAA,IAAIxE,GAA0C,iBAAXwE,EACxCxD,EAAWwD,EACXxE,EAAS0H,KAAK1H,OACdwE,EAAS,MAEJ,CAAA,IAAIoF,SAASpF,GAUlB,MAAM,IAAIqF,MACR,2EAVFrF,KAAoB,EAChBoF,SAAS5J,IACXA,KAAoB,OAAA,IAChBgB,IAAwBA,EAAW,UAEvCA,EAAWhB,EACXA,OAAA,GAQJ,IAAI0E,EAAYgD,KAAK1H,OAASwE,EAG9B,SAAA,IAFIxE,GAAwBA,EAAS0E,KAAW1E,EAAS0E,GAEpD3D,EAAOf,OAAS,IAAMA,EAAS,GAAKwE,EAAS,IAAOA,EAASkD,KAAK1H,OACrE,MAAM,IAAIK,WAAW,0CAGlBW,IAAUA,EAAW,QAG1B,IADA,IAAI+B,GAAA,IAEF,OAAQ/B,GACN,IAAK,MACH,OAAOuD,EAASmD,KAAM3G,EAAQyD,EAAQxE,GAExC,IAAK,OACL,IAAK,QACH,OAAO+E,EAAU2C,KAAM3G,EAAQyD,EAAQxE,GAEzC,IAAK,QACH,OAAOiF,EAAWyC,KAAM3G,EAAQyD,EAAQxE,GAE1C,IAAK,SACL,IAAK,SACH,OAAOsF,EAAYoC,KAAM3G,EAAQyD,EAAQxE,GAE3C,IAAK,SAEH,OAAOuF,EAAYmC,KAAM3G,EAAQyD,EAAQxE,GAE3C,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOwF,EAAUkC,KAAM3G,EAAQyD,EAAQxE,GAEzC,QACE,GAAI+C,EAAa,MAAM,IAAIpC,UAAU,qBAAuBK,GAC5DA,GAAY,GAAKA,GAAUkC,cAC3BH,GAAA,IAKRjD,EAAOD,UAAUiK,OAAS,WACxB,MAAO,CACL1H,KAAM,SACNG,KAAMF,MAAMxC,UAAUwB,MAAMsC,KAAK+D,KAAKqC,MAAQrC,KAAM,KAwFxD,IAAIZ,EAAuB,KAoB3B,SAAS+B,EAAYvI,EAAKwF,EAAOC,GAC/B,IAAIiE,EAAM,GACVjE,EAAMI,KAAKC,IAAI9F,EAAIN,OAAQ+F,GAE3B,IAAK,IAAIpD,EAAImD,EAAOnD,EAAIoD,IAAOpD,EAC7BqH,GAAO/F,OAAO8C,aAAsB,IAATzG,EAAIqC,IAEjC,OAAOqH,EAGT,SAASlB,EAAaxI,EAAKwF,EAAOC,GAChC,IAAIiE,EAAM,GACVjE,EAAMI,KAAKC,IAAI9F,EAAIN,OAAQ+F,GAE3B,IAAK,IAAIpD,EAAImD,EAAOnD,EAAIoD,IAAOpD,EAC7BqH,GAAO/F,OAAO8C,aAAazG,EAAIqC,IAEjC,OAAOqH,EAGT,SAASpB,EAAUtI,EAAKwF,EAAOC,GAC7B,IA8kBc3C,EA9kBVpB,EAAM1B,EAAIN,SAET8F,GAASA,EAAQ,KAAGA,EAAQ,KAC5BC,GAAOA,EAAM,GAAKA,EAAM/D,KAAK+D,EAAM/D,GAGxC,IADA,IAAIiI,EAAM,GACDtH,EAAImD,EAAOnD,EAAIoD,IAAOpD,EAC7BsH,IAukBY7G,EAvkBC9C,EAAIqC,IAwkBX,GAAW,IAAMS,EAAER,SAAS,IAC7BQ,EAAER,SAAS,IAvkBlB,OAAOqH,EAGT,SAASlB,EAAczI,EAAKwF,EAAOC,GAGjC,IAFA,IAAImE,EAAQ5J,EAAIe,MAAMyE,EAAOC,GACzBM,EAAM,GACD1D,EAAI,EAAGA,EAAIuH,EAAMlK,OAAQ2C,GAAK,EACrC0D,GAAOpC,OAAO8C,aAAamD,EAAMvH,GAAqB,IAAfuH,EAAMvH,EAAI,IAEnD,OAAO0D,EAiCT,SAAS8D,EAAa3F,EAAQ4F,EAAKpK,GACjC,GAAKwE,EAAS,GAAO,GAAKA,EAAS,EAAG,MAAM,IAAInE,WAAW,sBAC3D,GAAImE,EAAS4F,EAAMpK,EAAQ,MAAM,IAAIK,WAAW,yCA6KlD,SAASgK,EAAU/J,EAAKQ,EAAO0D,EAAQ4F,EAAKjB,EAAK/C,GAC/C,IAAKtG,EAAOiC,SAASzB,GAAM,MAAM,IAAIK,UAAU,+CAC/C,GAAIG,EAAQqI,GAAOrI,EAAQsF,EAAK,MAAM,IAAI/F,WAAW,qCACrD,GAAImE,EAAS4F,EAAM9J,EAAIN,OAAQ,MAAM,IAAIK,WAAW,sBAyLtD,SAASiK,EAAchK,EAAKQ,EAAO0D,EAAQ4F,EAAKjB,EAAK/C,GACnD,GAAI5B,EAAS4F,EAAM9J,EAAIN,OAAQ,MAAM,IAAIK,WAAW,sBACpD,GAAImE,EAAS,EAAG,MAAM,IAAInE,WAAW,sBAGvC,SAASkK,EAAYjK,EAAKQ,EAAO0D,EAAQgG,EAAcC,GAOrD,OANA3J,GAASA,EACT0D,KAAoB,EACfiG,GACHH,EAAahK,EAAK,EAAOkE,EAAQ,GAEnCkG,EAAQtJ,MAAMd,EAAKQ,EAAO0D,EAAQgG,EAAc,GAAI,GAC7ChG,EAAS,EAWlB,SAASmG,EAAarK,EAAKQ,EAAO0D,EAAQgG,EAAcC,GAOtD,OANA3J,GAASA,EACT0D,KAAoB,EACfiG,GACHH,EAAahK,EAAK,EAAOkE,EAAQ,GAEnCkG,EAAQtJ,MAAMd,EAAKQ,EAAO0D,EAAQgG,EAAc,GAAI,GAC7ChG,EAAS,EAvalB1E,EAAOD,UAAUwB,MAAQ,SAAgByE,EAAOC,GAC9C,IAAI/D,EAAM0F,KAAK1H,QACf8F,IAAUA,GAGE,GACVA,GAAS9D,GACG,IAAG8D,EAAQ,GACdA,EAAQ9D,IACjB8D,EAAQ9D,IANV+D,OAAA,IAAMA,EAAoB/D,IAAQ+D,GASxB,GACRA,GAAO/D,GACG,IAAG+D,EAAM,GACVA,EAAM/D,IACf+D,EAAM/D,GAGJ+D,EAAMD,IAAOC,EAAMD,GAEvB,IAAI8E,EAASlD,KAAKmD,SAAS/E,EAAOC,GAGlC,OADA6E,EAAOpK,UAAYV,EAAOD,UACnB+K,GAWT9K,EAAOD,UAAUiL,WAAa,SAAqBtG,EAAQtD,EAAYuJ,GACrEjG,KAAoB,EACpBtD,KAA4B,EACvBuJ,GAAUN,EAAY3F,EAAQtD,EAAYwG,KAAK1H,QAKpD,IAHA,IAAIuD,EAAMmE,KAAKlD,GACXuG,EAAM,EACNpI,EAAI,IACCA,EAAIzB,IAAe6J,GAAO,MACjCxH,GAAOmE,KAAKlD,EAAS7B,GAAKoI,EAG5B,OAAOxH,GAGTzD,EAAOD,UAAUmL,WAAa,SAAqBxG,EAAQtD,EAAYuJ,GACrEjG,KAAoB,EACpBtD,KAA4B,EACvBuJ,GACHN,EAAY3F,EAAQtD,EAAYwG,KAAK1H,QAKvC,IAFA,IAAIuD,EAAMmE,KAAKlD,IAAWtD,GACtB6J,EAAM,EACH7J,EAAa,IAAM6J,GAAO,MAC/BxH,GAAOmE,KAAKlD,IAAWtD,GAAc6J,EAGvC,OAAOxH,GAGTzD,EAAOD,UAAUoL,UAAY,SAAoBzG,EAAQiG,GAGvD,OAFAjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,QACpC0H,KAAKlD,IAGd1E,EAAOD,UAAUqL,aAAe,SAAuB1G,EAAQiG,GAG7D,OAFAjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,QACpC0H,KAAKlD,GAAWkD,KAAKlD,EAAS,IAAM,GAG7C1E,EAAOD,UAAUsE,aAAe,SAAuBK,EAAQiG,GAG7D,OAFAjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,QACnC0H,KAAKlD,IAAW,EAAKkD,KAAKlD,EAAS,IAG7C1E,EAAOD,UAAUsL,aAAe,SAAuB3G,EAAQiG,GAI7D,OAHAjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,SAElC0H,KAAKlD,GACTkD,KAAKlD,EAAS,IAAM,EACpBkD,KAAKlD,EAAS,IAAM,IACD,SAAnBkD,KAAKlD,EAAS,IAGrB1E,EAAOD,UAAUuL,aAAe,SAAuB5G,EAAQiG,GAI7D,OAHAjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,QAEpB,SAAf0H,KAAKlD,IACTkD,KAAKlD,EAAS,IAAM,GACrBkD,KAAKlD,EAAS,IAAM,EACrBkD,KAAKlD,EAAS,KAGlB1E,EAAOD,UAAUwL,UAAY,SAAoB7G,EAAQtD,EAAYuJ,GACnEjG,KAAoB,EACpBtD,KAA4B,EACvBuJ,GAAUN,EAAY3F,EAAQtD,EAAYwG,KAAK1H,QAKpD,IAHA,IAAIuD,EAAMmE,KAAKlD,GACXuG,EAAM,EACNpI,EAAI,IACCA,EAAIzB,IAAe6J,GAAO,MACjCxH,GAAOmE,KAAKlD,EAAS7B,GAAKoI,EAM5B,OAFIxH,IAFJwH,GAAO,OAESxH,GAAO4C,KAAKmF,IAAI,EAAG,EAAIpK,IAEhCqC,GAGTzD,EAAOD,UAAU0L,UAAY,SAAoB/G,EAAQtD,EAAYuJ,GACnEjG,KAAoB,EACpBtD,KAA4B,EACvBuJ,GAAUN,EAAY3F,EAAQtD,EAAYwG,KAAK1H,QAKpD,IAHA,IAAI2C,EAAIzB,EACJ6J,EAAM,EACNxH,EAAMmE,KAAKlD,IAAW7B,GACnBA,EAAI,IAAMoI,GAAO,MACtBxH,GAAOmE,KAAKlD,IAAW7B,GAAKoI,EAM9B,OAFIxH,IAFJwH,GAAO,OAESxH,GAAO4C,KAAKmF,IAAI,EAAG,EAAIpK,IAEhCqC,GAGTzD,EAAOD,UAAU2L,SAAW,SAAmBhH,EAAQiG,GAGrD,OAFAjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,QACtB,IAAf0H,KAAKlD,IAC0B,GAA5B,IAAOkD,KAAKlD,GAAU,GADKkD,KAAKlD,IAI3C1E,EAAOD,UAAU4L,YAAc,SAAsBjH,EAAQiG,GAC3DjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,QAC3C,IAAIuD,EAAMmE,KAAKlD,GAAWkD,KAAKlD,EAAS,IAAM,EAC9C,OAAc,MAANjB,EAAsB,WAANA,EAAmBA,GAG7CzD,EAAOD,UAAU6L,YAAc,SAAsBlH,EAAQiG,GAC3DjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,QAC3C,IAAIuD,EAAMmE,KAAKlD,EAAS,GAAMkD,KAAKlD,IAAW,EAC9C,OAAc,MAANjB,EAAsB,WAANA,EAAmBA,GAG7CzD,EAAOD,UAAU8L,YAAc,SAAsBnH,EAAQiG,GAI3D,OAHAjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,QAEnC0H,KAAKlD,GACVkD,KAAKlD,EAAS,IAAM,EACpBkD,KAAKlD,EAAS,IAAM,GACpBkD,KAAKlD,EAAS,IAAM,IAGzB1E,EAAOD,UAAU+L,YAAc,SAAsBpH,EAAQiG,GAI3D,OAHAjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,QAEnC0H,KAAKlD,IAAW,GACrBkD,KAAKlD,EAAS,IAAM,GACpBkD,KAAKlD,EAAS,IAAM,EACpBkD,KAAKlD,EAAS,IAGnB1E,EAAOD,UAAUgM,YAAc,SAAsBrH,EAAQiG,GAG3D,OAFAjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,QACpC0K,EAAQxG,KAAKwD,KAAMlD,GAAA,EAAc,GAAI,IAG9C1E,EAAOD,UAAUiM,YAAc,SAAsBtH,EAAQiG,GAG3D,OAFAjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,QACpC0K,EAAQxG,KAAKwD,KAAMlD,GAAA,EAAe,GAAI,IAG/C1E,EAAOD,UAAUkM,aAAe,SAAuBvH,EAAQiG,GAG7D,OAFAjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,QACpC0K,EAAQxG,KAAKwD,KAAMlD,GAAA,EAAc,GAAI,IAG9C1E,EAAOD,UAAUmM,aAAe,SAAuBxH,EAAQiG,GAG7D,OAFAjG,KAAoB,EACfiG,GAAUN,EAAY3F,EAAQ,EAAGkD,KAAK1H,QACpC0K,EAAQxG,KAAKwD,KAAMlD,GAAA,EAAe,GAAI,IAS/C1E,EAAOD,UAAUoM,YAAc,SAAsBnL,EAAO0D,EAAQtD,EAAYuJ,GAC9E3J,GAASA,EACT0D,KAAoB,EACpBtD,KAA4B,EACvBuJ,GAEHJ,EAAS3C,KAAM5G,EAAO0D,EAAQtD,EADfiF,KAAKmF,IAAI,EAAG,EAAIpK,GAAc,EACO,GAGtD,IAAI6J,EAAM,EACNpI,EAAI,EAER,IADA+E,KAAKlD,GAAkB,IAAR1D,IACN6B,EAAIzB,IAAe6J,GAAO,MACjCrD,KAAKlD,EAAS7B,GAAM7B,EAAQiK,EAAO,IAGrC,OAAOvG,EAAStD,GAGlBpB,EAAOD,UAAUqM,YAAc,SAAsBpL,EAAO0D,EAAQtD,EAAYuJ,GAC9E3J,GAASA,EACT0D,KAAoB,EACpBtD,KAA4B,EACvBuJ,GAEHJ,EAAS3C,KAAM5G,EAAO0D,EAAQtD,EADfiF,KAAKmF,IAAI,EAAG,EAAIpK,GAAc,EACO,GAGtD,IAAIyB,EAAIzB,EAAa,EACjB6J,EAAM,EAEV,IADArD,KAAKlD,EAAS7B,GAAa,IAAR7B,IACV6B,GAAK,IAAMoI,GAAO,MACzBrD,KAAKlD,EAAS7B,GAAM7B,EAAQiK,EAAO,IAGrC,OAAOvG,EAAStD,GAGlBpB,EAAOD,UAAUsM,WAAa,SAAqBrL,EAAO0D,EAAQiG,GAKhE,OAJA3J,GAASA,EACT0D,KAAoB,EACfiG,GAAUJ,EAAS3C,KAAM5G,EAAO0D,EAAQ,EAAG,IAAM,GACtDkD,KAAKlD,GAAmB,IAAR1D,EACT0D,EAAS,GAGlB1E,EAAOD,UAAUuM,cAAgB,SAAwBtL,EAAO0D,EAAQiG,GAMtE,OALA3J,GAASA,EACT0D,KAAoB,EACfiG,GAAUJ,EAAS3C,KAAM5G,EAAO0D,EAAQ,EAAG,MAAQ,GACxDkD,KAAKlD,GAAmB,IAAR1D,EAChB4G,KAAKlD,EAAS,GAAM1D,IAAU,EACvB0D,EAAS,GAGlB1E,EAAOD,UAAUwM,cAAgB,SAAwBvL,EAAO0D,EAAQiG,GAMtE,OALA3J,GAASA,EACT0D,KAAoB,EACfiG,GAAUJ,EAAS3C,KAAM5G,EAAO0D,EAAQ,EAAG,MAAQ,GACxDkD,KAAKlD,GAAW1D,IAAU,EAC1B4G,KAAKlD,EAAS,GAAc,IAAR1D,EACb0D,EAAS,GAGlB1E,EAAOD,UAAUyM,cAAgB,SAAwBxL,EAAO0D,EAAQiG,GAQtE,OAPA3J,GAASA,EACT0D,KAAoB,EACfiG,GAAUJ,EAAS3C,KAAM5G,EAAO0D,EAAQ,EAAG,WAAY,GAC5DkD,KAAKlD,EAAS,GAAM1D,IAAU,GAC9B4G,KAAKlD,EAAS,GAAM1D,IAAU,GAC9B4G,KAAKlD,EAAS,GAAM1D,IAAU,EAC9B4G,KAAKlD,GAAmB,IAAR1D,EACT0D,EAAS,GAGlB1E,EAAOD,UAAU0M,cAAgB,SAAwBzL,EAAO0D,EAAQiG,GAQtE,OAPA3J,GAASA,EACT0D,KAAoB,EACfiG,GAAUJ,EAAS3C,KAAM5G,EAAO0D,EAAQ,EAAG,WAAY,GAC5DkD,KAAKlD,GAAW1D,IAAU,GAC1B4G,KAAKlD,EAAS,GAAM1D,IAAU,GAC9B4G,KAAKlD,EAAS,GAAM1D,IAAU,EAC9B4G,KAAKlD,EAAS,GAAc,IAAR1D,EACb0D,EAAS,GAGlB1E,EAAOD,UAAU2M,WAAa,SAAqB1L,EAAO0D,EAAQtD,EAAYuJ,GAG5E,GAFA3J,GAASA,EACT0D,KAAoB,GACfiG,EAAU,CACb,IAAIgC,EAAQtG,KAAKmF,IAAI,EAAI,EAAIpK,EAAc,GAE3CmJ,EAAS3C,KAAM5G,EAAO0D,EAAQtD,EAAYuL,EAAQ,GAAIA,GAGxD,IAAI9J,EAAI,EACJoI,EAAM,EACN2B,EAAM,EAEV,IADAhF,KAAKlD,GAAkB,IAAR1D,IACN6B,EAAIzB,IAAe6J,GAAO,MAC7BjK,EAAQ,GAAa,IAAR4L,GAAsC,IAAzBhF,KAAKlD,EAAS7B,EAAI,KAC9C+J,EAAM,GAERhF,KAAKlD,EAAS7B,IAAO7B,EAAQiK,GAAQ,GAAK2B,EAAM,IAGlD,OAAOlI,EAAStD,GAGlBpB,EAAOD,UAAU8M,WAAa,SAAqB7L,EAAO0D,EAAQtD,EAAYuJ,GAG5E,GAFA3J,GAASA,EACT0D,KAAoB,GACfiG,EAAU,CACb,IAAIgC,EAAQtG,KAAKmF,IAAI,EAAI,EAAIpK,EAAc,GAE3CmJ,EAAS3C,KAAM5G,EAAO0D,EAAQtD,EAAYuL,EAAQ,GAAIA,GAGxD,IAAI9J,EAAIzB,EAAa,EACjB6J,EAAM,EACN2B,EAAM,EAEV,IADAhF,KAAKlD,EAAS7B,GAAa,IAAR7B,IACV6B,GAAK,IAAMoI,GAAO,MACrBjK,EAAQ,GAAa,IAAR4L,GAAsC,IAAzBhF,KAAKlD,EAAS7B,EAAI,KAC9C+J,EAAM,GAERhF,KAAKlD,EAAS7B,IAAO7B,EAAQiK,GAAQ,GAAK2B,EAAM,IAGlD,OAAOlI,EAAStD,GAGlBpB,EAAOD,UAAU+M,UAAY,SAAoB9L,EAAO0D,EAAQiG,GAM9D,OALA3J,GAASA,EACT0D,KAAoB,EACfiG,GAAUJ,EAAS3C,KAAM5G,EAAO0D,EAAQ,EAAG,KAAO,KACnD1D,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtC4G,KAAKlD,GAAmB,IAAR1D,EACT0D,EAAS,GAGlB1E,EAAOD,UAAUgN,aAAe,SAAuB/L,EAAO0D,EAAQiG,GAMpE,OALA3J,GAASA,EACT0D,KAAoB,EACfiG,GAAUJ,EAAS3C,KAAM5G,EAAO0D,EAAQ,EAAG,OAAS,OACzDkD,KAAKlD,GAAmB,IAAR1D,EAChB4G,KAAKlD,EAAS,GAAM1D,IAAU,EACvB0D,EAAS,GAGlB1E,EAAOD,UAAUiN,aAAe,SAAuBhM,EAAO0D,EAAQiG,GAMpE,OALA3J,GAASA,EACT0D,KAAoB,EACfiG,GAAUJ,EAAS3C,KAAM5G,EAAO0D,EAAQ,EAAG,OAAS,OACzDkD,KAAKlD,GAAW1D,IAAU,EAC1B4G,KAAKlD,EAAS,GAAc,IAAR1D,EACb0D,EAAS,GAGlB1E,EAAOD,UAAUkN,aAAe,SAAuBjM,EAAO0D,EAAQiG,GAQpE,OAPA3J,GAASA,EACT0D,KAAoB,EACfiG,GAAUJ,EAAS3C,KAAM5G,EAAO0D,EAAQ,EAAG,YAAa,YAC7DkD,KAAKlD,GAAmB,IAAR1D,EAChB4G,KAAKlD,EAAS,GAAM1D,IAAU,EAC9B4G,KAAKlD,EAAS,GAAM1D,IAAU,GAC9B4G,KAAKlD,EAAS,GAAM1D,IAAU,GACvB0D,EAAS,GAGlB1E,EAAOD,UAAUmN,aAAe,SAAuBlM,EAAO0D,EAAQiG,GASpE,OARA3J,GAASA,EACT0D,KAAoB,EACfiG,GAAUJ,EAAS3C,KAAM5G,EAAO0D,EAAQ,EAAG,YAAa,YACzD1D,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GAC5C4G,KAAKlD,GAAW1D,IAAU,GAC1B4G,KAAKlD,EAAS,GAAM1D,IAAU,GAC9B4G,KAAKlD,EAAS,GAAM1D,IAAU,EAC9B4G,KAAKlD,EAAS,GAAc,IAAR1D,EACb0D,EAAS,GAkBlB1E,EAAOD,UAAUoN,aAAe,SAAuBnM,EAAO0D,EAAQiG,GACpE,OAAOF,EAAW7C,KAAM5G,EAAO0D,GAAA,EAAciG,IAG/C3K,EAAOD,UAAUqN,aAAe,SAAuBpM,EAAO0D,EAAQiG,GACpE,OAAOF,EAAW7C,KAAM5G,EAAO0D,GAAA,EAAeiG,IAahD3K,EAAOD,UAAUsN,cAAgB,SAAwBrM,EAAO0D,EAAQiG,GACtE,OAAOE,EAAYjD,KAAM5G,EAAO0D,GAAA,EAAciG,IAGhD3K,EAAOD,UAAUuN,cAAgB,SAAwBtM,EAAO0D,EAAQiG,GACtE,OAAOE,EAAYjD,KAAM5G,EAAO0D,GAAA,EAAeiG,IAIjD3K,EAAOD,UAAUqC,KAAO,SAAeoH,EAAQ+D,EAAavH,EAAOC,GACjE,IAAKjG,EAAOiC,SAASuH,GAAS,MAAM,IAAI3I,UAAU,+BAQlD,GAPKmF,IAAOA,EAAQ,GACfC,GAAe,IAARA,IAAWA,EAAM2B,KAAK1H,QAC9BqN,GAAe/D,EAAOtJ,SAAQqN,EAAc/D,EAAOtJ,QAClDqN,IAAaA,EAAc,GAC5BtH,EAAM,GAAKA,EAAMD,IAAOC,EAAMD,GAG9BC,IAAQD,EAAO,OAAO,EAC1B,GAAsB,IAAlBwD,EAAOtJ,QAAgC,IAAhB0H,KAAK1H,OAAc,OAAO,EAGrD,GAAIqN,EAAc,EAChB,MAAM,IAAIhN,WAAW,6BAEvB,GAAIyF,EAAQ,GAAKA,GAAS4B,KAAK1H,OAAQ,MAAM,IAAIK,WAAW,sBAC5D,GAAI0F,EAAM,EAAG,MAAM,IAAI1F,WAAW,2BAG9B0F,EAAM2B,KAAK1H,SAAQ+F,EAAM2B,KAAK1H,QAC9BsJ,EAAOtJ,OAASqN,EAActH,EAAMD,IACtCC,EAAMuD,EAAOtJ,OAASqN,EAAcvH,GAGtC,IAAI9D,EAAM+D,EAAMD,EAEhB,GAAI4B,OAAS4B,GAAqD,mBAApC/I,WAAWV,UAAUyN,WAEjD5F,KAAK4F,WAAWD,EAAavH,EAAOC,QAC/B,GAAI2B,OAAS4B,GAAUxD,EAAQuH,GAAeA,EAActH,EAEjE,IAAK,IAAIpD,EAAIX,EAAM,EAAGW,GAAK,IAAKA,EAC9B2G,EAAO3G,EAAI0K,GAAe3F,KAAK/E,EAAImD,QAGrCvF,WAAWV,UAAU0N,IAAI5J,KACvB2F,EACA5B,KAAKmD,SAAS/E,EAAOC,GACrBsH,GAIJ,OAAOrL,GAOTlC,EAAOD,UAAUkI,KAAO,SAAexE,EAAKuC,EAAOC,EAAK/E,GAEtD,GAAmB,iBAARuC,EAAkB,CAS3B,GARqB,iBAAVuC,GACT9E,EAAW8E,EACXA,EAAQ,EACRC,EAAM2B,KAAK1H,QACa,iBAAR+F,IAChB/E,EAAW+E,EACXA,EAAM2B,KAAK1H,aAAA,IAETgB,GAA8C,iBAAbA,EACnC,MAAM,IAAIL,UAAU,6BAEtB,GAAwB,iBAAbK,IAA0BlB,EAAOmB,WAAWD,GACrD,MAAM,IAAIL,UAAU,qBAAuBK,GAE7C,GAAmB,IAAfuC,EAAIvD,OAAc,CACpB,IAAIwN,EAAOjK,EAAI8B,WAAW,IACR,SAAbrE,GAAuBwM,EAAO,KAClB,WAAbxM,KAEFuC,EAAMiK,QAGc,iBAARjK,IAChBA,GAAY,KAId,GAAIuC,EAAQ,GAAK4B,KAAK1H,OAAS8F,GAAS4B,KAAK1H,OAAS+F,EACpD,MAAM,IAAI1F,WAAW,sBAGvB,GAAI0F,GAAOD,EACT,OAAO4B,KAQT,IAAI/E,EACJ,GANAmD,KAAkB,EAClBC,OAAA,IAAMA,EAAoB2B,KAAK1H,OAAS+F,IAAQ,EAE3CxC,IAAKA,EAAM,GAGG,iBAARA,EACT,IAAKZ,EAAImD,EAAOnD,EAAIoD,IAAOpD,EACzB+E,KAAK/E,GAAKY,MAEP,CACL,IAAI2G,EAAQpK,EAAOiC,SAASwB,GACxBA,EACAzD,EAAOe,KAAK0C,EAAKvC,GACjBgB,EAAMkI,EAAMlK,OAChB,GAAY,IAARgC,EACF,MAAM,IAAIrB,UAAU,cAAgB4C,EAClC,qCAEJ,IAAKZ,EAAI,EAAGA,EAAIoD,EAAMD,IAASnD,EAC7B+E,KAAK/E,EAAImD,GAASoE,EAAMvH,EAAIX,GAIhC,OAAO0F,MAMT,IAAI+F,EAAoB,qBAqBxB,SAASzK,EAAajC,EAAQ0E,GAE5B,IAAIkB,EADJlB,EAAQA,GAAS,EAAA,EAMjB,IAJA,IAAIzF,EAASe,EAAOf,OAChB0N,EAAgB,KAChBxD,EAAQ,GAEHvH,EAAI,EAAGA,EAAI3C,IAAU2C,EAAG,CAI/B,IAHAgE,EAAY5F,EAAOsE,WAAW1C,IAGd,OAAUgE,EAAY,MAAQ,CAE5C,IAAK+G,EAAe,CAElB,GAAI/G,EAAY,MAAQ,EAEjBlB,GAAS,IAAM,GAAGyE,EAAM9E,KAAK,IAAM,IAAM,KAC9C,SACK,GAAIzC,EAAI,IAAM3C,EAAQ,EAEtByF,GAAS,IAAM,GAAGyE,EAAM9E,KAAK,IAAM,IAAM,KAC9C,SAIFsI,EAAgB/G,EAEhB,SAIF,GAAIA,EAAY,MAAQ,EACjBlB,GAAS,IAAM,GAAGyE,EAAM9E,KAAK,IAAM,IAAM,KAC9CsI,EAAgB/G,EAChB,SAIFA,EAAkE,OAArD+G,EAAgB,OAAU,GAAK/G,EAAY,YAC/C+G,IAEJjI,GAAS,IAAM,GAAGyE,EAAM9E,KAAK,IAAM,IAAM,KAMhD,GAHAsI,EAAgB,KAGZ/G,EAAY,IAAM,CACpB,IAAKlB,GAAS,GAAK,EAAG,MACtByE,EAAM9E,KAAKuB,QACN,GAAIA,EAAY,KAAO,CAC5B,IAAKlB,GAAS,GAAK,EAAG,MACtByE,EAAM9E,KACJuB,GAAa,EAAM,IACP,GAAZA,EAAmB,UAEhB,GAAIA,EAAY,MAAS,CAC9B,IAAKlB,GAAS,GAAK,EAAG,MACtByE,EAAM9E,KACJuB,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,SAEhB,CAAA,KAAIA,EAAY,SASrB,MAAM,IAAIkD,MAAM,sBARhB,IAAKpE,GAAS,GAAK,EAAG,MACtByE,EAAM9E,KACJuB,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,MAOzB,OAAOuD,EA4BT,SAASjH,EAAeiC,GACtB,OAAOc,EAAO2H,YA7HhB,SAAsBzI,GAMpB,IAFAA,GAFAA,EAAMA,EAAI0I,MAAM,KAAK,IAEXvE,OAAOD,QAAQqE,EAAmB,KAEpCzN,OAAS,EAAG,MAAO,GAE3B,KAAOkF,EAAIlF,OAAS,GAAM,GACxBkF,GAAY,IAEd,OAAOA,EAXT,CA6HwCA,IAGxC,SAASF,EAAY6I,EAAKC,EAAKtJ,EAAQxE,GACrC,IAAK,IAAI2C,EAAI,EAAGA,EAAI3C,KACb2C,EAAI6B,GAAUsJ,EAAI9N,QAAY2C,GAAKkL,EAAI7N,UADhB2C,EAE5BmL,EAAInL,EAAI6B,GAAUqJ,EAAIlL,GAExB,OAAOA,EAMT,SAASlB,EAAY9B,EAAKyC,GACxB,OAAOzC,aAAeyC,GACZ,MAAPzC,GAAkC,MAAnBA,EAAIC,aAA+C,MAAxBD,EAAIC,YAAYmO,MACzDpO,EAAIC,YAAYmO,OAAS3L,EAAK2L,KAEpC,SAAS5L,EAAaxC,GAEpB,OAAOA,GAAQA,2OC1tDbqO,EAAe1G,OAAO2G,QAoe1B,SAA8BC,GAC5B,IAAIC,EAAI,aAER,OADAA,EAAEtO,UAAYqO,EACP,IAAIC,GAteTC,EAAa9G,OAAO+G,MAwexB,SAA4B1O,GAC1B,IAAI0O,EAAO,GACX,IAAK,IAAIC,KAAK3O,EAAS2H,OAAOzH,UAAU0O,eAAe5K,KAAKhE,EAAK2O,IAC/DD,EAAKjJ,KAAKkJ,GAEZ,OAAOA,GA5eLE,EAAOC,SAAS5O,UAAU2O,MA8e9B,SAA8BE,GAC5B,IAAIC,EAAKjH,KACT,OAAO,WACL,OAAOiH,EAAG3H,MAAM0H,EAAS5L,aA/e7B,SAAS8L,IACFlH,KAAKmH,SAAYvH,OAAOzH,UAAU0O,eAAe5K,KAAK+D,KAAM,aAC/DA,KAAKmH,QAAUb,EAAa,MAC5BtG,KAAKoH,aAAe,GAGtBpH,KAAKqH,cAAgBrH,KAAKqH,oBAAA,EAE5BhQ,EAAiB6P,EAGjBA,EAAaA,aAAeA,EAE5BA,EAAa/O,UAAUgP,aAAA,EACvBD,EAAa/O,UAAUkP,mBAAA,EAIvB,IAEIC,EAFAC,EAAsB,GAG1B,IACE,IAAIC,EAAI,GACJ5H,OAAOC,gBAAgBD,OAAOC,eAAe2H,EAAG,IAAK,CAAEpO,MAAO,IAClEkO,EAA4B,IAARE,EAAE9G,EACtB,MAAO+G,IAAOH,GAAA,EA4BhB,SAASI,EAAiBC,GACxB,YAAA,IAAIA,EAAKN,cACAH,EAAaK,oBACfI,EAAKN,cAyHd,SAASO,EAAahG,EAAQlH,EAAMmN,EAAUC,GAC5C,IAAInM,EACAoM,EACAC,EAEJ,GAAwB,mBAAbH,EACT,MAAM,IAAI5O,UAAU,0CAoBtB,IAlBA8O,EAASnG,EAAOuF,UAOVY,EAAOE,cACTrG,EAAOsG,KAAK,cAAexN,EACvBmN,EAASA,SAAWA,EAASA,SAAWA,GAI5CE,EAASnG,EAAOuF,SAElBa,EAAWD,EAAOrN,KAblBqN,EAASnG,EAAOuF,QAAUb,EAAa,MACvC1E,EAAOwF,aAAe,GAenBY,GAmBH,GAdwB,mBAAbA,EAETA,EAAWD,EAAOrN,GACdoN,EAAU,CAACD,EAAUG,GAAY,CAACA,EAAUH,GAG5CC,EACFE,EAASG,QAAQN,GAEjBG,EAAStK,KAAKmK,IAKbG,EAASI,SACZzM,EAAI+L,EAAiB9F,KACZjG,EAAI,GAAKqM,EAAS1P,OAASqD,EAAG,CACrCqM,EAASI,QAAA,EACT,IAAIC,EAAI,IAAIlG,MAAM,+CACd6F,EAAS1P,OAAS,KAAOiE,OAAO7B,GAAQ,uEAG5C2N,EAAEhC,KAAO,8BACTgC,EAAEC,QAAU1G,EACZyG,EAAE3N,KAAOA,EACT2N,EAAEE,MAAQP,EAAS1P,OACI,YAAnB,oBAAOoH,QAAP,YAAA5H,EAAO4H,WAAwBA,QAAQ8I,MACzC9I,QAAQ8I,KAAK,SAAUH,EAAEhC,KAAMgC,EAAEI,eA9BvCT,EAAWD,EAAOrN,GAAQmN,IACxBjG,EAAOwF,aAmCX,OAAOxF,EAcT,SAAS8G,IACP,IAAK1I,KAAK2I,MAGR,OAFA3I,KAAK4B,OAAOgH,eAAe5I,KAAKtF,KAAMsF,KAAK6I,QAC3C7I,KAAK2I,OAAA,EACGvN,UAAU9C,QAChB,KAAK,EACH,OAAO0H,KAAK6H,SAAS5L,KAAK+D,KAAK4B,QACjC,KAAK,EACH,OAAO5B,KAAK6H,SAAS5L,KAAK+D,KAAK4B,OAAQxG,UAAU,IACnD,KAAK,EACH,OAAO4E,KAAK6H,SAAS5L,KAAK+D,KAAK4B,OAAQxG,UAAU,GAAIA,UAAU,IACjE,KAAK,EACH,OAAO4E,KAAK6H,SAAS5L,KAAK+D,KAAK4B,OAAQxG,UAAU,GAAIA,UAAU,GAC3DA,UAAU,IAChB,QAEE,IADA,IAAI0N,EAAO,IAAInO,MAAMS,UAAU9C,QACtB2C,EAAI,EAAGA,EAAI6N,EAAKxQ,SAAU2C,EACjC6N,EAAK7N,GAAKG,UAAUH,GACtB+E,KAAK6H,SAASvI,MAAMU,KAAK4B,OAAQkH,IAKzC,SAASC,EAAUnH,EAAQlH,EAAMmN,GAC/B,IAAImB,EAAQ,CAAEL,OAAA,EAAcE,YAAA,EAAmBjH,OAAQA,EAAQlH,KAAMA,EAAMmN,SAAUA,GACjFoB,EAAUnC,EAAK7K,KAAKyM,EAAaM,GAGrC,OAFAC,EAAQpB,SAAWA,EACnBmB,EAAMH,OAASI,EACRA,EA0HT,SAASC,EAAWtH,EAAQlH,EAAMyO,GAChC,IAAIpB,EAASnG,EAAOuF,QAEpB,IAAKY,EACH,MAAO,GAET,IAAIqB,EAAarB,EAAOrN,GACxB,OAAK0O,EAGqB,mBAAfA,EACFD,EAAS,CAACC,EAAWvB,UAAYuB,GAAc,CAACA,GAElDD,EAsDT,SAAyBhN,GAEvB,IADA,IAAImG,EAAM,IAAI3H,MAAMwB,EAAI7D,QACf2C,EAAI,EAAGA,EAAIqH,EAAIhK,SAAU2C,EAChCqH,EAAIrH,GAAKkB,EAAIlB,GAAG4M,UAAY1L,EAAIlB,GAElC,OAAOqH,EALT,CAtDkC8G,GAAcC,EAAWD,EAAYA,EAAW9Q,QALvE,GAyBX,SAASgR,EAAc5O,GACrB,IAAIqN,EAAS/H,KAAKmH,QAElB,GAAIY,EAAQ,CACV,IAAIqB,EAAarB,EAAOrN,GAExB,GAA0B,mBAAf0O,EACT,OAAO,EACF,GAAIA,EACT,OAAOA,EAAW9Q,OAItB,OAAO,EAcT,SAAS+Q,EAAWlN,EAAKT,GAEvB,IADA,IAAIlB,EAAO,IAAIG,MAAMe,GACZT,EAAI,EAAGA,EAAIS,IAAKT,EACvBT,EAAKS,GAAKkB,EAAIlB,GAChB,OAAOT,ECteT,SAAS+O,EAAMC,GAKb,IAJAA,EAAuB,iBAATA,EACVjN,OAAOiN,GAAM7H,OAAOuE,MAAM,KAC1BsD,GAEKlR,OAAS,EAEhB,OADAkR,EAAOA,EAAK,GAOd,SAAqBC,GACnB,OAAOA,EAAOD,IALd,IAAIE,EAAIF,EAAKlR,OACb,OAOF,SAAmBmR,GACjB,IAAK,IAAIxO,EAAI,EAAGA,EAAIyO,QAAA,IACPD,EADUxO,IAGrBwO,EAASA,EAAOD,EAAKvO,IAGvB,OAAOwO,GDmBPnC,EACF1H,OAAOC,eAAeqH,EAAc,sBAAuB,CACzDpH,YAAA,EACAC,IAAK,WACH,OAAOwH,GAET1B,IAAK,SAAS9M,GAGZ,GAAmB,iBAARA,GAAoBA,EAAM,GAAKA,GAAQA,EAChD,MAAM,IAAIE,UAAU,mDACtBsO,EAAsBxO,KAI1BmO,EAAaK,oBAAsBA,EAKrCL,EAAa/O,UAAUwR,gBAAkB,SAAyBjO,GAChE,GAAiB,iBAANA,GAAkBA,EAAI,GAAKkO,MAAMlO,GAC1C,MAAM,IAAIzC,UAAU,0CAEtB,OADA+G,KAAKqH,cAAgB3L,EACdsE,MASTkH,EAAa/O,UAAU0R,gBAAkB,WACvC,OAAOnC,EAAiB1H,OA4D1BkH,EAAa/O,UAAU+P,KAAO,SAAcxN,GAC1C,IAAIoP,EAAIC,EAASzP,EAAKwO,EAAM7N,EAAG8M,EAC3BiC,EAAoB,UAATtP,EAGf,GADAqN,EAAS/H,KAAKmH,QAEZ6C,EAAWA,GAA2B,MAAhBjC,EAAOpI,WAC1B,IAAKqK,EACR,OAAA,EAGF,GAAIA,EAAS,CAGX,GAFI5O,UAAU9C,OAAS,IACrBwR,EAAK1O,UAAU,IACb0O,aAAc3H,MAChB,MAAM2H,EAGN,IAAIrC,EAAM,IAAItF,MAAM,6BAA+B2H,EAAK,KAExD,MADArC,EAAIT,QAAU8C,EACRrC,EAOV,KAFAsC,EAAUhC,EAAOrN,IAGf,OAAA,EAEF,IAAIuP,EAA0B,mBAAZF,EAElB,OADAzP,EAAMc,UAAU9C,QAGd,KAAK,GAtFT,SAAkByR,EAASE,EAAMC,GAC/B,GAAID,EACFF,EAAQ9N,KAAKiO,QAIb,IAFA,IAAI5P,EAAMyP,EAAQzR,OACd6R,EAAYd,EAAWU,EAASzP,GAC3BW,EAAI,EAAGA,EAAIX,IAAOW,EACzBkP,EAAUlP,GAAGgB,KAAKiO,GAPxB,CAuFeH,EAASE,EAAMjK,MACxB,MACF,KAAK,GA/ET,SAAiB+J,EAASE,EAAMC,EAAME,GACpC,GAAIH,EACFF,EAAQ9N,KAAKiO,EAAME,QAInB,IAFA,IAAI9P,EAAMyP,EAAQzR,OACd6R,EAAYd,EAAWU,EAASzP,GAC3BW,EAAI,EAAGA,EAAIX,IAAOW,EACzBkP,EAAUlP,GAAGgB,KAAKiO,EAAME,GAP9B,CAgFcL,EAASE,EAAMjK,KAAM5E,UAAU,IACvC,MACF,KAAK,GAxET,SAAiB2O,EAASE,EAAMC,EAAME,EAAMC,GAC1C,GAAIJ,EACFF,EAAQ9N,KAAKiO,EAAME,EAAMC,QAIzB,IAFA,IAAI/P,EAAMyP,EAAQzR,OACd6R,EAAYd,EAAWU,EAASzP,GAC3BW,EAAI,EAAGA,EAAIX,IAAOW,EACzBkP,EAAUlP,GAAGgB,KAAKiO,EAAME,EAAMC,GAPpC,CAyEcN,EAASE,EAAMjK,KAAM5E,UAAU,GAAIA,UAAU,IACrD,MACF,KAAK,GAjET,SAAmB2O,EAASE,EAAMC,EAAME,EAAMC,EAAMC,GAClD,GAAIL,EACFF,EAAQ9N,KAAKiO,EAAME,EAAMC,EAAMC,QAI/B,IAFA,IAAIhQ,EAAMyP,EAAQzR,OACd6R,EAAYd,EAAWU,EAASzP,GAC3BW,EAAI,EAAGA,EAAIX,IAAOW,EACzBkP,EAAUlP,GAAGgB,KAAKiO,EAAME,EAAMC,EAAMC,GAP1C,CAkEgBP,EAASE,EAAMjK,KAAM5E,UAAU,GAAIA,UAAU,GAAIA,UAAU,IACrE,MAEF,QAEE,IADA0N,EAAO,IAAInO,MAAML,EAAM,GAClBW,EAAI,EAAGA,EAAIX,EAAKW,IACnB6N,EAAK7N,EAAI,GAAKG,UAAUH,IA7DhC,SAAkB8O,EAASE,EAAMC,EAAMpB,GACrC,GAAImB,EACFF,EAAQzK,MAAM4K,EAAMpB,QAIpB,IAFA,IAAIxO,EAAMyP,EAAQzR,OACd6R,EAAYd,EAAWU,EAASzP,GAC3BW,EAAI,EAAGA,EAAIX,IAAOW,EACzBkP,EAAUlP,GAAGqE,MAAM4K,EAAMpB,GAP/B,CA8DeiB,EAASE,EAAMjK,KAAM8I,GAGlC,OAAA,GAsEF5B,EAAa/O,UAAUoS,YAAc,SAAqB7P,EAAMmN,GAC9D,OAAOD,EAAa5H,KAAMtF,EAAMmN,GAAA,IAGlCX,EAAa/O,UAAUqS,GAAKtD,EAAa/O,UAAUoS,YAEnDrD,EAAa/O,UAAUsS,gBACnB,SAAyB/P,EAAMmN,GAC7B,OAAOD,EAAa5H,KAAMtF,EAAMmN,GAAA,IAkCtCX,EAAa/O,UAAUuS,KAAO,SAAchQ,EAAMmN,GAChD,GAAwB,mBAAbA,EACT,MAAM,IAAI5O,UAAU,0CAEtB,OADA+G,KAAKwK,GAAG9P,EAAMqO,EAAU/I,KAAMtF,EAAMmN,IAC7B7H,MAGTkH,EAAa/O,UAAUwS,oBACnB,SAA6BjQ,EAAMmN,GACjC,GAAwB,mBAAbA,EACT,MAAM,IAAI5O,UAAU,0CAEtB,OADA+G,KAAKyK,gBAAgB/P,EAAMqO,EAAU/I,KAAMtF,EAAMmN,IAC1C7H,MAIbkH,EAAa/O,UAAUyQ,eACnB,SAAwBlO,EAAMmN,GAC5B,IAAIhH,EAAMkH,EAAQ6C,EAAU3P,EAAG4P,EAE/B,GAAwB,mBAAbhD,EACT,MAAM,IAAI5O,UAAU,0CAGtB,KADA8O,EAAS/H,KAAKmH,SAEZ,OAAOnH,KAGT,KADAa,EAAOkH,EAAOrN,IAEZ,OAAOsF,KAET,GAAIa,IAASgH,GAAYhH,EAAKgH,WAAaA,EACb,KAAtB7H,KAAKoH,aACTpH,KAAKmH,QAAUb,EAAa,cAErByB,EAAOrN,GACVqN,EAAOa,gBACT5I,KAAKkI,KAAK,iBAAkBxN,EAAMmG,EAAKgH,UAAYA,SAElD,GAAoB,mBAAThH,EAAqB,CAGrC,IAFA+J,GAAY,EAEP3P,EAAI4F,EAAKvI,OAAS,EAAG2C,GAAK,EAAGA,IAChC,GAAI4F,EAAK5F,KAAO4M,GAAYhH,EAAK5F,GAAG4M,WAAaA,EAAU,CACzDgD,EAAmBhK,EAAK5F,GAAG4M,SAC3B+C,EAAW3P,EACX,MAIJ,GAAI2P,EAAW,EACb,OAAO5K,KAEQ,IAAb4K,EACF/J,EAAKiK,QAuHf,SAAmBjK,EAAMkK,GACvB,IAAK,IAAI9P,EAtHe2P,EAsHJhE,EAAI3L,EAAI,EAAGS,EAAImF,EAAKvI,OAAQsO,EAAIlL,EAAGT,GAAK,EAAG2L,GAAK,EAClE/F,EAAK5F,GAAK4F,EAAK+F,GACjB/F,EAAKmK,MAHP,CArHoBnK,GAEQ,IAAhBA,EAAKvI,SACPyP,EAAOrN,GAAQmG,EAAK,IAElBkH,EAAOa,gBACT5I,KAAKkI,KAAK,iBAAkBxN,EAAMmQ,GAAoBhD,GAG1D,OAAO7H,MAGbkH,EAAa/O,UAAU8S,mBACnB,SAA4BvQ,GAC1B,IAAIyP,EAAWpC,EAAQ9M,EAGvB,KADA8M,EAAS/H,KAAKmH,SAEZ,OAAOnH,KAGT,IAAK+H,EAAOa,eAUV,OATyB,IAArBxN,UAAU9C,QACZ0H,KAAKmH,QAAUb,EAAa,MAC5BtG,KAAKoH,aAAe,GACXW,EAAOrN,KACY,KAAtBsF,KAAKoH,aACTpH,KAAKmH,QAAUb,EAAa,aAErByB,EAAOrN,IAEXsF,KAIT,GAAyB,IAArB5E,UAAU9C,OAAc,CAC1B,IACI4S,EADAvE,EAAOD,EAAWqB,GAEtB,IAAK9M,EAAI,EAAGA,EAAI0L,EAAKrO,SAAU2C,EAEjB,oBADZiQ,EAAMvE,EAAK1L,KAEX+E,KAAKiL,mBAAmBC,GAK1B,OAHAlL,KAAKiL,mBAAmB,kBACxBjL,KAAKmH,QAAUb,EAAa,MAC5BtG,KAAKoH,aAAe,EACbpH,KAKT,GAAyB,mBAFzBmK,EAAYpC,EAAOrN,IAGjBsF,KAAK4I,eAAelO,EAAMyP,QACrB,GAAIA,EAET,IAAKlP,EAAIkP,EAAU7R,OAAS,EAAG2C,GAAK,EAAGA,IACrC+E,KAAK4I,eAAelO,EAAMyP,EAAUlP,IAIxC,OAAO+E,MAmBbkH,EAAa/O,UAAUgS,UAAY,SAAmBzP,GACpD,OAAOwO,EAAWlJ,KAAMtF,GAAA,IAG1BwM,EAAa/O,UAAUgT,aAAe,SAAsBzQ,GAC1D,OAAOwO,EAAWlJ,KAAMtF,GAAA,IAG1BwM,EAAaoC,cAAgB,SAAShB,EAAS5N,GAC7C,MAAqC,mBAA1B4N,EAAQgB,cACVhB,EAAQgB,cAAc5O,GAEtB4O,EAAcrN,KAAKqM,EAAS5N,IAIvCwM,EAAa/O,UAAUmR,cAAgBA,EAiBvCpC,EAAa/O,UAAUiT,WAAa,WAClC,OAAOpL,KAAKoH,aAAe,EAAIiE,QAAQC,QAAQtL,KAAKmH,SAAW,IChejE,qNCEA,SAASoE,EAAWtT,GAElB,OAcF,SAASuT,EAAQ3P,EAAK+K,EAAG6E,EAAO9T,GAC9B,GAAmB,iBAAA,IAARkE,EAAP,YAAA6P,EAAO7P,KAA4B,OAARA,EAAc,CAC3C,GAA0B,mBAAfA,EAAIuG,OAAuB,CACpC,GAAIvG,aAAe8P,EAEjB,YADA9P,EAAI0M,QAGN,QAAA,IAAI1M,EAAIuG,OAAOwJ,YACb,OAGJ,IAAK,IAAI3Q,EAAI,EAAGA,EAAIwQ,EAAMnT,OAAQ2C,IAChC,GAAIwQ,EAAMxQ,KAAOY,EAEf,YADAlE,EAAOiP,GAAK,IAAI+E,EAAO9P,EAAK+K,EAAGjP,IAKnC,IAAK,IAAIuT,KADTO,EAAM/N,KAAK7B,GACKA,EACV+D,OAAOzH,UAAU0O,eAAe5K,KAAKJ,EAAKqP,IAC5CM,EAAO3P,EAAIqP,GAAMA,EAAKO,EAAO5P,GAGjC4P,EAAMT,OAvBV,CAfS/S,EAAK,GAAI,GAAI,MACb4T,KAAKN,UAAUtT,GAExB,SAAS0T,EAAQ9P,EAAK+K,EAAGjP,GACvBqI,KAAKnE,IAAMA,EACXmE,KAAK4G,EAAIA,EACT5G,KAAKrI,OAASA,EACdqI,KAAKuI,MAAQ,EAVfuD,EAAiBP,EACjBA,EAAUQ,QAAUR,EAWpBI,EAAOxT,UAAUiK,OAAS,WAIxB,OAHqB,KAAfpC,KAAKuI,QACTvI,KAAKrI,OAAOqI,KAAK4G,GAAK5G,KAAKnE,KAEtB,cCFT,IAAAmQ,EALA,SAAoB/T,ICRH,SAAAgU,GAChB,IAAMC,EAAKC,SAASC,cAAc,YAElCF,EAAG9S,MAAQ6S,EAGXC,EAAGG,aAAa,WAAY,IAE5BH,EAAGI,MAAMC,QAAU,SACnBL,EAAGI,MAAM1B,SAAW,WACpBsB,EAAGI,MAAME,KAAO,UAChBN,EAAGI,MAAMG,SAAW,OAEpB,IAAMC,EAAYP,SAASQ,eACvBC,GAAA,EACAF,EAAUG,WAAa,IAC1BD,EAAgBF,EAAUI,WAAW,IAGtCX,SAASY,KAAKC,YAAYd,GAC1BA,EAAGe,SAGHf,EAAGgB,eAAiB,EACpBhB,EAAGiB,aAAelB,EAAM3T,OAExB,IAAI8U,GAAA,EACJ,IACCA,EAAUjB,SAASkB,YAAY,QAC9B,MAAO5F,KAET0E,SAASY,KAAKO,YAAYpB,GAEtBU,IACHF,EAAUa,kBACVb,EAAUc,SAASZ,IDzBnBa,CARF,SAAuBxV,GACrB,IACE,OAAO4T,KAAKN,UAAUtT,GACtB,MAAOT,KAHX,CAOyBS,IAAQ6T,EAAkB7T,KEPnDyV,EAEA,SAAe1E,GACb,IAAI2E,EAAgB3E,GAA0B,iBAAVA,EAChC4E,EAAaD,GAAsC,IAArBvS,UAAU9C,QAA4C,IAA5B0Q,EAAMhN,QAAQ,UAErEgN,GAA0B,mBAAVA,IAAsBA,EAAQ6E,OAAOC,KAAK9E,OAC3D4E,GAAY,GAAGlQ,KAAKzB,KAAKb,UAAW,CAAC4N,MAAO6E,OAAOC,KAAK9E,QAE5DgD,EAAU2B,EJVZ,SAAiBnE,EAAMC,GACrB,OAAOrO,UAAU9C,QAAU,EACvBiR,EAAMC,EAAND,CAAYE,GACZF,EAAMC,IIOsBlK,MAAMU,KAAM5E,WAAa4N,ICZ3D+E,EAIA,WAGI,IAFA,IAAInM,EAAS,GAEJ3G,EAAI,EAAGA,EAAIG,UAAU9C,OAAQ2C,IAAK,CACvC,IAAI+S,EAAS5S,UAAUH,GAEvB,IAAK,IAAIiQ,KAAO8C,EACRnH,EAAe5K,KAAK+R,EAAQ9C,KAC5BtJ,EAAOsJ,GAAO8C,EAAO9C,IAKjC,OAAOtJ,GAfPiF,EAAiBjH,OAAOzH,UAAU0O,mECDlCoH,EAES,CACXC,MAAO,eACPC,MAAO,eACPC,KAAM,SACN5F,KAAM,eACN7I,MAAO,eACP0O,MAAO,gBAGLC,EAAS,CACXJ,MAAO,GACPC,MAAO,GACPC,KAAM,GACN5F,KAAM,GACN7I,MAAO,GACP0O,MAAO,IAGLE,EAAgB,CAClBC,WAAY,UACZC,WAAY,UACZC,MAAO,UACPC,IAAK,UACLC,MAAO,UACPC,OAAQ,UACRC,KAAM,UACNC,QAAS,UACTC,KAAM,UACNC,MAAO,UACPC,YAAa,WAKf,SAASC,EAAY9I,EAAM+I,GAEzB,GADAA,EAAOA,GAAQ,KACTpP,gBAAgBmP,GAAa,OAAO,IAAIA,EAAW9I,EAAM+I,GAI/DpP,KAAKqP,MAAQhJ,GAAQ,GACrBrG,KAAKsP,QAAUvB,EAAMQ,EAAea,EAAKG,QAAU,IAEnD,IACEvP,KAAKwP,SAAW3B,OAAO4B,aAAaC,QAAQ,aAAe,OAC3D,MAAOlY,GACPwI,KAAKwP,SAAW,OAGlBxP,KAAK2P,UAAYrB,EAAOtO,KAAKwP,UAiG/B,SAASI,EAAOA,GACd,MAAO,UAAYA,EAAQ,IAW7B,SAASC,EAAKrS,GACZ,OAAsB,IAAfA,EAAIlF,OAAe,EAAIkF,EAAMA,ECrItC,SAASsS,EAAOtS,GACd,IAAIrB,EAAMqB,EAAI0I,MAAM,MAGpB,OAFA/J,EAAMA,EAAI7D,OAAS,EAAI6D,EAAIxC,MAAM,GAAKwC,GAClC,GAAKA,EAAI,GAAGuF,QAAQ,WAAY,IAC7B,KAAOvF,EAAI4T,KAAK,MDEzBC,EAAiBb,EAoBjBA,EAAWhX,UAAU+V,MAAQ,WAE3B,IADA,IAAIpF,EAAO,CAAE,SACJ7N,EAAI,EAAGX,EAAMc,UAAU9C,OAAQ2C,EAAIX,EAAKW,IAAK6N,EAAKpL,KAAKtC,UAAUH,IAC1E+E,KAAKiQ,OAAO3Q,MAAMU,KAAM8I,IAG1BqG,EAAWhX,UAAUgW,MAAQ,WAE3B,IADA,IAAIrF,EAAO,CAAE,SACJ7N,EAAI,EAAGX,EAAMc,UAAU9C,OAAQ2C,EAAIX,EAAKW,IAAK6N,EAAKpL,KAAKtC,UAAUH,IAC1E+E,KAAKiQ,OAAO3Q,MAAMU,KAAM8I,IAG1BqG,EAAWhX,UAAUiW,KAAO,WAE1B,IADA,IAAItF,EAAO,CAAE,QACJ7N,EAAI,EAAGX,EAAMc,UAAU9C,OAAQ2C,EAAIX,EAAKW,IAAK6N,EAAKpL,KAAKtC,UAAUH,IAC1E+E,KAAKiQ,OAAO3Q,MAAMU,KAAM8I,IAG1BqG,EAAWhX,UAAUqQ,KAAO,WAE1B,IADA,IAAIM,EAAO,CAAE,QACJ7N,EAAI,EAAGX,EAAMc,UAAU9C,OAAQ2C,EAAIX,EAAKW,IAAK6N,EAAKpL,KAAKtC,UAAUH,IAC1E+E,KAAKiQ,OAAO3Q,MAAMU,KAAM8I,IAG1BqG,EAAWhX,UAAUwH,MAAQ,WAE3B,IADA,IAAImJ,EAAO,CAAE,SACJ7N,EAAI,EAAGX,EAAMc,UAAU9C,OAAQ2C,EAAIX,EAAKW,IAAK6N,EAAKpL,KAAKtC,UAAUH,IAC1E+E,KAAKiQ,OAAO3Q,MAAMU,KAAM8I,IAG1BqG,EAAWhX,UAAUkW,MAAQ,WAE3B,IADA,IAAIvF,EAAO,CAAE,SACJ7N,EAAI,EAAGX,EAAMc,UAAU9C,OAAQ2C,EAAIX,EAAKW,IAAK6N,EAAKpL,KAAKtC,UAAUH,IAC1E+E,KAAKiQ,OAAO3Q,MAAMU,KAAM8I,IAG1BqG,EAAWhX,UAAU8X,OAAS,SAAUC,GACtC,KAAI5B,EAAO4B,GAASlQ,KAAK2P,WAAzB,CAEA,IA4DIQ,EA5DAC,EA6DQP,GADRM,EAAO,IAAIE,MACMC,WAAWpV,YAGjB,IAFD2U,EAAIM,EAAKI,aAAarV,YAEL,IADjB2U,EAAIM,EAAKK,aAAatV,YA9DhCuV,EAAQxC,EAAOiC,GACf7J,EAAOrG,KAAKqP,OAAS,UAErBqB,EAAsB,UAAVR,GAAqBA,EAAM7B,MACvCrO,KAAKsP,QAAQX,IACH,SAAVuB,EACElQ,KAAKsP,QAAQT,OACb7O,KAAKsP,QAAQV,MAEf+B,EAAO,GACP7H,EAAO,CAAE,MACT8H,EAAM,QAAUH,EAAQ,QAE5B3H,EAAKpL,KAAKkS,EAAM5P,KAAKsP,QAAQJ,aAAckB,GAC3CtH,EAAKpL,KAAKkS,EAAM5P,KAAKsP,QAAQP,SAAU1I,GAEvC,IAAK,IAAIpL,EAAI,EAAGX,EAAMc,UAAU9C,OAAQ2C,EAAIX,EAAKW,IAAK,CACpD,IAAIlC,EAAMqC,UAAUH,GACD,iBAARlC,EACC,IAANkC,GAEF2V,GAAO,QACP9H,EAAKpL,KAAKkS,EAAMc,IAChB5H,EAAKpL,KAAK3E,IACD,MAAM8X,KAAK9X,IAEpB6X,GAAO,QACP9H,EAAKpL,KAAKkS,EAAM5P,KAAKsP,QAAQJ,cAC7BpG,EAAKpL,KAAK3E,KAGV6X,GAAO,QACP9H,EAAKpL,KAAKkS,EAAM5P,KAAKsP,QAAQL,QAC7BnG,EAAKpL,KAAK3E,IAEY,iBAARA,GAChB6X,GAAO,QACP9H,EAAKpL,KAAKkS,EAAM5P,KAAKsP,QAAQP,UAC7BjG,EAAKpL,KAAK3E,IAEV4X,EAAKjT,KAAK3E,GAId+P,EAAK,GAAK8H,EACVD,EAAKG,QAAQ,SAAU7Y,GACrB6Q,EAAKpL,KAAKzF,KAKZ8O,SAAS5O,UAAUmH,MAAMA,MAAMI,QAAQqR,IAAK,CAACrR,QAASoJ,gGElJpDkI,EAIiB,0DAGrBC,EAEA,SAAgBjI,EAAOV,EAAS4I,EAAKC,GACnC,IDNqCC,ECMjCL,EAAMf,EAAW,iBACjBqB,EAA2C,UAAjCxD,OAAO4B,aAAaD,SAC9B6B,GAASN,EAAI3C,KAAK4C,GDReI,ECUb,SAAUE,EAAMlY,EAAOmY,GACxCF,IACLE,EAAWA,EAASrL,MAAM,MAAM,GAAGxE,QAAQ,MAAO,IAClDqP,EAAI3C,KAAK,SAAWkD,EAAMlY,EAAO,KAAOmY,KAH1CvI,EDNO,IAAIwI,MCMMxI,EDNQ,CACvBnD,IAAK,SAAU5N,EAAKwZ,EAAMrY,GACxB,IACI8U,EAAQ4B,GADF,IAAI3N,OACQsJ,OAGtB,OAFA2F,EAASK,EAAMrY,EAAO8U,GACtBjW,EAAIwZ,GAAQrY,GAAA,GAGdsY,eAAgB,SAAU9P,EAAQ6P,GAChC,IACIvD,EAAQ4B,GADF,IAAI3N,OACQsJ,OAEtB,OADA2F,EAASK,OAAA,EAAiBvD,GACtBuD,KAAQ7P,WACHA,EAAO6P,IAAA,MCDpBP,EAAIlI,MAAQA,EAEZpJ,OAAOC,eAAegO,OAAOC,KAAM,QAAS,CAC1C/N,IAAK,WAIH,OAHA8N,OAAO4B,aAAaD,SAAW,QAC/B2B,EAAajJ,KAAK,SAAA,GAClBmJ,GAAA,EACOL,GAETnL,IAAK,SAAU8L,GAEb9D,OAAO4B,aAAaD,SAAWmC,EAAO,QAAU,OAChDN,EAAUM,EACVR,EAAajJ,KAAK,QAASmJ,GACvBA,EAASN,EAAI3C,KAAK4C,GACjBD,EAAI3C,KA9BO,gECoBtB,SAASwD,EAAOC,EAAKC,GAEnBpS,QAAQqR,IAAI,YAAcc,EAAK,iBAAmB,UAAOC,GAG3D,SAASC,KCnBT,IDXA,IAAAC,EAEA,WACEpS,OAAOC,eAAegO,OAAOC,KAAM,OAAQ,CACzC/N,IAIF,WAaE,OAZAkS,WAAW,WACTL,EAAM,OAAQ,iDACdA,EAAM,QAAS,2BACfA,EAAM,OAAQ,sCACdA,EAAM,OAAQ,4BACdA,EAAM,MAAO,sCACbA,EAAM,KAAM,4CACZA,EAAM,OAAQ,iDACdA,EAAM,OAAQ,iCACdA,EAAM,QAAS,gCACfA,EAAM,UAAW,uCAChB,GACI,yBAhBP/L,IAAKkM,QCHTvY,WAuCA,SAAqB0Y,GACnB,IAAIC,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAC3B,OAAuC,GAA9BE,EAAWC,GAAuB,EAAKA,GA1ClDrM,YAiDA,SAAsBiM,GAepB,IAdA,IAAIK,EACAJ,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAEvBhW,EAAM,IAAIqW,EAVhB,SAAsBN,EAAKG,EAAUC,GACnC,OAAuC,GAA9BD,EAAWC,GAAuB,EAAKA,EADlD,CAUgC,EAAKD,EAAUC,IAEzCG,EAAU,EAGVnY,EAAMgY,EAAkB,EACxBD,EAAW,EACXA,EAEKpX,EAAI,EAAGA,EAAIX,EAAKW,GAAK,EAC5BsX,EACGG,EAAUR,EAAIvU,WAAW1C,KAAO,GAChCyX,EAAUR,EAAIvU,WAAW1C,EAAI,KAAO,GACpCyX,EAAUR,EAAIvU,WAAW1C,EAAI,KAAO,EACrCyX,EAAUR,EAAIvU,WAAW1C,EAAI,IAC/BkB,EAAIsW,KAAcF,GAAO,GAAM,IAC/BpW,EAAIsW,KAAcF,GAAO,EAAK,IAC9BpW,EAAIsW,KAAmB,IAANF,EAmBnB,OAhBwB,IAApBD,IACFC,EACGG,EAAUR,EAAIvU,WAAW1C,KAAO,EAChCyX,EAAUR,EAAIvU,WAAW1C,EAAI,KAAO,EACvCkB,EAAIsW,KAAmB,IAANF,GAGK,IAApBD,IACFC,EACGG,EAAUR,EAAIvU,WAAW1C,KAAO,GAChCyX,EAAUR,EAAIvU,WAAW1C,EAAI,KAAO,EACpCyX,EAAUR,EAAIvU,WAAW1C,EAAI,KAAO,EACvCkB,EAAIsW,KAAcF,GAAO,EAAK,IAC9BpW,EAAIsW,KAAmB,IAANF,GAGZpW,GA1FToC,cAiHA,SAAwBoU,GAQtB,IAPA,IAAIJ,EACAjY,EAAMqY,EAAMra,OACZsa,EAAatY,EAAM,EACnBuY,EAAQ,GAIH5X,EAAI,EAAG6X,EAAOxY,EAAMsY,EAAY3X,EAAI6X,EAAM7X,GAH9B,MAInB4X,EAAMnV,KAAKqV,EACTJ,EAAO1X,EAAIA,EALM,MAKgB6X,EAAOA,EAAQ7X,EAL/B,QA2BrB,OAjBmB,IAAf2X,GACFL,EAAMI,EAAMrY,EAAM,GAClBuY,EAAMnV,KACJsV,EAAOT,GAAO,GACdS,EAAQT,GAAO,EAAK,IACpB,OAEsB,IAAfK,IACTL,GAAOI,EAAMrY,EAAM,IAAM,GAAKqY,EAAMrY,EAAM,GAC1CuY,EAAMnV,KACJsV,EAAOT,GAAO,IACdS,EAAQT,GAAO,EAAK,IACpBS,EAAQT,GAAO,EAAK,IACpB,MAIGM,EAAM9C,KAAK,MA/IhBiD,EAAS,GACTN,EAAY,GACZF,EAA4B,oBAAf3Z,WAA6BA,WAAa8B,MAEvDmL,EAAO,mEACF7K,EAAI,EAAGX,EAAMwL,EAAKxN,OAAQ2C,EAAIX,IAAOW,EAC5C+X,EAAO/X,GAAK6K,EAAK7K,GACjByX,EAAU5M,EAAKnI,WAAW1C,IAAMA,EAQlC,SAASmX,EAASF,GAChB,IAAI5X,EAAM4X,EAAI5Z,OAEd,GAAIgC,EAAM,EAAI,EACZ,MAAM,IAAI6H,MAAM,kDAKlB,IAAIkQ,EAAWH,EAAIlW,QAAQ,KAO3B,OANkB,IAAdqW,IAAiBA,EAAW/X,GAMzB,CAAC+X,EAJcA,IAAa/X,EAC/B,EACA,EAAK+X,EAAW,GAqEtB,SAASU,EAAaJ,EAAOvU,EAAOC,GAGlC,IAFA,IAAIkU,EARoBU,EASpBC,EAAS,GACJjY,EAAImD,EAAOnD,EAAIoD,EAAKpD,GAAK,EAChCsX,GACII,EAAM1X,IAAM,GAAM,WAClB0X,EAAM1X,EAAI,IAAM,EAAK,QACP,IAAf0X,EAAM1X,EAAI,IACbiY,EAAOxV,KAdFsV,GADiBC,EAeMV,IAdT,GAAK,IACxBS,EAAOC,GAAO,GAAK,IACnBD,EAAOC,GAAO,EAAI,IAClBD,EAAa,GAANC,IAaT,OAAOC,EAAOnD,KAAK,IAhGrB2C,EAAU,IAAI/U,WAAW,IAAM,GAC/B+U,EAAU,IAAI/U,WAAW,IAAM,UCnB/BnB,KAAe,SAAUxC,EAAQ8C,EAAQqW,EAAMC,EAAMC,GACnD,IAAI7b,EAAGmE,EACH2X,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,GAAS,EACTxY,EAAIkY,EAAQE,EAAS,EAAK,EAC1BK,EAAIP,GAAQ,EAAI,EAChBQ,EAAI3Z,EAAO8C,EAAS7B,GAOxB,IALAA,GAAKyY,EAELlc,EAAImc,GAAM,IAAOF,GAAU,EAC3BE,KAAQF,EACRA,GAASH,EACFG,EAAQ,EAAGjc,EAAS,IAAJA,EAAWwC,EAAO8C,EAAS7B,GAAIA,GAAKyY,EAAGD,GAAS,GAKvE,IAHA9X,EAAInE,GAAM,IAAOic,GAAU,EAC3Bjc,KAAQic,EACRA,GAASL,EACFK,EAAQ,EAAG9X,EAAS,IAAJA,EAAW3B,EAAO8C,EAAS7B,GAAIA,GAAKyY,EAAGD,GAAS,GAEvE,GAAU,IAANjc,EACFA,EAAI,EAAIgc,MACH,CAAA,GAAIhc,IAAM+b,EACf,OAAO5X,EAAIiY,IAAsB,EAAA,GAAdD,GAAK,EAAI,GAE5BhY,GAAQ8C,KAAKmF,IAAI,EAAGwP,GACpB5b,GAAQgc,EAEV,OAAQG,GAAK,EAAI,GAAKhY,EAAI8C,KAAKmF,IAAI,EAAGpM,EAAI4b,IAG5C1Z,MAAgB,SAAUM,EAAQZ,EAAO0D,EAAQqW,EAAMC,EAAMC,GAC3D,IAAI7b,EAAGmE,EAAGqC,EACNsV,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBM,EAAe,KAATT,EAAc3U,KAAKmF,IAAI,GAAI,IAAMnF,KAAKmF,IAAI,GAAI,IAAM,EAC1D3I,EAAIkY,EAAO,EAAKE,EAAS,EACzBK,EAAIP,EAAO,GAAK,EAChBQ,EAAIva,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,EAmC1D,IAjCAA,EAAQqF,KAAKqV,IAAI1a,GAEbwQ,MAAMxQ,IAAUA,IAAU,EAAA,GAC5BuC,EAAIiO,MAAMxQ,GAAS,EAAI,EACvB5B,EAAI+b,IAEJ/b,EAAIiH,KAAKsV,MAAMtV,KAAKsS,IAAI3X,GAASqF,KAAKuV,KAClC5a,GAAS4E,EAAIS,KAAKmF,IAAI,GAAIpM,IAAM,IAClCA,IACAwG,GAAK,IAGL5E,GADE5B,EAAIgc,GAAS,EACNK,EAAK7V,EAEL6V,EAAKpV,KAAKmF,IAAI,EAAG,EAAI4P,IAEpBxV,GAAK,IACfxG,IACAwG,GAAK,GAGHxG,EAAIgc,GAASD,GACf5X,EAAI,EACJnE,EAAI+b,GACK/b,EAAIgc,GAAS,GACtB7X,GAAMvC,EAAQ4E,EAAK,GAAKS,KAAKmF,IAAI,EAAGwP,GACpC5b,GAAQgc,IAER7X,EAAIvC,EAAQqF,KAAKmF,IAAI,EAAG4P,EAAQ,GAAK/U,KAAKmF,IAAI,EAAGwP,GACjD5b,EAAI,IAID4b,GAAQ,EAAGpZ,EAAO8C,EAAS7B,GAAS,IAAJU,EAAUV,GAAKyY,EAAG/X,GAAK,IAAKyX,GAAQ,GAI3E,IAFA5b,EAAKA,GAAK4b,EAAQzX,EAClB2X,GAAQF,EACDE,EAAO,EAAGtZ,EAAO8C,EAAS7B,GAAS,IAAJzD,EAAUyD,GAAKyY,EAAGlc,GAAK,IAAK8b,GAAQ,GAE1EtZ,EAAO8C,EAAS7B,EAAIyY,IAAU,IAAJC,gPClFxBM,EAAS,WACb,aAEA,SAASC,EAAYjc,EAAKyC,GACxB,OAAe,MAARA,GAAgBzC,aAAeyC,EAGxC,IAAIyZ,EASAC,EAOAC,EAfJ,IACEF,EAAYG,IACZ,MAAMC,GAGNJ,EAAY,aAId,IACEC,EAAYI,IACZ,MAAMD,GACNH,EAAY,aAId,IACEC,EAAgBI,QAChB,MAAMF,GACNF,EAAgB,aAwBlB,SAASJ,EAAMtc,EAAQ+c,EAAUC,EAAOxc,EAAWyc,GACzB,iBAAA,IAAbF,EAAP,YAAA5c,EAAO4c,MACTC,EAAQD,EAASC,MACjBxc,EAAYuc,EAASvc,UACrByc,EAAuBF,EAASE,qBAChCF,EAAWA,EAASA,UAItB,IAAIG,EAAa,GACbC,EAAc,GAEdC,OAA6B,IAAV3c,EA0IvB,YAAA,IAxIWsc,IACTA,GAAA,QAAW,IAEFC,IACTA,EAAQ,EAAA,GAGV,SAASK,EAAOrd,EAAQgd,GAEtB,GAAe,OAAXhd,EACF,OAAO,KAET,GAAc,IAAVgd,EACF,OAAOhd,EAET,IAAIsd,EACAzO,EACJ,GAAqB,gBAAA,IAAV7O,EAAP,YAAAG,EAAOH,IACT,OAAOA,EAGT,GAAIuc,EAAYvc,EAAQwc,GACtBc,EAAQ,IAAId,OACP,GAAID,EAAYvc,EAAQyc,GAC7Ba,EAAQ,IAAIb,OACP,GAAIF,EAAYvc,EAAQ0c,GAC7BY,EAAQ,IAAIZ,EAAc,SAAUa,EAASC,GAC3Cxd,EAAOyd,KAAK,SAAShc,GACnB8b,EAAQF,EAAO5b,EAAOub,EAAQ,KAC7B,SAASlN,GACV0N,EAAOH,EAAOvN,EAAKkN,EAAQ,aAG1B,GAAIV,EAAMoB,UAAU1d,GACzBsd,EAAQ,QACH,GAAIhB,EAAMqB,WAAW3d,GAC1Bsd,EAAQ,IAAIM,OAAO5d,EAAOqW,OAAQwH,EAAiB7d,IAC/CA,EAAO8d,YAAWR,EAAMQ,UAAY9d,EAAO8d,gBAC1C,GAAIxB,EAAMyB,SAAS/d,GACxBsd,EAAQ,IAAI5E,KAAK1Y,EAAOge,eACnB,CAAA,GAAIZ,GAAa3c,EAAOiC,SAAS1C,GAStC,OANEsd,EAFE7c,EAAOc,YAEDd,EAAOc,YAAYvB,EAAOW,QAG1B,IAAIF,EAAOT,EAAOW,QAE5BX,EAAO6C,KAAKya,GACLA,EACEf,EAAYvc,EAAQwK,OAC7B8S,EAAQrV,OAAO2G,OAAO5O,QAAA,IAEXQ,GACTqO,EAAQ5G,OAAOgW,eAAeje,GAC9Bsd,EAAQrV,OAAO2G,OAAOC,KAGtByO,EAAQrV,OAAO2G,OAAOpO,GACtBqO,EAAQrO,GAIZ,GAAIuc,EAAU,CACZ,IAAI3J,EAAQ8J,EAAW7Y,QAAQrE,GAE/B,IAAc,GAAVoT,EACF,OAAO+J,EAAY/J,GAErB8J,EAAWnX,KAAK/F,GAChBmd,EAAYpX,KAAKuX,GAiBnB,IAAK,IAAIha,KAdLiZ,EAAYvc,EAAQwc,IACtBxc,EAAOmZ,QAAQ,SAAS1X,EAAO8R,GAC7B,IAAI2K,EAAWb,EAAO9J,EAAKyJ,EAAQ,GAC/BmB,EAAad,EAAO5b,EAAOub,EAAQ,GACvCM,EAAMpP,IAAIgQ,EAAUC,KAGpB5B,EAAYvc,EAAQyc,IACtBzc,EAAOmZ,QAAQ,SAAS1X,GACtB,IAAI2c,EAAaf,EAAO5b,EAAOub,EAAQ,GACvCM,EAAMe,IAAID,KAIApe,EAAQ,CACpB,IAAIse,EACAzP,IACFyP,EAAQrW,OAAOsW,yBAAyB1P,EAAOvL,IAG7Cgb,GAAsB,MAAbA,EAAMpQ,MAGnBoP,EAAMha,GAAK+Z,EAAOrd,EAAOsD,GAAI0Z,EAAQ,IAGvC,GAAI/U,OAAOuW,sBACT,CAAA,IAAIC,EAAUxW,OAAOuW,sBAAsBxe,GAC3C,IAASsD,EAAI,EAAGA,EAAImb,EAAQ9d,OAAQ2C,IAAK,CAGvC,IAAIob,EAASD,EAAQnb,MACjBqb,EAAa1W,OAAOsW,yBAAyBve,EAAQ0e,KACtCC,EAAWxW,YAAe8U,KAG7CK,EAAMoB,GAAUrB,EAAOrd,EAAO0e,GAAS1B,EAAQ,GAC1C2B,EAAWxW,YACdF,OAAOC,eAAeoV,EAAOoB,EAAQ,CACnCvW,YAAA,MAMR,GAAI8U,EACF,CAAA,IAAI2B,EAAmB3W,OAAO4W,oBAAoB7e,GAClD,IAASsD,EAAI,EAAGA,EAAIsb,EAAiBje,OAAQ2C,IAAK,CAChD,IACIqb,EADAG,EAAeF,EAAiBtb,IAChCqb,EAAa1W,OAAOsW,yBAAyBve,EAAQ8e,KACvCH,EAAWxW,aAG7BmV,EAAMwB,GAAgBzB,EAAOrd,EAAO8e,GAAe9B,EAAQ,GAC3D/U,OAAOC,eAAeoV,EAAOwB,EAAc,CACzC3W,YAAA,MAKN,OAAOmV,EA9HT,CAiIctd,EAAQgd,GAqBxB,SAAS+B,EAAWlP,GAClB,OAAO5H,OAAOzH,UAAU+C,SAASe,KAAKuL,GAmBxC,SAASgO,EAAiBmB,GACxB,IAAIC,EAAQ,GAIZ,OAHID,EAAGE,SAAQD,GAAS,KACpBD,EAAGG,aAAYF,GAAS,KACxBD,EAAGI,YAAWH,GAAS,KACpBA,EAIT,OAxCA3C,EAAM+C,eAAiB,SAAwBrf,GAC7C,GAAe,OAAXA,EACF,OAAO,KAET,IAAIqG,EAAI,aAER,OADAA,EAAE7F,UAAYR,EACP,IAAIqG,GAQbiW,EAAMyC,WAAaA,EAKnBzC,EAAMyB,SAHN,SAAkBlO,GAChB,MAAoB,iBAAA,IAANA,EAAP,YAAA1P,EAAO0P,KAAoC,kBAAlBkP,EAAWlP,IAO7CyM,EAAMoB,UAHN,SAAmB7N,GACjB,MAAoB,iBAAA,IAANA,EAAP,YAAA1P,EAAO0P,KAAoC,mBAAlBkP,EAAWlP,IAO7CyM,EAAMqB,WAHN,SAAoB9N,GAClB,MAAoB,iBAAA,IAANA,EAAP,YAAA1P,EAAO0P,KAAoC,oBAAlBkP,EAAWlP,IAW7CyM,EAAMuB,iBAAmBA,EAElBvB,EA3PM,GA8PS,WAAlBnc,EAAOmf,IAAuBA,EAAAvf,UAChCuf,EAAAvf,QAAiBuc,8FC7PfiD,EAA8B,oBAAXrJ,OAavB,SAASsJ,EAAeD,GACtBlX,KAAKkX,UAAYA,EACjBlX,KAAKoX,QAAUpX,KAAKkX,WAAarJ,OAAOwJ,oBACxCrX,KAAKsX,OAAStX,KAAKoX,QAAUvJ,OAAOwJ,oBAAoBvQ,KAAK+G,QAAU7N,KAAKiS,WAC5EjS,KAAKuX,WAAA,EACLvX,KAAKwX,MAAQ,GAGfL,EAAchf,UAAUuF,KAAO,SAAU+Z,GAGvCzX,KAAKwX,MAAM9Z,KAAK+Z,GAChBzX,KAAK0X,YAGPP,EAAchf,UAAUuf,SAAW,WACjC,IAAI1X,KAAKuX,UAAT,CAEAvX,KAAKuX,WAAA,EACL,IAAIrN,EAAOlK,KACXA,KAAKsX,OAAO,SAAUK,GAEpB,KAAOzN,EAAKsN,MAAMlf,QAAUqf,EAAaC,gBAAkB,GACpD1N,EAAKsN,MAAM1M,OAAXZ,CACFyN,GAELzN,EAAKqN,WAAA,EACDrN,EAAKsN,MAAMlf,QAAQ4R,EAAKwN,eAIhCP,EAAchf,UAAU8Z,WAAa,SAAUwF,GAC7CxF,WAAWwF,EAAI,EAAG,CAChBG,cAAe,WACb,OAAO,MCvCb,IAAAC,EAAiB,SAAsB1b,EAAK2b,EAAUC,GACpD,IAAI9c,EAAG3C,EAAS6D,EAAI7D,OAEpB,KAAIwf,GAAYxf,GAA0B,IAAhByf,GAA1B,CAMA,IAAIzd,EAAMhC,GAFVyf,EAAeD,EAAWC,EAAczf,EAASA,EAASwf,EAAWC,GAIrE,IAAK9c,EAAI6c,EAAU7c,EAAIX,IAAOW,EAC5BkB,EAAIlB,GAAKkB,EAAIlB,EAAI8c,GAGnB5b,EAAI7D,OAASgC,ICzBX0d,IFsDJC,EAlDA,WACE,IAAID,EAOJ,OANId,GACGrJ,OAAOqK,iBAAgBrK,OAAOqK,eAAiB,IAAIf,GAAA,IACxDa,EAAYnK,OAAOqK,gBAEnBF,EAAY,IAAIb,EAEXa,METLG,GADanI,EACK,QAClBoI,GAEqB,IAqEzB,SAASC,MAnET,IAAAC,GAEA,SAActP,EAAOV,EAAS4I,EAAKC,GACjC,IAAIoH,EAA+C,UAAjC1K,OAAO4B,aAAaD,SAClCgJ,EAAU,GACVvd,EAAI,EACJwd,GAAA,EAwBJ,SAASC,IAWP,OAVAzG,WAAW,WACTvS,QAAQiZ,MAAMH,IACb,GAEOvd,EAAI,KADK,IAANA,EAAU,QAAU,UACJ,+BAAiCmd,GAAqB,MAEjF,IADEG,EACK,iDAEA,2DAKX,SAASK,EAAOvS,EAAMxL,EAAMmO,GAC1BhJ,KAAKqG,KAAOA,EACZrG,KAAKnF,UAAA,IAAOA,EAAqB,YAAcA,EAC/CmF,KAAKgJ,MAAQuP,EAKf,SAAmBvP,GACjB,IACE,IAAI6P,EAAS5B,EAAMjO,GAEnB,OADKyP,IAAYA,GAAA,GACVI,EACP,MAAOC,GAKP,OAJIL,IACFN,GAAK3P,KAAK,8FACViQ,GAAA,GAEK,oBAVX,CAJezP,GACT,aAzCNmI,EAAa3G,GAAG,QAAS,SAAUmH,GACjC4G,EAAc5G,IAGhB9D,OAAOC,KAAKiL,SAAWP,EACvB3K,OAAOC,KAAK0K,QAAUE,EAEtB9Y,OAAOC,eAAegO,OAAOC,KAAM,MAAO,CAAE/N,IAAK2Y,EAAa7S,IAAKwS,KACnEzY,OAAOC,eAAegO,OAAOC,KAAM,UAAW,CAAE/N,IAAK2Y,EAAa7S,IAAKwS,KAEvE/P,EAAQkC,GAAG,IAAK,SAAUnE,EAAMxL,GAC9BI,GAAK,EACL,IAAI+d,EAAQ,IAAIJ,EAAMvS,EAAMxL,EAAMmO,GAClCwP,EAAQ9a,KAAKsb,GACbhB,GAAUta,KAAK,WACb,IAAIpF,EAASkgB,EAAQlgB,OACjBA,EAAS8f,IACXP,EAAYW,EAAS,EAAGlgB,EAAS8f,wDCjCrCa,GAAYhB,IAGZiB,GAAa,CACf,QACA,UACA,aACA,WACA,YAGFC,GAEA,SAAwB1B,GAGtB,IAAI2B,EAAwC,oBAAXvL,QAA0BA,OAAOuL,oBAClE,GAAKA,EAAL,CAGA,GAAIvL,OAAOwL,eAET,OADAxL,OAAOwL,eAAe3b,KAAK+Z,GACpB6B,EAGTzL,OAAOwL,eAAiB,CAAC5B,GACzB,IAAI8B,EAAW,IAAIH,EAAoBI,GAMvC,OALAvH,WAAW,WACTuH,EAAa3L,OAAO4L,aACpBF,EAASG,QAAQ,CAAER,WAAYA,MAC9B,GAEII,EAEP,SAASA,IACPzL,OAAOwL,eAAeM,OAAO9L,OAAOwL,eAAerd,QAAQyb,GAAK,GAGlE,SAAS+B,EAAc3Y,GACrBA,EAAK+Y,aAAa9I,QAAQ,SAAUkI,GAClCC,GAAUvb,KAAK,YAYnB,SAAgBsb,GACd,IAAIte,EAAOse,EAAMa,UACJ,YAATnf,EAAoBmT,OAAO4L,YAAYK,cAAcd,EAAM3S,MAC7C,aAAT3L,GAAqBmT,OAAO4L,YAAYM,uBAHnD,CAXYf,GACNnL,OAAOwL,eAAevI,QAAQ,SAAU2G,GACtCA,EAAGuB,gEC3CTgB,GACY/B,IAKhB,SAASgC,GAAW3R,GAClB,KAAMtI,gBAAgBia,IAAY,OAAO,IAAIA,GAAU3R,GAIvDtI,KAAKkX,UAA8B,oBAAXrJ,OACxB7N,KAAKka,gBAAkBla,KAAKkX,WAAarJ,OAAOwJ,oBAChDrX,KAAKma,eAAiBna,KAAKkX,WACzBrJ,OAAO4L,aACP5L,OAAO4L,YAAYW,iBAErBpa,KAAKsI,QAAUA,EACftI,KAAKmK,UAAY,GACjBnK,KAAKhG,OAAS,CACZqgB,IAAK,GACLC,OAAQ,GACRvS,OAAQ,IAlBZwS,GAAiBN,GAsBjBA,GAAU9hB,UAAUqS,GAAK,SAAUnE,EAAM0D,GACvC/J,KAAKmK,UAAU9D,GAAQ0D,GAGzBkQ,GAAU9hB,UAAUiG,MAAQ,WAC1B,IAAI8L,EAAOlK,KACPA,KAAKma,iBACPtM,OAAO4L,YAAYe,2BAA6B,WAC9C,IAAI3S,EAAWqC,EAAKC,UAAU,+BAC1BtC,GAAUA,MAKlBsR,GAAc,SAAUsB,GACtB,GAAKA,GACoB,YAArBA,EAAOZ,UAAX,CAEA,IAAIa,EAAYD,EAAOpU,KACvB,GAAI,cAAcwK,KAAK6J,GACrBxQ,EAAKlQ,OAAOsgB,OAAOK,MAAQF,OACtB,GAAI,cAAc5J,KAAK6J,GAC5BxQ,EAAKlQ,OAAOsgB,OAAOM,MAAQH,OACtB,GAAI,eAAe5J,KAAK6J,GAC7BxQ,EAAKlQ,OAAOsgB,OAAOA,OAASG,OACvB,GAAI,YAAY5J,KAAK6J,GAC1BxQ,EAAKlQ,OAAOqgB,IAAI3c,KAAK+c,QAChB,GAAI,aAAa5J,KAAK6J,KAAe,OAAO7J,KAAK6J,GAAY,CAClE,IAAIG,EAAgB3Q,EAAKC,UAAL2Q,MACpB,GAAID,EAAe,CACjB,IAAIE,EAAaL,EAAUM,MAAM,wBAAwB,GACzD,GAAmB,WAAfD,GAA0C,qBAAfA,EAAmC,OAElE,IAAIE,EAAUP,EAAUM,MAAM,aAAa,GACvCngB,EAAOqP,EAAKlQ,OAAO+N,OAAOkT,GAE9B/Q,EAAKlQ,OAAO+N,OAAOkT,GAAW,KAC9BJ,EAAcE,EAAYlgB,EAAM4f,IAIpC,IAAIS,EAAOhR,EAAKlQ,OAAOsgB,OACvB,GAAIY,EAAKZ,QAAUY,EAAKN,OAASM,EAAKP,MAAO,CAC3C,IAAIQ,EAAiBjR,EAAKC,UAALmQ,OACrB,IAAKa,EAAgB,OAErB,IADA,IAAIC,EAAU,GACPlR,EAAKlQ,OAAOsgB,OAAOhiB,QAAQ,CAChC,IAAI+iB,EAAUnR,EAAKlQ,OAAOsgB,OAAOtP,MAC7B3E,EAAOgV,EAAQhV,KACf,eAAewK,KAAKxK,GAAO+U,EAAQd,OAASe,EACvC,cAAcxK,KAAKxK,GAAO+U,EAAQT,MAAQU,EAC9CD,EAAQR,MAAQS,EAEvBH,EAAKZ,OAASY,EAAKN,MAAQM,EAAKP,WAAA,EAChCQ,EAAeC,OAOnBpb,KAAKsI,QAAQkC,GAAG,IAAK,SAAUkQ,EAAW7f,EAAMygB,GAC9C,IAAI9L,EAAW,iBAAiB+L,KAAKb,GAErC,GAAKxQ,EAAKiQ,gBAAgC,WAAdO,EAIrB,GAAkB,qBAAdA,EAETxQ,EAAKsR,mBACA,GAAIhM,EAAU,CACnBA,EAAWA,EAAS,GAEpB,IAAIiM,EAAcvR,EAAKC,UAAU,OAASqF,GACtCiM,GAAaA,EAAYf,EAAW7f,QACnC,GAAKqP,EAAK5B,QAAQ6B,UAAUuQ,GAAWpiB,OAIrB,WAAdoiB,GAELxQ,EAAKiQ,iBAAgBjQ,EAAKlQ,OAAO+N,OAAOuT,GAAQzgB,OANA,CAEpD,IAAI6gB,EAAoBxR,EAAKC,UAALwR,UACpBD,GAAmBA,EAAkBhB,EAAW7f,OAfF,CAElD,IAAIsgB,EAAiBjR,EAAKC,UAALmQ,OACjBa,GAAgBA,QAqB1BlB,GAAU9hB,UAAUqjB,YAAc,WAChC,IAAItR,EAAOlK,KACXga,GAAUtc,KAAK,WACb,IAAImK,EAAWqC,EAAKC,UAALyR,iBACXC,EAAe3R,EAAKC,UAALkQ,IAEfI,EAASvQ,EAAKgN,WAAarJ,OAAO4L,aAAe5L,OAAO4L,YAAYgB,OASxE,GAPI5S,GAAY4S,GACd5S,EAAS,CACPiU,YAAarB,EAAOsB,eAAiBtB,EAAOuB,gBAC5CC,OAAQxB,EAAOyB,yBAA2BzB,EAAOuB,kBAIjD9R,EAAKiQ,eAAgB,CACvB,IAAIgC,EAAwBjS,EAAKlQ,OAAOqgB,IAS7B+B,OAAO,SAAUC,EAAK5B,GACnC,OAAO4B,EAAM5B,EAAO0B,UACnB,GAAGG,UAVET,GAAcA,EAAa3R,EAAKlQ,OAAOqgB,IAAI/hB,OAAQ6jB,QAEvDN,OCrIN,IAAIU,GAAYtE,IAIhBuE,GAEA,SAAiBxT,EAAOV,EAAS8G,GAC/B,IAAIqN,GAAA,EACAC,EAAQnC,GAAMjS,GACdyI,EAAMf,EAAW,QAkErB,SAAS2M,EAAQzM,GACf,OAAO,WAEL,IADA,IAAIpH,EAAO,GACF7N,EAAI,EAAGX,EAAMc,UAAU9C,OAAQ2C,EAAIX,EAAKW,IAC/C6N,EAAKpL,KAAKtC,UAAUH,IAEtBshB,GAAU7e,KAAK,WACbqT,EAAIb,GAAO5Q,MAAMyR,EAAKjI,MAvE5B4T,EAAMlS,GAAG,YAAamS,EAAO,UAC7BD,EAAMlS,GAAG,WAAYmS,EAAO,SAC5BD,EAAMlS,GAAG,WAAYmS,EAAO,SAC5BD,EAAMlS,GAAG,YAAamS,EAAO,UAC7BD,EAAMlS,GAAG,YAAamS,EAAO,UAE7BD,EAAMlS,GAAG,QAAS,SAAUkQ,EAAW7f,EAAM4f,GAC3C,IAAIrL,EAAKwN,QAAWxN,EAAKwN,OAAOlC,EAAW7f,EAAM4f,GAEjD,GAAIA,EAAQ,CACV,IAAI0B,EAAW1B,EAAO0B,SAASG,UAC3BpM,EAAQiM,EAAW,GAAK,OAAS,YAAA,IACjCthB,EAAoB8hB,EAAOzM,EAAPyM,CAAcjC,EAAW7f,EAAMshB,EAAW,MAC7DQ,EAAOzM,EAAPyM,CAAcjC,EAAWyB,EAAW,gBAAA,IAErCthB,EAAoB8hB,EAAO,OAAPA,CAAejC,EAAW7f,GAC7C8hB,EAAO,OAAPA,CAAejC,KAIxBgC,EAAMlS,GAAG,MAAO,SAAUjC,EAAO4T,GAC/BQ,EAAO,QAAPA,CAAgB,MAAO,CAAEpU,MAAOA,GAAS4T,EAAW,QAGtDO,EAAMlS,GAAG,YAAa,SAAUkQ,EAAW7f,GACzC8hB,EAAO,QAAPA,CAAgB,oBAAsBjC,KAGxCgC,EAAMlS,GAAG,mBAAoB,SAAUiQ,GACrC,IAAKA,EAAQ,OAAOkC,EAAO,OAAPA,CAAe,oBAEnCA,EADYlC,EAAOqB,YAAc,IAAO,OAAS,OACjDa,CAAc,mBAAoBlC,EAAOqB,YAAc,uBAGzDY,EAAMlS,GAAG,SAAU,SAAU4Q,GAC3B,IAAKA,IAAYA,EAAQd,OAAQ,OAAOqC,EAAO,OAAPA,CAAe,UACvD,IAAIR,EAAWf,EAAQd,OAAO6B,SAASG,UACnC1L,EAAM,SAEN6L,IACFA,GAAA,EACA7L,EAAM,WAAaA,GAIrB,IAAIiM,EAAMpe,KAAKC,KAAK,IAAMyd,GAAUG,UAAW,IAE/C,GAAY,KAARO,EACFF,EAAO,OAAPA,CAAe/L,EAAKiM,EAAM,MAAOV,EAAW,UACvC,CACL,IAAIW,EAAQ,CACVxC,OAAQc,EAAQd,OAAO6B,SAASG,UAAY,MAE1ClB,EAAQT,QAAOmC,EAAMnC,MAAQS,EAAQT,MAAMwB,SAASG,UAAY,MACpEK,EAAO,OAAPA,CAAe/L,EAAKiM,EAAM,MAAOV,EAAW,KAAMW,MAItDJ,EAAMlS,GAAG,8BAA+B,WACtCmS,EAAO,QAAPA,CAAgB,qGAGlBD,EAAMte,eCzEJ2e,GAEM,SAgEV,SAASC,GAAMC,EAAO5W,EAAMuW,EAAQM,GAClCld,KAAKid,MAAQA,EACbjd,KAAKqG,KAAOA,EACZrG,KAAK4c,OAASA,GAAU,WAAc,OAAA,GACtC5c,KAAKkd,OAASA,GAAU,SAAU7W,GAAQ,OAAOA,GAgDnD,SAAS8W,GAAW9W,EAAM+W,EAAWC,EAAQ9U,GAC3CvI,KAAAsd,KAAejX,EACfrG,KAAK,mBAAqBod,EAC1Bpd,KAAK,KAAO,EACZA,KAAK,eAAiBqd,EACtBrd,KAAK,MAAQ,EACbA,KAAK,eAAiBuI,EAcxB,SAASgV,MAtITC,GAEA,SAAexU,EAAOV,EAAS4I,EAAKC,GAClC,IAAI8L,EAAQ,GAEZpP,OAAOC,KAAK2P,KAAO,GAGnB,IAAIC,EAAM,IAAIV,GAAKC,EAAO,OAC1Brd,OAAOC,eAAegO,OAAOC,KAAK2P,KAAM,MAAO,CAC7C1d,IAAK2d,EAAI3d,IAAI+G,KAAK4W,GAClB7X,IAAK0X,KAIP,IAAII,EAAO,IAAIX,GAAKC,EAAO,OAAQ,SAAU5W,GAC3C,MAAO,QAAQwK,KAAKxK,KAEtBzG,OAAOC,eAAegO,OAAOC,KAAK2P,KAAM,OAAQ,CAC9C1d,IAAK4d,EAAK5d,IAAI+G,KAAK6W,GACnB9X,IAAK0X,KAIP,IAAIK,EAAa,IAAIZ,GAAKC,EAAO,aAAc,SAAU5W,GACvD,OAAQ,QAAQwK,KAAKxK,KAAU,UAAUwK,KAAKxK,KAEhDzG,OAAOC,eAAegO,OAAOC,KAAK2P,KAAM,aAAc,CACpD1d,IAAK6d,EAAW7d,IAAI+G,KAAK8W,GACzB/X,IAAK0X,KAIP,IAAIxV,EAAS,IAAIiV,GAAKC,EAAO,SAAU,SAAU5W,GAC/C,MAAO,cAAcwK,KAAKxK,IACzB,SAAUA,GACX,OAAOA,EAAK3E,QAAQ,iBAAkB,IAAIA,QAAQ,OAAQ,MAE5D9B,OAAOC,eAAegO,OAAOC,KAAK2P,KAAM,SAAU,CAChD1d,IAAKgI,EAAOhI,IAAI+G,KAAKiB,GACrBlC,IAAK0X,KAGPpE,GAAc,SAAUH,GACtB,GAAwB,YAApBA,EAAMa,UAAV,CACA,IAAIxT,EAAO2S,EAAM3S,KAAK3E,QAAQ,OAAQ,IAEjCub,EAAM5W,KACT4W,EAAM5W,GAAQ,CACZA,KAAMA,EACNkC,MAAO,EACPsV,QAAS,KAIb,IAAIC,EAAOb,EAAM5W,GACjByX,EAAKvV,OAAS,EACduV,EAAKD,QAAQngB,KAAKsb,EAAMmD,cAa5Ba,GAAK7kB,UAAU4H,IAAM,WACnB,IAAIge,EAAWne,OAAO+G,KAAK3G,KAAKid,OAAOL,OAAO5c,KAAK4c,QAC/C1S,EAAOlK,KAEPge,EAAU,EACVC,EAAY,EACZC,EAAMH,EAASI,IAAI,SAAUjT,GAC/B,IAAI4S,EAAO5T,EAAK+S,MAAM/R,GAClBkS,EAAYrgB,OAAO+gB,EAAKD,QAAQzB,OAAO,SAAUhM,EAAM4I,GACzD,OAAO5I,EAAO4I,GACb,GAAGsD,QAAQ,IACVc,EAAYY,IAASA,EAAUZ,GAEnC,IAAIC,EAyCR,SAAoBvU,GAClB,IAAKA,EAAKxQ,OAAQ,OAAO,EACzB,IAAI8lB,EAAUtV,EAAKnP,MAAM,GAAG0kB,KAAK,SAAU5d,EAAGrG,GAAK,OAAOqG,EAAIrG,IAC1DkkB,EAAS7f,KAAKsV,MAAMqK,EAAQ9lB,OAAS,GAErCqG,EADSyf,EAAQ9lB,OAAS,GAAM,GAChB8lB,EAAQE,GAAUF,EAAQE,EAAS,IAAM,EAAIF,EAAQE,GACzE,OAAOvhB,OAAO4B,EAAI2d,QAAQ,IAN5B,CAzC2BwB,EAAKD,SAI5B,OAHIR,EAASY,IAAWA,EAAYZ,GAG7B,IAAIF,GADAjT,EAAKgT,OAAOY,EAAKzX,MACD+W,EAAWC,EAAQS,EAAKvV,SAWrD,SAASgW,EAAWjkB,GAElB,IADA,IAAIkD,EAAM,GACDvC,EAAI,EAAGwG,EAAMhD,KAAK+f,MAAMlkB,GAAMW,EAAIwG,EAAKxG,IAC9CuC,GAAOuf,GAET,OAAOvf,EAZT0gB,EAAIpN,QAAQ,SAAUkI,GACpB,IAAIoE,EAAYpE,EAAM,mBAClBqE,EAASrE,EAAM,eACnBA,EAAM,KAAOuF,EAAUnB,EAAYY,EAAU,IAJ/B,IAKdhF,EAAM,MAAQuF,EAAUlB,EAASY,EAAY,IAL/B,MAgBhB,IAAItf,EAAMuf,EAAIG,KAAK,SAAU5d,EAAGrG,GAC9B,OAAOA,EAAE,mBAAqBqG,EAAE,qBAGlC,OADAf,QAAQiZ,MAAMha,GACP,mCAAqCqB,KAAKqG,KAAO,sNClH1DoY,GAEA,SAAwBxL,GACtB,GAAmB,iBAARA,GAAoBrJ,MAAMqJ,GACnC,MAAM,IAAIha,UAAU,gCAAA,IAAmCga,EAAnC,YAAAyL,GAAmCzL,KAGzD,IAAI0L,EAAM1L,EAAM,EACZlV,EAAQ,CAAC,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAM5D,GAJI4gB,IACF1L,GAAOA,GAGLA,EAAM,EACR,OAAQ0L,EAAM,IAAM,IAAM1L,EAAM,KAGlC,IAAI2L,EAAWngB,KAAKC,IAAID,KAAKsV,MAAMtV,KAAKsS,IAAIkC,GAAOxU,KAAKsS,IAAI,MAAQhT,EAAMzF,OAAS,GACnF2a,EAAMlW,OAAOkW,EAAMxU,KAAKmF,IAAI,IAAMgb,IAClC,IAAIC,EAAO9gB,EAAM6gB,GAEjB,OAAI3L,GAAO,IAAMA,EAAM,GAAM,GAGnB0L,EAAM,IAAM,IAAM1L,EAAIqJ,QAAQ,GAAK,IAAMuC,GAEzCF,EAAM,IAAM,IAAM1L,EAAIqJ,QAAQ,GAAK,IAAMuC,GCIrD,SAASC,GAAKlO,EAAK7X,GAEjB2G,QAAQqR,IAAI,KAAOH,EAAK,iBAAmB7X,GAG7C,SAASmlB,GAAKjL,GACZ,OAAOwL,GAAOxL,GAAKvR,QAAQ,IAAK,IAGlC,SAASqd,MAtCT,IAAAC,GAEA,WACEpf,OAAOC,eAAegO,OAAOC,KAAM,UAAW,CAC5C/N,IAIF,WACE,GAAIkf,UAAUC,QAUZ,OATAD,UAAUC,QAAQC,WAAW/J,KAAK,SAAU+J,GAC1C,IAAI/lB,GAAS+lB,EAASC,MAAQD,EAASE,OAAO/C,UAC9CwC,GAAI,eAAgBZ,GAAIiB,EAASE,QACjCP,GAAI,gBAAiBZ,GAAIiB,EAASC,OAAS,KAAOhmB,EAAQ,MAC1D6lB,UAAUC,QAAQI,YAAYlK,KAAK,SAAUzD,GAE3CmN,GAAI,sBADMnN,EAAO,UAAY,gBAI1B,kCAEP,IAAI4N,EAAW1R,OAAO2R,SAASD,SAC/B,MAAQ,QAAQ1O,KAAK0O,GACjB,+DACA,sFAnBN1Z,IAAKkZ,yBCPT,IAAIU,EAGAA,EADkB,oBAAX5R,OACDA,YACmB,IAAXgJ,EACRA,EACiB,oBAAT3M,KACRA,KAEA,GAGVwV,GAAiBD,+JCVjB,IAAAE,GAwBA,SAAuBC,GAGrB,IAGIC,EAHOD,EAAOE,MAGFC,KAChB,OAAOC,GAAUH,IA7BfG,GAAY,SAAZA,EAAsBD,EAAME,GAC9B,IAAIC,EAAOD,GAAY,IACnBE,EAAS,GACTC,EAAQL,EAAKK,MAcjB,OAbAxgB,OAAO+G,KAAKyZ,GAAOtP,QAAQ,SAAU5F,GACnC,IAAI1B,GAAiB,MAAT0W,EAAeA,EAAOA,EAAO,MAAgB,OAARhV,EAAe,IAAM6U,EAAK1Z,KAAO6E,GAC9EuM,EAAK2I,EAAMlV,GAAKuM,GAIpB,QAAA,IAHIA,IACF0I,EAAO3W,GAAQiO,GAE4B,IAAzC7X,OAAO+G,KAAKyZ,EAAMlV,GAAKkV,OAAO9nB,OAAc,CAC9C,IAAIL,EAAM+nB,EAAUI,EAAMlV,GAAM1B,GAChC5J,OAAO+G,KAAK1O,GAAK6Y,QAAQ,SAAUrZ,GACjC0oB,EAAO1oB,GAAKQ,EAAIR,QAIf0oB,GCrBLE,GAAehpB,EAAkB6P,mBCErC,SAASoZ,GAAKlR,GACZ,KAAMpP,gBAAgBsgB,IAAM,OAAO,IAAIA,GAAIlR,GACvB,iBAATA,IAAmBA,EAAO,CAAC3N,IAAK2N,IACtCA,IAAMA,EAAO,IAClBpP,KAAKugB,MAAQ,GACbvgB,KAAKwgB,KAAOxgB,KAAKygB,KAAO,KACxBzgB,KAAK1H,OAAS,EACd0H,KAAKyB,IAAM2N,EAAK3N,KAAO,IACvBzB,KAAK0gB,OAAStR,EAAKsR,QAAU,EAV/BC,GAAiBL,GAajB1gB,OAAOC,eAAeygB,GAAInoB,UAAW,OAAQ,CAC3C4H,IAAK,WAAc,OAAOH,OAAO+G,KAAK3G,KAAKugB,UAG7CD,GAAInoB,UAAUyoB,MAAQ,WACpB5gB,KAAKugB,MAAQ,GACbvgB,KAAKwgB,KAAOxgB,KAAKygB,KAAO,KACxBzgB,KAAK1H,OAAS,GAGhBgoB,GAAInoB,UAAU0oB,OAAS,SAAU3V,GAE/B,GADmB,iBAARA,IAAkBA,EAAM,GAAKA,GACnClL,KAAKugB,MAAM1Z,eAAeqE,GAA/B,CAEA,IAAI4V,EAAU9gB,KAAKugB,MAAMrV,GAGzB,cAFOlL,KAAKugB,MAAMrV,GAClBlL,KAAK+gB,QAAQ7V,EAAK4V,EAAQZ,KAAMY,EAAQE,MACjCF,EAAQ1nB,QAGjBknB,GAAInoB,UAAU4oB,QAAU,SAAU7V,EAAKgV,EAAMc,GAC3ChhB,KAAK1H,SAEe,IAAhB0H,KAAK1H,OACP0H,KAAKwgB,KAAOxgB,KAAKygB,KAAO,KAEpBzgB,KAAKwgB,OAAStV,GAChBlL,KAAKwgB,KAAON,EACZlgB,KAAKugB,MAAMvgB,KAAKwgB,MAAMQ,KAAO,MACpBhhB,KAAKygB,OAASvV,GACvBlL,KAAKygB,KAAOO,EACZhhB,KAAKugB,MAAMvgB,KAAKygB,MAAMP,KAAO,OAE7BlgB,KAAKugB,MAAML,GAAMc,KAAOA,EACxBhhB,KAAKugB,MAAMS,GAAMd,KAAOA,IAK9BI,GAAInoB,UAAU8oB,KAAO,SAAU/V,GAC7B,GAAKlL,KAAKugB,MAAM1Z,eAAeqE,GAA/B,CAEA,IAAI4V,EAAU9gB,KAAKugB,MAAMrV,GAEzB,GAAKlL,KAAKkhB,UAAUhW,EAAK4V,GACzB,OAAOA,EAAQ1nB,QAGjBknB,GAAInoB,UAAU0N,IAAM,SAAUqF,EAAK9R,GAGjC,IAAI0nB,EAEJ,GAJmB,iBAAR5V,IAAkBA,EAAM,GAAKA,GAIpClL,KAAKugB,MAAM1Z,eAAeqE,GAAM,CAMlC,IALA4V,EAAU9gB,KAAKugB,MAAMrV,IACb9R,MAAQA,EACZ4G,KAAK0gB,SAAQI,EAAQK,SAAW9Q,KAAK+Q,OAGrClW,IAAQlL,KAAKwgB,KAAM,OAAOpnB,EAC9B4G,KAAK+gB,QAAQ7V,EAAK4V,EAAQZ,KAAMY,EAAQE,WAExCF,EAAU,CAAC1nB,MAAOA,EAAO+nB,SAAU,EAAGH,KAAM,KAAMd,KAAM,MACpDlgB,KAAK0gB,SAAQI,EAAQK,SAAW9Q,KAAK+Q,OACzCphB,KAAKugB,MAAMrV,GAAO4V,EAGd9gB,KAAK1H,SAAW0H,KAAKyB,KAAKzB,KAAKqhB,QAWrC,OARArhB,KAAK1H,SACLwoB,EAAQE,KAAO,KACfF,EAAQZ,KAAOlgB,KAAKwgB,KAEhBxgB,KAAKwgB,OAAMxgB,KAAKugB,MAAMvgB,KAAKwgB,MAAMQ,KAAO9V,GAC5ClL,KAAKwgB,KAAOtV,EAEPlL,KAAKygB,OAAMzgB,KAAKygB,KAAOvV,GACrB9R,GAGTknB,GAAInoB,UAAU+oB,UAAY,SAAUhW,EAAK4V,GACvC,QAAI9gB,KAAK0gB,QAAWrQ,KAAK+Q,MAAQN,EAAQK,SAAYnhB,KAAK0gB,SACxD1gB,KAAK6gB,OAAO3V,GAAA,KAMhBoV,GAAInoB,UAAU4H,IAAM,SAAUmL,GAE5B,GADmB,iBAARA,IAAkBA,EAAM,GAAKA,GACnClL,KAAKugB,MAAM1Z,eAAeqE,GAA/B,CAEA,IAAI4V,EAAU9gB,KAAKugB,MAAMrV,GAEzB,GAAKlL,KAAKkhB,UAAUhW,EAAK4V,GAqBzB,OAnBI9gB,KAAKwgB,OAAStV,IACZA,IAAQlL,KAAKygB,MACfzgB,KAAKygB,KAAOK,EAAQE,KACpBhhB,KAAKugB,MAAMvgB,KAAKygB,MAAMP,KAAO,MAG7BlgB,KAAKugB,MAAMO,EAAQZ,MAAMc,KAAOF,EAAQE,KAI1ChhB,KAAKugB,MAAMO,EAAQE,MAAMd,KAAOY,EAAQZ,KAGxClgB,KAAKugB,MAAMvgB,KAAKwgB,MAAMQ,KAAO9V,EAC7B4V,EAAQZ,KAAOlgB,KAAKwgB,KACpBM,EAAQE,KAAO,KACfhhB,KAAKwgB,KAAOtV,GAGP4V,EAAQ1nB,QAGjBknB,GAAInoB,UAAUkpB,MAAQ,WACfrhB,KAAKygB,MACVzgB,KAAK6gB,OAAO7gB,KAAKygB,iBCjInB,SAASa,GAAoBtY,EAAOd,EAAMqZ,GAMXvhB,KAAKugB,MAAf,iBAARgB,EAA+B,IAAIZ,GAAIY,GAChCA,GAAO,IAAIZ,GAAI,KACjC3gB,KAAKgJ,MAAQA,EACbhJ,KAAKkI,KAAOA,EAwBd,SAASsZ,GAASC,GAChB,OAAO,IAAKA,EAAI3a,KAAKxH,MAAMmiB,EAAKrmB,uDApClCsmB,GAAiBJ,GAejBA,GAAmBnpB,UAAUmiB,OAAS,SAAUqH,EAAWC,GAIzD,IAAI1V,EAAKlM,KAAKugB,MAAMxgB,IAAI6hB,GACxB,IAAK1V,EAAI,CAEP,IADA,IAAIpD,EAAO,GACF7N,EAAI,EAAGX,EAAMc,UAAU9C,OAAQ2C,EAAIX,EAAKW,IAC/C6N,EAAKpL,KAAKtC,UAAUH,IAEtB6N,EAAKX,QAAQwZ,EAAWC,EAAI5hB,KAAKgJ,MAAOhJ,KAAKkI,MAC7CgE,EAAKsV,GAAQliB,MAAMkiB,GAAS1Y,GAC5B9I,KAAKugB,MAAM1a,IAAI+b,EAAI1V,GAGrB,OAAOA,GCjCT,IAAA2V,GAIA,WAGI,IAFA,IAAIjgB,EAAS,GAEJ3G,EAAI,EAAGA,EAAIG,UAAU9C,OAAQ2C,IAAK,CACvC,IAAI+S,EAAS5S,UAAUH,GAEvB,IAAK,IAAIiQ,KAAO8C,EACR8T,GAAe7lB,KAAK+R,EAAQ9C,KAC5BtJ,EAAOsJ,GAAO8C,EAAO9C,IAKjC,OAAOtJ,GAfPkgB,GAAiBliB,OAAOzH,UAAU0O,eCAtCkb,GAEA,SAAgB3Q,GACd,GAAwB,oBAAbjF,SACT,MAAM,IAAIhK,MAAM,2CAElB,IAAI6G,EAAQmD,SAAS6V,WACrB,GAAc,aAAVhZ,GAAkC,gBAAVA,EAC1B,OAAOiJ,WAAWb,EAAU,GAG9BjF,SAAS8V,iBAAiB,mBAAoB,WAC5C7Q,sDCXA8Q,GAHAC,GAAYlK,IAIhBmK,GAAWC,UAAA,EACX,IACEH,GAAOrU,OAAO4L,YACd2I,GAAWC,SAAsD,SAA3CxU,OAAO4B,aAAa6S,qBAAkCJ,GAAKK,KACjF,MAAO/qB,KAIT,SAAS4qB,GAAY/b,GAGnB,GAAI+b,GAAWC,SAAU,OAAOG,GAEhC,IAAIlH,GAAqB,IAAb4G,GAAKd,OAAe9E,UAAYvf,OAAO0lB,iBAC/CC,EAAY,SAAWpH,EAAO,IAAMjV,EAGxC,SAAShI,EAAKoZ,GACZ,IAAIkL,EAAU,OAASrH,EAAO,IAAMjV,EACpC6b,GAAKK,KAAKI,GAEVR,GAAUzkB,KAAK,WACb,IAAI+J,EAAM,KACV,IACE,IAAImb,EAAcvc,EAAO,KAAOiV,EAAO,IACvC4G,GAAKW,QAAQD,EAAaF,EAAWC,GACrCT,GAAKY,WAAWJ,GAChBR,GAAKY,WAAWH,GAChB,MAAOnrB,IAAKiQ,EAAMjQ,GAChBigB,GAAIA,EAAGhQ,EAAKpB,KAKpB,OAnBA6b,GAAKK,KAAKG,GAkBVrkB,EAAIid,KAAOA,EACJjd,EAGT,SAASmkB,GAAM/K,GACTA,GACF0K,GAAUzkB,KAAK,WACb+Z,EAAG,IAAItV,MAAM,8CAlCnB,IAAA4gB,GAAiBX,SCJjB,SAASY,GAAS3c,GAChB,KAAMrG,gBAAgBgjB,IAAU,OAAO,IAAIA,GAAQ3c,GAEnDrG,KAAKqP,MAAQhJ,GAAQ,UACrBrG,KAAKijB,eAAiB,GACtBjjB,KAAKkJ,WAAa,8CAPpBga,GAAiBF,GAUjBA,GAAQ7qB,UAAU+P,KAAO,SAAUwS,GAIjC,IADA,IAAI7f,EAAO,GACFI,EAAI,EAAGX,EAAMc,UAAU9C,OAAQ2C,EAAIX,EAAKW,IAC/CJ,EAAK6C,KAAKtC,UAAUH,IAGtB,IAAIkoB,EAAaJ,GAAW/iB,KAAKqP,MAAQ,KAAOqL,EAAUxf,WAAa,MACnEiP,EAAYnK,KAAKkJ,WAAWwR,GAUhC,OATIvQ,GAAaA,EAAU7R,OAAS,GAClC0H,KAAKojB,MAAMpjB,KAAKkJ,WAAWwR,GAAY7f,GAGrCmF,KAAKijB,eAAe3qB,OAAS,GAC/B0H,KAAKojB,MAAMpjB,KAAKijB,eAAgBvI,EAAW7f,EAAMsoB,EAAW7H,MAE9D6H,IAEOnjB,MAGTgjB,GAAQ7qB,UAAUqS,GAAKwY,GAAQ7qB,UAAUoS,YAAc,SAAUmQ,EAAW7S,GAU1E,MANkB,MAAd6S,EACF1a,KAAKijB,eAAevlB,KAAKmK,IAEpB7H,KAAKkJ,WAAWwR,KAAY1a,KAAKkJ,WAAWwR,GAAa,IAC9D1a,KAAKkJ,WAAWwR,GAAWhd,KAAKmK,IAE3B7H,MAGTgjB,GAAQ7qB,UAAUsS,gBAAkB,SAAUiQ,EAAW7S,GAUvD,MANkB,MAAd6S,EACF1a,KAAKijB,eAAe9a,QAAQN,IAEvB7H,KAAKkJ,WAAWwR,KAAY1a,KAAKkJ,WAAWwR,GAAa,IAC9D1a,KAAKkJ,WAAWwR,GAAWvS,QAAQN,IAE9B7H,MAGTgjB,GAAQ7qB,UAAUuS,KAAO,SAAUgQ,EAAW7S,GAI5C,IAAIqC,EAAOlK,KAMX,OALAA,KAAKwK,GAAGkQ,EACR,SAAShQ,IACP7C,EAASvI,MAAM4K,EAAM9O,WACrB8O,EAAKtB,eAAe8R,EAAWhQ,KAE1B1K,MAGTgjB,GAAQ7qB,UAAUwS,oBAAsB,SAAU+P,EAAW7S,GAI3D,IAAIqC,EAAOlK,KAMX,OALAA,KAAKyK,gBAAgBiQ,EACrB,SAAShQ,IACP7C,EAASvI,MAAM4K,EAAM9O,WACrB8O,EAAKtB,eAAe8R,EAAWhQ,KAE1B1K,MAGTgjB,GAAQ7qB,UAAUyQ,eAAiB,SAAU8R,EAAW7S,GAItD,MAAkB,MAAd6S,GACF1a,KAAKijB,eAAiBjjB,KAAKijB,eAAetpB,QACnCknB,EAAO7gB,KAAKijB,eAAgBpb,UAAA,IAExB7H,KAAKkJ,WAAWwR,KACzB1a,KAAKkJ,WAAWwR,GAAa1a,KAAKkJ,WAAWwR,GAAW/gB,SAGnDknB,EAAO7gB,KAAKkJ,WAAWwR,GAAY7S,IAG5C,SAASgZ,EAAQ1kB,EAAK0L,GACpB,GAAK1L,EAAL,CACA,IAAI4O,EAAQ5O,EAAIH,QAAQ6L,GACxB,OAAe,IAAXkD,GACF8M,EAAO1b,EAAK4O,EAAO,IAAA,QACZ,KAKbiY,GAAQ7qB,UAAU8S,mBAAqB,SAAUyP,GAW/C,OAVIA,EACgB,MAAdA,EACF1a,KAAKijB,eAAiB,GAEtBjjB,KAAKkJ,WAAWwR,GAAa,IAG/B1a,KAAKijB,eAAiB,GACtBjjB,KAAKkJ,WAAa,IAEblJ,MAGTgjB,GAAQ7qB,UAAUgS,UAAY,SAAUuQ,GACtC,IAAIvQ,EAA0B,MAAduQ,EACZ1a,KAAKkJ,WAAWwR,GAChB1a,KAAKijB,eAEL3gB,EAAM,GACV,GAAI6H,EAEF,IADA,IAAIkZ,EAAUlZ,EAAU7R,OACf2C,EAAI,EAAGA,EAAIooB,EAASpoB,IAAKqH,EAAI5E,KAAKyM,EAAUlP,IAEvD,OAAOqH,GAGT0gB,GAAQ7qB,UAAUirB,MAAQ,SAAUjnB,EAAKue,EAAW7f,EAAMygB,GACxD,QAAA,IAAWnf,GACQ,IAAfA,EAAI7D,OAAR,MAAA,IACIuC,IACFA,EAAO6f,EACPA,EAAY,MAGVA,IAEA7f,OAAA,IADEygB,EACK,CAACZ,GAAW9Z,OAAO/F,EAAMygB,GAEzB,CAACZ,GAAW9Z,OAAO/F,IAK9B,IADA,IAAIvC,EAAS6D,EAAI7D,OACR2C,EAAI,EAAGA,EAAI3C,EAAQ2C,IAAK,CAC/B,IAAI4M,EAAW1L,EAAIlB,GACnB4M,EAASvI,MAAMuI,EAAUhN,qDC7JzByoB,GAAmB,8CACnBC,GAAe,YCgBnB,SAASC,GAAQjsB,EAAGoE,GAClB,IAAKpE,EAAG,MAAM,IAAI4K,MAAMxG,GAAK,kBApB/B6nB,GAAOC,SAWP,SAAmBhjB,EAAGrG,EAAGuB,KAVzB6nB,GAAOE,MAcP,SAAgBnsB,EAAGoE,KAbnB6nB,GAAOG,MAKP,SAAgBljB,EAAGrG,EAAGuB,KAJtB6nB,GAAOI,GAAKJ,GCHZ,IAAAK,GAAiB,CAEf,UACA,aACA,cACA,YACA,cACA,cACA,aACA,eACA,eACA,gBACA,aACA,cACA,eACA,cACA,SACA,cACA,cACA,aACA,SACA,YACA,YACA,aACA,UACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,SACA,UAEA,gBACA,YACA,cCxCEC,GACeD,GAAOvrB,OAyJ1B,SAASyrB,GAAiBC,EAASC,EAAS5d,GACtC2d,EAAQ3d,KAAU4d,EAAQ5d,KAC5B4d,EAAQ5d,GAAQ2d,EAAQ3d,GACpB2d,EAAQ3d,GACV4d,EAAQ5X,aAAahG,EAAM,IAE3B4d,EAAQC,gBAAgB7d,IAzJ9B,IAAA8d,GAIA,SAAgBH,EAASC,GACvB,IAAIG,EAAWJ,EAAQI,SACnBC,EAAWL,EAAQK,SAVN,IAYbD,GAmBN,SAAoBJ,EAASC,GAS3B,IARA,IAAIK,EAAWL,EAAQM,WACnBC,EAAWR,EAAQO,WACnBE,EAAmB,KACnBC,EAAY,KAEZC,EAAW,KACXrT,EAAO,KAEFrW,EAAIupB,EAASlsB,OAAS,EAAG2C,GAAK,IAAKA,EAE1C0pB,GADArT,EAAOkT,EAASvpB,IACAoL,KAChBoe,EAAmBnT,EAAKsT,aACxBF,EAAYpT,EAAKlY,MACbqrB,GACFE,EAAWrT,EAAKuT,WAAaF,EACjBV,EAAQa,eAAeL,EAAkBE,KACnCD,GAChBT,EAAQc,eAAeN,EAAkBE,EAAUD,IAGhDT,EAAQe,aAAaL,GAGZV,EAAQgB,aAAaN,KACfD,IAEE,SAAdA,GAAsC,cAAdA,EAC1BT,EAAQC,gBAAgBS,GAExBV,EAAQ5X,aAAasY,EAAUD,IARnCT,EAAQ5X,aAAasY,EAAUD,GAiBrC,IAAK,IAAI9nB,EAAI0nB,EAAShsB,OAAS,EAAGsE,GAAK,IAAKA,GAAA,KAC1C0U,EAAOgT,EAAS1nB,IACPsoB,YACPP,EAAWrT,EAAKjL,MAChBoe,EAAmBnT,EAAKsT,eAGtBD,EAAWrT,EAAKuT,WAAaF,EACxBX,EAAQmB,eAAeV,EAAkBE,IAC5CV,EAAQmB,kBAAkBX,EAAkBE,IAGzCX,EAAQmB,eAAe,KAAMR,IAChCV,EAAQC,gBAAgBS,IApDlC,CAlBcX,EAASC,GAZP,IAeVG,GAda,IAcaA,GACxBH,EAAQoB,YAAcrB,EAAQqB,YAChCpB,EAAQoB,UAAYrB,EAAQqB,WAMf,UAAbhB,EAqFN,SAAsBL,EAASC,GAC7B,IAAIqB,EAAWtB,EAAQ5qB,MACnBmsB,EAAWtB,EAAQ7qB,MAEvB2qB,GAAgBC,EAASC,EAAS,WAClCF,GAAgBC,EAASC,EAAS,YAE9BqB,IAAaC,IACftB,EAAQ5X,aAAa,QAASiZ,GAC9BrB,EAAQ7qB,MAAQksB,GAGD,SAAbA,IACFrB,EAAQ7qB,MAAQ,GAChB6qB,EAAQC,gBAAgB,UAGrBF,EAAQmB,eAAe,KAAM,SAEN,UAAjBlB,EAAQvpB,OAEjBupB,EAAQ7qB,MAAQksB,GAHhBrB,EAAQC,gBAAgB,SAlB5B,CArFwCF,EAASC,GACzB,WAAbI,EA4EX,SAAuBL,EAASC,GAC9BF,GAAgBC,EAASC,EAAS,YADpC,CA5E+CD,EAASC,GAChC,aAAbI,GA4GX,SAAyBL,EAASC,GAChC,IAAIqB,EAAWtB,EAAQ5qB,MAKvB,GAJIksB,IAAarB,EAAQ7qB,QACvB6qB,EAAQ7qB,MAAQksB,GAGdrB,EAAQuB,YAAcvB,EAAQuB,WAAWH,YAAcC,EAAU,CAGnE,GAAiB,KAAbA,GAAmBrB,EAAQuB,WAAWH,YAAcpB,EAAQwB,YAC9D,OAGFxB,EAAQuB,WAAWH,UAAYC,GAbnC,CA5GmDtB,EAASC,GAgE5D,SAAqBD,EAASC,GAC5B,IAAK,IAAIhpB,EAAI,EAAGA,EAAI6oB,GAAc7oB,IAAK,CACrC,IAAIyqB,EAAK7B,GAAO5oB,GACZ+oB,EAAQ0B,GACVzB,EAAQyB,GAAM1B,EAAQ0B,GACbzB,EAAQyB,KACjBzB,EAAQyB,QAAA,IANd,CA9Da1B,EAASC,+CC/BD,IACjB0B,GAEY,EA4ChB,SAASC,GAAM5B,EAASC,GAQtB,OAAKA,EAEOD,EAEDA,EAAQ6B,YAAc7B,EAAQ6B,WAAW5B,GAC3CA,EACED,EAAQ8B,UAAY7B,EAAQ6B,SAAWC,GAAe/B,KAAa+B,GAAe9B,GACpFD,GAEPG,GAAMH,EAASC,GACf+B,GAAehC,EAASC,GACjBA,GARA,KAFAD,EAcX,SAAS+B,GAAgBE,GACvB,OAAOA,EAAKC,QAAUD,EAAKC,QAAQC,0BAAA,EAKrC,SAASH,GAAgBhC,EAASC,GAahC,IALA,IAAImC,EAAUC,EAAUC,EAASC,EAG7BzpB,EAAS,EAEJ7B,EAAI,EACXmrB,EAAWnC,EAAQuC,WAAWvrB,GAC9BorB,EAAWrC,EAAQwC,WAAWvrB,EAAI6B,GAS7BspB,GAAaC,EAXFprB,IAeT,GAAKorB,EAKL,GAAKD,EAKL,GAAIK,GAAKJ,EAAUD,IACxBE,EAAUV,GAAKS,EAAUD,MACTA,IACdnC,EAAQyC,aAAaJ,EAASF,GAC9BtpB,SAIG,CACLypB,EAAW,KAGX,IAAK,IAAI3pB,EAAI3B,EAAG2B,EAAIqnB,EAAQuC,WAAWluB,OAAQsE,IAC7C,GAAI6pB,GAAKxC,EAAQuC,WAAW5pB,GAAIypB,GAAW,CACzCE,EAAWtC,EAAQuC,WAAW5pB,GAC9B,MAKA2pB,IACFD,EAAUV,GAAKS,EAAUE,MACTA,GAAUzpB,IAC1BmnB,EAAQ0C,aAAaL,EAASF,IAGpBC,EAASzE,IAAOwE,EAASxE,IASnCqC,EAAQ0C,aAAaN,EAAUD,GAC/BtpB,MATAwpB,EAAUV,GAAKS,EAAUD,MACTA,IACdnC,EAAQyC,aAAaJ,EAASF,GAC9BtpB,UAlCJmnB,EAAQjX,YAAYqZ,GACpBvpB,SANAmnB,EAAQ3W,YAAY8Y,GACpBnrB,IAkDN,SAASwrB,GAAMhmB,EAAGrG,GAChB,OAAIqG,EAAEmhB,GAAWnhB,EAAEmhB,KAAOxnB,EAAEwnB,GACxBnhB,EAAEolB,WAAmBplB,EAAEolB,WAAWzrB,GAClCqG,EAAEqlB,UAAY1rB,EAAE0rB,SAChBrlB,EAAE/F,OAASirB,IAAkBllB,EAAE4kB,YAAcjrB,EAAEirB,UA1JrD,IAAAuB,GAeA,SAAoBC,EAASC,EAASC,GAWpC,OAAIA,GAAWA,EAAQC,cACrBhB,GAAec,EAASD,GACjBA,GASFjB,GAAKkB,EAASD,mDC3CnBI,GAAM,wBCAV,mBAAAlvB,QAAAA,OAAAC,SAIA,ICFIkvB,GAAiBtnB,OAAOzH,UAAU0O,eCFtCsgB,GAIA,SAAgBvlB,GACZ,IAAK,IAAI3G,EAAI,EAAGA,EAAIG,UAAU9C,OAAQ2C,IAAK,CACvC,IAAI+S,EAAS5S,UAAUH,GAEvB,IAAK,IAAIiQ,KAAO8C,EACRoZ,GAAenrB,KAAK+R,EAAQ9C,KAC5BtJ,EAAOsJ,GAAO8C,EAAO9C,IAKjC,OAAOtJ,GAbPwlB,GAAiBxnB,OAAOzH,UAAU0O,qBCMtC,SAASwgB,KACP,KAAMrnB,gBAAgBqnB,IAAO,OAAO,IAAIA,GACxCrnB,KAAK+f,KAAO,CAAEK,MAAO,+CANvBkH,GAAiBD,GAYjBA,GAAKlvB,UAAUoO,OAAS,SAAUqU,GAGhC,IAAIuF,EAASvF,EAAMlZ,QAAQ,MAAO,IAAIwE,MAAM,KAgC5C,OA9BA,SAASqhB,EAAYxc,EAAOgV,GAC1B,IAAIyH,EAAarH,EAAOtZ,eAAekE,IAAUoV,EAAOpV,GACxD,IAAA,IAAIyc,EAAqB,OAAOzH,EAEhC,IAAIkG,EAAO,KAuBX,MAtBI,SAASpV,KAAK2W,IAEXzH,EAAKK,MAAMvZ,eAAe,MAI7Bof,EAAOlG,EAAKK,MAALqH,IAHPxB,EAAO,CAAE7F,MAAO,IAChBL,EAAKK,MAALqH,GAAmBxB,GAKA,MAAjBuB,EAAU,KACZzH,EAAK2H,UAAA,GAGP3H,EAAK1Z,KAAOmhB,EAAU9lB,QAAQ,SAAU,KAC9Bqe,EAAKK,MAAMvZ,eAAe2gB,GAIpCvB,EAAOlG,EAAKK,MAAMoH,IAHlBvB,EAAO,CAAE7F,MAAO,IAChBL,EAAKK,MAAMoH,GAAavB,GAMnBsB,EAAWxc,EAAQ,EAAGkb,GA3B/B,CA8BkB,EAAGjmB,KAAK+f,OAM5BsH,GAAKlvB,UAAU6iB,MAAQ,SAAUJ,GAG/B,IAAIuF,EAASvF,EAAMlZ,QAAQ,MAAO,IAAIwE,MAAM,KACxCyhB,EAAS,GAkCT1B,EAhCJ,SAAS2B,EAAQ7c,EAAOgV,GAEtB,QAAA,IAAIA,EAAJ,CACA,IAAIyH,EAAYrH,EAAOpV,GACvB,QAAA,IAAIyc,EAAyB,OAAOzH,EAEpC,GAAIA,EAAKK,MAAMvZ,eAAe2gB,GAE5B,OAAOI,EAAO7c,EAAQ,EAAGgV,EAAKK,MAAMoH,IAC/B,GAAIzH,EAAK1Z,KAAM,CAEpB,IACEshB,EAAO5H,EAAK1Z,MAAQwhB,mBAAmBL,GACvC,MAAOhwB,IACP,OAAOowB,EAAO7c,OAAA,GAEhB,OAAO6c,EAAO7c,EAAQ,EAAGgV,EAAKK,MAALqH,IACpB,GAAI1H,EAAK2H,SAAU,CAExB,IACEC,EAAAD,SAAqBG,mBAAmB1H,EAAOxmB,MAAMoR,GAAOgF,KAAK,MACjE,MAAOvY,IACP,OAAOowB,EAAO7c,OAAA,GAGhB,OAAOgV,EAAKK,MAALqH,GAGP,OAAOG,EAAO7c,EAAQ,IA5B1B,CAgCkB,EAAG/K,KAAK+f,MAE1B,GAAKkG,EAGL,OAFAA,EF9FF,WAGI,IAFA,IAAIrkB,EAAS,GAEJ3G,EAAI,EAAGA,EAAIG,UAAU9C,OAAQ2C,IAAK,CACvC,IAAI+S,EAAS5S,UAAUH,GAEvB,IAAK,IAAIiQ,KAAO8C,EACRkZ,GAAejrB,KAAK+R,EAAQ9C,KAC5BtJ,EAAOsJ,GAAO8C,EAAO9C,IAKjC,OAAOtJ,EEiFFkmB,CAAM7B,IACR0B,OAASA,EACP1B,GAKToB,GAAKlvB,UAAU4vB,MAAQ,SAAUnN,EAAOmF,GAItC,IAAI7Z,EAAQ0U,EAAMlZ,QAAQ,MAAO,IAAIwE,MAAM,KACvC+f,EAAO,KACP/a,EAAM,KAEV,GAAqB,IAAjBhF,EAAM5N,OACR4S,EAAMhF,EAAM,GACZ+f,EAAOjmB,KAAKuG,OAAO2E,OACd,CACL,IAAIsV,EAAOta,EAAM6J,KAAK,KACtB7E,EAAMhF,EAAM,GACZ+f,EAAOjmB,KAAKuG,OAAOia,GAGrB2G,GAAOlB,EAAK7F,MAAOL,EAAKK,OACpBL,EAAK1Z,OAAM4f,EAAK5f,KAAO0Z,EAAK1Z,MAI5B4f,EAAK7F,MAAM,MACbxgB,OAAO+G,KAAKsf,EAAK7F,MAAM,KAAKtP,QAAQ,SAAU5F,GAChC,UAARA,IACJ+a,EAAK/a,GAAO+a,EAAK7F,MAAM,IAAIlV,MAE7Bic,GAAOlB,EAAK7F,MAAO6F,EAAK7F,MAAM,IAAIA,cAC3B6F,EAAK7F,MAAM,IAAIA,mDClI1B,IAAA4H,GAIA,SAASC,EAAUC,GACjB,KAAMloB,gBAAgBioB,GAAW,OAAO,IAAIA,EAASC,GAErD,IAAIC,GAAYD,GAAO,IAAIxmB,QAAQ,MAAO,IACtCoe,EAAQwH,KAQZ,OANApf,EAAK4X,MAAQA,EACb5X,EAAKsC,GASL,SAAaoQ,EAAO3T,GAIlB,IAAIwQ,EAAKxQ,EAAGmhB,WAAanhB,EAAG6Y,MAAQ7Y,EAapC,WACE,OAAOA,EAAG3H,MAAMU,KAAMrF,MAAMxC,UAAUwB,MAAMsC,KAAKb,cAbnDwf,EAAQA,GAAS,IACjBnD,EAAGmD,MAAQA,EAEPnD,EAAG2Q,WAAa3Q,EAAGqI,OACrBA,EAAMiI,MAAMnN,EAAOnD,EAAGqI,MAAMC,MAEjBD,EAAMvZ,OAAOqU,GACnBnD,GAAKA,EAGZ,OAAOvP,GAvBTA,EAAKA,KAAOA,EACZA,EAAK8S,MAAQA,EACb9S,EAAKkgB,WAAA,EAEElgB,EA4BP,SAASA,EAAM0S,GACb,IAAIyN,EAAUrN,EAAMJ,GAEhB9R,EAAO,IAAInO,MAAMS,UAAU9C,QAC/BwQ,EAAK,GAAKuf,EAAQV,OAClB,IAAK,IAAI1sB,EAAI,EAAGA,EAAI6N,EAAKxQ,OAAQ2C,IAC/B6N,EAAK7N,GAAKG,UAAUH,GAGtB,OAAOotB,EAAQ5Q,GAAGnY,MAAM+oB,EAAQ5Q,GAAI3O,GAGtC,SAASkS,EAAOJ,GAGd,IAAIyN,EAAUvI,EAAM9E,MAAMJ,GAC1B,GAAIyN,GAAWA,EAAQ5Q,GAAI,OAAO,IAAI6Q,EAAMD,GAE5C,IAAIH,EAAMpI,EAAM9E,MAAMmN,GACtB,GAAID,GAAOA,EAAIzQ,GAAI,OAAO,IAAI6Q,EAAMJ,GAEpC,MAAM,IAAI/lB,MAAM,UAAYyY,EAAQ,mBAGtC,SAAS0N,EAAOD,GACdroB,KAAKyX,GAAK4Q,EAAQ5Q,GAClBzX,KAAK4a,MAAQyN,EAAQ5Q,GAAGmD,MACxB5a,KAAK2nB,OAASU,EAAQV,4NCzEtBY,GAGe,YAAY1X,KACX,YAAlB,oBAAOhD,OAAP,YAAA2a,GAAO3a,UACPA,OAAO2R,UACP3R,OAAO2R,SAASiJ,QAUdC,GAAgB,IAAInT,OANT,6BAOXoT,GAAS,IAAIpT,OAAO,gEACpBqT,GAAY,IAAIrT,OAAO,KACvBsT,GAAS,IAAItT,OANR,UAUT,SAASuT,GAAY1Z,GACnB,KAAMpP,gBAAgB8oB,IAAa,OAAO,IAAIA,GAAW1Z,GACzDA,EAAOA,GAAQ,GACfpP,KAAK4f,OAASoI,GAAS5Y,EAAKrD,SAAW,QAsBzC,SAASgd,GAAUC,EAAWC,GAG5B,OAFgBD,EAAZC,EAAwBD,EAAUtnB,QAAQgnB,GAAe,IAC5CM,EAAUtnB,QAAQinB,GAAQ,IACpCO,UAAUF,EAAUtnB,QAAQmnB,GAAQ,IAAInnB,QAAQknB,GAAW,MA9BpEO,GAAiBL,GAQjBA,GAAW3wB,UAAUqS,GAAK,SAAUwe,EAAWnhB,GAE7CmhB,EAAYA,EAAUtnB,QAAQ,SAAS,IACvC1B,KAAK4f,OAAOpV,GAAGwe,EAAWnhB,IAG5BihB,GAAW3wB,UAAU+P,KAAO,SAAU8gB,GAGpC,OADAA,EAAYD,GAASC,EAAWT,IACzBvoB,KAAK4f,OAAO1X,KAAK8gB,IAG1BF,GAAW3wB,UAAU6iB,MAAQ,SAAUgO,GAGrC,OADAA,EAAYD,GAASC,EAAWT,IACzBvoB,KAAK4f,OAAO5E,MAAMgO,IC7C3B,IAAAI,GAEA,SAAyBC,EAAQtC,GAC/B,GAAIsC,EACF,IACE,IAAInd,EAAKC,SAASmd,cAAcD,GAC5Bnd,GAAIA,EAAGqd,eAAexC,GAC1B,MAAOvvB,oNCObgyB,GAAiBC,GAEbC,GAAiB,GAErB,SAASD,GAAMra,GACb,KAAMpP,gBAAgBypB,IAAO,OAAO,IAAIA,GAAKra,GAC7CA,EAAOA,GAAQ,GAIf,IAAIlF,EAAOlK,KAGXA,KAAKmH,QAAU,CACbwiB,iBAAkB,mBAClBC,eAAgB,iBAChBC,aAAc,eACdC,UAAW,YACXC,SAAU,WACVC,SAAU,WACVC,OAAQ,UAIVjqB,KAAKkqB,qBAAA,IAAkB9a,EAAKoJ,SAA+BpJ,EAAKoJ,QAChExY,KAAKmqB,kBAAA,IAAe/a,EAAKgb,MAA4Bhb,EAAKgb,KAC1DpqB,KAAKqqB,kBAAA,IAAejb,EAAKkb,MAA4Blb,EAAKkb,KAC1DtqB,KAAKuqB,WAA+B,oBAAX1c,OACzB7N,KAAKwqB,OAASpb,EAAKmR,MACnBvgB,KAAKyqB,SAAA,EACLzqB,KAAK0qB,QAAU,GACf1qB,KAAK2qB,MAAQ,KAGb,IAAI9R,EAAS,CACX9Q,OAAQ/H,KAAKmH,QACbyW,WAAY,IAEV5d,KAAKuqB,YACPvqB,KAAKgJ,MAAQ6E,OAAO+c,aAChB/I,GAAMhU,OAAO+c,aAAc/R,GAC3BA,SACGhL,OAAO+c,cAEd5qB,KAAKgJ,MAAQ6P,EAIf7Y,KAAK4f,OAASuJ,GAAW,CAAE0B,OAAA,IAC3B7qB,KAAKsI,QAAU4a,GAAQ,aACvBljB,KAAKkI,KAAOlI,KAAKsI,QAAQJ,KAAKpB,KAAK9G,KAAKsI,SAGpCtI,KAAKuqB,aAAYvqB,KAAKgJ,MAAM8hB,MAAQ3e,SAAS2e,OACjD9qB,KAAKsI,QAAQmC,gBAAgBzK,KAAKmH,QAAQyiB,eAAgB,SAAUkB,GAElE5gB,EAAKlB,MAAM8hB,MAAQA,EACf5gB,EAAKqgB,aAAYpe,SAAS2e,MAAQA,KAI1CrB,GAAKtxB,UAAUyiB,MAAQ,SAAUA,EAAO7Q,GAGtC/J,KAAK4f,OAAOpV,GAAGoQ,EAAO7Q,IAGxB0f,GAAKtxB,UAAUkiB,IAAM,SAAU5C,GAE7B,IAAIvN,EAAOlK,KACXA,KAAK0qB,QAAQhtB,KAAK,SAAUsL,GAC1B,IAAI4H,EAAM,WACVA,EAAM6G,EAAGsT,UAAYna,EAAM,IAAM6G,EAAGsT,UAAY,IAAMna,EACtD,IAAIoa,EAAYjI,GAAWnS,GAC3B6G,EAAGzO,EAAOkB,EAAK5B,QAAS4B,GACxB8gB,OAIJvB,GAAKtxB,UAAUiG,MAAQ,WAGrB,IbzFaqZ,EAAIwT,EayFb/gB,EAAOlK,KAyEX,OAxEIA,KAAKkqB,kBACPlqB,KAAKsI,QAAQmC,gBAAgBzK,KAAKmH,QAAQ4iB,SAAU,WAClD7f,EAAKghB,cACDhhB,EAAKugB,UACPvgB,EAAK5B,QAAQJ,KAAKgC,EAAK/C,QAAQ8iB,QAC/BhY,WAAWmX,GAAetiB,KAAK,KAAM+G,OAAO2R,SAAS8K,MAAO,MAIhEtqB,KAAKsI,QAAQmC,gBAAgBzK,KAAKmH,QAAQ6iB,SAAU,WAClD9f,EAAK5B,QAAQJ,KAAKgC,EAAK/C,QAAQ4iB,YAGjC/pB,KAAKsI,QAAQmC,gBAAgBzK,KAAKmH,QAAQ2iB,UAAW,SAAUM,GAE7Dvc,OAAO2K,QAAQ2S,UAAUzB,GAAgB,KAAMU,GAC/ClgB,EAAK5B,QAAQJ,KAAKgC,EAAK/C,QAAQ4iB,YAGjC/pB,KAAKsI,QAAQmC,gBAAgBzK,KAAKmH,QAAQ0iB,aAAc,SAAUO,GAEhEvc,OAAO2K,QAAQ4S,aAAa1B,GAAgB,KAAMU,GAClDlgB,EAAK5B,QAAQJ,KAAKgC,EAAK/C,QAAQ4iB,YAGjClc,OAAOwd,WAAa,WAClBnhB,EAAK5B,QAAQJ,KAAKgC,EAAK/C,QAAQ6iB,WAG7B9f,EAAKigB,ebvHE1S,EawHA,SAAU+H,GACjB,IAAI4K,EAAO5K,EAAS4K,KAChBE,EAAO9K,EAAS8K,KAChBF,IAASvc,OAAO2R,SAAS4K,KAI7BlgB,EAAK5B,QAAQJ,KAAKgC,EAAK/C,QAAQ2iB,UAAWM,IAHnClgB,EAAKmgB,cAAgBC,GAAMlB,GAAekB,IbzHvDW,EAAOA,GAAQpd,OAAO1B,SAKtB0B,OAAOoU,iBAAiB,QAAS,SAAUzqB,GACzC,KAAKA,EAAE8zB,QAAuB,IAAb9zB,EAAE8zB,QACjB9zB,EAAE+zB,SAAW/zB,EAAEg0B,SAAWh0B,EAAEi0B,QAAUj0B,EAAEk0B,UACxCl0B,EAAEm0B,kBAFJ,CAIA,IAAItC,EAAU,SAASuC,EAAU3F,GAC/B,GAAKA,GAAQA,IAASgF,EACtB,MAAuB,MAAnBhF,EAAKpB,gBAAA,IAAqBoB,EAAKmE,KAC1BwB,EAAS3F,EAAK4F,YAEhB5F,EALK,CAMXzuB,EAAEoK,QAEAynB,IAEDxb,OAAO2R,SAASD,WAAa8J,EAAO9J,UACpC1R,OAAO2R,SAASsM,WAAazC,EAAOyC,UACpCje,OAAO2R,SAASuM,OAAS1C,EAAO0C,MAClC1C,EAAOrE,aAAa,yBACpBqE,EAAOrE,aAAa,aACe,WAAlCqE,EAAOpE,aAAa,WACnB3B,GAAiBzS,KAAKwY,EAAOpE,aAAa,SAC5C1B,GAAa1S,KAAKwY,EAAOpE,aAAa,WAExCztB,EAAEw0B,iBACFvU,EAAG4R,UamGLrpB,KAAKisB,UAAUjsB,KAAKgJ,OACpBhJ,KAAK0qB,QAAQ5Z,QAAQ,SAAUob,GAC7BA,EAAUhiB,EAAKlB,SAGjBhJ,KAAKkrB,cACLlrB,KAAK2qB,MAAQ3qB,KAAKmsB,WAAWnsB,KAAKgJ,OAGlChJ,KAAKsI,QAAQmC,gBAAgBP,EAAK/C,QAAQ8iB,OP5I5C,SAAkB3P,EAAQ8R,GAInBA,IAAKA,EAAMve,OAAOwe,uBACvB,IAAIC,GAAA,EACAxjB,EAAO,KAEX,OAAO,WACQ,OAATA,GAAkBwjB,IACpBA,GAAA,EAEAF,EAAI,WACFE,GAAA,EAIA,IAFA,IAAIh0B,EAASwQ,EAAKxQ,OACdi0B,EAAQ,IAAI5xB,MAAMrC,GACb2C,EAAI,EAAGA,EAAI3C,EAAQ2C,IAAKsxB,EAAMtxB,GAAK6N,EAAK7N,GAEjDqf,EAAOhb,MAAMgb,EAAQiS,GACrBzjB,EAAO,QAIXA,EAAO1N,WOoHyCoxB,CAAQ,WACxD,IAAIC,EAAe1J,GAAW,eAC1B+D,EAAU5c,EAAKiiB,WAAWjiB,EAAKlB,OAO/B0jB,EAAc3J,GAAW,cAC7B6D,GAAU1c,EAAKygB,MAAO7D,GACtB4F,IAEAD,OAGF1K,GAAc,WACZ7X,EAAK5B,QAAQJ,KAAKgC,EAAK/C,QAAQwiB,kBAC/Bzf,EAAKugB,SAAA,IAGAzqB,KAAK2qB,OAGdlB,GAAKtxB,UAAU4vB,MAAQ,SAAgB4E,GACrC,GAAsB,YAAlB,oBAAO9e,OAAP,YAAA+e,GAAO/e,SAGT,OADA7N,KAAK2sB,SAAWA,EACT3sB,KAKT,IAAIkK,EAAOlK,KAEX+hB,GAAc,WACZ,IAAI0K,EAAe1J,GAAW,eAC1B+D,EAAU5c,EAAK9L,QAEjB8L,EAAKygB,MADiB,iBAAbgC,EACIxgB,SAASmd,cAAcqD,GAEvBA,EAQf,IAAID,EAAc3J,GAAW,cAC7B6D,GAAU1c,EAAKygB,MAAO7D,GACtB4F,IAEAD,OAIJhD,GAAKtxB,UAAU+C,SAAW,SAAUskB,EAAUxW,GAC5ChJ,KAAKgJ,MAAQ6Y,GAAM7hB,KAAKgJ,MAAOA,GAAS,IAMxC,IAAIkB,EAAOlK,KACXA,KAAKisB,UAAUjsB,KAAKgJ,OACpBhJ,KAAK0qB,QAAQ5Z,QAAQ,SAAUob,GAC7BA,EAAUhiB,EAAKlB,SAGjBhJ,KAAKkrB,YAAY1L,GACjB,IAAIqN,EAAO7sB,KAAKmsB,WAAWnsB,KAAKgJ,OAGhC,MAAiC,iBAAnB6jB,EAAKC,UAAyBD,EAAKC,UAAYD,EAAK3xB,YAGpEuuB,GAAKtxB,UAAU+yB,YAAc,SAAU6B,GACrC,IAAIvN,EAAUwN,EACVD,GACFvN,EAAWuN,EAAiBrrB,QAAQ,QAAS,IAAIA,QAAQ,MAAO,IAC3D1B,KAAKqqB,eAAc7K,EAAWA,EAAS9d,QAAQ,OAAQ,KAC5DsrB,EAAcD,IAEdvN,EAAW3R,OAAO2R,SAASuJ,SAASrnB,QAAQ,MAAO,IAC/C1B,KAAKqqB,eAAc7K,GAAY3R,OAAO2R,SAAS8K,KAAK5oB,QAAQ,KAAM,MACtEsrB,EAAcnf,OAAO2R,SAASoI,QAEhC,IRpOI3vB,EQoOAowB,EAAUroB,KAAK4f,OAAO5E,MAAMwE,GAMhC,OALAxf,KAAKitB,SAAW5E,EAAQ5Q,GACxBzX,KAAKgJ,MAAMohB,KAAO5K,EAClBxf,KAAKgJ,MAAMkkB,ORvOPj1B,EAAM,GQuOmB+0B,ERtOzBtrB,QAAQ,QAAS,IAAIA,QAAQulB,GAAK,SAAUkG,EAAIC,EAAIC,EAAIC,GAC1Dr1B,EAAI4vB,mBAAmBuF,IAAOvF,mBAAmByF,KAG5Cr1B,GQmOP+H,KAAKgJ,MAAM4R,MAAQyN,EAAQzN,MAC3B5a,KAAKgJ,MAAM2e,OAASU,EAAQV,OACrB3nB,KAAKgJ,OAGdygB,GAAKtxB,UAAUg0B,WAAa,SAAUnjB,GACpC,IAAIukB,EAAcxK,GAAW,mBAAqB/Z,EAAM4R,MAAQ,MAC5Djc,EAAMqB,KAAKitB,SAASjkB,EAAOhJ,KAAKkI,MAEpC,OADAqlB,IACO5uB,GAGT8qB,GAAKtxB,UAAU8zB,UAAY,SAAUjjB,GACnC,IAAIuX,EAAQ,IAAImB,GAAM1Y,EAAOhJ,KAAKsI,QAAQJ,KAAKpB,KAAK9G,KAAKsI,SAAUtI,KAAKwqB,QAGxE,SAASgD,EAAiB7L,EAAWC,GAGnC,IADA,IAAI9Y,EAAO,GACF7N,EAAI,EAAGX,EAAMc,UAAU9C,OAAQ2C,EAAIX,EAAKW,IAC/C6N,EAAKpL,KAAKtC,UAAUH,IAEtB,OAAOslB,EAAMjG,OAAOhb,MAAMihB,EAAOzX,GARnCE,EAAMuX,MAAQiN,EAadA,EAAgBprB,OAAS,WACvB,OAAO,OC5QX,IAAAqrB,GAAe,CACb,YACA,gBACA,uBACA,wBACA,wBACA,QACA,WACA,WACA,UACA,QACA,eACA,UACA,aACA,eACA,gBACA,eACA,wBACA,UACA,QACA,aACA,eACA,WACA,WACA,aACA,oBACA,gBACA,WACA,uBACA,qBACA,uBACA,wBACA,uBACA,wBACA,mBACA,mBACA,eACA,SACA,QACA,cACA,gBACA,YACA,kBACA,eACA,kBACA,kBACA,eACA,cACA,aACA,eACA,oBACA,mBACA,UACA,YACA,cACA,aACA,kBACA,UACA,OACA,gBACA,kBACA,kBACA,eACA,iBACA,eACA,gBACA,oBACA,UACA,cACA,YACA,gBACA,OACA,UACA,gBACA,kBACA,oBACA,gBACA,aACA,kBACA,cACA,cACA,iBACA,aACA,cACA,YACA,mBACA,aACA,UACA,oBACA,WACA,aACA,iBACA,aACA,WACA,aACA,WACA,SACA,QACA,cACA,cACA,cACA,cACA,oBACA,oBACA,eACA,eACA,gBACA,gBACA,cACA,aACA,kBACA,kBACA,aACA,kBACA,iBACA,YACA,UACA,cACA,kBACA,WACA,UACA,OACA,gBACA,aACA,QACA,SACA,aACA,UACA,YACA,aC9FFC,GAAiB,CAAEC,OArBnB,SAAiBC,EAASC,GAQxB,IAPA,IAOSC,EAAOC,EAnBGC,EAYfC,EAAUL,EAAQlsB,QAAQ,oBAAqB,IAC/CwsB,EAASD,EAAQ31B,OACjB61B,EAAUN,EACVpvB,KAAK2vB,M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CACN,aAEAC,EArQO,CACP,WACA,CACC,QACA,KAkQDC,MAAO,CACP,WACA,CACC,YACA,QACA,QACA,IACA,QAGDC,UAAW,CACX,cACA,CACC,UAGDC,IA/QS,CACT,qBACA,CACC,QACA,UA4QDC,SAAU,CACV,yBACA,CACC,WACA,WACA,QACA,UAGDC,GAlRQ,CACR,eACA,CACC,MAgRDC,QAAS,CACT,kBACA,CACC,OACA,OACA,QAGDC,IArRS,CACT,iBACA,CACC,OAmRDC,SAAU,CACV,sBAEAC,QAAS,CACT,kBACA,CACC,UACA,UACA,OACA,SAGDC,OAAQ,CACR,cACA,CACC,SACA,SACA,SACA,QAGDC,WAAY,CACZ,eAEAC,UAAW,CACX,sBAEAC,QA3Sa,CACb,qBA2SAC,KAzSU,CACV,eAySAC,KAvSU,CACV,eAuSAC,KArSU,CACV,kBAqSAC,OAnSY,CACZ,eAmSAC,GAjSQ,CACR,iBACA,CACC,OACA,SA8RDC,QAAS,CACT,qBACA,CACC,UACA,UACA,OACA,SAGDC,OAAQ,CACR,iBACA,CACC,WAGDC,WAAY,CACZ,kBAEAC,KA7SU,CACV,kBA6SAC,OA3SY,CACZ,kBA2SAC,MAzSW,CACX,cACA,CACC,IACA,OACA,SAqSDC,KAlSU,CACV,cACA,CACC,OACA,OA+RDC,IA5RS,CACT,YA4RAC,IA1RS,CACT,aA0RAC,MAxRW,CACX,WACA,CACC,UACA,SAqRDC,MAlRW,CACX,WACA,CACC,MACA,SA+QDC,OA5QY,CACZ,eA4QAC,OAAQ,CACR,mBAEAC,QAAS,CACT,yBACA,CACC,OACA,SAGDC,OAAQ,CACR,qBACA,CACC,UAGDC,UAAW,CACX,0BAEAC,OAAQ,CACR,qBAEAC,OAAQ,CACR,sBAEAC,UAAW,CACX,0BAEAC,QAAS,CACT,mBAEAC,SAAU,CACV,qBACA,CACC,UAGDC,QAAS,CACT,sBAEAC,OAAQ,CACR,kBACA,CACC,MACA,MACA,QACA,SAGDC,UAAW,CACX,sBACA,CACC,WAGDC,MAAO,CACP,cACA,CACC,KACA,OACA,SAGDC,QAAS,CACT,iBACA,CACC,OACA,SACA,YAGDC,QAAS,CACT,kBAEAC,WAAY,CACZ,sBAEAC,UAAW,CACX,eAEAC,MAAO,CACP,iBACA,CACC,SAGDC,SAAU,CACV,qBACA,CACC,UAGDC,YAAa,CACb,0BAEAC,SAAU,CACV,sBAEAC,QAAS,CACT,kBACA,CACC,KACA,WAGDC,OAAQ,CACR,gBAEAC,MAAO,CACP,eAEAC,MAAO,CACP,kBAEAC,MAAO,CACP,kBAEAC,SAAU,CACV,qBACA,CACC,UAGDC,QAAS,CACT,qBAEAC,SAAU,CACV,sBAEAC,YAAa,CACb,yBACA,CACC,YACA,aAGDC,OAAQ,CACR,YAEAC,QAAS,CACT,cACA,CACC,SAGDC,UAAW,CACX,iBACA,CACC,QACA,SACA,SACA,UACA,UAGDC,aAAc,CACd,qBACA,CACC,eAGDC,OAAQ,CACR,qBACA,CACC,MACA,MACA,QACA,SAGDC,UAAW,CACX,yBACA,CACC,WAGDC,MAAO,CACP,iBACA,CACC,OAGDC,SAAU,CACV,sBAEAC,OAAQ,CACR,mBAEAC,MAAO,CACP,kBAEAC,OAAQ,CACR,eAEAC,QAAS,CACT,iBACA,CACC,SAGD5wC,EAldO,CACP,YAkdA6wC,MAAO,CACP,WACA,CACC,KACA,QAGDC,IAvdS,CACT,qBACA,CACC,QAqdDC,SAAU,CACV,sBAEAC,MArdW,CACX,qBACA,CACC,MACA,UAkdDC,IA/cS,CACT,yBACA,CACC,QA6cDC,GA1cQ,CACR,kBACA,CACC,OAwcDC,IArcS,CACT,iBACA,CACC,QAmcDC,GAhcQ,CACR,cACA,CACC,SACA,IACA,OA4bDC,OAAQ,CACR,eAEAC,QA5ba,CACb,kBACA,CACC,WA0bDC,KAvbU,CACV,cACA,CACC,kBACA,KACA,SAmbDC,GAhbQ,CACR,iBACA,CACC,OA8aDC,OAAQ,CACR,kBAEAC,KA9aU,CACV,kBACA,CACC,KACA,SA2aDC,MAxaW,CACX,cACA,CACC,MACA,QAqaDC,QAlaa,CACb,iBACA,CACC,UAgaDC,IA7ZS,CACT,iBACA,CACC,QACA,QA0ZDC,MAvZW,CACX,oBACA,CACC,YAqZDC,MAlZW,CACX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",
  "sourcesContent": [
    "(function(){\nvar createModuleFactory = function createModuleFactory(t){var e;return function(r){return e||t(e={exports:{},parent:r},e.exports),e.exports}};\n",
    "var _$_empty_9 = {};\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZXNDb250ZW50IjpbXX0=",
    "/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = { __proto__: Uint8Array.prototype, foo: function () { return 42 } }\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\n// Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\nif (typeof Symbol !== 'undefined' && Symbol.species != null &&\n    Buffer[Symbol.species] === Buffer) {\n  Object.defineProperty(Buffer, Symbol.species, {\n    value: null,\n    configurable: true,\n    enumerable: false,\n    writable: false\n  })\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayLike(value)\n  }\n\n  if (value == null) {\n    throw TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nBuffer.prototype.__proto__ = Uint8Array.prototype\nBuffer.__proto__ = Uint8Array\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      buf = Buffer.from(buf)\n    }\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n        : (firstByte > 0xBF) ? 2\n          : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  newBuf.__proto__ = Buffer.prototype\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (var i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n",
    "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar objectCreate = Object.create || objectCreatePolyfill\nvar objectKeys = Object.keys || objectKeysPolyfill\nvar bind = Function.prototype.bind || functionBindPolyfill\n\nfunction EventEmitter() {\n  if (!this._events || !Object.prototype.hasOwnProperty.call(this, '_events')) {\n    this._events = objectCreate(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nvar hasDefineProperty;\ntry {\n  var o = {};\n  if (Object.defineProperty) Object.defineProperty(o, 'x', { value: 0 });\n  hasDefineProperty = o.x === 0;\n} catch (err) { hasDefineProperty = false }\nif (hasDefineProperty) {\n  Object.defineProperty(EventEmitter, 'defaultMaxListeners', {\n    enumerable: true,\n    get: function() {\n      return defaultMaxListeners;\n    },\n    set: function(arg) {\n      // check whether the input is a positive number (whose value is zero or\n      // greater and not a NaN).\n      if (typeof arg !== 'number' || arg < 0 || arg !== arg)\n        throw new TypeError('\"defaultMaxListeners\" must be a positive number');\n      defaultMaxListeners = arg;\n    }\n  });\n} else {\n  EventEmitter.defaultMaxListeners = defaultMaxListeners;\n}\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    if (arguments.length > 1)\n      er = arguments[1];\n    if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Unhandled \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n      // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n      // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = objectCreate(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n          listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n          prepend ? [listener, existing] : [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n            existing.length + ' \"' + String(type) + '\" listeners ' +\n            'added. Use emitter.setMaxListeners() to ' +\n            'increase limit.');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        if (typeof console === 'object' && console.warn) {\n          console.warn('%s: %s', w.name, w.message);\n        }\n      }\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    switch (arguments.length) {\n      case 0:\n        return this.listener.call(this.target);\n      case 1:\n        return this.listener.call(this.target, arguments[0]);\n      case 2:\n        return this.listener.call(this.target, arguments[0], arguments[1]);\n      case 3:\n        return this.listener.call(this.target, arguments[0], arguments[1],\n            arguments[2]);\n      default:\n        var args = new Array(arguments.length);\n        for (var i = 0; i < args.length; ++i)\n          args[i] = arguments[i];\n        this.listener.apply(this.target, args);\n    }\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = bind.call(onceWrapper, state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = objectCreate(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else\n          spliceOne(list, position);\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = objectCreate(null);\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = objectCreate(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = objectKeys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = objectCreate(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (!events)\n    return [];\n\n  var evlistener = events[type];\n  if (!evlistener)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction objectCreatePolyfill(proto) {\n  var F = function() {};\n  F.prototype = proto;\n  return new F;\n}\nfunction objectKeysPolyfill(obj) {\n  var keys = [];\n  for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k)) {\n    keys.push(k);\n  }\n  return k;\n}\nfunction functionBindPolyfill(context) {\n  var fn = this;\n  return function () {\n    return fn.apply(context, arguments);\n  };\n}\n",
    "module.exports = plucker\n\nfunction plucker(path, object) {\n  return arguments.length >= 2\n    ? pluck(path)(object)\n    : pluck(path)\n}\n\nfunction pluck(path) {\n  path = typeof path === 'string'\n    ? String(path).trim().split('.')\n    : path\n\n  if (path.length < 2) {\n    path = path[0]\n    return pluckSingle\n  } else {\n    var l = path.length\n    return pluckPath\n  }\n\n  function pluckSingle(object) {\n    return object[path]\n  }\n\n  function pluckPath(object) {\n    for (var i = 0; i < l; i++) {\n      if (typeof object === 'undefined') break\n\n      object = object[path[i]]\n    }\n\n    return object\n  }\n}\n",
    "module.exports = stringify\nstringify.default = stringify\nfunction stringify (obj) {\n  decirc(obj, '', [], null)\n  return JSON.stringify(obj)\n}\nfunction Circle (val, k, parent) {\n  this.val = val\n  this.k = k\n  this.parent = parent\n  this.count = 1\n}\nCircle.prototype.toJSON = function toJSON () {\n  if (--this.count === 0) {\n    this.parent[this.k] = this.val\n  }\n  return '[Circular]'\n}\nfunction decirc (val, k, stack, parent) {\n  if (typeof val === 'object' && val !== null) {\n    if (typeof val.toJSON === 'function') {\n      if (val instanceof Circle) {\n        val.count++\n        return\n      }\n      if (val.toJSON.forceDecirc === undefined) {\n        return\n      }\n    }\n    for (var i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        parent[k] = new Circle(val, k, parent)\n        return\n      }\n    }\n    stack.push(val)\n    for (var key in val) {\n      if (Object.prototype.hasOwnProperty.call(val, key)) {\n        decirc(val[key], key, stack, val)\n      }\n    }\n    stack.pop()\n  }\n}\n",
    "var fastSafeStringify = require('fast-safe-stringify')\nvar copy = require('copy-text-to-clipboard')\n\nfunction tryStringify (obj) {\n  try {\n    return JSON.stringify(obj)\n  } catch (e) {}\n}\n\nfunction stateCopy (obj) {\n  var str = tryStringify(obj) || fastSafeStringify(obj)\n  copy(str)\n}\n\nmodule.exports = stateCopy\n\n",
    "'use strict';\nmodule.exports = input => {\n\tconst el = document.createElement('textarea');\n\n\tel.value = input;\n\n\t// Prevent keyboard from showing on mobile\n\tel.setAttribute('readonly', '');\n\n\tel.style.contain = 'strict';\n\tel.style.position = 'absolute';\n\tel.style.left = '-9999px';\n\tel.style.fontSize = '12pt'; // Prevent zooming on iOS\n\n\tconst selection = document.getSelection();\n\tlet originalRange = false;\n\tif (selection.rangeCount > 0) {\n\t\toriginalRange = selection.getRangeAt(0);\n\t}\n\n\tdocument.body.appendChild(el);\n\tel.select();\n\n\t// Explicit selection workaround for iOS\n\tel.selectionStart = 0;\n\tel.selectionEnd = input.length;\n\n\tlet success = false;\n\ttry {\n\t\tsuccess = document.execCommand('copy');\n\t} catch (err) {}\n\n\tdocument.body.removeChild(el);\n\n\tif (originalRange) {\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(originalRange);\n\t}\n\n\treturn success;\n};\n",
    "var stateCopy = require('state-copy')\nvar pluck = require('plucker')\n\nmodule.exports = copy\n\nfunction copy (state) {\n  var isStateString = state && typeof state === 'string'\n  var isChooPath = isStateString && arguments.length === 1 && state.indexOf('state.') === 0\n\n  if (!state || typeof state === 'function') state = window.choo.state\n  if (isChooPath) [].push.call(arguments, {state: window.choo.state})\n\n  stateCopy(isStateString ? pluck.apply(this, arguments) : state)\n}\n",
    "module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n",
    "var assert = require('assert')\nvar xtend = require('xtend')\n\nvar emojis = {\n  trace: '',\n  debug: '',\n  info: '',\n  warn: '',\n  error: '',\n  fatal: ''\n}\n\nvar levels = {\n  trace: 10,\n  debug: 20,\n  info: 30,\n  warn: 40,\n  error: 50,\n  fatal: 60\n}\n\nvar defaultColors = {\n  foreground: '#d3c0c8',\n  background: '#2d2d2d',\n  black: '#2d2d2d',\n  red: '#f2777a',\n  green: '#99cc99',\n  yellow: '#ffcc66',\n  blue: '#6699cc',\n  magenta: '#cc99cc',\n  cyan: '#66cccc',\n  white: '#d3d0c8',\n  brightBlack: '#747369'\n}\n\nmodule.exports = Nanologger\n\nfunction Nanologger (name, opts) {\n  opts = opts || {}\n  if (!(this instanceof Nanologger)) return new Nanologger(name, opts)\n\n  assert.equal(typeof opts, 'object', 'nanologger: opts should be type object')\n\n  this._name = name || ''\n  this._colors = xtend(defaultColors, opts.colors || {})\n\n  try {\n    this.logLevel = window.localStorage.getItem('logLevel') || 'info'\n  } catch (e) {\n    this.logLevel = 'info'\n  }\n\n  this._logLevel = levels[this.logLevel]\n}\n\nNanologger.prototype.trace = function () {\n  var args = [ 'trace' ]\n  for (var i = 0, len = arguments.length; i < len; i++) args.push(arguments[i])\n  this._print.apply(this, args)\n}\n\nNanologger.prototype.debug = function () {\n  var args = [ 'debug' ]\n  for (var i = 0, len = arguments.length; i < len; i++) args.push(arguments[i])\n  this._print.apply(this, args)\n}\n\nNanologger.prototype.info = function () {\n  var args = [ 'info' ]\n  for (var i = 0, len = arguments.length; i < len; i++) args.push(arguments[i])\n  this._print.apply(this, args)\n}\n\nNanologger.prototype.warn = function () {\n  var args = [ 'warn' ]\n  for (var i = 0, len = arguments.length; i < len; i++) args.push(arguments[i])\n  this._print.apply(this, args)\n}\n\nNanologger.prototype.error = function () {\n  var args = [ 'error' ]\n  for (var i = 0, len = arguments.length; i < len; i++) args.push(arguments[i])\n  this._print.apply(this, args)\n}\n\nNanologger.prototype.fatal = function () {\n  var args = [ 'fatal' ]\n  for (var i = 0, len = arguments.length; i < len; i++) args.push(arguments[i])\n  this._print.apply(this, args)\n}\n\nNanologger.prototype._print = function (level) {\n  if (levels[level] < this._logLevel) return\n\n  var time = getTimeStamp()\n  var emoji = emojis[level]\n  var name = this._name || 'unknown'\n\n  var msgColor = (level === 'error' || level.fatal)\n    ? this._colors.red\n    : level === 'warn'\n      ? this._colors.yellow\n      : this._colors.green\n\n  var objs = []\n  var args = [ null ]\n  var msg = '%c%s ' + emoji + ' %c%s'\n\n  args.push(color(this._colors.brightBlack), time)\n  args.push(color(this._colors.magenta), name)\n\n  for (var i = 1, len = arguments.length; i < len; i++) {\n    var arg = arguments[i]\n    if (typeof arg === 'string') {\n      if (i === 1) {\n        // first string argument is in color\n        msg += ' %c%s'\n        args.push(color(msgColor))\n        args.push(arg)\n      } else if (/ms$/.test(arg)) {\n        // arguments finishing with 'ms', grey out\n        msg += ' %c%s'\n        args.push(color(this._colors.brightBlack))\n        args.push(arg)\n      } else {\n        // normal colors\n        msg += ' %c%s'\n        args.push(color(this._colors.white))\n        args.push(arg)\n      }\n    } else if (typeof arg === 'number') {\n      msg += ' %c%d'\n      args.push(color(this._colors.magenta))\n      args.push(arg)\n    } else {\n      objs.push(arg)\n    }\n  }\n\n  args[0] = msg\n  objs.forEach(function (obj) {\n    args.push(obj)\n  })\n\n  // In IE/Edge console functions don't inherit from Function.prototype\n  // so this is necessary to get all the args applied.\n  Function.prototype.apply.apply(console.log, [console, args])\n}\n\nfunction color (color) {\n  return 'color: ' + color + ';'\n}\n\nfunction getTimeStamp () {\n  var date = new Date()\n  var hours = pad(date.getHours().toString())\n  var minutes = pad(date.getMinutes().toString())\n  var seconds = pad(date.getSeconds().toString())\n  return hours + ':' + minutes + ':' + seconds\n}\n\nfunction pad (str) {\n  return str.length !== 2 ? 0 + str : str\n}\n",
    "var assert = require('assert')\n\nmodule.exports = objectChangeCallsite\n\nfunction objectChangeCallsite (target, callback) {\n  assert.equal(typeof target, 'object', 'object-change-callsite: target should be type object')\n  assert.equal(typeof callback, 'function', 'object-change-callsite: callback should be type function')\n\n  return new Proxy(target, {\n    set: function (obj, prop, value) {\n      var err = new Error()\n      var trace = strip(err.stack)\n      callback(prop, value, trace)\n      obj[prop] = value\n      return true\n    },\n    deleteProperty: function (target, prop) {\n      var err = new Error()\n      var trace = strip(err.stack)\n      callback(prop, undefined, trace)\n      if (prop in target) {\n        delete target[prop]\n        return true\n      }\n      return false\n    }\n  })\n}\n\nfunction strip (str) {\n  var arr = str.split('\\n')\n  arr = arr.length > 2 ? arr.slice(2) : arr\n  arr[0] = arr[0].replace(/^ {4}at /, '')\n  return '\\n' + arr.join('\\n')\n}\n",
    "var onChange = require('object-change-callsite')\nvar nanologger = require('nanologger')\nvar assert = require('assert')\n\nvar enabledMessage = 'Debugging enabled. To disable run: `choo.debug = false`'\nvar disabledMessage = 'Debugging disabled. We hope it was helpful! '\n\nmodule.exports = debug\n\nfunction debug (state, emitter, app, localEmitter) {\n  var log = nanologger('choo-devtools')\n  var enabled = window.localStorage.logLevel === 'debug'\n  if (enabled) log.info(enabledMessage)\n\n  state = onChange(state, function (attr, value, callsite) {\n    if (!enabled) return\n    callsite = callsite.split('\\n')[1].replace(/^ +/, '')\n    log.info('state.' + attr, value, '\\n' + callsite)\n  })\n\n  app.state = state\n\n  Object.defineProperty(window.choo, 'debug', {\n    get: function () {\n      window.localStorage.logLevel = 'debug'\n      localEmitter.emit('debug', true)\n      enabled = true\n      return enabledMessage\n    },\n    set: function (bool) {\n      assert.equal(typeof bool, 'boolean', 'choo-devtools.debug: bool should be type boolean')\n      window.localStorage.logLevel = bool ? 'debug' : 'info'\n      enabled = bool\n      localEmitter.emit('debug', enabled)\n      if (enabled) log.info(enabledMessage)\n      else log.info(disabledMessage)\n    }\n  })\n}\n",
    "module.exports = help\n\nfunction help () {\n  Object.defineProperty(window.choo, 'help', {\n    get: get,\n    set: noop\n  })\n\n  function get () {\n    setTimeout(function () {\n      print('copy', 'Serialize the current state to the clipboard.')\n      print('debug', 'Enable Choo debug mode.')\n      print('emit', 'Emit an event in the Choo emitter.')\n      print('help', 'Print usage information.')\n      print('log', 'Print the last 150 events emitted.')\n      print('on', 'Listen for an event in the Choo emitter.')\n      print('once', 'Listen for an event once in the Choo emitter.')\n      print('perf', 'Print out performance metrics')\n      print('state', 'Print the Choo state object.')\n      print('storage', 'Print browser storage information.')\n    }, 0)\n    return 'Choo command overview'\n  }\n}\n\nfunction print (cmd, desc) {\n  var color = '#cc99cc'\n  console.log('  %cchoo.' + cmd, 'color: ' + color, ' ' + desc)\n}\n\nfunction noop () {}\n",
    "'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n",
    "exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n",
    "var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n",
    "var assert = require('assert')\n\nvar hasWindow = typeof window !== 'undefined'\n\nfunction createScheduler () {\n  var scheduler\n  if (hasWindow) {\n    if (!window._nanoScheduler) window._nanoScheduler = new NanoScheduler(true)\n    scheduler = window._nanoScheduler\n  } else {\n    scheduler = new NanoScheduler()\n  }\n  return scheduler\n}\n\nfunction NanoScheduler (hasWindow) {\n  this.hasWindow = hasWindow\n  this.hasIdle = this.hasWindow && window.requestIdleCallback\n  this.method = this.hasIdle ? window.requestIdleCallback.bind(window) : this.setTimeout\n  this.scheduled = false\n  this.queue = []\n}\n\nNanoScheduler.prototype.push = function (cb) {\n  assert.equal(typeof cb, 'function', 'nanoscheduler.push: cb should be type function')\n\n  this.queue.push(cb)\n  this.schedule()\n}\n\nNanoScheduler.prototype.schedule = function () {\n  if (this.scheduled) return\n\n  this.scheduled = true\n  var self = this\n  this.method(function (idleDeadline) {\n    var cb\n    while (self.queue.length && idleDeadline.timeRemaining() > 0) {\n      cb = self.queue.shift()\n      cb(idleDeadline)\n    }\n    self.scheduled = false\n    if (self.queue.length) self.schedule()\n  })\n}\n\nNanoScheduler.prototype.setTimeout = function (cb) {\n  setTimeout(cb, 0, {\n    timeRemaining: function () {\n      return 1\n    }\n  })\n}\n\nmodule.exports = createScheduler\n",
    "'use strict'\n\n/**\n * Remove a range of items from an array\n *\n * @function removeItems\n * @param {Array<*>} arr The target array\n * @param {number} startIdx The index to begin removing from (inclusive)\n * @param {number} removeCount How many items to remove\n */\nmodule.exports = function removeItems (arr, startIdx, removeCount) {\n  var i, length = arr.length\n\n  if (startIdx >= length || removeCount === 0) {\n    return\n  }\n\n  removeCount = (startIdx + removeCount > length ? length - startIdx : removeCount)\n\n  var len = length - removeCount\n\n  for (i = startIdx; i < len; ++i) {\n    arr[i] = arr[i + removeCount]\n  }\n\n  arr.length = len\n}\n",
    "var removeItems = require('remove-array-items')\nvar scheduler = require('nanoscheduler')()\nvar nanologger = require('nanologger')\nvar _log = nanologger('choo')\nvar clone = require('clone')\n\nvar MAX_HISTORY_LENGTH = 150   // How many items we should keep around\n\nmodule.exports = log\n\nfunction log (state, emitter, app, localEmitter) {\n  var shouldDebug = window.localStorage.logLevel === 'debug'\n  var history = []\n  var i = 0\n  var shouldWarn = true\n\n  localEmitter.on('debug', function (bool) {\n    shouldDebug = bool\n  })\n\n  window.choo._history = history\n  window.choo.history = showHistory\n\n  Object.defineProperty(window.choo, 'log', { get: showHistory, set: noop })\n  Object.defineProperty(window.choo, 'history', { get: showHistory, set: noop })\n\n  emitter.on('*', function (name, data) {\n    i += 1\n    var entry = new Event(name, data, state)\n    history.push(entry)\n    scheduler.push(function () {\n      var length = history.length\n      if (length > MAX_HISTORY_LENGTH) {\n        removeItems(history, 0, length - MAX_HISTORY_LENGTH)\n      }\n    })\n  })\n\n  function showHistory () {\n    setTimeout(function () {\n      console.table(history)\n    }, 0)\n    var events = i === 1 ? 'event' : 'events'\n    var msg = i + ' ' + events + ' recorded, showing the last ' + MAX_HISTORY_LENGTH + '.'\n    if (shouldDebug === false) {\n      msg += ' Enable state capture by calling `choo.debug`.'\n    } else {\n      msg += ' Disable state capture by calling `choo.debug = false`.'\n    }\n    return msg\n  }\n\n  function Event (name, data, state) {\n    this.name = name\n    this.data = data === undefined ? '<no data>' : data\n    this.state = shouldDebug\n      ? tryClone(state)\n      : '<disabled>'\n  }\n\n  function tryClone (state) {\n    try {\n      var _state = clone(state)\n      if (!shouldWarn) shouldWarn = true\n      return _state\n    } catch (ex) {\n      if (shouldWarn) {\n        _log.warn('Could not clone your app state. Make sure to have a serializable state so it can be cloned')\n        shouldWarn = false\n      }\n      return '<unserializable>'\n    }\n  }\n}\n\nfunction noop () {}\n",
    "var scheduler = require('nanoscheduler')()\nvar assert = require('assert')\n\nvar entryTypes = [\n  'frame',\n  'measure',\n  'navigation',\n  'resource',\n  'longtask'\n]\n\nmodule.exports = onPerformance\n\nfunction onPerformance (cb) {\n  assert.equal(typeof cb, 'function', 'on-performance: cb should be type function')\n\n  var PerformanceObserver = typeof window !== 'undefined' && window.PerformanceObserver\n  if (!PerformanceObserver) return\n\n  // Enable singleton.\n  if (window._onperformance) {\n    window._onperformance.push(cb)\n    return stop\n  }\n\n  window._onperformance = [cb]\n  var observer = new PerformanceObserver(parseEntries)\n  setTimeout(function () {\n    parseEntries(window.performance)\n    observer.observe({ entryTypes: entryTypes })\n  }, 0)\n\n  return stop\n\n  function stop () {\n    window._onperformance.splice(window._onperformance.indexOf(cb), 1)\n  }\n\n  function parseEntries (list) {\n    list.getEntries().forEach(function (entry) {\n      scheduler.push(function () {\n        clear(entry)\n        window._onperformance.forEach(function (cb) {\n          cb(entry)\n        })\n      })\n    })\n  }\n\n  // Navigation, longtask and frame don't have a clear method (yet)\n  // Resource timings can only be cleared in bulk\n  // see: https://developer.mozilla.org/en-US/docs/Web/API/Performance/clearMeasures\n  function clear (entry) {\n    var type = entry.entryType\n    if (type === 'measure') window.performance.clearMeasures(entry.name)\n    else if (type === 'resource') window.performance.clearResourceTimings()\n  }\n}\n",
    "var onPerformance = require('on-performance')\nvar scheduler = require('nanoscheduler')()\nvar assert = require('assert')\n\nmodule.exports = ChooHooks\n\nfunction ChooHooks (emitter) {\n  if (!(this instanceof ChooHooks)) return new ChooHooks(emitter)\n\n  assert.equal(typeof emitter, 'object')\n\n  this.hasWindow = typeof window !== 'undefined'\n  this.hasIdleCallback = this.hasWindow && window.requestIdleCallback\n  this.hasPerformance = this.hasWindow &&\n    window.performance &&\n    window.performance.getEntriesByName\n\n  this.emitter = emitter\n  this.listeners = {}\n  this.buffer = {\n    use: [],\n    render: {},\n    events: {}\n  }\n}\n\nChooHooks.prototype.on = function (name, handler) {\n  this.listeners[name] = handler\n}\n\nChooHooks.prototype.start = function () {\n  var self = this\n  if (this.hasPerformance) {\n    window.performance.onresourcetimingbufferfull = function () {\n      var listener = self.listeners['resource-timing-buffer-full']\n      if (listener) listener()\n    }\n  }\n\n  // TODO also handle log events\n  onPerformance(function (timing) {\n    if (!timing) return\n    if (timing.entryType !== 'measure') return\n\n    var eventName = timing.name\n    if (/choo\\.morph/.test(eventName)) {\n      self.buffer.render.morph = timing\n    } else if (/choo\\.route/.test(eventName)) {\n      self.buffer.render.route = timing\n    } else if (/choo\\.render/.test(eventName)) {\n      self.buffer.render.render = timing\n    } else if (/choo\\.use/.test(eventName)) {\n      self.buffer.use.push(timing)\n    } else if (/choo\\.emit/.test(eventName) && !/log:/.test(eventName)) {\n      var eventListener = self.listeners['event']\n      if (eventListener) {\n        var timingName = eventName.match(/choo\\.emit\\('(.*)'\\)/)[1]\n        if (timingName === 'render' || timingName === 'DOMContentLoaded') return\n\n        var traceId = eventName.match(/\\[(\\d+)\\]/)[1]\n        var data = self.buffer.events[traceId]\n\n        self.buffer.events[traceId] = null\n        eventListener(timingName, data, timing)\n      }\n    }\n\n    var rBuf = self.buffer.render\n    if (rBuf.render && rBuf.route && rBuf.morph) {\n      var renderListener = self.listeners['render']\n      if (!renderListener) return\n      var timings = {}\n      while (self.buffer.render.length) {\n        var _timing = self.buffer.render.pop()\n        var name = _timing.name\n        if (/choo\\.render/.test(name)) timings.render = _timing\n        else if (/choo\\.morph/.test(name)) timings.morph = _timing\n        else timings.route = _timing\n      }\n      rBuf.render = rBuf.route = rBuf.morph = void 0\n      renderListener(timings)\n    }\n  })\n\n  // Check if there's timings without any listeners\n  // and trigger the DOMContentLoaded event.\n  // If the timing API is not available, we handle all events here\n  this.emitter.on('*', function (eventName, data, uuid) {\n    var logLevel = /^log:(\\w{4,5})/.exec(eventName)\n\n    if (!self.hasPerformance && eventName === 'render') {\n      // Render\n      var renderListener = self.listeners['render']\n      if (renderListener) renderListener()\n    } else if (eventName === 'DOMContentLoaded') {\n      // DOMContentLoaded\n      self._emitLoaded()\n    } else if (logLevel) {\n      logLevel = logLevel[1]\n      // Log:*\n      var logListener = self.listeners['log:' + logLevel]\n      if (logListener) logListener(eventName, data)\n    } else if (!self.emitter.listeners(eventName).length) {\n      // Unhandled\n      var unhandledListener = self.listeners['unhandled']\n      if (unhandledListener) unhandledListener(eventName, data)\n    } else if (eventName !== 'render') {\n      // *\n      if (self.hasPerformance) self.buffer.events[uuid] = data\n    }\n  })\n}\n\n// compute and log time till interactive when DOMContentLoaded event fires\nChooHooks.prototype._emitLoaded = function () {\n  var self = this\n  scheduler.push(function clear () {\n    var listener = self.listeners['DOMContentLoaded']\n    var usesListener = self.listeners['use']\n\n    var timing = self.hasWindow && window.performance && window.performance.timing\n\n    if (listener && timing) {\n      listener({\n        interactive: timing.domInteractive - timing.navigationStart,\n        loaded: timing.domContentLoadedEventEnd - timing.navigationStart\n      })\n    }\n\n    if (self.hasPerformance) {\n      var duration = sumDurations(self.buffer.use)\n      if (usesListener) usesListener(self.buffer.use.length, duration)\n    } else {\n      usesListener()\n    }\n  })\n}\n\nfunction sumDurations (timings) {\n  return timings.reduce(function (sum, timing) {\n    return sum + timing.duration\n  }, 0).toFixed()\n}\n",
    "var scheduler = require('nanoscheduler')()\nvar nanologger = require('nanologger')\nvar Hooks = require('choo-hooks')\n\nmodule.exports = logger\n\nfunction logger (state, emitter, opts) {\n  var initialRender = true\n  var hooks = Hooks(emitter)\n  var log = nanologger('choo')\n\n  hooks.on('log:debug', logger('debug'))\n  hooks.on('log:info', logger('info'))\n  hooks.on('log:warn', logger('warn'))\n  hooks.on('log:error', logger('error'))\n  hooks.on('log:fatal', logger('fatal'))\n\n  hooks.on('event', function (eventName, data, timing) {\n    if (opts.filter && !opts.filter(eventName, data, timing)) return\n\n    if (timing) {\n      var duration = timing.duration.toFixed()\n      var level = duration < 50 ? 'info' : 'warn'\n      if (data !== undefined) logger(level)(eventName, data, duration + 'ms')\n      else logger(level)(eventName, duration + 'ms')\n    } else {\n      if (data !== undefined) logger('info')(eventName, data)\n      else logger('info')(eventName)\n    }\n  })\n\n  hooks.on('use', function (count, duration) {\n    logger('debug')('use', { count: count }, duration + 'ms')\n  })\n\n  hooks.on('unhandled', function (eventName, data) {\n    logger('error')('No listeners for ' + eventName)\n  })\n\n  hooks.on('DOMContentLoaded', function (timing) {\n    if (!timing) return logger('info')('DOMContentLoaded')\n    var level = timing.interactive < 1000 ? 'info' : 'warn'\n    logger(level)('DOMContentLoaded', timing.interactive + 'ms to interactive')\n  })\n\n  hooks.on('render', function (timings) {\n    if (!timings || !timings.render) return logger('info')('render')\n    var duration = timings.render.duration.toFixed()\n    var msg = 'render'\n\n    if (initialRender) {\n      initialRender = false\n      msg = 'initial ' + msg\n    }\n\n    // each frame has 10ms available for userland stuff\n    var fps = Math.min((600 / duration).toFixed(), 60)\n\n    if (fps === 60) {\n      logger('info')(msg, fps + 'fps', duration + 'ms')\n    } else {\n      var times = {\n        render: timings.render.duration.toFixed() + 'ms'\n      }\n      if (timings.morph) times.morph = timings.morph.duration.toFixed() + 'ms'\n      logger('warn')(msg, fps + 'fps', duration + 'ms', times)\n    }\n  })\n\n  hooks.on('resource-timing-buffer-full', function () {\n    logger('error')(\"The browser's Resource Resource timing buffer is full. Cannot store any more timing information\")\n  })\n\n  hooks.start()\n\n  function logger (level) {\n    return function () {\n      var args = []\n      for (var i = 0, len = arguments.length; i < len; i++) {\n        args.push(arguments[i])\n      }\n      scheduler.push(function () {\n        log[level].apply(log, args)\n      })\n    }\n  }\n}\n",
    "var onPerformance = require('on-performance')\n\nvar BAR = ''\n\nmodule.exports = perf\n\nfunction perf (state, emitter, app, localEmitter) {\n  var stats = {}\n\n  window.choo.perf = {}\n\n  // Print all events\n  var all = new Perf(stats, 'all')\n  Object.defineProperty(window.choo.perf, 'all', {\n    get: all.get.bind(all),\n    set: noop\n  })\n\n  // Print only Choo core events\n  var core = new Perf(stats, 'core', function (name) {\n    return /^choo/.test(name)\n  })\n  Object.defineProperty(window.choo.perf, 'core', {\n    get: core.get.bind(core),\n    set: noop\n  })\n\n  // Print component data\n  var components = new Perf(stats, 'components', function (name) {\n    return !/^choo/.test(name) && !/^bankai/.test(name)\n  })\n  Object.defineProperty(window.choo.perf, 'components', {\n    get: components.get.bind(components),\n    set: noop\n  })\n\n  // Print choo userland events (event emitter)\n  var events = new Perf(stats, 'events', function (name) {\n    return /^choo\\.emit/.test(name)\n  }, function (name) {\n    return name.replace(/^choo\\.emit\\('/, '').replace(/'\\)$/, '')\n  })\n  Object.defineProperty(window.choo.perf, 'events', {\n    get: events.get.bind(events),\n    set: noop\n  })\n\n  onPerformance(function (entry) {\n    if (entry.entryType !== 'measure') return\n    var name = entry.name.replace(/ .*$/, '')\n\n    if (!stats[name]) {\n      stats[name] = {\n        name: name,\n        count: 0,\n        entries: []\n      }\n    }\n\n    var stat = stats[name]\n    stat.count += 1\n    stat.entries.push(entry.duration)\n  })\n}\n\n// Create a new Perf instance by passing it a filter\nfunction Perf (stats, name, filter, rename) {\n  this.stats = stats\n  this.name = name\n  this.filter = filter || function () { return true }\n  this.rename = rename || function (name) { return name }\n}\n\n// Compute a table of performance entries based on a filter\nPerf.prototype.get = function () {\n  var filtered = Object.keys(this.stats).filter(this.filter)\n  var self = this\n\n  var maxTime = 0\n  var maxMedian = 0\n  var fmt = filtered.map(function (key) {\n    var stat = self.stats[key]\n    var totalTime = Number(stat.entries.reduce(function (time, entry) {\n      return time + entry\n    }, 0).toFixed(2))\n    if (totalTime > maxTime) maxTime = totalTime\n\n    var median = getMedian(stat.entries)\n    if (median > maxMedian) maxMedian = median\n\n    var name = self.rename(stat.name)\n    return new PerfEntry(name, totalTime, median, stat.count)\n  })\n\n  var barLength = 10\n  fmt.forEach(function (entry) {\n    var totalTime = entry['Total Time (ms)']\n    var median = entry['Median (ms)']\n    entry[' '] = createBar(totalTime / maxTime * 100 / barLength)\n    entry['  '] = createBar(median / maxMedian * 100 / barLength)\n  })\n\n  function createBar (len) {\n    var str = ''\n    for (var i = 0, max = Math.round(len); i < max; i++) {\n      str += BAR\n    }\n    return str\n  }\n\n  var res = fmt.sort(function (a, b) {\n    return b['Total Time (ms)'] - a['Total Time (ms)']\n  })\n  console.table(res)\n  return \"Showing performance events for '\" + this.name + \"'\"\n}\n\n// An entry for the performance timeline.\nfunction PerfEntry (name, totalTime, median, count) {\n  this['Name'] = name\n  this['Total Time (ms)'] = totalTime\n  this[' '] = 0\n  this['Median (ms)'] = median\n  this['  '] = 0\n  this['Total Count'] = count\n}\n\n// Get the median from an array of numbers.\nfunction getMedian (args) {\n  if (!args.length) return 0\n  var numbers = args.slice(0).sort(function (a, b) { return a - b })\n  var middle = Math.floor(numbers.length / 2)\n  var isEven = numbers.length % 2 === 0\n  var res = isEven ? (numbers[middle] + numbers[middle - 1]) / 2 : numbers[middle]\n  return Number(res.toFixed(2))\n}\n\n// Do nothing.\nfunction noop () {}\n",
    "module.exports = prettierBytes\n\nfunction prettierBytes (num) {\n  if (typeof num !== 'number' || isNaN(num)) {\n    throw new TypeError('Expected a number, got ' + typeof num)\n  }\n\n  var neg = num < 0\n  var units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\n  if (neg) {\n    num = -num\n  }\n\n  if (num < 1) {\n    return (neg ? '-' : '') + num + ' B'\n  }\n\n  var exponent = Math.min(Math.floor(Math.log(num) / Math.log(1000)), units.length - 1)\n  num = Number(num / Math.pow(1000, exponent))\n  var unit = units[exponent]\n\n  if (num >= 10 || num % 1 === 0) {\n    // Do not show decimals when the number is two-digit, or if the number has no\n    // decimal component.\n    return (neg ? '-' : '') + num.toFixed(0) + ' ' + unit\n  } else {\n    return (neg ? '-' : '') + num.toFixed(1) + ' ' + unit\n  }\n}\n",
    "var pretty = require('prettier-bytes')\n\nmodule.exports = storage\n\nfunction storage () {\n  Object.defineProperty(window.choo, 'storage', {\n    get: get,\n    set: noop\n  })\n\n  function get () {\n    if (navigator.storage) {\n      navigator.storage.estimate().then(function (estimate) {\n        var value = (estimate.usage / estimate.quota).toFixed()\n        clr('Max storage:', fmt(estimate.quota))\n        clr('Storage used:', fmt(estimate.usage) + ' (' + value + '%)')\n        navigator.storage.persisted().then(function (bool) {\n          var val = bool ? 'enabled' : 'disabled'\n          clr('Persistent storage:', val)\n        })\n      })\n      return 'Calculating storage quota'\n    } else {\n      var protocol = window.location.protocol\n      return (/https/.test(protocol))\n        ? \"The Storage API is unavailable in this browser. We're sorry!\"\n        : 'The Storage API is unavailable. Serving this site over HTTPS might help enable it!'\n    }\n  }\n}\n\nfunction clr (msg, arg) {\n  var color = '#cc99cc'\n  console.log('%c' + msg, 'color: ' + color, arg)\n}\n\nfunction fmt (num) {\n  return pretty(num).replace(' ', '')\n}\n\nfunction noop () {}\n",
    "var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n",
    "var assert = require('assert')\n\nmodule.exports = getAllRoutes\n\nvar transform = function (trie, previous) {\n  var prev = previous || '/'\n  var routes = {}\n  var nodes = trie.nodes\n  Object.keys(nodes).forEach(function (key) {\n    var path = (prev === '/' ? prev : prev + '/') + (key === '$$' ? ':' + trie.name : key)\n    var cb = nodes[key].cb\n    if (cb !== undefined) {\n      routes[path] = cb\n    }\n    if (Object.keys(nodes[key].nodes).length !== 0) {\n      var obj = transform(nodes[key], path)\n      Object.keys(obj).forEach(function (r) {\n        routes[r] = obj[r]\n      })\n    }\n  })\n  return routes\n}\n\n// walk a wayfarer trie\n// (obj, fn) -> null\nfunction getAllRoutes (router) {\n  assert.equal(typeof router, 'function', 'wayfarer.getAllRoutes: router should be an function')\n\n  var trie = router._trie\n  assert.equal(typeof trie, 'object', 'wayfarer.getAllRoutes: trie should be an object')\n\n  var tree = trie.trie\n  return transform(tree)\n}\n",
    "var EventEmitter = require('events').EventEmitter\nvar window = require('global/window')\n\nvar storage = require('./lib/storage')\nvar logger = require('./lib/logger')\nvar debug = require('./lib/debug')\nvar copy = require('./lib/copy')\nvar help = require('./lib/help')\nvar perf = require('./lib/perf')\nvar log = require('./lib/log')\nvar getAllRoutes = require('wayfarer/get-all-routes')\n\nmodule.exports = expose\n\nfunction expose (opts) {\n  opts = opts || {}\n  store.storeName = 'choo-devtools'\n  return store\n  function store (state, emitter, app) {\n    var localEmitter = new EventEmitter()\n\n    if (typeof window !== 'undefined') {\n      logger(state, emitter, opts)\n    }\n\n    emitter.on('DOMContentLoaded', function () {\n      if (typeof window === 'undefined') return\n      window.choo = {}\n\n      window.choo.state = state\n      window.choo.emit = function (eventName, data) {\n        emitter.emit(eventName, data)\n      }\n      window.choo.on = function (eventName, listener) {\n        emitter.on(eventName, listener)\n      }\n\n      debug(state, emitter, app, localEmitter)\n\n      log(state, emitter, app, localEmitter)\n      perf(state, emitter, app, localEmitter)\n      window.choo.copy = copy\n      if (app.router && app.router.router) {\n        window.choo.routes = Object.keys(getAllRoutes(app.router.router))\n      }\n\n      storage()\n      help()\n    })\n  }\n}\n",
    "module.exports = LRU\n\nfunction LRU (opts) {\n  if (!(this instanceof LRU)) return new LRU(opts)\n  if (typeof opts === 'number') opts = {max: opts}\n  if (!opts) opts = {}\n  this.cache = {}\n  this.head = this.tail = null\n  this.length = 0\n  this.max = opts.max || 1000\n  this.maxAge = opts.maxAge || 0\n}\n\nObject.defineProperty(LRU.prototype, 'keys', {\n  get: function () { return Object.keys(this.cache) }\n})\n\nLRU.prototype.clear = function () {\n  this.cache = {}\n  this.head = this.tail = null\n  this.length = 0\n}\n\nLRU.prototype.remove = function (key) {\n  if (typeof key !== 'string') key = '' + key\n  if (!this.cache.hasOwnProperty(key)) return\n\n  var element = this.cache[key]\n  delete this.cache[key]\n  this._unlink(key, element.prev, element.next)\n  return element.value\n}\n\nLRU.prototype._unlink = function (key, prev, next) {\n  this.length--\n\n  if (this.length === 0) {\n    this.head = this.tail = null\n  } else {\n    if (this.head === key) {\n      this.head = prev\n      this.cache[this.head].next = null\n    } else if (this.tail === key) {\n      this.tail = next\n      this.cache[this.tail].prev = null\n    } else {\n      this.cache[prev].next = next\n      this.cache[next].prev = prev\n    }\n  }\n}\n\nLRU.prototype.peek = function (key) {\n  if (!this.cache.hasOwnProperty(key)) return\n\n  var element = this.cache[key]\n\n  if (!this._checkAge(key, element)) return\n  return element.value\n}\n\nLRU.prototype.set = function (key, value) {\n  if (typeof key !== 'string') key = '' + key\n\n  var element\n\n  if (this.cache.hasOwnProperty(key)) {\n    element = this.cache[key]\n    element.value = value\n    if (this.maxAge) element.modified = Date.now()\n\n    // If it's already the head, there's nothing more to do:\n    if (key === this.head) return value\n    this._unlink(key, element.prev, element.next)\n  } else {\n    element = {value: value, modified: 0, next: null, prev: null}\n    if (this.maxAge) element.modified = Date.now()\n    this.cache[key] = element\n\n    // Eviction is only possible if the key didn't already exist:\n    if (this.length === this.max) this.evict()\n  }\n\n  this.length++\n  element.next = null\n  element.prev = this.head\n\n  if (this.head) this.cache[this.head].next = key\n  this.head = key\n\n  if (!this.tail) this.tail = key\n  return value\n}\n\nLRU.prototype._checkAge = function (key, element) {\n  if (this.maxAge && (Date.now() - element.modified) > this.maxAge) {\n    this.remove(key)\n    return false\n  }\n  return true\n}\n\nLRU.prototype.get = function (key) {\n  if (typeof key !== 'string') key = '' + key\n  if (!this.cache.hasOwnProperty(key)) return\n\n  var element = this.cache[key]\n\n  if (!this._checkAge(key, element)) return\n\n  if (this.head !== key) {\n    if (key === this.tail) {\n      this.tail = element.next\n      this.cache[this.tail].prev = null\n    } else {\n      // Set prev.next -> element.next:\n      this.cache[element.prev].next = element.next\n    }\n\n    // Set element.next.prev -> element.prev:\n    this.cache[element.next].prev = element.prev\n\n    // Element is the new head\n    this.cache[this.head].next = key\n    element.prev = this.head\n    element.next = null\n    this.head = key\n  }\n\n  return element.value\n}\n\nLRU.prototype.evict = function () {\n  if (!this.tail) return\n  this.remove(this.tail)\n}\n",
    "var assert = require('assert')\nvar LRU = require('nanolru')\n\nmodule.exports = ChooComponentCache\n\nfunction ChooComponentCache (state, emit, lru) {\n  assert.ok(this instanceof ChooComponentCache, 'ChooComponentCache should be created with `new`')\n\n  assert.equal(typeof state, 'object', 'ChooComponentCache: state should be type object')\n  assert.equal(typeof emit, 'function', 'ChooComponentCache: emit should be type function')\n\n  if (typeof lru === 'number') this.cache = new LRU(lru)\n  else this.cache = lru || new LRU(100)\n  this.state = state\n  this.emit = emit\n}\n\n// Get & create component instances.\nChooComponentCache.prototype.render = function (Component, id) {\n  assert.equal(typeof Component, 'function', 'ChooComponentCache.render: Component should be type function')\n  assert.ok(typeof id === 'string' || typeof id === 'number', 'ChooComponentCache.render: id should be type string or type number')\n\n  var el = this.cache.get(id)\n  if (!el) {\n    var args = []\n    for (var i = 2, len = arguments.length; i < len; i++) {\n      args.push(arguments[i])\n    }\n    args.unshift(Component, id, this.state, this.emit)\n    el = newCall.apply(newCall, args)\n    this.cache.set(id, el)\n  }\n\n  return el\n}\n\n// Because you can't call `new` and `.apply()` at the same time. This is a mad\n// hack, but hey it works so we gonna go for it. Whoop.\nfunction newCall (Cls) {\n  return new (Cls.bind.apply(Cls, arguments)) // eslint-disable-line\n}\n",
    "module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n",
    "'use strict'\n\nmodule.exports = ready\n\nfunction ready (callback) {\n  if (typeof document === 'undefined') {\n    throw new Error('document-ready only runs in the browser')\n  }\n  var state = document.readyState\n  if (state === 'complete' || state === 'interactive') {\n    return setTimeout(callback, 0)\n  }\n\n  document.addEventListener('DOMContentLoaded', function onLoad () {\n    callback()\n  })\n}\n",
    "var scheduler = require('nanoscheduler')()\nvar assert = require('assert')\n\nvar perf\nnanotiming.disabled = true\ntry {\n  perf = window.performance\n  nanotiming.disabled = window.localStorage.DISABLE_NANOTIMING === 'true' || !perf.mark\n} catch (e) { }\n\nmodule.exports = nanotiming\n\nfunction nanotiming (name) {\n  assert.equal(typeof name, 'string', 'nanotiming: name should be type string')\n\n  if (nanotiming.disabled) return noop\n\n  var uuid = (perf.now() * 10000).toFixed() % Number.MAX_SAFE_INTEGER\n  var startName = 'start-' + uuid + '-' + name\n  perf.mark(startName)\n\n  function end (cb) {\n    var endName = 'end-' + uuid + '-' + name\n    perf.mark(endName)\n\n    scheduler.push(function () {\n      var err = null\n      try {\n        var measureName = name + ' [' + uuid + ']'\n        perf.measure(measureName, startName, endName)\n        perf.clearMarks(startName)\n        perf.clearMarks(endName)\n      } catch (e) { err = e }\n      if (cb) cb(err, name)\n    })\n  }\n\n  end.uuid = uuid\n  return end\n}\n\nfunction noop (cb) {\n  if (cb) {\n    scheduler.push(function () {\n      cb(new Error('nanotiming: performance API unavailable'))\n    })\n  }\n}\n",
    "var splice = require('remove-array-items')\nvar nanotiming = require('nanotiming')\nvar assert = require('assert')\n\nmodule.exports = Nanobus\n\nfunction Nanobus (name) {\n  if (!(this instanceof Nanobus)) return new Nanobus(name)\n\n  this._name = name || 'nanobus'\n  this._starListeners = []\n  this._listeners = {}\n}\n\nNanobus.prototype.emit = function (eventName) {\n  assert.ok(typeof eventName === 'string' || typeof eventName === 'symbol', 'nanobus.emit: eventName should be type string or symbol')\n\n  var data = []\n  for (var i = 1, len = arguments.length; i < len; i++) {\n    data.push(arguments[i])\n  }\n\n  var emitTiming = nanotiming(this._name + \"('\" + eventName.toString() + \"')\")\n  var listeners = this._listeners[eventName]\n  if (listeners && listeners.length > 0) {\n    this._emit(this._listeners[eventName], data)\n  }\n\n  if (this._starListeners.length > 0) {\n    this._emit(this._starListeners, eventName, data, emitTiming.uuid)\n  }\n  emitTiming()\n\n  return this\n}\n\nNanobus.prototype.on = Nanobus.prototype.addListener = function (eventName, listener) {\n  assert.ok(typeof eventName === 'string' || typeof eventName === 'symbol', 'nanobus.on: eventName should be type string or symbol')\n  assert.equal(typeof listener, 'function', 'nanobus.on: listener should be type function')\n\n  if (eventName === '*') {\n    this._starListeners.push(listener)\n  } else {\n    if (!this._listeners[eventName]) this._listeners[eventName] = []\n    this._listeners[eventName].push(listener)\n  }\n  return this\n}\n\nNanobus.prototype.prependListener = function (eventName, listener) {\n  assert.ok(typeof eventName === 'string' || typeof eventName === 'symbol', 'nanobus.prependListener: eventName should be type string or symbol')\n  assert.equal(typeof listener, 'function', 'nanobus.prependListener: listener should be type function')\n\n  if (eventName === '*') {\n    this._starListeners.unshift(listener)\n  } else {\n    if (!this._listeners[eventName]) this._listeners[eventName] = []\n    this._listeners[eventName].unshift(listener)\n  }\n  return this\n}\n\nNanobus.prototype.once = function (eventName, listener) {\n  assert.ok(typeof eventName === 'string' || typeof eventName === 'symbol', 'nanobus.once: eventName should be type string or symbol')\n  assert.equal(typeof listener, 'function', 'nanobus.once: listener should be type function')\n\n  var self = this\n  this.on(eventName, once)\n  function once () {\n    listener.apply(self, arguments)\n    self.removeListener(eventName, once)\n  }\n  return this\n}\n\nNanobus.prototype.prependOnceListener = function (eventName, listener) {\n  assert.ok(typeof eventName === 'string' || typeof eventName === 'symbol', 'nanobus.prependOnceListener: eventName should be type string or symbol')\n  assert.equal(typeof listener, 'function', 'nanobus.prependOnceListener: listener should be type function')\n\n  var self = this\n  this.prependListener(eventName, once)\n  function once () {\n    listener.apply(self, arguments)\n    self.removeListener(eventName, once)\n  }\n  return this\n}\n\nNanobus.prototype.removeListener = function (eventName, listener) {\n  assert.ok(typeof eventName === 'string' || typeof eventName === 'symbol', 'nanobus.removeListener: eventName should be type string or symbol')\n  assert.equal(typeof listener, 'function', 'nanobus.removeListener: listener should be type function')\n\n  if (eventName === '*') {\n    this._starListeners = this._starListeners.slice()\n    return remove(this._starListeners, listener)\n  } else {\n    if (typeof this._listeners[eventName] !== 'undefined') {\n      this._listeners[eventName] = this._listeners[eventName].slice()\n    }\n\n    return remove(this._listeners[eventName], listener)\n  }\n\n  function remove (arr, listener) {\n    if (!arr) return\n    var index = arr.indexOf(listener)\n    if (index !== -1) {\n      splice(arr, index, 1)\n      return true\n    }\n  }\n}\n\nNanobus.prototype.removeAllListeners = function (eventName) {\n  if (eventName) {\n    if (eventName === '*') {\n      this._starListeners = []\n    } else {\n      this._listeners[eventName] = []\n    }\n  } else {\n    this._starListeners = []\n    this._listeners = {}\n  }\n  return this\n}\n\nNanobus.prototype.listeners = function (eventName) {\n  var listeners = eventName !== '*'\n    ? this._listeners[eventName]\n    : this._starListeners\n\n  var ret = []\n  if (listeners) {\n    var ilength = listeners.length\n    for (var i = 0; i < ilength; i++) ret.push(listeners[i])\n  }\n  return ret\n}\n\nNanobus.prototype._emit = function (arr, eventName, data, uuid) {\n  if (typeof arr === 'undefined') return\n  if (arr.length === 0) return\n  if (data === undefined) {\n    data = eventName\n    eventName = null\n  }\n\n  if (eventName) {\n    if (uuid !== undefined) {\n      data = [eventName].concat(data, uuid)\n    } else {\n      data = [eventName].concat(data)\n    }\n  }\n\n  var length = arr.length\n  for (var i = 0; i < length; i++) {\n    var listener = arr[i]\n    listener.apply(listener, data)\n  }\n}\n",
    "var assert = require('assert')\n\nvar safeExternalLink = /(noopener|noreferrer) (noopener|noreferrer)/\nvar protocolLink = /^[\\w-_]+:/\n\nmodule.exports = href\n\nfunction href (cb, root) {\n  assert.notEqual(typeof window, 'undefined', 'nanohref: expected window to exist')\n\n  root = root || window.document\n\n  assert.equal(typeof cb, 'function', 'nanohref: cb should be type function')\n  assert.equal(typeof root, 'object', 'nanohref: root should be type object')\n\n  window.addEventListener('click', function (e) {\n    if ((e.button && e.button !== 0) ||\n      e.ctrlKey || e.metaKey || e.altKey || e.shiftKey ||\n      e.defaultPrevented) return\n\n    var anchor = (function traverse (node) {\n      if (!node || node === root) return\n      if (node.localName !== 'a' || node.href === undefined) {\n        return traverse(node.parentNode)\n      }\n      return node\n    })(e.target)\n\n    if (!anchor) return\n\n    if (window.location.protocol !== anchor.protocol ||\n        window.location.hostname !== anchor.hostname ||\n        window.location.port !== anchor.port ||\n      anchor.hasAttribute('data-nanohref-ignore') ||\n      anchor.hasAttribute('download') ||\n      (anchor.getAttribute('target') === '_blank' &&\n        safeExternalLink.test(anchor.getAttribute('rel'))) ||\n      protocolLink.test(anchor.getAttribute('href'))) return\n\n    e.preventDefault()\n    cb(anchor)\n  })\n}\n",
    "assert.notEqual = notEqual\nassert.notOk = notOk\nassert.equal = equal\nassert.ok = assert\n\nmodule.exports = assert\n\nfunction equal (a, b, m) {\n  assert(a == b, m) // eslint-disable-line eqeqeq\n}\n\nfunction notEqual (a, b, m) {\n  assert(a != b, m) // eslint-disable-line eqeqeq\n}\n\nfunction notOk (t, m) {\n  assert(!t, m)\n}\n\nfunction assert (t, m) {\n  if (!t) throw new Error(m || 'AssertionError')\n}\n",
    "module.exports = [\n  // attribute events (can be set with attributes)\n  'onclick',\n  'ondblclick',\n  'onmousedown',\n  'onmouseup',\n  'onmouseover',\n  'onmousemove',\n  'onmouseout',\n  'onmouseenter',\n  'onmouseleave',\n  'ontouchcancel',\n  'ontouchend',\n  'ontouchmove',\n  'ontouchstart',\n  'ondragstart',\n  'ondrag',\n  'ondragenter',\n  'ondragleave',\n  'ondragover',\n  'ondrop',\n  'ondragend',\n  'onkeydown',\n  'onkeypress',\n  'onkeyup',\n  'onunload',\n  'onabort',\n  'onerror',\n  'onresize',\n  'onscroll',\n  'onselect',\n  'onchange',\n  'onsubmit',\n  'onreset',\n  'onfocus',\n  'onblur',\n  'oninput',\n  // other common events\n  'oncontextmenu',\n  'onfocusin',\n  'onfocusout'\n]\n",
    "var events = require('./events')\nvar eventsLength = events.length\n\nvar ELEMENT_NODE = 1\nvar TEXT_NODE = 3\nvar COMMENT_NODE = 8\n\nmodule.exports = morph\n\n// diff elements and apply the resulting patch to the old node\n// (obj, obj) -> null\nfunction morph (newNode, oldNode) {\n  var nodeType = newNode.nodeType\n  var nodeName = newNode.nodeName\n\n  if (nodeType === ELEMENT_NODE) {\n    copyAttrs(newNode, oldNode)\n  }\n\n  if (nodeType === TEXT_NODE || nodeType === COMMENT_NODE) {\n    if (oldNode.nodeValue !== newNode.nodeValue) {\n      oldNode.nodeValue = newNode.nodeValue\n    }\n  }\n\n  // Some DOM nodes are weird\n  // https://github.com/patrick-steele-idem/morphdom/blob/master/src/specialElHandlers.js\n  if (nodeName === 'INPUT') updateInput(newNode, oldNode)\n  else if (nodeName === 'OPTION') updateOption(newNode, oldNode)\n  else if (nodeName === 'TEXTAREA') updateTextarea(newNode, oldNode)\n\n  copyEvents(newNode, oldNode)\n}\n\nfunction copyAttrs (newNode, oldNode) {\n  var oldAttrs = oldNode.attributes\n  var newAttrs = newNode.attributes\n  var attrNamespaceURI = null\n  var attrValue = null\n  var fromValue = null\n  var attrName = null\n  var attr = null\n\n  for (var i = newAttrs.length - 1; i >= 0; --i) {\n    attr = newAttrs[i]\n    attrName = attr.name\n    attrNamespaceURI = attr.namespaceURI\n    attrValue = attr.value\n    if (attrNamespaceURI) {\n      attrName = attr.localName || attrName\n      fromValue = oldNode.getAttributeNS(attrNamespaceURI, attrName)\n      if (fromValue !== attrValue) {\n        oldNode.setAttributeNS(attrNamespaceURI, attrName, attrValue)\n      }\n    } else {\n      if (!oldNode.hasAttribute(attrName)) {\n        oldNode.setAttribute(attrName, attrValue)\n      } else {\n        fromValue = oldNode.getAttribute(attrName)\n        if (fromValue !== attrValue) {\n          // apparently values are always cast to strings, ah well\n          if (attrValue === 'null' || attrValue === 'undefined') {\n            oldNode.removeAttribute(attrName)\n          } else {\n            oldNode.setAttribute(attrName, attrValue)\n          }\n        }\n      }\n    }\n  }\n\n  // Remove any extra attributes found on the original DOM element that\n  // weren't found on the target element.\n  for (var j = oldAttrs.length - 1; j >= 0; --j) {\n    attr = oldAttrs[j]\n    if (attr.specified !== false) {\n      attrName = attr.name\n      attrNamespaceURI = attr.namespaceURI\n\n      if (attrNamespaceURI) {\n        attrName = attr.localName || attrName\n        if (!newNode.hasAttributeNS(attrNamespaceURI, attrName)) {\n          oldNode.removeAttributeNS(attrNamespaceURI, attrName)\n        }\n      } else {\n        if (!newNode.hasAttributeNS(null, attrName)) {\n          oldNode.removeAttribute(attrName)\n        }\n      }\n    }\n  }\n}\n\nfunction copyEvents (newNode, oldNode) {\n  for (var i = 0; i < eventsLength; i++) {\n    var ev = events[i]\n    if (newNode[ev]) {           // if new element has a whitelisted attribute\n      oldNode[ev] = newNode[ev]  // update existing element\n    } else if (oldNode[ev]) {    // if existing element has it and new one doesnt\n      oldNode[ev] = undefined    // remove it from existing element\n    }\n  }\n}\n\nfunction updateOption (newNode, oldNode) {\n  updateAttribute(newNode, oldNode, 'selected')\n}\n\n// The \"value\" attribute is special for the <input> element since it sets the\n// initial value. Changing the \"value\" attribute without changing the \"value\"\n// property will have no effect since it is only used to the set the initial\n// value. Similar for the \"checked\" attribute, and \"disabled\".\nfunction updateInput (newNode, oldNode) {\n  var newValue = newNode.value\n  var oldValue = oldNode.value\n\n  updateAttribute(newNode, oldNode, 'checked')\n  updateAttribute(newNode, oldNode, 'disabled')\n\n  if (newValue !== oldValue) {\n    oldNode.setAttribute('value', newValue)\n    oldNode.value = newValue\n  }\n\n  if (newValue === 'null') {\n    oldNode.value = ''\n    oldNode.removeAttribute('value')\n  }\n\n  if (!newNode.hasAttributeNS(null, 'value')) {\n    oldNode.removeAttribute('value')\n  } else if (oldNode.type === 'range') {\n    // this is so elements like slider move their UI thingy\n    oldNode.value = newValue\n  }\n}\n\nfunction updateTextarea (newNode, oldNode) {\n  var newValue = newNode.value\n  if (newValue !== oldNode.value) {\n    oldNode.value = newValue\n  }\n\n  if (oldNode.firstChild && oldNode.firstChild.nodeValue !== newValue) {\n    // Needed for IE. Apparently IE sets the placeholder as the\n    // node value and vise versa. This ignores an empty update.\n    if (newValue === '' && oldNode.firstChild.nodeValue === oldNode.placeholder) {\n      return\n    }\n\n    oldNode.firstChild.nodeValue = newValue\n  }\n}\n\nfunction updateAttribute (newNode, oldNode, name) {\n  if (newNode[name] !== oldNode[name]) {\n    oldNode[name] = newNode[name]\n    if (newNode[name]) {\n      oldNode.setAttribute(name, '')\n    } else {\n      oldNode.removeAttribute(name)\n    }\n  }\n}\n",
    "var assert = require('nanoassert')\nvar morph = require('./lib/morph')\n\nvar TEXT_NODE = 3\n// var DEBUG = false\n\nmodule.exports = nanomorph\n\n// Morph one tree into another tree\n//\n// no parent\n//   -> same: diff and walk children\n//   -> not same: replace and return\n// old node doesn't exist\n//   -> insert new node\n// new node doesn't exist\n//   -> delete old node\n// nodes are not the same\n//   -> diff nodes and apply patch to old node\n// nodes are the same\n//   -> walk all child nodes and append to old node\nfunction nanomorph (oldTree, newTree, options) {\n  // if (DEBUG) {\n  //   console.log(\n  //   'nanomorph\\nold\\n  %s\\nnew\\n  %s',\n  //   oldTree && oldTree.outerHTML,\n  //   newTree && newTree.outerHTML\n  // )\n  // }\n  assert.equal(typeof oldTree, 'object', 'nanomorph: oldTree should be an object')\n  assert.equal(typeof newTree, 'object', 'nanomorph: newTree should be an object')\n\n  if (options && options.childrenOnly) {\n    updateChildren(newTree, oldTree)\n    return oldTree\n  }\n\n  assert.notEqual(\n    newTree.nodeType,\n    11,\n    'nanomorph: newTree should have one root node (which is not a DocumentFragment)'\n  )\n\n  return walk(newTree, oldTree)\n}\n\n// Walk and morph a dom tree\nfunction walk (newNode, oldNode) {\n  // if (DEBUG) {\n  //   console.log(\n  //   'walk\\nold\\n  %s\\nnew\\n  %s',\n  //   oldNode && oldNode.outerHTML,\n  //   newNode && newNode.outerHTML\n  // )\n  // }\n  if (!oldNode) {\n    return newNode\n  } else if (!newNode) {\n    return null\n  } else if (newNode.isSameNode && newNode.isSameNode(oldNode)) {\n    return oldNode\n  } else if (newNode.tagName !== oldNode.tagName || getComponentId(newNode) !== getComponentId(oldNode)) {\n    return newNode\n  } else {\n    morph(newNode, oldNode)\n    updateChildren(newNode, oldNode)\n    return oldNode\n  }\n}\n\nfunction getComponentId (node) {\n  return node.dataset ? node.dataset.nanomorphComponentId : undefined\n}\n\n// Update the children of elements\n// (obj, obj) -> null\nfunction updateChildren (newNode, oldNode) {\n  // if (DEBUG) {\n  //   console.log(\n  //   'updateChildren\\nold\\n  %s\\nnew\\n  %s',\n  //   oldNode && oldNode.outerHTML,\n  //   newNode && newNode.outerHTML\n  // )\n  // }\n  var oldChild, newChild, morphed, oldMatch\n\n  // The offset is only ever increased, and used for [i - offset] in the loop\n  var offset = 0\n\n  for (var i = 0; ; i++) {\n    oldChild = oldNode.childNodes[i]\n    newChild = newNode.childNodes[i - offset]\n    // if (DEBUG) {\n    //   console.log(\n    //   '===\\n- old\\n  %s\\n- new\\n  %s',\n    //   oldChild && oldChild.outerHTML,\n    //   newChild && newChild.outerHTML\n    // )\n    // }\n    // Both nodes are empty, do nothing\n    if (!oldChild && !newChild) {\n      break\n\n    // There is no new child, remove old\n    } else if (!newChild) {\n      oldNode.removeChild(oldChild)\n      i--\n\n    // There is no old child, add new\n    } else if (!oldChild) {\n      oldNode.appendChild(newChild)\n      offset++\n\n    // Both nodes are the same, morph\n    } else if (same(newChild, oldChild)) {\n      morphed = walk(newChild, oldChild)\n      if (morphed !== oldChild) {\n        oldNode.replaceChild(morphed, oldChild)\n        offset++\n      }\n\n    // Both nodes do not share an ID or a placeholder, try reorder\n    } else {\n      oldMatch = null\n\n      // Try and find a similar node somewhere in the tree\n      for (var j = i; j < oldNode.childNodes.length; j++) {\n        if (same(oldNode.childNodes[j], newChild)) {\n          oldMatch = oldNode.childNodes[j]\n          break\n        }\n      }\n\n      // If there was a node with the same ID or placeholder in the old list\n      if (oldMatch) {\n        morphed = walk(newChild, oldMatch)\n        if (morphed !== oldMatch) offset++\n        oldNode.insertBefore(morphed, oldChild)\n\n      // It's safe to morph two nodes in-place if neither has an ID\n      } else if (!newChild.id && !oldChild.id) {\n        morphed = walk(newChild, oldChild)\n        if (morphed !== oldChild) {\n          oldNode.replaceChild(morphed, oldChild)\n          offset++\n        }\n\n      // Insert the node at the index if we couldn't morph or find a matching node\n      } else {\n        oldNode.insertBefore(newChild, oldChild)\n        offset++\n      }\n    }\n  }\n}\n\nfunction same (a, b) {\n  if (a.id) return a.id === b.id\n  if (a.isSameNode) return a.isSameNode(b)\n  if (a.tagName !== b.tagName) return false\n  if (a.type === TEXT_NODE) return a.nodeValue === b.nodeValue\n  return false\n}\n",
    "var reg = /([^?=&]+)(=([^&]*))?/g\nvar assert = require('assert')\n\nmodule.exports = qs\n\nfunction qs (url) {\n  assert.equal(typeof url, 'string', 'nanoquery: url should be type string')\n\n  var obj = {}\n  url.replace(/^.*\\?/, '').replace(reg, function (a0, a1, a2, a3) {\n    obj[decodeURIComponent(a1)] = decodeURIComponent(a3)\n  })\n\n  return obj\n}\n",
    "'use strict'\n\nvar assert = require('assert')\n\nmodule.exports = nanoraf\n\n// Only call RAF when needed\n// (fn, fn?) -> fn\nfunction nanoraf (render, raf) {\n  assert.equal(typeof render, 'function', 'nanoraf: render should be a function')\n  assert.ok(typeof raf === 'function' || typeof raf === 'undefined', 'nanoraf: raf should be a function or undefined')\n\n  if (!raf) raf = window.requestAnimationFrame\n  var redrawScheduled = false\n  var args = null\n\n  return function frame () {\n    if (args === null && !redrawScheduled) {\n      redrawScheduled = true\n\n      raf(function redraw () {\n        redrawScheduled = false\n\n        var length = args.length\n        var _args = new Array(length)\n        for (var i = 0; i < length; i++) _args[i] = args[i]\n\n        render.apply(render, _args)\n        args = null\n      })\n    }\n\n    args = arguments\n  }\n}\n",
    "module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n",
    "module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n",
    "var mutate = require('xtend/mutable')\nvar assert = require('assert')\nvar xtend = require('xtend')\n\nmodule.exports = Trie\n\n// create a new trie\n// null -> obj\nfunction Trie () {\n  if (!(this instanceof Trie)) return new Trie()\n  this.trie = { nodes: {} }\n}\n\n// create a node on the trie at route\n// and return a node\n// str -> null\nTrie.prototype.create = function (route) {\n  assert.equal(typeof route, 'string', 'route should be a string')\n  // strip leading '/' and split routes\n  var routes = route.replace(/^\\//, '').split('/')\n\n  function createNode (index, trie) {\n    var thisRoute = (routes.hasOwnProperty(index) && routes[index])\n    if (thisRoute === false) return trie\n\n    var node = null\n    if (/^:|^\\*/.test(thisRoute)) {\n      // if node is a name match, set name and append to ':' node\n      if (!trie.nodes.hasOwnProperty('$$')) {\n        node = { nodes: {} }\n        trie.nodes['$$'] = node\n      } else {\n        node = trie.nodes['$$']\n      }\n\n      if (thisRoute[0] === '*') {\n        trie.wildcard = true\n      }\n\n      trie.name = thisRoute.replace(/^:|^\\*/, '')\n    } else if (!trie.nodes.hasOwnProperty(thisRoute)) {\n      node = { nodes: {} }\n      trie.nodes[thisRoute] = node\n    } else {\n      node = trie.nodes[thisRoute]\n    }\n\n    // we must recurse deeper\n    return createNode(index + 1, node)\n  }\n\n  return createNode(0, this.trie)\n}\n\n// match a route on the trie\n// and return the node\n// str -> obj\nTrie.prototype.match = function (route) {\n  assert.equal(typeof route, 'string', 'route should be a string')\n\n  var routes = route.replace(/^\\//, '').split('/')\n  var params = {}\n\n  function search (index, trie) {\n    // either there's no match, or we're done searching\n    if (trie === undefined) return undefined\n    var thisRoute = routes[index]\n    if (thisRoute === undefined) return trie\n\n    if (trie.nodes.hasOwnProperty(thisRoute)) {\n      // match regular routes first\n      return search(index + 1, trie.nodes[thisRoute])\n    } else if (trie.name) {\n      // match named routes\n      try {\n        params[trie.name] = decodeURIComponent(thisRoute)\n      } catch (e) {\n        return search(index, undefined)\n      }\n      return search(index + 1, trie.nodes['$$'])\n    } else if (trie.wildcard) {\n      // match wildcards\n      try {\n        params['wildcard'] = decodeURIComponent(routes.slice(index).join('/'))\n      } catch (e) {\n        return search(index, undefined)\n      }\n      // return early, or else search may keep recursing through the wildcard\n      return trie.nodes['$$']\n    } else {\n      // no matches found\n      return search(index + 1)\n    }\n  }\n\n  var node = search(0, this.trie)\n\n  if (!node) return undefined\n  node = xtend(node)\n  node.params = params\n  return node\n}\n\n// mount a trie onto a node at route\n// (str, obj) -> null\nTrie.prototype.mount = function (route, trie) {\n  assert.equal(typeof route, 'string', 'route should be a string')\n  assert.equal(typeof trie, 'object', 'trie should be a object')\n\n  var split = route.replace(/^\\//, '').split('/')\n  var node = null\n  var key = null\n\n  if (split.length === 1) {\n    key = split[0]\n    node = this.create(key)\n  } else {\n    var head = split.join('/')\n    key = split[0]\n    node = this.create(head)\n  }\n\n  mutate(node.nodes, trie.nodes)\n  if (trie.name) node.name = trie.name\n\n  // delegate properties from '/' to the new node\n  // '/' cannot be reached once mounted\n  if (node.nodes['']) {\n    Object.keys(node.nodes['']).forEach(function (key) {\n      if (key === 'nodes') return\n      node[key] = node.nodes[''][key]\n    })\n    mutate(node.nodes, node.nodes[''].nodes)\n    delete node.nodes[''].nodes\n  }\n}\n",
    "var assert = require('assert')\nvar trie = require('./trie')\n\nmodule.exports = Wayfarer\n\n// create a router\n// str -> obj\nfunction Wayfarer (dft) {\n  if (!(this instanceof Wayfarer)) return new Wayfarer(dft)\n\n  var _default = (dft || '').replace(/^\\//, '')\n  var _trie = trie()\n\n  emit._trie = _trie\n  emit.on = on\n  emit.emit = emit\n  emit.match = match\n  emit._wayfarer = true\n\n  return emit\n\n  // define a route\n  // (str, fn) -> obj\n  function on (route, fn) {\n    assert.equal(typeof route, 'string')\n    assert.equal(typeof fn, 'function')\n\n    var cb = fn._wayfarer && fn._trie ? fn : proxy\n    route = route || '/'\n    cb.route = route\n\n    if (cb._wayfarer && cb._trie) {\n      _trie.mount(route, cb._trie.trie)\n    } else {\n      var node = _trie.create(route)\n      node.cb = cb\n    }\n\n    return emit\n\n    function proxy () {\n      return fn.apply(this, Array.prototype.slice.call(arguments))\n    }\n  }\n\n  // match and call a route\n  // (str, obj?) -> null\n  function emit (route) {\n    var matched = match(route)\n\n    var args = new Array(arguments.length)\n    args[0] = matched.params\n    for (var i = 1; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n\n    return matched.cb.apply(matched.cb, args)\n  }\n\n  function match (route) {\n    assert.notEqual(route, undefined, \"'route' must be defined\")\n\n    var matched = _trie.match(route)\n    if (matched && matched.cb) return new Route(matched)\n\n    var dft = _trie.match(_default)\n    if (dft && dft.cb) return new Route(dft)\n\n    throw new Error(\"route '\" + route + \"' did not match\")\n  }\n\n  function Route (matched) {\n    this.cb = matched.cb\n    this.route = matched.cb.route\n    this.params = matched.params\n  }\n}\n",
    "var assert = require('assert')\nvar wayfarer = require('wayfarer')\n\n// electron support\nvar isLocalFile = (/file:\\/\\//.test(\n  typeof window === 'object' &&\n  window.location &&\n  window.location.origin\n))\n\n/* eslint-disable no-useless-escape */\nvar electron = '^(file:\\/\\/|\\/)(.*\\.html?\\/?)?'\nvar protocol = '^(http(s)?(:\\/\\/))?(www\\.)?'\nvar domain = '[a-zA-Z0-9-_\\.]+(:[0-9]{1,5})?(\\/{1})?'\nvar qs = '[\\?].*$'\n/* eslint-enable no-useless-escape */\n\nvar stripElectron = new RegExp(electron)\nvar prefix = new RegExp(protocol + domain)\nvar normalize = new RegExp('#')\nvar suffix = new RegExp(qs)\n\nmodule.exports = Nanorouter\n\nfunction Nanorouter (opts) {\n  if (!(this instanceof Nanorouter)) return new Nanorouter(opts)\n  opts = opts || {}\n  this.router = wayfarer(opts.default || '/404')\n}\n\nNanorouter.prototype.on = function (routename, listener) {\n  assert.equal(typeof routename, 'string')\n  routename = routename.replace(/^[#/]/, '')\n  this.router.on(routename, listener)\n}\n\nNanorouter.prototype.emit = function (routename) {\n  assert.equal(typeof routename, 'string')\n  routename = pathname(routename, isLocalFile)\n  return this.router.emit(routename)\n}\n\nNanorouter.prototype.match = function (routename) {\n  assert.equal(typeof routename, 'string')\n  routename = pathname(routename, isLocalFile)\n  return this.router.match(routename)\n}\n\n// replace everything in a route but the pathname and hash\nfunction pathname (routename, isElectron) {\n  if (isElectron) routename = routename.replace(stripElectron, '')\n  else routename = routename.replace(prefix, '')\n  return decodeURI(routename.replace(suffix, '').replace(normalize, '/'))\n}\n",
    "module.exports = scrollToAnchor\n\nfunction scrollToAnchor (anchor, options) {\n  if (anchor) {\n    try {\n      var el = document.querySelector(anchor)\n      if (el) el.scrollIntoView(options)\n    } catch (e) {}\n  }\n}\n",
    "var scrollToAnchor = require('scroll-to-anchor')\nvar documentReady = require('document-ready')\nvar nanotiming = require('nanotiming')\nvar nanorouter = require('nanorouter')\nvar nanomorph = require('nanomorph')\nvar nanoquery = require('nanoquery')\nvar nanohref = require('nanohref')\nvar nanoraf = require('nanoraf')\nvar nanobus = require('nanobus')\nvar assert = require('assert')\nvar xtend = require('xtend')\n\nvar Cache = require('./component/cache')\n\nmodule.exports = Choo\n\nvar HISTORY_OBJECT = {}\n\nfunction Choo (opts) {\n  if (!(this instanceof Choo)) return new Choo(opts)\n  opts = opts || {}\n\n  assert.equal(typeof opts, 'object', 'choo: opts should be type object')\n\n  var self = this\n\n  // define events used by choo\n  this._events = {\n    DOMCONTENTLOADED: 'DOMContentLoaded',\n    DOMTITLECHANGE: 'DOMTitleChange',\n    REPLACESTATE: 'replaceState',\n    PUSHSTATE: 'pushState',\n    NAVIGATE: 'navigate',\n    POPSTATE: 'popState',\n    RENDER: 'render'\n  }\n\n  // properties for internal use only\n  this._historyEnabled = opts.history === undefined ? true : opts.history\n  this._hrefEnabled = opts.href === undefined ? true : opts.href\n  this._hashEnabled = opts.hash === undefined ? true : opts.hash\n  this._hasWindow = typeof window !== 'undefined'\n  this._cache = opts.cache\n  this._loaded = false\n  this._stores = []\n  this._tree = null\n\n  // state\n  var _state = {\n    events: this._events,\n    components: {}\n  }\n  if (this._hasWindow) {\n    this.state = window.initialState\n      ? xtend(window.initialState, _state)\n      : _state\n    delete window.initialState\n  } else {\n    this.state = _state\n  }\n\n  // properties that are part of the API\n  this.router = nanorouter({ curry: true })\n  this.emitter = nanobus('choo.emit')\n  this.emit = this.emitter.emit.bind(this.emitter)\n\n  // listen for title changes; available even when calling .toString()\n  if (this._hasWindow) this.state.title = document.title\n  this.emitter.prependListener(this._events.DOMTITLECHANGE, function (title) {\n    assert.equal(typeof title, 'string', 'events.DOMTitleChange: title should be type string')\n    self.state.title = title\n    if (self._hasWindow) document.title = title\n  })\n}\n\nChoo.prototype.route = function (route, handler) {\n  assert.equal(typeof route, 'string', 'choo.route: route should be type string')\n  assert.equal(typeof handler, 'function', 'choo.handler: route should be type function')\n  this.router.on(route, handler)\n}\n\nChoo.prototype.use = function (cb) {\n  assert.equal(typeof cb, 'function', 'choo.use: cb should be type function')\n  var self = this\n  this._stores.push(function (state) {\n    var msg = 'choo.use'\n    msg = cb.storeName ? msg + '(' + cb.storeName + ')' : msg\n    var endTiming = nanotiming(msg)\n    cb(state, self.emitter, self)\n    endTiming()\n  })\n}\n\nChoo.prototype.start = function () {\n  assert.equal(typeof window, 'object', 'choo.start: window was not found. .start() must be called in a browser, use .toString() if running in Node')\n\n  var self = this\n  if (this._historyEnabled) {\n    this.emitter.prependListener(this._events.NAVIGATE, function () {\n      self._matchRoute()\n      if (self._loaded) {\n        self.emitter.emit(self._events.RENDER)\n        setTimeout(scrollToAnchor.bind(null, window.location.hash), 0)\n      }\n    })\n\n    this.emitter.prependListener(this._events.POPSTATE, function () {\n      self.emitter.emit(self._events.NAVIGATE)\n    })\n\n    this.emitter.prependListener(this._events.PUSHSTATE, function (href) {\n      assert.equal(typeof href, 'string', 'events.pushState: href should be type string')\n      window.history.pushState(HISTORY_OBJECT, null, href)\n      self.emitter.emit(self._events.NAVIGATE)\n    })\n\n    this.emitter.prependListener(this._events.REPLACESTATE, function (href) {\n      assert.equal(typeof href, 'string', 'events.replaceState: href should be type string')\n      window.history.replaceState(HISTORY_OBJECT, null, href)\n      self.emitter.emit(self._events.NAVIGATE)\n    })\n\n    window.onpopstate = function () {\n      self.emitter.emit(self._events.POPSTATE)\n    }\n\n    if (self._hrefEnabled) {\n      nanohref(function (location) {\n        var href = location.href\n        var hash = location.hash\n        if (href === window.location.href) {\n          if (!self._hashEnabled && hash) scrollToAnchor(hash)\n          return\n        }\n        self.emitter.emit(self._events.PUSHSTATE, href)\n      })\n    }\n  }\n\n  this._setCache(this.state)\n  this._stores.forEach(function (initStore) {\n    initStore(self.state)\n  })\n\n  this._matchRoute()\n  this._tree = this._prerender(this.state)\n  assert.ok(this._tree, 'choo.start: no valid DOM node returned for location ' + this.state.href)\n\n  this.emitter.prependListener(self._events.RENDER, nanoraf(function () {\n    var renderTiming = nanotiming('choo.render')\n    var newTree = self._prerender(self.state)\n    assert.ok(newTree, 'choo.render: no valid DOM node returned for location ' + self.state.href)\n\n    assert.equal(self._tree.nodeName, newTree.nodeName, 'choo.render: The target node <' +\n      self._tree.nodeName.toLowerCase() + '> is not the same type as the new node <' +\n      newTree.nodeName.toLowerCase() + '>.')\n\n    var morphTiming = nanotiming('choo.morph')\n    nanomorph(self._tree, newTree)\n    morphTiming()\n\n    renderTiming()\n  }))\n\n  documentReady(function () {\n    self.emitter.emit(self._events.DOMCONTENTLOADED)\n    self._loaded = true\n  })\n\n  return this._tree\n}\n\nChoo.prototype.mount = function mount (selector) {\n  if (typeof window !== 'object') {\n    assert.ok(typeof selector === 'string', 'choo.mount: selector should be type String')\n    this.selector = selector\n    return this\n  }\n\n  assert.ok(typeof selector === 'string' || typeof selector === 'object', 'choo.mount: selector should be type String or HTMLElement')\n\n  var self = this\n\n  documentReady(function () {\n    var renderTiming = nanotiming('choo.render')\n    var newTree = self.start()\n    if (typeof selector === 'string') {\n      self._tree = document.querySelector(selector)\n    } else {\n      self._tree = selector\n    }\n\n    assert.ok(self._tree, 'choo.mount: could not query selector: ' + selector)\n    assert.equal(self._tree.nodeName, newTree.nodeName, 'choo.mount: The target node <' +\n      self._tree.nodeName.toLowerCase() + '> is not the same type as the new node <' +\n      newTree.nodeName.toLowerCase() + '>.')\n\n    var morphTiming = nanotiming('choo.morph')\n    nanomorph(self._tree, newTree)\n    morphTiming()\n\n    renderTiming()\n  })\n}\n\nChoo.prototype.toString = function (location, state) {\n  this.state = xtend(this.state, state || {})\n\n  assert.notEqual(typeof window, 'object', 'choo.mount: window was found. .toString() must be called in Node, use .start() or .mount() if running in the browser')\n  assert.equal(typeof location, 'string', 'choo.toString: location should be type string')\n  assert.equal(typeof this.state, 'object', 'choo.toString: state should be type object')\n\n  var self = this\n  this._setCache(this.state)\n  this._stores.forEach(function (initStore) {\n    initStore(self.state)\n  })\n\n  this._matchRoute(location)\n  var html = this._prerender(this.state)\n  assert.ok(html, 'choo.toString: no valid value returned for the route ' + location)\n  assert(!Array.isArray(html), 'choo.toString: return value was an array for the route ' + location)\n  return typeof html.outerHTML === 'string' ? html.outerHTML : html.toString()\n}\n\nChoo.prototype._matchRoute = function (locationOverride) {\n  var location, queryString\n  if (locationOverride) {\n    location = locationOverride.replace(/\\?.+$/, '').replace(/\\/$/, '')\n    if (!this._hashEnabled) location = location.replace(/#.+$/, '')\n    queryString = locationOverride\n  } else {\n    location = window.location.pathname.replace(/\\/$/, '')\n    if (this._hashEnabled) location += window.location.hash.replace(/^#/, '/')\n    queryString = window.location.search\n  }\n  var matched = this.router.match(location)\n  this._handler = matched.cb\n  this.state.href = location\n  this.state.query = nanoquery(queryString)\n  this.state.route = matched.route\n  this.state.params = matched.params\n  return this.state\n}\n\nChoo.prototype._prerender = function (state) {\n  var routeTiming = nanotiming(\"choo.prerender('\" + state.route + \"')\")\n  var res = this._handler(state, this.emit)\n  routeTiming()\n  return res\n}\n\nChoo.prototype._setCache = function (state) {\n  var cache = new Cache(state, this.emitter.emit.bind(this.emitter), this._cache)\n  state.cache = renderComponent\n\n  function renderComponent (Component, id) {\n    assert.equal(typeof Component, 'function', 'choo.state.cache: Component should be type function')\n    var args = []\n    for (var i = 0, len = arguments.length; i < len; i++) {\n      args.push(arguments[i])\n    }\n    return cache.render.apply(cache, args)\n  }\n\n  // When the state gets stringified, make sure `state.cache` isn't\n  // stringified too.\n  renderComponent.toJSON = function () {\n    return null\n  }\n}\n",
    "module.exports=[\n  \"accordion\",\n  \"acoustic_bass\",\n  \"acoustic_grand_piano\",\n  \"acoustic_guitar_nylon\",\n  \"acoustic_guitar_steel\",\n  \"agogo\",\n  \"alto_sax\",\n  \"applause\",\n  \"bagpipe\",\n  \"banjo\",\n  \"baritone_sax\",\n  \"bassoon\",\n  \"bird_tweet\",\n  \"blown_bottle\",\n  \"brass_section\",\n  \"breath_noise\",\n  \"bright_acoustic_piano\",\n  \"celesta\",\n  \"cello\",\n  \"choir_aahs\",\n  \"church_organ\",\n  \"clarinet\",\n  \"clavinet\",\n  \"contrabass\",\n  \"distortion_guitar\",\n  \"drawbar_organ\",\n  \"dulcimer\",\n  \"electric_bass_finger\",\n  \"electric_bass_pick\",\n  \"electric_grand_piano\",\n  \"electric_guitar_clean\",\n  \"electric_guitar_jazz\",\n  \"electric_guitar_muted\",\n  \"electric_piano_1\",\n  \"electric_piano_2\",\n  \"english_horn\",\n  \"fiddle\",\n  \"flute\",\n  \"french_horn\",\n  \"fretless_bass\",\n  \"fx_1_rain\",\n  \"fx_2_soundtrack\",\n  \"fx_3_crystal\",\n  \"fx_4_atmosphere\",\n  \"fx_5_brightness\",\n  \"fx_6_goblins\",\n  \"fx_7_echoes\",\n  \"fx_8_scifi\",\n  \"glockenspiel\",\n  \"guitar_fret_noise\",\n  \"guitar_harmonics\",\n  \"gunshot\",\n  \"harmonica\",\n  \"harpsichord\",\n  \"helicopter\",\n  \"honkytonk_piano\",\n  \"kalimba\",\n  \"koto\",\n  \"lead_1_square\",\n  \"lead_2_sawtooth\",\n  \"lead_3_calliope\",\n  \"lead_4_chiff\",\n  \"lead_5_charang\",\n  \"lead_6_voice\",\n  \"lead_7_fifths\",\n  \"lead_8_bass__lead\",\n  \"marimba\",\n  \"melodic_tom\",\n  \"music_box\",\n  \"muted_trumpet\",\n  \"oboe\",\n  \"ocarina\",\n  \"orchestra_hit\",\n  \"orchestral_harp\",\n  \"overdriven_guitar\",\n  \"pad_1_new_age\",\n  \"pad_2_warm\",\n  \"pad_3_polysynth\",\n  \"pad_4_choir\",\n  \"pad_5_bowed\",\n  \"pad_6_metallic\",\n  \"pad_7_halo\",\n  \"pad_8_sweep\",\n  \"pan_flute\",\n  \"percussive_organ\",\n  \"percussion\",\n  \"piccolo\",\n  \"pizzicato_strings\",\n  \"recorder\",\n  \"reed_organ\",\n  \"reverse_cymbal\",\n  \"rock_organ\",\n  \"seashore\",\n  \"shakuhachi\",\n  \"shamisen\",\n  \"shanai\",\n  \"sitar\",\n  \"slap_bass_1\",\n  \"slap_bass_2\",\n  \"soprano_sax\",\n  \"steel_drums\",\n  \"string_ensemble_1\",\n  \"string_ensemble_2\",\n  \"synth_bass_1\",\n  \"synth_bass_2\",\n  \"synth_brass_1\",\n  \"synth_brass_2\",\n  \"synth_choir\",\n  \"synth_drum\",\n  \"synth_strings_1\",\n  \"synth_strings_2\",\n  \"taiko_drum\",\n  \"tango_accordion\",\n  \"telephone_ring\",\n  \"tenor_sax\",\n  \"timpani\",\n  \"tinkle_bell\",\n  \"tremolo_strings\",\n  \"trombone\",\n  \"trumpet\",\n  \"tuba\",\n  \"tubular_bells\",\n  \"vibraphone\",\n  \"viola\",\n  \"violin\",\n  \"voice_oohs\",\n  \"whistle\",\n  \"woodblock\",\n  \"xylophone\"\n]\n",
    "'use strict'\n\n// DECODE UTILITIES\nfunction b64ToUint6 (nChr) {\n  return nChr > 64 && nChr < 91 ? nChr - 65\n    : nChr > 96 && nChr < 123 ? nChr - 71\n    : nChr > 47 && nChr < 58 ? nChr + 4\n    : nChr === 43 ? 62\n    : nChr === 47 ? 63\n    : 0\n}\n\n// Decode Base64 to Uint8Array\n// ---------------------------\nfunction decode (sBase64, nBlocksSize) {\n  var sB64Enc = sBase64.replace(/[^A-Za-z0-9\\+\\/]/g, '')\n  var nInLen = sB64Enc.length\n  var nOutLen = nBlocksSize\n    ? Math.ceil((nInLen * 3 + 1 >> 2) / nBlocksSize) * nBlocksSize\n    : nInLen * 3 + 1 >> 2\n  var taBytes = new Uint8Array(nOutLen)\n\n  for (var nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\n    nMod4 = nInIdx & 3\n    nUint24 |= b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 18 - 6 * nMod4\n    if (nMod4 === 3 || nInLen - nInIdx === 1) {\n      for (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\n        taBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255\n      }\n      nUint24 = 0\n    }\n  }\n  return taBytes\n}\n\nmodule.exports = { decode: decode }\n",
    "'use strict'\n\nvar base64 = require('./base64')\nvar fetch = require('./fetch')\n\n// Given a regex, return a function that test if against a string\nfunction fromRegex (r) {\n  return function (o) { return typeof o === 'string' && r.test(o) }\n}\n// Try to apply a prefix to a name\nfunction prefix (pre, name) {\n  return typeof pre === 'string' ? pre + name\n    : typeof pre === 'function' ? pre(name)\n    : name\n}\n\n/**\n * Load one or more audio files\n *\n *\n * Possible option keys:\n *\n * - __from__ {Function|String}: a function or string to convert from file names to urls.\n * If is a string it will be prefixed to the name:\n * `load(ac, 'snare.mp3', { from: 'http://audio.net/samples/' })`\n * If it's a function it receives the file name and should return the url as string.\n * - __only__ {Array} - when loading objects, if provided, only the given keys\n * will be included in the decoded object:\n * `load(ac, 'piano.json', { only: ['C2', 'D2'] })`\n *\n * @param {AudioContext} ac - the audio context\n * @param {Object} source - the object to be loaded\n * @param {Object} options - (Optional) the load options for that object\n * @param {Object} defaultValue - (Optional) the default value to return as\n * in a promise if not valid loader found\n */\nfunction load (ac, source, options, defVal) {\n  var loader =\n    // Basic audio loading\n      isArrayBuffer(source) ? loadArrayBuffer\n    : isAudioFileName(source) ? loadAudioFile\n    : isPromise(source) ? loadPromise\n    // Compound objects\n    : isArray(source) ? loadArrayData\n    : isObject(source) ? loadObjectData\n    : isJsonFileName(source) ? loadJsonFile\n    // Base64 encoded audio\n    : isBase64Audio(source) ? loadBase64Audio\n    : isJsFileName(source) ? loadMidiJSFile\n    : null\n\n  var opts = options || {}\n  return loader ? loader(ac, source, opts)\n    : defVal ? Promise.resolve(defVal)\n    : Promise.reject('Source not valid (' + source + ')')\n}\nload.fetch = fetch\n\n// BASIC AUDIO LOADING\n// ===================\n\n// Load (decode) an array buffer\nfunction isArrayBuffer (o) { return o instanceof ArrayBuffer }\nfunction loadArrayBuffer (ac, array, options) {\n  return new Promise(function (done, reject) {\n    ac.decodeAudioData(array,\n      function (buffer) { done(buffer) },\n      function () { reject(\"Can't decode audio data (\" + array.slice(0, 30) + '...)') }\n    )\n  })\n}\n\n// Load an audio filename\nvar isAudioFileName = fromRegex(/\\.(mp3|wav|ogg)(\\?.*)?$/i)\nfunction loadAudioFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'arraybuffer'), options)\n}\n\n// Load the result of a promise\nfunction isPromise (o) { return o && typeof o.then === 'function' }\nfunction loadPromise (ac, promise, options) {\n  return promise.then(function (value) {\n    return load(ac, value, options)\n  })\n}\n\n// COMPOUND OBJECTS\n// ================\n\n// Try to load all the items of an array\nvar isArray = Array.isArray\nfunction loadArrayData (ac, array, options) {\n  return Promise.all(array.map(function (data) {\n    return load(ac, data, options, data)\n  }))\n}\n\n// Try to load all the values of a key/value object\nfunction isObject (o) { return o && typeof o === 'object' }\nfunction loadObjectData (ac, obj, options) {\n  var dest = {}\n  var promises = Object.keys(obj).map(function (key) {\n    if (options.only && options.only.indexOf(key) === -1) return null\n    var value = obj[key]\n    return load(ac, value, options, value).then(function (audio) {\n      dest[key] = audio\n    })\n  })\n  return Promise.all(promises).then(function () { return dest })\n}\n\n// Load the content of a JSON file\nvar isJsonFileName = fromRegex(/\\.json(\\?.*)?$/i)\nfunction loadJsonFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'text').then(JSON.parse), options)\n}\n\n// BASE64 ENCODED FORMATS\n// ======================\n\n// Load strings with Base64 encoded audio\nvar isBase64Audio = fromRegex(/^data:audio/)\nfunction loadBase64Audio (ac, source, options) {\n  var i = source.indexOf(',')\n  return load(ac, base64.decode(source.slice(i + 1)).buffer, options)\n}\n\n// Load .js files with MidiJS soundfont prerendered audio\nvar isJsFileName = fromRegex(/\\.js(\\?.*)?$/i)\nfunction loadMidiJSFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'text').then(midiJsToJson), options)\n}\n\n// convert a MIDI.js javascript soundfont file to json\nfunction midiJsToJson (data) {\n  var begin = data.indexOf('MIDI.Soundfont.')\n  if (begin < 0) throw Error('Invalid MIDI.js Soundfont format')\n  begin = data.indexOf('=', begin) + 2\n  var end = data.lastIndexOf(',')\n  return JSON.parse(data.slice(begin, end) + '}')\n}\n\nif (typeof module === 'object' && module.exports) module.exports = load\nif (typeof window !== 'undefined') window.loadAudio = load\n",
    "/* global XMLHttpRequest */\n'use strict'\n\n/**\n * Given a url and a return type, returns a promise to the content of the url\n * Basically it wraps a XMLHttpRequest into a Promise\n *\n * @param {String} url\n * @param {String} type - can be 'text' or 'arraybuffer'\n * @return {Promise}\n */\nmodule.exports = function (url, type) {\n  return new Promise(function (done, reject) {\n    var req = new XMLHttpRequest()\n    if (type) req.responseType = type\n\n    req.open('GET', url)\n    req.onload = function () {\n      req.status === 200 ? done(req.response) : reject(Error(req.statusText))\n    }\n    req.onerror = function () { reject(Error('Network Error')) }\n    req.send()\n  })\n}\n",
    "\nmodule.exports = function (player) {\n  /**\n   * Adds a listener of an event\n   * @chainable\n   * @param {String} event - the event name\n   * @param {Function} callback - the event handler\n   * @return {SamplePlayer} the player\n   * @example\n   * player.on('start', function(time, note) {\n   *   console.log(time, note)\n   * })\n   */\n  player.on = function (event, cb) {\n    if (arguments.length === 1 && typeof event === 'function') return player.on('event', event)\n    var prop = 'on' + event\n    var old = player[prop]\n    player[prop] = old ? chain(old, cb) : cb\n    return player\n  }\n  return player\n}\n\nfunction chain (fn1, fn2) {\n  return function (a, b, c, d) { fn1(a, b, c, d); fn2(a, b, c, d) }\n}\n",
    "(function(e){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=e()}else if(typeof define===\"function\"&&define.amd){define([],e)}else{var t;if(typeof window!==\"undefined\"){t=window}else if(typeof global!==\"undefined\"){t=global}else if(typeof self!==\"undefined\"){t=self}else{t=this}t.midimessage=e()}})(function(){var e,t,s;return function o(e,t,s){function a(n,i){if(!t[n]){if(!e[n]){var l=typeof require==\"function\"&&require;if(!i&&l)return l(n,!0);if(r)return r(n,!0);var h=new Error(\"Cannot find module '\"+n+\"'\");throw h.code=\"MODULE_NOT_FOUND\",h}var c=t[n]={exports:{}};e[n][0].call(c.exports,function(t){var s=e[n][1][t];return a(s?s:t)},c,c.exports,o,e,t,s)}return t[n].exports}var r=typeof require==\"function\"&&require;for(var n=0;n<s.length;n++)a(s[n]);return a}({1:[function(e,t,s){\"use strict\";Object.defineProperty(s,\"__esModule\",{value:true});s[\"default\"]=function(e){function t(e){this._event=e;this._data=e.data;this.receivedTime=e.receivedTime;if(this._data&&this._data.length<2){console.warn(\"Illegal MIDI message of length\",this._data.length);return}this._messageCode=e.data[0]&240;this.channel=e.data[0]&15;switch(this._messageCode){case 128:this.messageType=\"noteoff\";this.key=e.data[1]&127;this.velocity=e.data[2]&127;break;case 144:this.messageType=\"noteon\";this.key=e.data[1]&127;this.velocity=e.data[2]&127;break;case 160:this.messageType=\"keypressure\";this.key=e.data[1]&127;this.pressure=e.data[2]&127;break;case 176:this.messageType=\"controlchange\";this.controllerNumber=e.data[1]&127;this.controllerValue=e.data[2]&127;if(this.controllerNumber===120&&this.controllerValue===0){this.channelModeMessage=\"allsoundoff\"}else if(this.controllerNumber===121){this.channelModeMessage=\"resetallcontrollers\"}else if(this.controllerNumber===122){if(this.controllerValue===0){this.channelModeMessage=\"localcontroloff\"}else{this.channelModeMessage=\"localcontrolon\"}}else if(this.controllerNumber===123&&this.controllerValue===0){this.channelModeMessage=\"allnotesoff\"}else if(this.controllerNumber===124&&this.controllerValue===0){this.channelModeMessage=\"omnimodeoff\"}else if(this.controllerNumber===125&&this.controllerValue===0){this.channelModeMessage=\"omnimodeon\"}else if(this.controllerNumber===126){this.channelModeMessage=\"monomodeon\"}else if(this.controllerNumber===127){this.channelModeMessage=\"polymodeon\"}break;case 192:this.messageType=\"programchange\";this.program=e.data[1];break;case 208:this.messageType=\"channelpressure\";this.pressure=e.data[1]&127;break;case 224:this.messageType=\"pitchbendchange\";var t=e.data[2]&127;var s=e.data[1]&127;this.pitchBend=(t<<8)+s;break}}return new t(e)};t.exports=s[\"default\"]},{}]},{},[1])(1)});\n//# sourceMappingURL=dist/index.js.map",
    "var midimessage = require('midimessage')\n\nmodule.exports = function (player) {\n  /**\n  * Connect a player to a midi input\n  *\n  * The options accepts:\n  *\n  * - channel: the channel to listen to. Listen to all channels by default.\n  *\n  * @param {MIDIInput} input\n  * @param {Object} options - (Optional)\n  * @return {SamplePlayer} the player\n  * @example\n  * var piano = player(...)\n  * window.navigator.requestMIDIAccess().then(function (midiAccess) {\n  *   midiAccess.inputs.forEach(function (midiInput) {\n  *     piano.listenToMidi(midiInput)\n  *   })\n  * })\n  */\n  player.listenToMidi = function (input, options) {\n    var started = {}\n    var opts = options || {}\n    var gain = opts.gain || function (vel) { return vel / 127 }\n\n    input.onmidimessage = function (msg) {\n      var mm = msg.messageType ? msg : midimessage(msg)\n      if (mm.messageType === 'noteon' && mm.velocity === 0) {\n        mm.messageType = 'noteoff'\n      }\n      if (opts.channel && mm.channel !== opts.channel) return\n\n      switch (mm.messageType) {\n        case 'noteon':\n          started[mm.key] = player.play(mm.key, 0, { gain: gain(mm.velocity) })\n          break\n        case 'noteoff':\n          if (started[mm.key]) {\n            started[mm.key].stop()\n            delete started[mm.key]\n          }\n          break\n      }\n    }\n    return player\n  }\n  return player\n}\n",
    "'use strict'\n\nvar REGEX = /^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)\\s*$/\n/**\n * A regex for matching note strings in scientific notation.\n *\n * @name regex\n * @function\n * @return {RegExp} the regexp used to parse the note name\n *\n * The note string should have the form `letter[accidentals][octave][element]`\n * where:\n *\n * - letter: (Required) is a letter from A to G either upper or lower case\n * - accidentals: (Optional) can be one or more `b` (flats), `#` (sharps) or `x` (double sharps).\n * They can NOT be mixed.\n * - octave: (Optional) a positive or negative integer\n * - element: (Optional) additionally anything after the duration is considered to\n * be the element name (for example: 'C2 dorian')\n *\n * The executed regex contains (by array index):\n *\n * - 0: the complete string\n * - 1: the note letter\n * - 2: the optional accidentals\n * - 3: the optional octave\n * - 4: the rest of the string (trimmed)\n *\n * @example\n * var parser = require('note-parser')\n * parser.regex.exec('c#4')\n * // => ['c#4', 'c', '#', '4', '']\n * parser.regex.exec('c#4 major')\n * // => ['c#4major', 'c', '#', '4', 'major']\n * parser.regex().exec('CMaj7')\n * // => ['CMaj7', 'C', '', '', 'Maj7']\n */\nfunction regex () { return REGEX }\n\nvar SEMITONES = [0, 2, 4, 5, 7, 9, 11]\n/**\n * Parse a note name in scientific notation an return it's components,\n * and some numeric properties including midi number and frequency.\n *\n * @name parse\n * @function\n * @param {String} note - the note string to be parsed\n * @param {Boolean} isTonic - true if the note is the tonic of something.\n * If true, en extra tonicOf property is returned. It's false by default.\n * @param {Float} tunning - The frequency of A4 note to calculate frequencies.\n * By default it 440.\n * @return {Object} the parsed note name or null if not a valid note\n *\n * The parsed note name object will ALWAYS contains:\n * - letter: the uppercase letter of the note\n * - acc: the accidentals of the note (only sharps or flats)\n * - pc: the pitch class (letter + acc)\n * - step: s a numeric representation of the letter. It's an integer from 0 to 6\n * where 0 = C, 1 = D ... 6 = B\n * - alt: a numeric representation of the accidentals. 0 means no alteration,\n * positive numbers are for sharps and negative for flats\n * - chroma: a numeric representation of the pitch class. It's like midi for\n * pitch classes. 0 = C, 1 = C#, 2 = D ... It can have negative values: -1 = Cb.\n * Can detect pitch class enhramonics.\n *\n * If the note has octave, the parser object will contain:\n * - oct: the octave number (as integer)\n * - midi: the midi number\n * - freq: the frequency (using tuning parameter as base)\n *\n * If the parameter `isTonic` is set to true, the parsed object will contain:\n * - tonicOf: the rest of the string that follows note name (left and right trimmed)\n *\n * @example\n * var parse = require('note-parser').parse\n * parse('Cb4')\n * // => { letter: 'C', acc: 'b', pc: 'Cb', step: 0, alt: -1, chroma: -1,\n *         oct: 4, midi: 59, freq: 246.94165062806206 }\n * // if no octave, no midi, no freq\n * parse('fx')\n * // => { letter: 'F', acc: '##', pc: 'F##', step: 3, alt: 2, chroma: 7 })\n */\nfunction parse (str, isTonic, tuning) {\n  if (typeof str !== 'string') return null\n  var m = REGEX.exec(str)\n  if (!m || !isTonic && m[4]) return null\n\n  var p = { letter: m[1].toUpperCase(), acc: m[2].replace(/x/g, '##') }\n  p.pc = p.letter + p.acc\n  p.step = (p.letter.charCodeAt(0) + 3) % 7\n  p.alt = p.acc[0] === 'b' ? -p.acc.length : p.acc.length\n  p.chroma = SEMITONES[p.step] + p.alt\n  if (m[3]) {\n    p.oct = +m[3]\n    p.midi = p.chroma + 12 * (p.oct + 1)\n    p.freq = midiToFreq(p.midi, tuning)\n  }\n  if (isTonic) p.tonicOf = m[4]\n  return p\n}\n\n/**\n * Given a midi number, return its frequency\n * @param {Integer} midi - midi note number\n * @param {Float} tuning - (Optional) the A4 tuning (440Hz by default)\n * @return {Float} frequency in hertzs\n */\nfunction midiToFreq (midi, tuning) {\n  return Math.pow(2, (midi - 69) / 12) * (tuning || 440)\n}\n\nvar parser = { parse: parse, regex: regex, midiToFreq: midiToFreq }\nvar FNS = ['letter', 'acc', 'pc', 'step', 'alt', 'chroma', 'oct', 'midi', 'freq']\nFNS.forEach(function (name) {\n  parser[name] = function (src) {\n    var p = parse(src)\n    return p && (typeof p[name] !== 'undefined') ? p[name] : null\n  }\n})\n\nmodule.exports = parser\n\n// extra API docs\n/**\n * Get midi of a note\n *\n * @name midi\n * @function\n * @param {String} note - the note name\n * @return {Integer} the midi number of the note or null if not a valid note\n * or the note does NOT contains octave\n * @example\n * var parser = require('note-parser')\n * parser.midi('A4') // => 69\n * parser.midi('A') // => null\n */\n/**\n * Get freq of a note in hertzs (in a well tempered 440Hz A4)\n *\n * @name freq\n * @function\n * @param {String} note - the note name\n * @return {Float} the freq of the number if hertzs or null if not valid note\n * or the note does NOT contains octave\n * @example\n * var parser = require('note-parser')\n * parser.freq('A4') // => 440\n * parser.freq('A') // => null\n */\n",
    "'use strict'\n\nvar note = require('note-parser')\nvar isMidi = function (n) { return n !== null && n !== [] && n >= 0 && n < 129 }\nvar toMidi = function (n) { return isMidi(n) ? +n : note.midi(n) }\n\n// Adds note name to midi conversion\nmodule.exports = function (player) {\n  if (player.buffers) {\n    var map = player.opts.map\n    var toKey = typeof map === 'function' ? map : toMidi\n    var mapper = function (name) {\n      return name ? toKey(name) || name : null\n    }\n\n    player.buffers = mapBuffers(player.buffers, mapper)\n    var start = player.start\n    player.start = function (name, when, options) {\n      var key = mapper(name)\n      var dec = key % 1\n      if (dec) {\n        key = Math.floor(key)\n        options = Object.assign(options || {}, { cents: Math.floor(dec * 100) })\n      }\n      return start(key, when, options)\n    }\n  }\n  return player\n}\n\nfunction mapBuffers (buffers, toKey) {\n  return Object.keys(buffers).reduce(function (mapped, name) {\n    mapped[toKey(name)] = buffers[name]\n    return mapped\n  }, {})\n}\n",
    "module.exports = ADSR\n\nfunction ADSR(audioContext){\n  var node = audioContext.createGain()\n\n  var voltage = node._voltage = getVoltage(audioContext)\n  var value = scale(voltage)\n  var startValue = scale(voltage)\n  var endValue = scale(voltage)\n\n  node._startAmount = scale(startValue)\n  node._endAmount = scale(endValue)\n\n  node._multiplier = scale(value)\n  node._multiplier.connect(node)\n  node._startAmount.connect(node)\n  node._endAmount.connect(node)\n\n  node.value = value.gain\n  node.startValue = startValue.gain\n  node.endValue = endValue.gain\n\n  node.startValue.value = 0\n  node.endValue.value = 0\n\n  Object.defineProperties(node, props)\n  return node\n}\n\nvar props = {\n\n  attack: { value: 0, writable: true },\n  decay: { value: 0, writable: true },\n  sustain: { value: 1, writable: true },\n  release: {value: 0, writable: true },\n\n  getReleaseDuration: {\n    value: function(){\n      return this.release\n    }\n  },\n\n  start: {\n    value: function(at){\n      var target = this._multiplier.gain\n      var startAmount = this._startAmount.gain\n      var endAmount = this._endAmount.gain\n\n      this._voltage.start(at)\n      this._decayFrom = this._decayFrom = at+this.attack\n      this._startedAt = at\n\n      var sustain = this.sustain\n\n      target.cancelScheduledValues(at)\n      startAmount.cancelScheduledValues(at)\n      endAmount.cancelScheduledValues(at)\n\n      endAmount.setValueAtTime(0, at)\n\n      if (this.attack){\n        target.setValueAtTime(0, at)\n        target.linearRampToValueAtTime(1, at + this.attack)\n\n        startAmount.setValueAtTime(1, at)\n        startAmount.linearRampToValueAtTime(0, at + this.attack)\n      } else {\n        target.setValueAtTime(1, at)\n        startAmount.setValueAtTime(0, at)\n      }\n\n      if (this.decay){\n        target.setTargetAtTime(sustain, this._decayFrom, getTimeConstant(this.decay))\n      }\n    }\n  },\n\n  stop: {\n    value: function(at, isTarget){\n      if (isTarget){\n        at = at - this.release\n      }\n\n      var endTime = at + this.release\n      if (this.release){\n\n        var target = this._multiplier.gain\n        var startAmount = this._startAmount.gain\n        var endAmount = this._endAmount.gain\n\n        target.cancelScheduledValues(at)\n        startAmount.cancelScheduledValues(at)\n        endAmount.cancelScheduledValues(at)\n\n        var expFalloff = getTimeConstant(this.release)\n\n        // truncate attack (required as linearRamp is removed by cancelScheduledValues)\n        if (this.attack && at < this._decayFrom){\n          var valueAtTime = getValue(0, 1, this._startedAt, this._decayFrom, at)\n          target.linearRampToValueAtTime(valueAtTime, at)\n          startAmount.linearRampToValueAtTime(1-valueAtTime, at)\n          startAmount.setTargetAtTime(0, at, expFalloff)\n        }\n\n        endAmount.setTargetAtTime(1, at, expFalloff)\n        target.setTargetAtTime(0, at, expFalloff)\n      }\n\n      this._voltage.stop(endTime)\n      return endTime\n    }\n  },\n\n  onended: {\n    get: function(){\n      return this._voltage.onended\n    },\n    set: function(value){\n      this._voltage.onended = value\n    }\n  }\n\n}\n\nvar flat = new Float32Array([1,1])\nfunction getVoltage(context){\n  var voltage = context.createBufferSource()\n  var buffer = context.createBuffer(1, 2, context.sampleRate)\n  buffer.getChannelData(0).set(flat)\n  voltage.buffer = buffer\n  voltage.loop = true\n  return voltage\n}\n\nfunction scale(node){\n  var gain = node.context.createGain()\n  node.connect(gain)\n  return gain\n}\n\nfunction getTimeConstant(time){\n  return Math.log(time+1)/Math.log(100)\n}\n\nfunction getValue(start, end, fromTime, toTime, at){\n  var difference = end - start\n  var time = toTime - fromTime\n  var truncateTime = at - fromTime\n  var phase = truncateTime / time\n  var value = start + phase * difference\n\n  if (value <= start) {\n      value = start\n  }\n  if (value >= end) {\n      value = end\n  }\n\n  return value\n}\n",
    "/* global AudioBuffer */\n'use strict'\n\nvar ADSR = require('adsr')\n\nvar EMPTY = {}\nvar DEFAULTS = {\n  gain: 1,\n  attack: 0.01,\n  decay: 0.1,\n  sustain: 0.9,\n  release: 0.3,\n  loop: false,\n  cents: 0,\n  loopStart: 0,\n  loopEnd: 0\n}\n\n/**\n * Create a sample player.\n *\n * @param {AudioContext} ac - the audio context\n * @param {ArrayBuffer|Object<String,ArrayBuffer>} source\n * @param {Onject} options - (Optional) an options object\n * @return {player} the player\n * @example\n * var SamplePlayer = require('sample-player')\n * var ac = new AudioContext()\n * var snare = SamplePlayer(ac, <AudioBuffer>)\n * snare.play()\n */\nfunction SamplePlayer (ac, source, options) {\n  var connected = false\n  var nextId = 0\n  var tracked = {}\n  var out = ac.createGain()\n  out.gain.value = 1\n\n  var opts = Object.assign({}, DEFAULTS, options)\n\n  /**\n   * @namespace\n   */\n  var player = { context: ac, out: out, opts: opts }\n  if (source instanceof AudioBuffer) player.buffer = source\n  else player.buffers = source\n\n  /**\n   * Start a sample buffer.\n   *\n   * The returned object has a function `stop(when)` to stop the sound.\n   *\n   * @param {String} name - the name of the buffer. If the source of the\n   * SamplePlayer is one sample buffer, this parameter is not required\n   * @param {Float} when - (Optional) when to start (current time if by default)\n   * @param {Object} options - additional sample playing options\n   * @return {AudioNode} an audio node with a `stop` function\n   * @example\n   * var sample = player(ac, <AudioBuffer>).connect(ac.destination)\n   * sample.start()\n   * sample.start(5, { gain: 0.7 }) // name not required since is only one AudioBuffer\n   * @example\n   * var drums = player(ac, { snare: <AudioBuffer>, kick: <AudioBuffer>, ... }).connect(ac.destination)\n   * drums.start('snare')\n   * drums.start('snare', 0, { gain: 0.3 })\n   */\n  player.start = function (name, when, options) {\n    // if only one buffer, reorder arguments\n    if (player.buffer && name !== null) return player.start(null, name, when)\n\n    var buffer = name ? player.buffers[name] : player.buffer\n    if (!buffer) {\n      console.warn('Buffer ' + name + ' not found.')\n      return\n    } else if (!connected) {\n      console.warn('SamplePlayer not connected to any node.')\n      return\n    }\n\n    var opts = options || EMPTY\n    when = Math.max(ac.currentTime, when || 0)\n    player.emit('start', when, name, opts)\n    var node = createNode(name, buffer, opts)\n    node.id = track(name, node)\n    node.env.start(when)\n    node.source.start(when)\n    player.emit('started', when, node.id, node)\n    if (opts.duration) node.stop(when + opts.duration)\n    return node\n  }\n\n  // NOTE: start will be override so we can't copy the function reference\n  // this is obviously not a good design, so this code will be gone soon.\n  /**\n   * An alias for `player.start`\n   * @see player.start\n   * @since 0.3.0\n   */\n  player.play = function (name, when, options) {\n    return player.start(name, when, options)\n  }\n\n  /**\n   * Stop some or all samples\n   *\n   * @param {Float} when - (Optional) an absolute time in seconds (or currentTime\n   * if not specified)\n   * @param {Array} nodes - (Optional) an array of nodes or nodes ids to stop\n   * @return {Array} an array of ids of the stoped samples\n   *\n   * @example\n   * var longSound = player(ac, <AudioBuffer>).connect(ac.destination)\n   * longSound.start(ac.currentTime)\n   * longSound.start(ac.currentTime + 1)\n   * longSound.start(ac.currentTime + 2)\n   * longSound.stop(ac.currentTime + 3) // stop the three sounds\n   */\n  player.stop = function (when, ids) {\n    var node\n    ids = ids || Object.keys(tracked)\n    return ids.map(function (id) {\n      node = tracked[id]\n      if (!node) return null\n      node.stop(when)\n      return node.id\n    })\n  }\n  /**\n   * Connect the player to a destination node\n   *\n   * @param {AudioNode} destination - the destination node\n   * @return {AudioPlayer} the player\n   * @chainable\n   * @example\n   * var sample = player(ac, <AudioBuffer>).connect(ac.destination)\n   */\n  player.connect = function (dest) {\n    connected = true\n    out.connect(dest)\n    return player\n  }\n\n  player.emit = function (event, when, obj, opts) {\n    if (player.onevent) player.onevent(event, when, obj, opts)\n    var fn = player['on' + event]\n    if (fn) fn(when, obj, opts)\n  }\n\n  return player\n\n  // =============== PRIVATE FUNCTIONS ============== //\n\n  function track (name, node) {\n    node.id = nextId++\n    tracked[node.id] = node\n    node.source.onended = function () {\n      var now = ac.currentTime\n      node.source.disconnect()\n      node.env.disconnect()\n      node.disconnect()\n      player.emit('ended', now, node.id, node)\n    }\n    return node.id\n  }\n\n  function createNode (name, buffer, options) {\n    var node = ac.createGain()\n    node.gain.value = 0 // the envelope will control the gain\n    node.connect(out)\n\n    node.env = envelope(ac, options, opts)\n    node.env.connect(node.gain)\n\n    node.source = ac.createBufferSource()\n    node.source.buffer = buffer\n    node.source.connect(node)\n    node.source.loop = options.loop || opts.loop\n    node.source.playbackRate.value = centsToRate(options.cents || opts.cents)\n    node.source.loopStart = options.loopStart || opts.loopStart\n    node.source.loopEnd = options.loopEnd || opts.loopEnd\n    node.stop = function (when) {\n      var time = when || ac.currentTime\n      player.emit('stop', time, name)\n      var stopAt = node.env.stop(time)\n      node.source.stop(stopAt)\n    }\n    return node\n  }\n}\n\nfunction isNum (x) { return typeof x === 'number' }\nvar PARAMS = ['attack', 'decay', 'sustain', 'release']\nfunction envelope (ac, options, opts) {\n  var env = ADSR(ac)\n  var adsr = options.adsr || opts.adsr\n  PARAMS.forEach(function (name, i) {\n    if (adsr) env[name] = adsr[i]\n    else env[name] = options[name] || opts[name]\n  })\n  env.value.value = isNum(options.gain) ? options.gain\n    : isNum(opts.gain) ? opts.gain : 1\n  return env\n}\n\n/*\n * Get playback rate for a given pitch change (in cents)\n * Basic [math](http://www.birdsoft.demon.co.uk/music/samplert.htm):\n * f2 = f1 * 2^( C / 1200 )\n */\nfunction centsToRate (cents) { return cents ? Math.pow(2, cents / 1200) : 1 }\n\nmodule.exports = SamplePlayer\n",
    "'use strict'\n\nvar isArr = Array.isArray\nvar isObj = function (o) { return o && typeof o === 'object' }\nvar OPTS = {}\n\nmodule.exports = function (player) {\n  /**\n   * Schedule a list of events to be played at specific time.\n   *\n   * It supports three formats of events for the events list:\n   *\n   * - An array with [time, note]\n   * - An array with [time, object]\n   * - An object with { time: ?, [name|note|midi|key]: ? }\n   *\n   * @param {Float} time - an absolute time to start (or AudioContext's\n   * currentTime if provided number is 0)\n   * @param {Array} events - the events list.\n   * @return {Array} an array of ids\n   *\n   * @example\n   * // Event format: [time, note]\n   * var piano = player(ac, ...).connect(ac.destination)\n   * piano.schedule(0, [ [0, 'C2'], [0.5, 'C3'], [1, 'C4'] ])\n   *\n   * @example\n   * // Event format: an object { time: ?, name: ? }\n   * var drums = player(ac, ...).connect(ac.destination)\n   * drums.schedule(0, [\n   *   { name: 'kick', time: 0 },\n   *   { name: 'snare', time: 0.5 },\n   *   { name: 'kick', time: 1 },\n   *   { name: 'snare', time: 1.5 }\n   * ])\n   */\n  player.schedule = function (time, events) {\n    var now = player.context.currentTime\n    var when = time < now ? now : time\n    player.emit('schedule', when, events)\n    var t, o, note, opts\n    return events.map(function (event) {\n      if (!event) return null\n      else if (isArr(event)) {\n        t = event[0]; o = event[1]\n      } else {\n        t = event.time; o = event\n      }\n\n      if (isObj(o)) {\n        note = o.name || o.key || o.note || o.midi || null\n        opts = o\n      } else {\n        note = o\n        opts = OPTS\n      }\n\n      return player.start(note, when + (t || 0), opts)\n    })\n  }\n  return player\n}\n",
    "'use strict'\n\nvar player = require('./player')\nvar events = require('./events')\nvar notes = require('./notes')\nvar scheduler = require('./scheduler')\nvar midi = require('./midi')\n\nfunction SamplePlayer (ac, source, options) {\n  return midi(scheduler(notes(events(player(ac, source, options)))))\n}\n\nif (typeof module === 'object' && module.exports) module.exports = SamplePlayer\nif (typeof window !== 'undefined') window.SamplePlayer = SamplePlayer\n",
    "!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],n):n(t.NoteParser=t.NoteParser||{})}(this,function(t){\"use strict\";function n(t,n){return Array(n+1).join(t)}function r(t){return\"number\"==typeof t}function e(t){return\"string\"==typeof t}function u(t){return void 0!==t}function c(t,n){return Math.pow(2,(t-69)/12)*(n||440)}function o(){return b}function i(t,n,r){if(\"string\"!=typeof t)return null;var e=b.exec(t);if(!e||!n&&e[4])return null;var u={letter:e[1].toUpperCase(),acc:e[2].replace(/x/g,\"##\")};u.pc=u.letter+u.acc,u.step=(u.letter.charCodeAt(0)+3)%7,u.alt=\"b\"===u.acc[0]?-u.acc.length:u.acc.length;var o=A[u.step]+u.alt;return u.chroma=o<0?12+o:o%12,e[3]&&(u.oct=+e[3],u.midi=o+12*(u.oct+1),u.freq=c(u.midi,r)),n&&(u.tonicOf=e[4]),u}function f(t){return r(t)?t<0?n(\"b\",-t):n(\"#\",t):\"\"}function a(t){return r(t)?\"\"+t:\"\"}function l(t,n,r){return null===t||void 0===t?null:t.step?l(t.step,t.alt,t.oct):t<0||t>6?null:C.charAt(t)+f(n)+a(r)}function p(t){if((r(t)||e(t))&&t>=0&&t<128)return+t;var n=i(t);return n&&u(n.midi)?n.midi:null}function s(t,n){var r=p(t);return null===r?null:c(r,n)}function d(t){return(i(t)||{}).letter}function m(t){return(i(t)||{}).acc}function h(t){return(i(t)||{}).pc}function v(t){return(i(t)||{}).step}function g(t){return(i(t)||{}).alt}function x(t){return(i(t)||{}).chroma}function y(t){return(i(t)||{}).oct}var b=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)\\s*$/,A=[0,2,4,5,7,9,11],C=\"CDEFGAB\";t.regex=o,t.parse=i,t.build=l,t.midi=p,t.freq=s,t.letter=d,t.acc=m,t.pc=h,t.step=v,t.alt=g,t.chroma=x,t.oct=y});\n//# sourceMappingURL=note-parser.js.map\n",
    "'use strict'\n\nvar parser = require('note-parser')\n\n/**\n * Create a Soundfont object\n *\n * @param {AudioContext} context - the [audio context](https://developer.mozilla.org/en/docs/Web/API/AudioContext)\n * @param {Function} nameToUrl - (Optional) a function that maps the sound font name to the url\n * @return {Soundfont} a soundfont object\n */\nfunction Soundfont (ctx, nameToUrl) {\n  console.warn('new Soundfont() is deprected')\n  console.log('Please use Soundfont.instrument() instead of new Soundfont().instrument()')\n  if (!(this instanceof Soundfont)) return new Soundfont(ctx)\n\n  this.nameToUrl = nameToUrl || Soundfont.nameToUrl\n  this.ctx = ctx\n  this.instruments = {}\n  this.promises = []\n}\n\nSoundfont.prototype.onready = function (callback) {\n  console.warn('deprecated API')\n  console.log('Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()')\n  Promise.all(this.promises).then(callback)\n}\n\nSoundfont.prototype.instrument = function (name, options) {\n  console.warn('new Soundfont().instrument() is deprecated.')\n  console.log('Please use Soundfont.instrument() instead.')\n  var ctx = this.ctx\n  name = name || 'default'\n  if (name in this.instruments) return this.instruments[name]\n  var inst = {name: name, play: oscillatorPlayer(ctx, options)}\n  this.instruments[name] = inst\n  if (name !== 'default') {\n    var promise = Soundfont.instrument(ctx, name, options).then(function (instrument) {\n      inst.play = instrument.play\n      return inst\n    })\n    this.promises.push(promise)\n    inst.onready = function (cb) {\n      console.warn('onready is deprecated. Use Soundfont.instrument().then()')\n      promise.then(cb)\n    }\n  } else {\n    inst.onready = function (cb) {\n      console.warn('onready is deprecated. Use Soundfont.instrument().then()')\n      cb()\n    }\n  }\n  return inst\n}\n\n/*\n * Load the buffers of a given instrument name. It returns a promise that resolves\n * to a hash with midi note numbers as keys, and audio buffers as values.\n *\n * @param {AudioContext} ac - the audio context\n * @param {String} name - the instrument name (it accepts an url if starts with \"http\")\n * @param {Object} options - (Optional) options object\n * @return {Promise} a promise that resolves to a Hash of { midiNoteNum: <AudioBuffer> }\n *\n * The options object accepts the following keys:\n *\n * - nameToUrl {Function}: a function to convert from instrument names to urls.\n * By default it uses Benjamin Gleitzman's package of\n * [pre-rendered sound fonts](https://github.com/gleitz/midi-js-soundfonts)\n * - notes {Array}: the list of note names to be decoded (all by default)\n *\n * @example\n * var Soundfont = require('soundfont-player')\n * Soundfont.loadBuffers(ctx, 'acoustic_grand_piano').then(function(buffers) {\n *  buffers[60] // => An <AudioBuffer> corresponding to note C4\n * })\n */\nfunction loadBuffers (ac, name, options) {\n  console.warn('Soundfont.loadBuffers is deprecate.')\n  console.log('Use Soundfont.instrument(..) and get buffers properties from the result.')\n  return Soundfont.instrument(ac, name, options).then(function (inst) {\n    return inst.buffers\n  })\n}\nSoundfont.loadBuffers = loadBuffers\n\n/**\n * Returns a function that plays an oscillator\n *\n * @param {AudioContext} ac - the audio context\n * @param {Hash} defaultOptions - (Optional) a hash of options:\n * - vcoType: the oscillator type (default: 'sine')\n * - gain: the output gain value (default: 0.4)\n  * - destination: the player destination (default: ac.destination)\n */\nfunction oscillatorPlayer (ctx, defaultOptions) {\n  defaultOptions = defaultOptions || {}\n  return function (note, time, duration, options) {\n    console.warn('The oscillator player is deprecated.')\n    console.log('Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.')\n    var midi = note > 0 && note < 129 ? +note : parser.midi(note)\n    var freq = midi ? parser.midiToFreq(midi, 440) : null\n    if (!freq) return\n\n    duration = duration || 0.2\n\n    options = options || {}\n    var destination = options.destination || defaultOptions.destination || ctx.destination\n    var vcoType = options.vcoType || defaultOptions.vcoType || 'sine'\n    var gain = options.gain || defaultOptions.gain || 0.4\n\n    var vco = ctx.createOscillator()\n    vco.type = vcoType\n    vco.frequency.value = freq\n\n    /* VCA */\n    var vca = ctx.createGain()\n    vca.gain.value = gain\n\n    /* Connections */\n    vco.connect(vca)\n    vca.connect(destination)\n\n    vco.start(time)\n    if (duration > 0) vco.stop(time + duration)\n    return vco\n  }\n}\n\n/**\n * Given a note name, return the note midi number\n *\n * @name noteToMidi\n * @function\n * @param {String} noteName\n * @return {Integer} the note midi number or null if not a valid note name\n */\nSoundfont.noteToMidi = parser.midi\n\nmodule.exports = Soundfont\n",
    "'use strict'\n\nvar load = require('audio-loader')\nvar player = require('sample-player')\n\n/**\n * Load a soundfont instrument. It returns a promise that resolves to a\n * instrument object.\n *\n * The instrument object returned by the promise has the following properties:\n *\n * - name: the instrument name\n * - play: A function to play notes from the buffer with the signature\n * `play(note, time, duration, options)`\n *\n *\n * The valid options are:\n *\n * - `format`: the soundfont format. 'mp3' by default. Can be 'ogg'\n * - `soundfont`: the soundfont name. 'MusyngKite' by default. Can be 'FluidR3_GM'\n * - `nameToUrl` <Function>: a function to convert from instrument names to URL\n * - `destination`: by default Soundfont uses the `audioContext.destination` but you can override it.\n * - `gain`: the gain of the player (1 by default)\n * - `notes`: an array of the notes to decode. It can be an array of strings\n * with note names or an array of numbers with midi note numbers. This is a\n * performance option: since decoding mp3 is a cpu intensive process, you can limit\n * limit the number of notes you want and reduce the time to load the instrument.\n *\n * @param {AudioContext} ac - the audio context\n * @param {String} name - the instrument name. For example: 'acoustic_grand_piano'\n * @param {Object} options - (Optional) the same options as Soundfont.loadBuffers\n * @return {Promise}\n *\n * @example\n * var Soundfont = require('sounfont-player')\n * Soundfont.instrument('marimba').then(function (marimba) {\n *   marimba.play('C4')\n * })\n */\nfunction instrument (ac, name, options) {\n  if (arguments.length === 1) return function (n, o) { return instrument(ac, n, o) }\n  var opts = options || {}\n  var isUrl = opts.isSoundfontURL || isSoundfontURL\n  var toUrl = opts.nameToUrl || nameToUrl\n  var url = isUrl(name) ? name : toUrl(name, opts.soundfont, opts.format)\n\n  return load(ac, url, { only: opts.only || opts.notes }).then(function (buffers) {\n    var p = player(ac, buffers, opts).connect(opts.destination ? opts.destination : ac.destination)\n    p.url = url\n    p.name = name\n    return p\n  })\n}\n\nfunction isSoundfontURL (name) {\n  return /\\.js(\\?.*)?$/i.test(name)\n}\n\n/**\n * Given an instrument name returns a URL to to the Benjamin Gleitzman's\n * package of [pre-rendered sound fonts](https://github.com/gleitz/midi-js-soundfonts)\n *\n * @param {String} name - instrument name\n * @param {String} soundfont - (Optional) the soundfont name. One of 'FluidR3_GM'\n * or 'MusyngKite' ('MusyngKite' by default)\n * @param {String} format - (Optional) Can be 'mp3' or 'ogg' (mp3 by default)\n * @returns {String} the Soundfont file url\n * @example\n * var Soundfont = require('soundfont-player')\n * Soundfont.nameToUrl('marimba', 'mp3')\n */\nfunction nameToUrl (name, sf, format) {\n  format = format === 'ogg' ? format : 'mp3'\n  sf = sf === 'FluidR3_GM' ? sf : 'MusyngKite'\n  return 'https://gleitz.github.io/midi-js-soundfonts/' + sf + '/' + name + '-' + format + '.js'\n}\n\n// In the 1.0.0 release it will be:\n// var Soundfont = {}\nvar Soundfont = require('./legacy')\nSoundfont.instrument = instrument\nSoundfont.nameToUrl = nameToUrl\n\nif (typeof module === 'object' && module.exports) module.exports = Soundfont\nif (typeof window !== 'undefined') window.Soundfont = Soundfont\n",
    "var Soundfont = require('soundfont-player')\n\nmodule.exports = function instrumentStore (state, emitter) {\n  state.instruments = require('soundfont-player/instruments.json')\n\n  emitter.on('instrument', function (instrumentId) {\n    state.instrumentId = instrumentId\n    state.instrument = null\n\n    emitter.emit('render')\n\n    Soundfont.instrument(state.player.audioContext, instrumentId, {\n      destination: state.player.merger\n    })\n      .then(function (instrument) {\n        state.instrument = instrument\n      })\n  })\n}\n",
    "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar NAMES = \"C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B\".split(\" \");\r\nvar names = function (accTypes) {\r\n    return typeof accTypes !== \"string\"\r\n        ? NAMES.slice()\r\n        : NAMES.filter(function (n) {\r\n            var acc = n[1] || \" \";\r\n            return accTypes.indexOf(acc) !== -1;\r\n        });\r\n};\r\nvar SHARPS = names(\" #\");\r\nvar FLATS = names(\" b\");\r\nvar REGEX = /^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)$/;\r\nfunction tokenize(str) {\r\n    if (typeof str !== \"string\")\r\n        str = \"\";\r\n    var m = REGEX.exec(str);\r\n    return [m[1].toUpperCase(), m[2].replace(/x/g, \"##\"), m[3], m[4]];\r\n}\r\nvar NO_NOTE = Object.freeze({\r\n    pc: null,\r\n    name: null,\r\n    step: null,\r\n    alt: null,\r\n    oct: null,\r\n    octStr: null,\r\n    chroma: null,\r\n    midi: null,\r\n    freq: null\r\n});\r\nvar SEMI = [0, 2, 4, 5, 7, 9, 11];\r\nvar properties = function (str) {\r\n    var tokens = tokenize(str);\r\n    if (tokens[0] === \"\" || tokens[3] !== \"\")\r\n        return NO_NOTE;\r\n    var letter = tokens[0], acc = tokens[1], octStr = tokens[2];\r\n    var p = {\r\n        letter: letter,\r\n        acc: acc,\r\n        octStr: octStr,\r\n        pc: letter + acc,\r\n        name: letter + acc + octStr,\r\n        step: (letter.charCodeAt(0) + 3) % 7,\r\n        alt: acc[0] === \"b\" ? -acc.length : acc.length,\r\n        oct: octStr.length ? +octStr : null,\r\n        chroma: 0,\r\n        midi: null,\r\n        freq: null\r\n    };\r\n    p.chroma = (SEMI[p.step] + p.alt + 120) % 12;\r\n    p.midi = p.oct !== null ? SEMI[p.step] + p.alt + 12 * (p.oct + 1) : null;\r\n    p.freq = midiToFreq(p.midi);\r\n    return Object.freeze(p);\r\n};\r\nvar memo = function (fn, cache) {\r\n    if (cache === void 0) { cache = {}; }\r\n    return function (str) { return cache[str] || (cache[str] = fn(str)); };\r\n};\r\nvar props = memo(properties);\r\nvar name = function (str) { return props(str).name; };\r\nvar pc = function (str) { return props(str).pc; };\r\nvar isMidiRange = function (m) { return m >= 0 && m <= 127; };\r\nvar midi = function (note) {\r\n    if (typeof note !== \"number\" && typeof note !== \"string\") {\r\n        return null;\r\n    }\r\n    var midi = props(note).midi;\r\n    var value = midi || midi === 0 ? midi : +note;\r\n    return isMidiRange(value) ? value : null;\r\n};\r\nvar midiToFreq = function (midi, tuning) {\r\n    if (tuning === void 0) { tuning = 440; }\r\n    return typeof midi === \"number\" ? Math.pow(2, (midi - 69) / 12) * tuning : null;\r\n};\r\nvar freq = function (note) { return props(note).freq || midiToFreq(note); };\r\nvar L2 = Math.log(2);\r\nvar L440 = Math.log(440);\r\nvar freqToMidi = function (freq) {\r\n    var v = (12 * (Math.log(freq) - L440)) / L2 + 69;\r\n    return Math.round(v * 100) / 100;\r\n};\r\nvar chroma = function (str) { return props(str).chroma; };\r\nvar oct = function (str) { return props(str).oct; };\r\nvar LETTERS = \"CDEFGAB\";\r\nvar stepToLetter = function (step) { return LETTERS[step]; };\r\nvar fillStr = function (s, n) { return Array(n + 1).join(s); };\r\nvar numToStr = function (num, op) {\r\n    return typeof num !== \"number\" ? \"\" : op(num);\r\n};\r\nvar altToAcc = function (alt) {\r\n    return numToStr(alt, function (alt) { return (alt < 0 ? fillStr(\"b\", -alt) : fillStr(\"#\", alt)); });\r\n};\r\nvar from = function (fromProps, baseNote) {\r\n    if (fromProps === void 0) { fromProps = {}; }\r\n    if (baseNote === void 0) { baseNote = null; }\r\n    var _a = baseNote\r\n        ? Object.assign({}, props(baseNote), fromProps)\r\n        : fromProps, step = _a.step, alt = _a.alt, oct = _a.oct;\r\n    if (typeof step !== \"number\")\r\n        return null;\r\n    var letter = stepToLetter(step);\r\n    if (!letter)\r\n        return null;\r\n    var pc = letter + altToAcc(alt);\r\n    return oct || oct === 0 ? pc + oct : pc;\r\n};\r\nvar build = from;\r\nfunction fromMidi(num, sharps) {\r\n    if (sharps === void 0) { sharps = false; }\r\n    num = Math.round(num);\r\n    var pcs = sharps === true ? SHARPS : FLATS;\r\n    var pc = pcs[num % 12];\r\n    var o = Math.floor(num / 12) - 1;\r\n    return pc + o;\r\n}\r\nvar simplify = function (note, sameAcc) {\r\n    if (sameAcc === void 0) { sameAcc = true; }\r\n    var _a = props(note), alt = _a.alt, chroma = _a.chroma, midi = _a.midi;\r\n    if (chroma === null)\r\n        return null;\r\n    var alteration = alt;\r\n    var useSharps = sameAcc === false ? alteration < 0 : alteration > 0;\r\n    return midi === null\r\n        ? pc(fromMidi(chroma, useSharps))\r\n        : fromMidi(midi, useSharps);\r\n};\r\nvar enharmonic = function (note) { return simplify(note, false); };\n\nexports.names = names;\nexports.tokenize = tokenize;\nexports.props = props;\nexports.name = name;\nexports.pc = pc;\nexports.midi = midi;\nexports.midiToFreq = midiToFreq;\nexports.freq = freq;\nexports.freqToMidi = freqToMidi;\nexports.chroma = chroma;\nexports.oct = oct;\nexports.stepToLetter = stepToLetter;\nexports.altToAcc = altToAcc;\nexports.from = from;\nexports.build = build;\nexports.fromMidi = fromMidi;\nexports.simplify = simplify;\nexports.enharmonic = enharmonic;\n",
    "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar tonalNote = require('tonal-note');\n\n/**\n * [![npm version](https://img.shields.io/npm/v/tonal-array.svg?style=flat-square)](https://www.npmjs.com/package/tonal-array)\n *\n * Tonal array utilities. Create ranges, sort notes, ...\n *\n * @example\n * import * as Array;\n * Array.sort([\"f\", \"a\", \"c\"]) // => [\"C\", \"F\", \"A\"]\n *\n * @example\n * const Array = require(\"tonal-array\")\n * Array.range(1, 4) // => [1, 2, 3, 4]\n *\n * @module Array\n */\n\n// ascending range\nfunction ascR(b, n) {\n  for (var a = []; n--; a[n] = n + b){ }\n  return a;\n}\n// descending range\nfunction descR(b, n) {\n  for (var a = []; n--; a[n] = b - n){ }\n  return a;\n}\n\n/**\n * Create a numeric range\n *\n * @param {Number} from\n * @param {Number} to\n * @return {Array}\n *\n * @example\n * Array.range(-2, 2) // => [-2, -1, 0, 1, 2]\n * Array.range(2, -2) // => [2, 1, 0, -1, -2]\n */\nfunction range(a, b) {\n  return a === null || b === null\n    ? []\n    : a < b\n      ? ascR(a, b - a + 1)\n      : descR(a, a - b + 1);\n}\n/**\n *\n * Rotates a list a number of times. It\"s completly agnostic about the\n * contents of the list.\n *\n * @param {Integer} times - the number of rotations\n * @param {Array} array\n * @return {Array} the rotated array\n * @example\n * Array.rotate(1, [1, 2, 3]) // => [2, 3, 1]\n */\nfunction rotate(times, arr) {\n  var len = arr.length;\n  var n = ((times % len) + len) % len;\n  return arr.slice(n, len).concat(arr.slice(0, n));\n}\n\n/**\n * Return a copy of the array with the null values removed\n * @function\n * @param {Array} array\n * @return {Array}\n *\n * @example\n * Array.compact([\"a\", \"b\", null, \"c\"]) // => [\"a\", \"b\", \"c\"]\n */\nvar compact = function (arr) { return arr.filter(function (n) { return n === 0 || n; }); };\n\n// a function that get note heights (with negative number for pitch classes)\nvar height = function (name) {\n  var m = tonalNote.props(name).midi;\n  return m !== null ? m : tonalNote.props(name + \"-100\").midi;\n};\n\n/**\n * Sort an array of notes in ascending order\n *\n * @param {String|Array} notes\n * @return {Array} sorted array of notes\n */\nfunction sort(src) {\n  return compact(src.map(tonalNote.name)).sort(function (a, b) { return height(a) > height(b); });\n}\n\n/**\n * Get sorted notes with duplicates removed\n *\n * @function\n * @param {Array} notes\n */\nfunction unique(arr) {\n  return sort(arr).filter(function (n, i, a) { return i === 0 || n !== a[i - 1]; });\n}\n\n/**\n * Randomizes the order of the specified array in-place, using the FisherYates shuffle.\n *\n * @private\n * @function\n * @param {Array|String} arr - the array\n * @return {Array} the shuffled array\n *\n * @example\n * Array.shuffle([\"C\", \"D\", \"E\", \"F\"])\n */\nvar shuffle = function (arr, rnd) {\n  if ( rnd === void 0 ) rnd = Math.random;\n\n  var i, t;\n  var m = arr.length;\n  while (m) {\n    i = (rnd() * m--) | 0;\n    t = arr[m];\n    arr[m] = arr[i];\n    arr[i] = t;\n  }\n  return arr;\n};\n\n/**\n * Get all permutations of an array\n * http://stackoverflow.com/questions/9960908/permutations-in-javascript\n *\n * @param {Array} array - the array\n * @return {Array<Array>} an array with all the permutations\n */\nvar permutations = function (arr) {\n  if (arr.length === 0) { return [[]]; }\n  return permutations(arr.slice(1)).reduce(function(acc, perm) {\n    return acc.concat(\n      arr.map(function(e, pos) {\n        var newPerm = perm.slice();\n        newPerm.splice(pos, 0, arr[0]);\n        return newPerm;\n      })\n    );\n  }, []);\n};\n\nexports.range = range;\nexports.rotate = rotate;\nexports.compact = compact;\nexports.sort = sort;\nexports.unique = unique;\nexports.shuffle = shuffle;\nexports.permutations = permutations;\n",
    "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar IVL_TNL = \"([-+]?\\\\d+)(d{1,4}|m|M|P|A{1,4})\";\r\nvar IVL_STR = \"(AA|A|P|M|m|d|dd)([-+]?\\\\d+)\";\r\nvar REGEX = new RegExp(\"^\" + IVL_TNL + \"|\" + IVL_STR + \"$\");\r\nvar SIZES = [0, 2, 4, 5, 7, 9, 11];\r\nvar TYPES = \"PMMPPMM\";\r\nvar CLASSES = [0, 1, 2, 3, 4, 5, 6, 5, 4, 3, 2, 1];\r\nvar NAMES = \"1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P\".split(\" \");\r\nvar names = function (types) {\r\n    return typeof types !== \"string\"\r\n        ? NAMES.slice()\r\n        : NAMES.filter(function (n) { return types.indexOf(n[1]) !== -1; });\r\n};\r\nvar tokenize = function (str) {\r\n    var m = REGEX.exec(\"\" + str);\r\n    if (m === null)\r\n        return null;\r\n    return (m[1] ? [m[1], m[2]] : [m[4], m[3]]);\r\n};\r\nvar NO_IVL = Object.freeze({\r\n    name: null,\r\n    num: null,\r\n    q: null,\r\n    step: null,\r\n    alt: null,\r\n    dir: null,\r\n    type: null,\r\n    simple: null,\r\n    semitones: null,\r\n    chroma: null,\r\n    oct: null\r\n});\r\nvar fillStr = function (s, n) { return Array(Math.abs(n) + 1).join(s); };\r\nvar qToAlt = function (type, q) {\r\n    if (q === \"M\" && type === \"M\")\r\n        return 0;\r\n    if (q === \"P\" && type === \"P\")\r\n        return 0;\r\n    if (q === \"m\" && type === \"M\")\r\n        return -1;\r\n    if (/^A+$/.test(q))\r\n        return q.length;\r\n    if (/^d+$/.test(q))\r\n        return type === \"P\" ? -q.length : -q.length - 1;\r\n    return null;\r\n};\r\nvar altToQ = function (type, alt) {\r\n    if (alt === 0)\r\n        return type === \"M\" ? \"M\" : \"P\";\r\n    else if (alt === -1 && type === \"M\")\r\n        return \"m\";\r\n    else if (alt > 0)\r\n        return fillStr(\"A\", alt);\r\n    else if (alt < 0)\r\n        return fillStr(\"d\", type === \"P\" ? alt : alt + 1);\r\n    else\r\n        return null;\r\n};\r\nvar numToStep = function (num) { return (Math.abs(num) - 1) % 7; };\r\nvar properties = function (str) {\r\n    var t = tokenize(str);\r\n    if (t === null)\r\n        return NO_IVL;\r\n    var p = {\r\n        num: 0,\r\n        q: \"d\",\r\n        name: \"\",\r\n        type: \"M\",\r\n        step: 0,\r\n        dir: -1,\r\n        simple: 1,\r\n        alt: 0,\r\n        oct: 0,\r\n        semitones: 0,\r\n        chroma: 0,\r\n        ic: 0\r\n    };\r\n    p.num = +t[0];\r\n    p.q = t[1];\r\n    p.step = numToStep(p.num);\r\n    p.type = TYPES[p.step];\r\n    if (p.type === \"M\" && p.q === \"P\")\r\n        return NO_IVL;\r\n    p.name = \"\" + p.num + p.q;\r\n    p.dir = p.num < 0 ? -1 : 1;\r\n    p.simple = (p.num === 8 || p.num === -8\r\n        ? p.num\r\n        : p.dir * (p.step + 1));\r\n    p.alt = qToAlt(p.type, p.q);\r\n    p.oct = Math.floor((Math.abs(p.num) - 1) / 7);\r\n    p.semitones = p.dir * (SIZES[p.step] + p.alt + 12 * p.oct);\r\n    p.chroma = ((((p.dir * (SIZES[p.step] + p.alt)) % 12) + 12) %\r\n        12);\r\n    return Object.freeze(p);\r\n};\r\nvar cache = {};\r\nfunction props(str) {\r\n    if (typeof str !== \"string\")\r\n        return NO_IVL;\r\n    return cache[str] || (cache[str] = properties(str));\r\n}\r\nvar num = function (str) { return props(str).num; };\r\nvar name = function (str) { return props(str).name; };\r\nvar semitones = function (str) { return props(str).semitones; };\r\nvar chroma = function (str) { return props(str).chroma; };\r\nvar ic = function (ivl) {\r\n    if (typeof ivl === \"string\")\r\n        ivl = props(ivl).chroma;\r\n    return typeof ivl === \"number\" ? CLASSES[ivl % 12] : null;\r\n};\r\nvar build = function (_a) {\r\n    var _b = _a === void 0 ? {} : _a, num = _b.num, step = _b.step, alt = _b.alt, _c = _b.oct, oct = _c === void 0 ? 1 : _c, dir = _b.dir;\r\n    if (step !== undefined)\r\n        num = step + 1 + 7 * oct;\r\n    if (num === undefined)\r\n        return null;\r\n    if (typeof alt !== \"number\")\r\n        return null;\r\n    var d = typeof dir !== \"number\" ? \"\" : dir < 0 ? \"-\" : \"\";\r\n    var type = TYPES[numToStep(num)];\r\n    return (d + num + altToQ(type, alt));\r\n};\r\nvar simplify = function (str) {\r\n    var p = props(str);\r\n    if (p === NO_IVL)\r\n        return null;\r\n    var intervalProps = p;\r\n    return intervalProps.simple + intervalProps.q;\r\n};\r\nvar invert = function (str) {\r\n    var p = props(str);\r\n    if (p === NO_IVL)\r\n        return null;\r\n    var intervalProps = p;\r\n    var step = (7 - intervalProps.step) % 7;\r\n    var alt = intervalProps.type === \"P\" ? -intervalProps.alt : -(intervalProps.alt + 1);\r\n    return build({ step: step, alt: alt, oct: intervalProps.oct, dir: intervalProps.dir });\r\n};\r\nvar IN = [1, 2, 2, 3, 3, 4, 5, 5, 6, 6, 7, 7];\r\nvar IQ = \"P m M m M P d P m M m M\".split(\" \");\r\nvar fromSemitones = function (num) {\r\n    var d = num < 0 ? -1 : 1;\r\n    var n = Math.abs(num);\r\n    var c = n % 12;\r\n    var o = Math.floor(n / 12);\r\n    return d * (IN[c] + 7 * o) + IQ[c];\r\n};\n\nexports.names = names;\nexports.tokenize = tokenize;\nexports.qToAlt = qToAlt;\nexports.altToQ = altToQ;\nexports.props = props;\nexports.num = num;\nexports.name = name;\nexports.semitones = semitones;\nexports.chroma = chroma;\nexports.ic = ic;\nexports.build = build;\nexports.simplify = simplify;\nexports.invert = invert;\nexports.fromSemitones = fromSemitones;\n",
    "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar tonalNote = require('tonal-note');\nvar tonalInterval = require('tonal-interval');\nvar tonalArray = require('tonal-array');\n\n/**\n * [![npm version](https://img.shields.io/npm/v/tonal-pcset.svg?style=flat-square)](https://www.npmjs.com/package/tonal-pcset)\n * [![tonal](https://img.shields.io/badge/tonal-pcset-yellow.svg?style=flat-square)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-pcset` is a collection of functions to work with pitch class sets, oriented\n * to make comparations (isEqual, isSubset, isSuperset)\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * You can install via npm: `npm i --save tonal-pcset`\n *\n * ```js\n * // es6\n * import PcSet from \"tonal-pcset\"\n * var PcSet = require(\"tonal-pcset\")\n *\n * PcSet.isEqual(\"c2 d5 e6\", \"c6 e3 d1\") // => true\n * ```\n *\n * ## API documentation\n *\n * @module PcSet\n */\n\nvar chr = function (str) { return tonalNote.chroma(str) || tonalInterval.chroma(str) || 0; };\nvar pcsetNum = function (set) { return parseInt(chroma(set), 2); };\nvar clen = function (chroma) { return chroma.replace(/0/g, \"\").length; };\n\n/**\n * Get chroma of a pitch class set. A chroma identifies each set uniquely.\n * It\"s a 12-digit binary each presenting one semitone of the octave.\n *\n * Note that this function accepts a chroma as parameter and return it\n * without modification.\n *\n * @param {Array|String} set - the pitch class set\n * @return {String} a binary representation of the pitch class set\n * @example\n * PcSet.chroma([\"C\", \"D\", \"E\"]) // => \"1010100000000\"\n */\nfunction chroma(set) {\n  if (isChroma(set)) { return set; }\n  if (!Array.isArray(set)) { return \"\"; }\n  var b = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  set.map(chr).forEach(function (i) {\n    b[i] = 1;\n  });\n  return b.join(\"\");\n}\n\nvar all = null;\n/**\n * Get a list of all possible chromas (all possible scales)\n * More information: http://allthescales.org/\n * @return {Array} an array of possible chromas from '10000000000' to '11111111111'\n *\n */\nfunction chromas(n) {\n  all = all || tonalArray.range(2048, 4095).map(function (n) { return n.toString(2); });\n  return typeof n === \"number\"\n    ? all.filter(function (chroma) { return clen(chroma) === n; })\n    : all.slice();\n}\n\n/**\n * Given a a list of notes or a pcset chroma, produce the rotations\n * of the chroma discarding the ones that starts with \"0\"\n *\n * This is used, for example, to get all the modes of a scale.\n *\n * @param {Array|String} set - the list of notes or pitchChr of the set\n * @param {Boolean} normalize - (Optional, true by default) remove all\n * the rotations that starts with \"0\"\n * @return {Array<String>} an array with all the modes of the chroma\n *\n * @example\n * PcSet.modes([\"C\", \"D\", \"E\"]).map(PcSet.intervals)\n */\nfunction modes(set, normalize) {\n  normalize = normalize !== false;\n  var binary = chroma(set).split(\"\");\n  return tonalArray.compact(\n    binary.map(function(_, i) {\n      var r = tonalArray.rotate(i, binary);\n      return normalize && r[0] === \"0\" ? null : r.join(\"\");\n    })\n  );\n}\n\nvar REGEX = /^[01]{12}$/;\n/**\n * Test if the given string is a pitch class set chroma.\n * @param {String} chroma - the pitch class set chroma\n * @return {Boolean} true if its a valid pcset chroma\n * @example\n * PcSet.isChroma(\"101010101010\") // => true\n * PcSet.isChroma(\"101001\") // => false\n */\nfunction isChroma(set) {\n  return REGEX.test(set);\n}\n\nvar IVLS = \"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\".split(\" \");\n/**\n * Given a pcset (notes or chroma) return it\"s intervals\n * @param {String|Array} pcset - the pitch class set (notes or chroma)\n * @return {Array} intervals or empty array if not valid pcset\n * @example\n * PcSet.intervals(\"1010100000000\") => [\"1P\", \"2M\", \"3M\"]\n */\nfunction intervals(set) {\n  if (!isChroma(set)) { return []; }\n  return tonalArray.compact(\n    set.split(\"\").map(function(d, i) {\n      return d === \"1\" ? IVLS[i] : null;\n    })\n  );\n}\n\n/**\n * Test if two pitch class sets are identical\n *\n * @param {Array|String} set1 - one of the pitch class sets\n * @param {Array|String} set2 - the other pitch class set\n * @return {Boolean} true if they are equal\n * @example\n * PcSet.isEqual([\"c2\", \"d3\"], [\"c5\", \"d2\"]) // => true\n */\nfunction isEqual(s1, s2) {\n  if (arguments.length === 1) { return function (s) { return isEqual(s1, s); }; }\n  return chroma(s1) === chroma(s2);\n}\n\n/**\n * Create a function that test if a collection of notes is a\n * subset of a given set\n *\n * The function can be partially applied\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a subset of set, false otherwise\n * @example\n * const inCMajor = PcSet.isSubsetOf([\"C\", \"E\", \"G\"])\n * inCMajor([\"e6\", \"c4\"]) // => true\n * inCMajor([\"e6\", \"c4\", \"d3\"]) // => false\n */\nfunction isSubsetOf(set, notes) {\n  if (arguments.length > 1) { return isSubsetOf(set)(notes); }\n  set = pcsetNum(set);\n  return function(notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes & set) === notes;\n  };\n}\n\n/**\n * Create a function that test if a collectio of notes is a\n * superset of a given set (it contains all notes and at least one more)\n *\n * @param {Array|String} set - an array of notes or a chroma set string to test against\n * @param {Array|String} notes - an array of notes or a chroma set\n * @return {boolean} true if notes is a superset of set, false otherwise\n * @example\n * const extendsCMajor = PcSet.isSupersetOf([\"C\", \"E\", \"G\"])\n * extendsCMajor([\"e6\", \"a\", \"c4\", \"g2\"]) // => true\n * extendsCMajor([\"c6\", \"e4\", \"g3\"]) // => false\n */\nfunction isSupersetOf(set, notes) {\n  if (arguments.length > 1) { return isSupersetOf(set)(notes); }\n  set = pcsetNum(set);\n  return function(notes) {\n    notes = pcsetNum(notes);\n    return notes !== set && (notes | set) === notes;\n  };\n}\n\n/**\n * Test if a given pitch class set includes a note\n * @param {Array|String} set - the base set to test against\n * @param {String|Pitch} note - the note to test\n * @return {Boolean} true if the note is included in the pcset\n * @example\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C4\") // => true\n * PcSet.includes([\"C\", \"D\", \"E\"], \"C#4\") // => false\n */\nfunction includes(set, note) {\n  if (arguments.length > 1) { return includes(set)(note); }\n  set = chroma(set);\n  return function(note) {\n    return set[chr(note)] === \"1\";\n  };\n}\n\n/**\n * Filter a list with a pitch class set\n *\n * @param {Array|String} set - the pitch class set notes\n * @param {Array|String} notes - the note list to be filtered\n * @return {Array} the filtered notes\n *\n * @example\n * PcSet.filter([\"C\", \"D\", \"E\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"d2\", \"c3\", \"d3\" ])\n * PcSet.filter([\"C2\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"c3\" ])\n */\nfunction filter(set, notes) {\n  if (arguments.length === 1) { return function (n) { return filter(set, n); }; }\n  return notes.filter(includes(set));\n}\n\nexports.chroma = chroma;\nexports.chromas = chromas;\nexports.modes = modes;\nexports.isChroma = isChroma;\nexports.intervals = intervals;\nexports.isEqual = isEqual;\nexports.isSubsetOf = isSubsetOf;\nexports.isSupersetOf = isSupersetOf;\nexports.includes = includes;\nexports.filter = filter;\n",
    "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar tonalPcset = require('tonal-pcset');\n\nvar chromatic = [\n\t\"1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M\"\n];\nvar lydian = [\n\t\"1P 2M 3M 4A 5P 6M 7M\"\n];\nvar major = [\n\t\"1P 2M 3M 4P 5P 6M 7M\",\n\t[\n\t\t\"ionian\"\n\t]\n];\nvar mixolydian = [\n\t\"1P 2M 3M 4P 5P 6M 7m\",\n\t[\n\t\t\"dominant\"\n\t]\n];\nvar dorian = [\n\t\"1P 2M 3m 4P 5P 6M 7m\"\n];\nvar aeolian = [\n\t\"1P 2M 3m 4P 5P 6m 7m\",\n\t[\n\t\t\"minor\"\n\t]\n];\nvar phrygian = [\n\t\"1P 2m 3m 4P 5P 6m 7m\"\n];\nvar locrian = [\n\t\"1P 2m 3m 4P 5d 6m 7m\"\n];\nvar altered = [\n\t\"1P 2m 3m 3M 5d 6m 7m\",\n\t[\n\t\t\"super locrian\",\n\t\t\"diminished whole tone\",\n\t\t\"pomeroy\"\n\t]\n];\nvar diminished = [\n\t\"1P 2M 3m 4P 5d 6m 6M 7M\",\n\t[\n\t\t\"whole-half diminished\"\n\t]\n];\nvar iwato = [\n\t\"1P 2m 4P 5d 7m\"\n];\nvar hirajoshi = [\n\t\"1P 2M 3m 5P 6m\"\n];\nvar kumoijoshi = [\n\t\"1P 2m 4P 5P 6m\"\n];\nvar pelog = [\n\t\"1P 2m 3m 5P 6m\"\n];\nvar prometheus = [\n\t\"1P 2M 3M 4A 6M 7m\"\n];\nvar ritusen = [\n\t\"1P 2M 4P 5P 6M\"\n];\nvar scriabin = [\n\t\"1P 2m 3M 5P 6M\"\n];\nvar piongio = [\n\t\"1P 2M 4P 5P 6M 7m\"\n];\nvar augmented = [\n\t\"1P 2A 3M 5P 5A 7M\"\n];\nvar neopolitan = [\n\t\"1P 2m 3m 4P 5P 6m 7M\"\n];\nvar egyptian = [\n\t\"1P 2M 4P 5P 7m\"\n];\nvar oriental = [\n\t\"1P 2m 3M 4P 5d 6M 7m\"\n];\nvar flamenco = [\n\t\"1P 2m 3m 3M 4A 5P 7m\"\n];\nvar balinese = [\n\t\"1P 2m 3m 4P 5P 6m 7M\"\n];\nvar persian = [\n\t\"1P 2m 3M 4P 5d 6m 7M\"\n];\nvar bebop = [\n\t\"1P 2M 3M 4P 5P 6M 7m 7M\"\n];\nvar enigmatic = [\n\t\"1P 2m 3M 5d 6m 7m 7M\"\n];\nvar ichikosucho = [\n\t\"1P 2M 3M 4P 5d 5P 6M 7M\"\n];\nvar sdata = {\n\tchromatic: chromatic,\n\tlydian: lydian,\n\tmajor: major,\n\tmixolydian: mixolydian,\n\tdorian: dorian,\n\taeolian: aeolian,\n\tphrygian: phrygian,\n\tlocrian: locrian,\n\t\"melodic minor\": [\n\t\"1P 2M 3m 4P 5P 6M 7M\"\n],\n\t\"melodic minor second mode\": [\n\t\"1P 2m 3m 4P 5P 6M 7m\"\n],\n\t\"lydian augmented\": [\n\t\"1P 2M 3M 4A 5A 6M 7M\"\n],\n\t\"lydian dominant\": [\n\t\"1P 2M 3M 4A 5P 6M 7m\",\n\t[\n\t\t\"lydian b7\"\n\t]\n],\n\t\"melodic minor fifth mode\": [\n\t\"1P 2M 3M 4P 5P 6m 7m\",\n\t[\n\t\t\"hindu\",\n\t\t\"mixolydian b6M\"\n\t]\n],\n\t\"locrian #2\": [\n\t\"1P 2M 3m 4P 5d 6m 7m\",\n\t[\n\t\t\"half-diminished\"\n\t]\n],\n\taltered: altered,\n\t\"harmonic minor\": [\n\t\"1P 2M 3m 4P 5P 6m 7M\"\n],\n\t\"phrygian dominant\": [\n\t\"1P 2m 3M 4P 5P 6m 7m\",\n\t[\n\t\t\"spanish\",\n\t\t\"phrygian major\"\n\t]\n],\n\t\"half-whole diminished\": [\n\t\"1P 2m 3m 3M 4A 5P 6M 7m\",\n\t[\n\t\t\"dominant diminished\"\n\t]\n],\n\tdiminished: diminished,\n\t\"major pentatonic\": [\n\t\"1P 2M 3M 5P 6M\",\n\t[\n\t\t\"pentatonic\"\n\t]\n],\n\t\"lydian pentatonic\": [\n\t\"1P 3M 4A 5P 7M\",\n\t[\n\t\t\"chinese\"\n\t]\n],\n\t\"mixolydian pentatonic\": [\n\t\"1P 3M 4P 5P 7m\",\n\t[\n\t\t\"indian\"\n\t]\n],\n\t\"locrian pentatonic\": [\n\t\"1P 3m 4P 5d 7m\",\n\t[\n\t\t\"minor seven flat five pentatonic\"\n\t]\n],\n\t\"minor pentatonic\": [\n\t\"1P 3m 4P 5P 7m\"\n],\n\t\"minor six pentatonic\": [\n\t\"1P 3m 4P 5P 6M\"\n],\n\t\"minor hexatonic\": [\n\t\"1P 2M 3m 4P 5P 7M\"\n],\n\t\"flat three pentatonic\": [\n\t\"1P 2M 3m 5P 6M\",\n\t[\n\t\t\"kumoi\"\n\t]\n],\n\t\"flat six pentatonic\": [\n\t\"1P 2M 3M 5P 6m\"\n],\n\t\"major flat two pentatonic\": [\n\t\"1P 2m 3M 5P 6M\"\n],\n\t\"whole tone pentatonic\": [\n\t\"1P 3M 5d 6m 7m\"\n],\n\t\"ionian pentatonic\": [\n\t\"1P 3M 4P 5P 7M\"\n],\n\t\"lydian #5P pentatonic\": [\n\t\"1P 3M 4A 5A 7M\"\n],\n\t\"lydian dominant pentatonic\": [\n\t\"1P 3M 4A 5P 7m\"\n],\n\t\"minor #7M pentatonic\": [\n\t\"1P 3m 4P 5P 7M\"\n],\n\t\"super locrian pentatonic\": [\n\t\"1P 3m 4d 5d 7m\"\n],\n\t\"in-sen\": [\n\t\"1P 2m 4P 5P 7m\"\n],\n\tiwato: iwato,\n\thirajoshi: hirajoshi,\n\tkumoijoshi: kumoijoshi,\n\tpelog: pelog,\n\t\"vietnamese 1\": [\n\t\"1P 3m 4P 5P 6m\"\n],\n\t\"vietnamese 2\": [\n\t\"1P 3m 4P 5P 7m\"\n],\n\tprometheus: prometheus,\n\t\"prometheus neopolitan\": [\n\t\"1P 2m 3M 4A 6M 7m\"\n],\n\tritusen: ritusen,\n\tscriabin: scriabin,\n\tpiongio: piongio,\n\t\"major blues\": [\n\t\"1P 2M 3m 3M 5P 6M\"\n],\n\t\"minor blues\": [\n\t\"1P 3m 4P 5d 5P 7m\",\n\t[\n\t\t\"blues\"\n\t]\n],\n\t\"composite blues\": [\n\t\"1P 2M 3m 3M 4P 5d 5P 6M 7m\"\n],\n\taugmented: augmented,\n\t\"augmented heptatonic\": [\n\t\"1P 2A 3M 4P 5P 5A 7M\"\n],\n\t\"dorian #4\": [\n\t\"1P 2M 3m 4A 5P 6M 7m\"\n],\n\t\"lydian diminished\": [\n\t\"1P 2M 3m 4A 5P 6M 7M\"\n],\n\t\"whole tone\": [\n\t\"1P 2M 3M 4A 5A 7m\"\n],\n\t\"leading whole tone\": [\n\t\"1P 2M 3M 4A 5A 7m 7M\"\n],\n\t\"lydian minor\": [\n\t\"1P 2M 3M 4A 5P 6m 7m\"\n],\n\t\"locrian major\": [\n\t\"1P 2M 3M 4P 5d 6m 7m\",\n\t[\n\t\t\"arabian\"\n\t]\n],\n\tneopolitan: neopolitan,\n\t\"neopolitan minor\": [\n\t\"1P 2m 3m 4P 5P 6m 7M\"\n],\n\t\"neopolitan major\": [\n\t\"1P 2m 3m 4P 5P 6M 7M\",\n\t[\n\t\t\"dorian b2\"\n\t]\n],\n\t\"neopolitan major pentatonic\": [\n\t\"1P 3M 4P 5d 7m\"\n],\n\t\"romanian minor\": [\n\t\"1P 2M 3m 5d 5P 6M 7m\"\n],\n\t\"double harmonic lydian\": [\n\t\"1P 2m 3M 4A 5P 6m 7M\"\n],\n\t\"harmonic major\": [\n\t\"1P 2M 3M 4P 5P 6m 7M\"\n],\n\t\"double harmonic major\": [\n\t\"1P 2m 3M 4P 5P 6m 7M\",\n\t[\n\t\t\"gypsy\"\n\t]\n],\n\tegyptian: egyptian,\n\t\"hungarian minor\": [\n\t\"1P 2M 3m 4A 5P 6m 7M\"\n],\n\t\"hungarian major\": [\n\t\"1P 2A 3M 4A 5P 6M 7m\"\n],\n\toriental: oriental,\n\t\"spanish heptatonic\": [\n\t\"1P 2m 3m 3M 4P 5P 6m 7m\"\n],\n\tflamenco: flamenco,\n\tbalinese: balinese,\n\t\"todi raga\": [\n\t\"1P 2m 3m 4A 5P 6m 7M\"\n],\n\t\"malkos raga\": [\n\t\"1P 3m 4P 6m 7m\"\n],\n\t\"kafi raga\": [\n\t\"1P 3m 3M 4P 5P 6M 7m 7M\"\n],\n\t\"purvi raga\": [\n\t\"1P 2m 3M 4P 4A 5P 6m 7M\"\n],\n\tpersian: persian,\n\tbebop: bebop,\n\t\"bebop dominant\": [\n\t\"1P 2M 3M 4P 5P 6M 7m 7M\"\n],\n\t\"bebop minor\": [\n\t\"1P 2M 3m 3M 4P 5P 6M 7m\"\n],\n\t\"bebop major\": [\n\t\"1P 2M 3M 4P 5P 5A 6M 7M\"\n],\n\t\"bebop locrian\": [\n\t\"1P 2m 3m 4P 5d 5P 6m 7m\"\n],\n\t\"minor bebop\": [\n\t\"1P 2M 3m 4P 5P 6m 7m 7M\"\n],\n\t\"mystery #1\": [\n\t\"1P 2m 3M 5d 6m 7m\"\n],\n\tenigmatic: enigmatic,\n\t\"minor six diminished\": [\n\t\"1P 2M 3m 4P 5P 6m 6M 7M\"\n],\n\t\"ionian augmented\": [\n\t\"1P 2M 3M 4P 5A 6M 7M\"\n],\n\t\"lydian #9\": [\n\t\"1P 2m 3M 4A 5P 6M 7M\"\n],\n\tichikosucho: ichikosucho,\n\t\"six tone symmetric\": [\n\t\"1P 2m 3M 4P 5A 6M\"\n]\n};\n\nvar M = [\n\t\"1P 3M 5P\",\n\t[\n\t\t\"Major\",\n\t\t\"\"\n\t]\n];\nvar M13 = [\n\t\"1P 3M 5P 7M 9M 13M\",\n\t[\n\t\t\"maj13\",\n\t\t\"Maj13\"\n\t]\n];\nvar M6 = [\n\t\"1P 3M 5P 13M\",\n\t[\n\t\t\"6\"\n\t]\n];\nvar M69 = [\n\t\"1P 3M 5P 6M 9M\",\n\t[\n\t\t\"69\"\n\t]\n];\nvar M7add13 = [\n\t\"1P 3M 5P 6M 7M 9M\"\n];\nvar M7b5 = [\n\t\"1P 3M 5d 7M\"\n];\nvar M7b6 = [\n\t\"1P 3M 6m 7M\"\n];\nvar M7b9 = [\n\t\"1P 3M 5P 7M 9m\"\n];\nvar M7sus4 = [\n\t\"1P 4P 5P 7M\"\n];\nvar M9 = [\n\t\"1P 3M 5P 7M 9M\",\n\t[\n\t\t\"maj9\",\n\t\t\"Maj9\"\n\t]\n];\nvar M9b5 = [\n\t\"1P 3M 5d 7M 9M\"\n];\nvar M9sus4 = [\n\t\"1P 4P 5P 7M 9M\"\n];\nvar Madd9 = [\n\t\"1P 3M 5P 9M\",\n\t[\n\t\t\"2\",\n\t\t\"add9\",\n\t\t\"add2\"\n\t]\n];\nvar Maj7 = [\n\t\"1P 3M 5P 7M\",\n\t[\n\t\t\"maj7\",\n\t\t\"M7\"\n\t]\n];\nvar Mb5 = [\n\t\"1P 3M 5d\"\n];\nvar Mb6 = [\n\t\"1P 3M 13m\"\n];\nvar Msus2 = [\n\t\"1P 2M 5P\",\n\t[\n\t\t\"add9no3\",\n\t\t\"sus2\"\n\t]\n];\nvar Msus4 = [\n\t\"1P 4P 5P\",\n\t[\n\t\t\"sus\",\n\t\t\"sus4\"\n\t]\n];\nvar Maddb9 = [\n\t\"1P 3M 5P 9m\"\n];\nvar m = [\n\t\"1P 3m 5P\"\n];\nvar m11 = [\n\t\"1P 3m 5P 7m 9M 11P\",\n\t[\n\t\t\"_11\"\n\t]\n];\nvar m11b5 = [\n\t\"1P 3m 7m 12d 2M 4P\",\n\t[\n\t\t\"h11\",\n\t\t\"_11b5\"\n\t]\n];\nvar m13 = [\n\t\"1P 3m 5P 7m 9M 11P 13M\",\n\t[\n\t\t\"_13\"\n\t]\n];\nvar m6 = [\n\t\"1P 3m 4P 5P 13M\",\n\t[\n\t\t\"_6\"\n\t]\n];\nvar m69 = [\n\t\"1P 3m 5P 6M 9M\",\n\t[\n\t\t\"_69\"\n\t]\n];\nvar m7 = [\n\t\"1P 3m 5P 7m\",\n\t[\n\t\t\"minor7\",\n\t\t\"_\",\n\t\t\"_7\"\n\t]\n];\nvar m7add11 = [\n\t\"1P 3m 5P 7m 11P\",\n\t[\n\t\t\"m7add4\"\n\t]\n];\nvar m7b5 = [\n\t\"1P 3m 5d 7m\",\n\t[\n\t\t\"half-diminished\",\n\t\t\"h7\",\n\t\t\"_7b5\"\n\t]\n];\nvar m9 = [\n\t\"1P 3m 5P 7m 9M\",\n\t[\n\t\t\"_9\"\n\t]\n];\nvar m9b5 = [\n\t\"1P 3m 7m 12d 2M\",\n\t[\n\t\t\"h9\",\n\t\t\"-9b5\"\n\t]\n];\nvar mMaj7 = [\n\t\"1P 3m 5P 7M\",\n\t[\n\t\t\"mM7\",\n\t\t\"_M7\"\n\t]\n];\nvar mMaj7b6 = [\n\t\"1P 3m 5P 6m 7M\",\n\t[\n\t\t\"mM7b6\"\n\t]\n];\nvar mM9 = [\n\t\"1P 3m 5P 7M 9M\",\n\t[\n\t\t\"mMaj9\",\n\t\t\"-M9\"\n\t]\n];\nvar mM9b6 = [\n\t\"1P 3m 5P 6m 7M 9M\",\n\t[\n\t\t\"mMaj9b6\"\n\t]\n];\nvar mb6M7 = [\n\t\"1P 3m 6m 7M\"\n];\nvar mb6b9 = [\n\t\"1P 3m 6m 9m\"\n];\nvar o = [\n\t\"1P 3m 5d\",\n\t[\n\t\t\"mb5\",\n\t\t\"dim\"\n\t]\n];\nvar o7 = [\n\t\"1P 3m 5d 13M\",\n\t[\n\t\t\"diminished\",\n\t\t\"m6b5\",\n\t\t\"dim7\"\n\t]\n];\nvar o7M7 = [\n\t\"1P 3m 5d 6M 7M\"\n];\nvar oM7 = [\n\t\"1P 3m 5d 7M\"\n];\nvar sus24 = [\n\t\"1P 2M 4P 5P\",\n\t[\n\t\t\"sus4add9\"\n\t]\n];\nvar madd4 = [\n\t\"1P 3m 4P 5P\"\n];\nvar madd9 = [\n\t\"1P 3m 5P 9M\"\n];\nvar cdata = {\n\t\"4\": [\n\t\"1P 4P 7m 10m\",\n\t[\n\t\t\"quartal\"\n\t]\n],\n\t\"5\": [\n\t\"1P 5P\"\n],\n\t\"7\": [\n\t\"1P 3M 5P 7m\",\n\t[\n\t\t\"Dominant\",\n\t\t\"Dom\"\n\t]\n],\n\t\"9\": [\n\t\"1P 3M 5P 7m 9M\",\n\t[\n\t\t\"79\"\n\t]\n],\n\t\"11\": [\n\t\"1P 5P 7m 9M 11P\"\n],\n\t\"13\": [\n\t\"1P 3M 5P 7m 9M 13M\",\n\t[\n\t\t\"13_\"\n\t]\n],\n\t\"64\": [\n\t\"5P 8P 10M\"\n],\n\tM: M,\n\t\"M#5\": [\n\t\"1P 3M 5A\",\n\t[\n\t\t\"augmented\",\n\t\t\"maj#5\",\n\t\t\"Maj#5\",\n\t\t\"+\",\n\t\t\"aug\"\n\t]\n],\n\t\"M#5add9\": [\n\t\"1P 3M 5A 9M\",\n\t[\n\t\t\"+add9\"\n\t]\n],\n\tM13: M13,\n\t\"M13#11\": [\n\t\"1P 3M 5P 7M 9M 11A 13M\",\n\t[\n\t\t\"maj13#11\",\n\t\t\"Maj13#11\",\n\t\t\"M13+4\",\n\t\t\"M13#4\"\n\t]\n],\n\tM6: M6,\n\t\"M6#11\": [\n\t\"1P 3M 5P 6M 11A\",\n\t[\n\t\t\"M6b5\",\n\t\t\"6#11\",\n\t\t\"6b5\"\n\t]\n],\n\tM69: M69,\n\t\"M69#11\": [\n\t\"1P 3M 5P 6M 9M 11A\"\n],\n\t\"M7#11\": [\n\t\"1P 3M 5P 7M 11A\",\n\t[\n\t\t\"maj7#11\",\n\t\t\"Maj7#11\",\n\t\t\"M7+4\",\n\t\t\"M7#4\"\n\t]\n],\n\t\"M7#5\": [\n\t\"1P 3M 5A 7M\",\n\t[\n\t\t\"maj7#5\",\n\t\t\"Maj7#5\",\n\t\t\"maj9#5\",\n\t\t\"M7+\"\n\t]\n],\n\t\"M7#5sus4\": [\n\t\"1P 4P 5A 7M\"\n],\n\t\"M7#9#11\": [\n\t\"1P 3M 5P 7M 9A 11A\"\n],\n\tM7add13: M7add13,\n\tM7b5: M7b5,\n\tM7b6: M7b6,\n\tM7b9: M7b9,\n\tM7sus4: M7sus4,\n\tM9: M9,\n\t\"M9#11\": [\n\t\"1P 3M 5P 7M 9M 11A\",\n\t[\n\t\t\"maj9#11\",\n\t\t\"Maj9#11\",\n\t\t\"M9+4\",\n\t\t\"M9#4\"\n\t]\n],\n\t\"M9#5\": [\n\t\"1P 3M 5A 7M 9M\",\n\t[\n\t\t\"Maj9#5\"\n\t]\n],\n\t\"M9#5sus4\": [\n\t\"1P 4P 5A 7M 9M\"\n],\n\tM9b5: M9b5,\n\tM9sus4: M9sus4,\n\tMadd9: Madd9,\n\tMaj7: Maj7,\n\tMb5: Mb5,\n\tMb6: Mb6,\n\tMsus2: Msus2,\n\tMsus4: Msus4,\n\tMaddb9: Maddb9,\n\t\"11b9\": [\n\t\"1P 5P 7m 9m 11P\"\n],\n\t\"13#11\": [\n\t\"1P 3M 5P 7m 9M 11A 13M\",\n\t[\n\t\t\"13+4\",\n\t\t\"13#4\"\n\t]\n],\n\t\"13#9\": [\n\t\"1P 3M 5P 7m 9A 13M\",\n\t[\n\t\t\"13#9_\"\n\t]\n],\n\t\"13#9#11\": [\n\t\"1P 3M 5P 7m 9A 11A 13M\"\n],\n\t\"13b5\": [\n\t\"1P 3M 5d 6M 7m 9M\"\n],\n\t\"13b9\": [\n\t\"1P 3M 5P 7m 9m 13M\"\n],\n\t\"13b9#11\": [\n\t\"1P 3M 5P 7m 9m 11A 13M\"\n],\n\t\"13no5\": [\n\t\"1P 3M 7m 9M 13M\"\n],\n\t\"13sus4\": [\n\t\"1P 4P 5P 7m 9M 13M\",\n\t[\n\t\t\"13sus\"\n\t]\n],\n\t\"69#11\": [\n\t\"1P 3M 5P 6M 9M 11A\"\n],\n\t\"7#11\": [\n\t\"1P 3M 5P 7m 11A\",\n\t[\n\t\t\"7+4\",\n\t\t\"7#4\",\n\t\t\"7#11_\",\n\t\t\"7#4_\"\n\t]\n],\n\t\"7#11b13\": [\n\t\"1P 3M 5P 7m 11A 13m\",\n\t[\n\t\t\"7b5b13\"\n\t]\n],\n\t\"7#5\": [\n\t\"1P 3M 5A 7m\",\n\t[\n\t\t\"+7\",\n\t\t\"7aug\",\n\t\t\"aug7\"\n\t]\n],\n\t\"7#5#9\": [\n\t\"1P 3M 5A 7m 9A\",\n\t[\n\t\t\"7alt\",\n\t\t\"7#5#9_\",\n\t\t\"7#9b13_\"\n\t]\n],\n\t\"7#5b9\": [\n\t\"1P 3M 5A 7m 9m\"\n],\n\t\"7#5b9#11\": [\n\t\"1P 3M 5A 7m 9m 11A\"\n],\n\t\"7#5sus4\": [\n\t\"1P 4P 5A 7m\"\n],\n\t\"7#9\": [\n\t\"1P 3M 5P 7m 9A\",\n\t[\n\t\t\"7#9_\"\n\t]\n],\n\t\"7#9#11\": [\n\t\"1P 3M 5P 7m 9A 11A\",\n\t[\n\t\t\"7b5#9\"\n\t]\n],\n\t\"7#9#11b13\": [\n\t\"1P 3M 5P 7m 9A 11A 13m\"\n],\n\t\"7#9b13\": [\n\t\"1P 3M 5P 7m 9A 13m\"\n],\n\t\"7add6\": [\n\t\"1P 3M 5P 7m 13M\",\n\t[\n\t\t\"67\",\n\t\t\"7add13\"\n\t]\n],\n\t\"7b13\": [\n\t\"1P 3M 7m 13m\"\n],\n\t\"7b5\": [\n\t\"1P 3M 5d 7m\"\n],\n\t\"7b6\": [\n\t\"1P 3M 5P 6m 7m\"\n],\n\t\"7b9\": [\n\t\"1P 3M 5P 7m 9m\"\n],\n\t\"7b9#11\": [\n\t\"1P 3M 5P 7m 9m 11A\",\n\t[\n\t\t\"7b5b9\"\n\t]\n],\n\t\"7b9#9\": [\n\t\"1P 3M 5P 7m 9m 9A\"\n],\n\t\"7b9b13\": [\n\t\"1P 3M 5P 7m 9m 13m\"\n],\n\t\"7b9b13#11\": [\n\t\"1P 3M 5P 7m 9m 11A 13m\",\n\t[\n\t\t\"7b9#11b13\",\n\t\t\"7b5b9b13\"\n\t]\n],\n\t\"7no5\": [\n\t\"1P 3M 7m\"\n],\n\t\"7sus4\": [\n\t\"1P 4P 5P 7m\",\n\t[\n\t\t\"7sus\"\n\t]\n],\n\t\"7sus4b9\": [\n\t\"1P 4P 5P 7m 9m\",\n\t[\n\t\t\"susb9\",\n\t\t\"7susb9\",\n\t\t\"7b9sus\",\n\t\t\"7b9sus4\",\n\t\t\"phryg\"\n\t]\n],\n\t\"7sus4b9b13\": [\n\t\"1P 4P 5P 7m 9m 13m\",\n\t[\n\t\t\"7b9b13sus4\"\n\t]\n],\n\t\"9#11\": [\n\t\"1P 3M 5P 7m 9M 11A\",\n\t[\n\t\t\"9+4\",\n\t\t\"9#4\",\n\t\t\"9#11_\",\n\t\t\"9#4_\"\n\t]\n],\n\t\"9#11b13\": [\n\t\"1P 3M 5P 7m 9M 11A 13m\",\n\t[\n\t\t\"9b5b13\"\n\t]\n],\n\t\"9#5\": [\n\t\"1P 3M 5A 7m 9M\",\n\t[\n\t\t\"9+\"\n\t]\n],\n\t\"9#5#11\": [\n\t\"1P 3M 5A 7m 9M 11A\"\n],\n\t\"9b13\": [\n\t\"1P 3M 7m 9M 13m\"\n],\n\t\"9b5\": [\n\t\"1P 3M 5d 7m 9M\"\n],\n\t\"9no5\": [\n\t\"1P 3M 7m 9M\"\n],\n\t\"9sus4\": [\n\t\"1P 4P 5P 7m 9M\",\n\t[\n\t\t\"9sus\"\n\t]\n],\n\tm: m,\n\t\"m#5\": [\n\t\"1P 3m 5A\",\n\t[\n\t\t\"m+\",\n\t\t\"mb6\"\n\t]\n],\n\tm11: m11,\n\t\"m11A 5\": [\n\t\"1P 3m 6m 7m 9M 11P\"\n],\n\tm11b5: m11b5,\n\tm13: m13,\n\tm6: m6,\n\tm69: m69,\n\tm7: m7,\n\t\"m7#5\": [\n\t\"1P 3m 6m 7m\"\n],\n\tm7add11: m7add11,\n\tm7b5: m7b5,\n\tm9: m9,\n\t\"m9#5\": [\n\t\"1P 3m 6m 7m 9M\"\n],\n\tm9b5: m9b5,\n\tmMaj7: mMaj7,\n\tmMaj7b6: mMaj7b6,\n\tmM9: mM9,\n\tmM9b6: mM9b6,\n\tmb6M7: mb6M7,\n\tmb6b9: mb6b9,\n\to: o,\n\to7: o7,\n\to7M7: o7M7,\n\toM7: oM7,\n\tsus24: sus24,\n\t\"+add#9\": [\n\t\"1P 3M 5A 9A\"\n],\n\tmadd4: madd4,\n\tmadd9: madd9\n};\n\n/**\n * [![npm version](https://img.shields.io/npm/v/tonal-dictionary.svg)](https://www.npmjs.com/package/tonal-dictionary)\n *\n * `tonal-dictionary` contains a dictionary of musical scales and chords\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * @example\n * // es6\n * import * as Dictionary from \"tonal-dictionary\"\n * // es5\n * const Dictionary = require(\"tonal-dictionary\")\n *\n * @example\n * Dictionary.chord(\"Maj7\") // => [\"1P\", \"3M\", \"5P\", \"7M\"]\n *\n * @module Dictionary\n */\n\nvar dictionary = function (raw) {\n  var keys = Object.keys(raw).sort();\n  var data = [];\n  var index = [];\n\n  var add = function (name, ivls, chroma) {\n    data[name] = ivls;\n    index[chroma] = index[chroma] || [];\n    index[chroma].push(name);\n  };\n\n  keys.forEach(function (key) {\n    var ivls = raw[key][0].split(\" \");\n    var alias = raw[key][1];\n    var chr = tonalPcset.chroma(ivls);\n\n    add(key, ivls, chr);\n    if (alias) { alias.forEach(function (a) { return add(a, ivls, chr); }); }\n  });\n  var allKeys = Object.keys(data).sort();\n\n  var dict = function (name) { return data[name]; };\n  dict.names = function (p) {\n    if (typeof p === \"string\") { return (index[p] || []).slice(); }\n    else { return (p === true ? allKeys : keys).slice(); }\n  };\n  return dict;\n};\n\nvar combine = function (a, b) {\n  var dict = function (name) { return a(name) || b(name); };\n  dict.names = function (p) { return a.names(p).concat(b.names(p)); };\n  return dict;\n};\n\n/**\n * A dictionary of scales: a function that given a scale name (without tonic)\n * returns an array of intervals\n *\n * @function\n * @param {String} name\n * @return {Array} intervals\n * @example\n * import { scale } from \"tonal-dictionary\"\n * scale(\"major\") // => [\"1P\", \"2M\", ...]\n * scale.names(); // => [\"major\", ...]\n */\nvar scale = dictionary(sdata);\n\n/**\n * A dictionary of chords: a function that given a chord type\n * returns an array of intervals\n *\n * @function\n * @param {String} type\n * @return {Array} intervals\n * @example\n * import { chord } from \"tonal-dictionary\"\n * chord(\"Maj7\") // => [\"1P\", \"3M\", ...]\n * chord.names(); // => [\"Maj3\", ...]\n */\nvar chord = dictionary(cdata);\nvar pcset = combine(scale, chord);\n\nexports.dictionary = dictionary;\nexports.combine = combine;\nexports.scale = scale;\nexports.chord = chord;\nexports.pcset = pcset;\n",
    "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar tonalNote = require('tonal-note');\nvar tonalInterval = require('tonal-interval');\n\n/**\n * [![npm version](https://img.shields.io/npm/v/tonal-distance.svg)](https://www.npmjs.com/package/tonal-distance)\n * [![tonal](https://img.shields.io/badge/tonal-distance-yellow.svg)](https://github.com/danigb/tonal/tree/master/packages/tonal/distance)\n *\n * Transpose notes by intervals and find distances between notes\n *\n * @example\n * // es6\n * import * as Distance from \"tonal-distance\"\n * Distance.interval(\"C3\", \"C4\") // => \"1P\"\n *\n * @example\n * // es6 import selected functions\n * import { interval, semitones, transpose } from \"tonal-distance\"\n *\n * semitones(\"C\" ,\"D\") // => 2\n * interval(\"C4\", \"G4\") // => \"5P\"\n * transpose(\"C4\", \"P5\") // => \"G4\"\n *\n * @example\n * // included in tonal facade\n * const Tonal = require(\"tonal\");\n * Tonal.Distance.transpose(\"C4\", \"P5\")\n * Tonal.Distance.transposeBy(\"P5\", \"C4\")\n *\n * @module Distance\n */\n\n// Map from letter step to number of fifths starting from \"C\":\n// { C: 0, D: 2, E: 4, F: -1, G: 1, A: 3, B: 5 }\nvar FIFTHS = [0, 2, 4, -1, 1, 3, 5];\n\n// Given a number of fifths, return the octaves they span\nvar fOcts = function (f) { return Math.floor((f * 7) / 12); };\n\n// Get the number of octaves it span each step\nvar FIFTH_OCTS = FIFTHS.map(fOcts);\n\nvar encode = function (ref) {\n  var step = ref.step;\n  var alt = ref.alt;\n  var oct = ref.oct;\n  var dir = ref.dir; if ( dir === void 0 ) dir = 1;\n\n  var f = FIFTHS[step] + 7 * alt;\n  if (oct === null) { return [dir * f]; }\n  var o = oct - FIFTH_OCTS[step] - 4 * alt;\n  return [dir * f, dir * o];\n};\n\n// We need to get the steps from fifths\n// Fifths for CDEFGAB are [ 0, 2, 4, -1, 1, 3, 5 ]\n// We add 1 to fifths to avoid negative numbers, so:\n// for [\"F\", \"C\", \"G\", \"D\", \"A\", \"E\", \"B\"] we have:\nvar STEPS = [3, 0, 4, 1, 5, 2, 6];\n\n// Return the number of fifths as if it were unaltered\nfunction unaltered(f) {\n  var i = (f + 1) % 7;\n  return i < 0 ? 7 + i : i;\n}\n\nvar decode = function (f, o, dir) {\n  var step = STEPS[unaltered(f)];\n  var alt = Math.floor((f + 1) / 7);\n  if (o === undefined) { return { step: step, alt: alt, dir: dir }; }\n  var oct = o + 4 * alt + FIFTH_OCTS[step];\n  return { step: step, alt: alt, oct: oct, dir: dir };\n};\n\nvar memo = function (fn, cache) {\n  if ( cache === void 0 ) cache = {};\n\n  return function (str) { return cache[str] || (cache[str] = fn(str)); };\n};\n\nvar encoder = function (props) { return memo(function (str) {\n    var p = props(str);\n    return p.name === null ? null : encode(p);\n  }); };\n\nvar encodeNote = encoder(tonalNote.props);\nvar encodeIvl = encoder(tonalInterval.props);\n\n/**\n * Transpose a note by an interval. The note can be a pitch class.\n *\n * This function can be partially applied.\n *\n * @param {String} note\n * @param {String} interval\n * @return {String} the transposed note\n * @example\n * import { tranpose } from \"tonal-distance\"\n * transpose(\"d3\", \"3M\") // => \"F#3\"\n * // it works with pitch classes\n * transpose(\"D\", \"3M\") // => \"F#\"\n * // can be partially applied\n * [\"C\", \"D\", \"E\", \"F\", \"G\"].map(transpose(\"M3)) // => [\"E\", \"F#\", \"G#\", \"A\", \"B\"]\n */\nfunction transpose(note, interval) {\n  if (arguments.length === 1) { return function (i) { return transpose(note, i); }; }\n  var n = encodeNote(note);\n  var i = encodeIvl(interval);\n  if (n === null || i === null) { return null; }\n  var tr = n.length === 1 ? [n[0] + i[0]] : [n[0] + i[0], n[1] + i[1]];\n  return tonalNote.build(decode(tr[0], tr[1]));\n}\n\n/**\n * Transpose a pitch class by a number of perfect fifths.\n *\n * It can be partially applied.\n *\n * @function\n * @param {String} pitchClass - the pitch class\n * @param {Integer} fifhts - the number of fifths\n * @return {String} the transposed pitch class\n *\n * @example\n * import { trFifths } from \"tonal-transpose\"\n * [0, 1, 2, 3, 4].map(trFifths(\"C\")) // => [\"C\", \"G\", \"D\", \"A\", \"E\"]\n * // or using tonal\n * Distance.trFifths(\"G4\", 1) // => \"D\"\n */\n\nfunction trFifths(note, fifths) {\n  if (arguments.length === 1) { return function (f) { return trFifths(note, f); }; }\n  var n = encodeNote(note);\n  if (n === null) { return null; }\n  return tonalNote.build(decode(n[0] + fifths));\n}\n\n/**\n * Get the distance in fifths between pitch classes\n *\n * Can be partially applied.\n *\n * @param {String} to - note or pitch class\n * @param {String} from - note or pitch class\n */\nfunction fifths(from, to) {\n  if (arguments.length === 1) { return function (to) { return fifths(from, to); }; }\n  var f = encodeNote(from);\n  var t = encodeNote(to);\n  if (t === null || f === null) { return null; }\n  return t[0] - f[0];\n}\n\n/**\n * The same as transpose with the arguments inverted.\n *\n * Can be partially applied.\n *\n * @param {String} note\n * @param {String} interval\n * @return {String} the transposed note\n * @example\n * import { tranposeBy } from \"tonal-distance\"\n * transposeBy(\"3m\", \"5P\") // => \"7m\"\n */\nfunction transposeBy(interval, note) {\n  if (arguments.length === 1) { return function (n) { return transpose(n, interval); }; }\n  return transpose(note, interval);\n}\n\nvar isDescending = function (e) { return e[0] * 7 + e[1] * 12 < 0; };\nvar decodeIvl = function (i) { return isDescending(i) ? decode(-i[0], -i[1], -1) : decode(i[0], i[1], 1); };\n\nfunction addIntervals(ivl1, ivl2, dir) {\n  var i1 = encodeIvl(ivl1);\n  var i2 = encodeIvl(ivl2);\n  if (i1 === null || i2 === null) { return null; }\n  var i = [i1[0] + dir * i2[0], i1[1] + dir * i2[1]];\n  return tonalInterval.build(decodeIvl(i));\n}\n\n/**\n * Add two intervals\n *\n * Can be partially applied.\n *\n * @param {String} interval1\n * @param {String} interval2\n * @return {String} the resulting interval\n * @example\n * import { add } from \"tonal-distance\"\n * add(\"3m\", \"5P\") // => \"7m\"\n */\nfunction add(ivl1, ivl2) {\n  if (arguments.length === 1) { return function (i2) { return add(ivl1, i2); }; }\n  return addIntervals(ivl1, ivl2, 1);\n}\n\n/**\n * Subtract two intervals\n *\n * Can be partially applied\n *\n * @param {String} minuend\n * @param {String} subtrahend\n * @return {String} interval diference\n */\nfunction subtract(ivl1, ivl2) {\n  if (arguments.length === 1) { return function (i2) { return add(ivl1, i2); }; }\n  return addIntervals(ivl1, ivl2, -1);\n}\n\n/**\n * Find the interval between two pitches. It works with pitch classes\n * (both must be pitch classes and the interval is always ascending)\n *\n * Can be partially applied\n *\n * @param {String} from - distance from\n * @param {String} to - distance to\n * @return {String} the interval distance\n *\n * @example\n * import { interval } from \"tonal-distance\"\n * interval(\"C2\", \"C3\") // => \"P8\"\n * interval(\"G\", \"B\") // => \"M3\"\n *\n * @example\n * import * as Distance from \"tonal-distance\"\n * Distance.interval(\"M2\", \"P5\") // => \"P4\"\n */\nfunction interval(from, to) {\n  if (arguments.length === 1) { return function (t) { return interval(from, t); }; }\n  var f = encodeNote(from);\n  var t = encodeNote(to);\n  if (f === null || t === null || f.length !== t.length) { return null; }\n  var d =\n    f.length === 1\n      ? [t[0] - f[0], -Math.floor(((t[0] - f[0]) * 7) / 12)]\n      : [t[0] - f[0], t[1] - f[1]];\n  return tonalInterval.build(decodeIvl(d));\n}\n\n/**\n * Get the distance between two notes in semitones\n *\n * @param {String|Pitch} from - first note\n * @param {String|Pitch} to - last note\n * @return {Integer} the distance in semitones or null if not valid notes\n * @example\n * import { semitones } from \"tonal-distance\"\n * semitones(\"C3\", \"A2\") // => -3\n * // or use tonal\n * Tonal.Distance.semitones(\"C3\", \"G3\") // => 7\n */\nfunction semitones(from, to) {\n  if (arguments.length === 1) { return function (t) { return semitones(from, t); }; }\n  var f = tonalNote.props(from);\n  var t = tonalNote.props(to);\n  return f.midi !== null && t.midi !== null\n    ? t.midi - f.midi\n    : f.chroma !== null && t.chroma !== null\n      ? (t.chroma - f.chroma + 12) % 12\n      : null;\n}\n\nexports.transpose = transpose;\nexports.trFifths = trFifths;\nexports.fifths = fifths;\nexports.transposeBy = transposeBy;\nexports.addIntervals = addIntervals;\nexports.add = add;\nexports.subtract = subtract;\nexports.interval = interval;\nexports.semitones = semitones;\n",
    "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar tonalNote = require('tonal-note');\nvar tonalDistance = require('tonal-distance');\nvar tonalDictionary = require('tonal-dictionary');\nvar tonalPcset = require('tonal-pcset');\n\n/**\n * [![npm version](https://img.shields.io/npm/v/tonal-chord.svg)](https://www.npmjs.com/package/tonal-chord)\n * [![tonal](https://img.shields.io/badge/tonal-chord-yellow.svg)](https://www.npmjs.com/browse/keyword/tonal)\n *\n * `tonal-chord` is a collection of functions to manipulate musical chords\n *\n * This is part of [tonal](https://www.npmjs.com/package/tonal) music theory library.\n *\n * @example\n * // es6\n * import * as Chord from \"tonal-chord\"\n * // es5\n * const Chord = require(\"tonal-chord\")\n *\n * @example\n * Chord.notes(\"CMaj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n *\n * @module Chord\n */\n\n/**\n * Return the available chord names\n *\n * @function\n * @param {boolean} aliases - true to include aliases\n * @return {Array} the chord names\n *\n * @example\n * Chord.names() // => [\"maj7\", ...]\n */\nvar names = tonalDictionary.chord.names;\n\nvar NO_CHORD = Object.freeze({\n  name: null,\n  names: [],\n  intervals: [],\n  chroma: null,\n  setnum: null\n});\n\nvar properties = function (name) {\n  var intervals = tonalDictionary.chord(name);\n  if (!intervals) { return NO_CHORD; }\n  var s = { intervals: intervals, name: name };\n  s.chroma = tonalPcset.chroma(intervals);\n  s.setnum = parseInt(s.chroma, 2);\n  s.names = tonalDictionary.chord.names(s.chroma);\n  return s;\n};\n\nvar memo = function (fn, cache) {\n  if ( cache === void 0 ) cache = {};\n\n  return function (str) { return cache[str] || (cache[str] = fn(str)); };\n};\n\n/**\n * Get chord properties. It returns an object with:\n *\n * - name: the chord name\n * - names: a list with all possible names (includes the current)\n * - intervals: an array with the chord intervals\n * - chroma:  chord croma (see pcset)\n * - setnum: chord chroma number\n *\n * @function\n * @param {String} name - the chord name (without tonic)\n * @return {Object} an object with the properties or a object with all properties\n * set to null if not valid chord name\n */\nvar props = memo(properties);\n\n/**\n * Get chord intervals. It always returns an array\n *\n * @function\n * @param {String} name - the chord name (optionally a tonic and type)\n * @return {Array<String>} a list of intervals or null if the type is not known\n */\nvar intervals = function (name) { return props(tokenize(name)[1]).intervals; };\n\n/**\n * Get the chord notes of a chord. This function accepts either a chord name\n * (for example: \"Cmaj7\") or a list of notes.\n *\n * It always returns an array, even if the chord is not found.\n *\n * @function\n * @param {String} nameOrTonic - name of the chord or the tonic (if the second parameter is present)\n * @param {String} [name] - (Optional) name if the first parameter is the tonic\n * @return {Array} an array of notes or an empty array\n *\n * @example\n * Chord.notes(\"Cmaj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n * Chord.notes(\"C\", \"maj7\") // => [\"C\", \"E\", \"G\", \"B\"]\n */\nfunction notes(nameOrTonic, name) {\n  if (name) { return props(name).intervals.map(tonalDistance.transpose(nameOrTonic)); }\n  var ref = tokenize(nameOrTonic);\n  var tonic = ref[0];\n  var type = ref[1];\n  return props(type).intervals.map(tonalDistance.transpose(tonic));\n}\n\n/**\n * Check if a given name correspond to a chord in the dictionary\n *\n * @function\n * @param {String} name\n * @return {Boolean}\n * @example\n * Chord.exists(\"CMaj7\") // => true\n * Chord.exists(\"Maj7\") // => true\n * Chord.exists(\"Ablah\") // => false\n */\nvar exists = function (name) { return tonalDictionary.chord(tokenize(name)[1]) !== undefined; };\n\n/**\n * Get all chords names that are a superset of the given one\n * (has the same notes and at least one more)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of chord names\n */\nvar supersets = function (name) {\n  if (!intervals(name).length) { return []; }\n  var isSuperset = tonalPcset.isSupersetOf(intervals(name));\n  return tonalDictionary.chord.names().filter(function (name) { return isSuperset(tonalDictionary.chord(name)); });\n};\n\n/**\n * Find all chords names that are a subset of the given one\n * (has less notes but all from the given chord)\n *\n * @function\n * @param {String} name\n * @return {Array} a list of chord names\n */\nvar subsets = function (name) {\n  var isSubset = tonalPcset.isSubsetOf(intervals(name));\n  return tonalDictionary.chord.names().filter(function (name) { return isSubset(tonalDictionary.chord(name)); });\n};\n\n// 6, 64, 7, 9, 11 and 13 are consider part of the chord\n// (see https://github.com/danigb/tonal/issues/55)\nvar NUM_TYPES = /^(6|64|7|9|11|13)$/;\n/**\n * Tokenize a chord name. It returns an array with the tonic and chord type\n * If not tonic is found, all the name is considered the chord name.\n *\n * This function does NOT check if the chord type exists or not. It only tries\n * to split the tonic and chord type.\n *\n * @function\n * @param {String} name - the chord name\n * @return {Array} an array with [tonic, type]\n * @example\n * Chord.tokenize(\"Cmaj7\") // => [ \"C\", \"maj7\" ]\n * Chord.tokenize(\"C7\") // => [ \"C\", \"7\" ]\n * Chord.tokenize(\"mMaj7\") // => [ \"\", \"mMaj7\" ]\n * Chord.tokenize(\"Cnonsense\") // => [ \"C\", \"nonsense\" ]\n */\nfunction tokenize(name) {\n  var p = tonalNote.tokenize(name);\n  if (p[0] === \"\") { return [\"\", name]; }\n  // aug is augmented (see https://github.com/danigb/tonal/issues/55)\n  if (p[0] === \"A\" && p[3] === \"ug\") { return [\"\", \"aug\"]; }\n\n  if (NUM_TYPES.test(p[2])) {\n    return [p[0] + p[1], p[2] + p[3]];\n  } else {\n    return [p[0] + p[1] + p[2], p[3]];\n  }\n}\n\nexports.names = names;\nexports.props = props;\nexports.intervals = intervals;\nexports.notes = notes;\nexports.exists = exists;\nexports.supersets = supersets;\nexports.subsets = subsets;\nexports.tokenize = tokenize;\n",
    "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar tonalNote = require('tonal-note');\nvar tonalPcset = require('tonal-pcset');\nvar tonalDistance = require('tonal-distance');\nvar tonalDictionary = require('tonal-dictionary');\nvar tonalArray = require('tonal-array');\n\n/**\n * [![npm version](https://img.shields.io/npm/v/tonal-scale.svg?style=flat-square)](https://www.npmjs.com/package/tonal-scale)\n *\n * A scale is a collection of pitches in ascending or descending order.\n *\n * This module provides functions to get and manipulate scales.\n *\n * @example\n * // es6\n * import * as Scale from \"tonal-scale\"\n * // es5\n * const Scale = require(\"tonal-scale\");\n *\n * @example\n * Scale.notes(\"Ab bebop\") // => [ \"Ab\", \"Bb\", \"C\", \"Db\", \"Eb\", \"F\", \"Gb\", \"G\" ]\n * Scale.names() => [\"major\", \"minor\", ...]\n * @module Scale\n */\n\nvar NO_SCALE = Object.freeze({\n  name: null,\n  intervals: [],\n  names: [],\n  chroma: null,\n  setnum: null\n});\n\nvar properties = function (name) {\n  var intervals = tonalDictionary.scale(name);\n  if (!intervals) { return NO_SCALE; }\n  var s = { intervals: intervals, name: name };\n  s.chroma = tonalPcset.chroma(intervals);\n  s.setnum = parseInt(s.chroma, 2);\n  s.names = tonalDictionary.scale.names(s.chroma);\n  return Object.freeze(s);\n};\n\nvar memoize = function (fn, cache) { return function (str) { return cache[str] || (cache[str] = fn(str)); }; };\n\n/**\n * Get scale properties. It returns an object with:\n * - name: the scale name\n * - names: a list with all possible names (includes the current)\n * - intervals: an array with the scale intervals\n * - chroma:  scale croma (see pcset)\n * - setnum: scale chroma number\n *\n * @function\n * @param {string} name - the scale name (without tonic)\n * @return {Object}\n */\nvar props = memoize(properties, {});\n\n/**\n * Return the available scale names\n *\n * @function\n * @param {boolean} [aliases=false] - true to include aliases\n * @return {Array} the scale names\n *\n * @example\n * Scale.names() // => [\"maj7\", ...]\n */\nvar names = tonalDictionary.scale.names;\n\n/**\n * Given a scale name, return its intervals. The name can be the type and\n * optionally the tonic (which is ignored)\n *\n * It retruns an empty array when no scale found\n *\n * @function\n * @param {string} name - the scale name (tonic and type, tonic is optional)\n * @return {Array<string>} the scale intervals if is a known scale or an empty\n * array if no scale found\n * @example\n * Scale.intervals(\"major\") // => [ \"1P\", \"2M\", \"3M\", \"4P\", \"5P\", \"6M\", \"7M\" ]\n */\nvar intervals = function (name) {\n  var p = tokenize(name);\n  return props(p[1]).intervals;\n};\n\n/**\n * Get the notes (pitch classes) of a scale.\n *\n * Note that it always returns an array, and the values are only pitch classes.\n *\n * @function\n * @param {string} tonic\n * @param {string} nameOrTonic - the scale name or tonic (if 2nd param)\n * @param {string} [name] - the scale name without tonic\n * @return {Array} a pitch classes array\n *\n * @example\n * Scale.notes(\"C\", \"major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"C major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"C4\", \"major\") // => [ \"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\" ]\n * Scale.notes(\"A4\", \"no-scale\") // => []\n * Scale.notes(\"blah\", \"major\") // => []\n */\nfunction notes(nameOrTonic, name) {\n  var p = tokenize(nameOrTonic);\n  name = name || p[1];\n  return intervals(name).map(tonalDistance.transpose(p[0]));\n}\n\n/**\n * Check if the given name is a known scale from the scales dictionary\n *\n * @function\n * @param {string} name - the scale name\n * @return {Boolean}\n */\nfunction exists(name) {\n  var p = tokenize(name);\n  return tonalDictionary.scale(p[1]) !== undefined;\n}\n\n/**\n * Given a string with a scale name and (optionally) a tonic, split\n * that components.\n *\n * It retuns an array with the form [ name, tonic ] where tonic can be a\n * note name or null and name can be any arbitrary string\n * (this function doesn\"t check if that scale name exists)\n *\n * @function\n * @param {string} name - the scale name\n * @return {Array} an array [tonic, name]\n * @example\n * Scale.tokenize(\"C mixolydean\") // => [\"C\", \"mixolydean\"]\n * Scale.tokenize(\"anything is valid\") // => [\"\", \"anything is valid\"]\n * Scale.tokenize() // => [\"\", \"\"]\n */\nfunction tokenize(str) {\n  if (typeof str !== \"string\") { return [\"\", \"\"]; }\n  var i = str.indexOf(\" \");\n  var tonic = tonalNote.name(str.substring(0, i)) || tonalNote.name(str) || \"\";\n  var name = tonic !== \"\" ? str.substring(tonic.length + 1) : str;\n  return [tonic, name.length ? name : \"\"];\n}\n\n/**\n * Find mode names of a scale\n *\n * @function\n * @param {string} name - scale name\n * @example\n * Scale.modeNames(\"C pentatonic\") // => [\n *   [\"C\", \"major pentatonic\"],\n *   [\"D\", \"egyptian\"],\n *   [\"E\", \"malkos raga\"],\n *   [\"G\", \"ritusen\"],\n *   [\"A\", \"minor pentatonic\"]\n * ]\n */\nvar modeNames = function (name) {\n  var ivls = intervals(name);\n  var tonics = notes(name);\n\n  return tonalPcset.modes(ivls)\n    .map(function (chroma, i) {\n      var name = tonalDictionary.scale.names(chroma)[0];\n      if (name) { return [tonics[i] || ivls[i], name]; }\n    })\n    .filter(function (x) { return x; });\n};\n\n/**\n * Get all chords that fits a given scale\n *\n * @function\n * @param {string} name - the scale name\n * @return {Array<string>} - the chord names\n *\n * @example\n * Scale.chords(\"pentatonic\") // => [\"5\", \"64\", \"M\", \"M6\", \"Madd9\", \"Msus2\"]\n */\nvar chords = function (name) {\n  var inScale = tonalPcset.isSubsetOf(intervals(name));\n  return tonalDictionary.chord.names().filter(function (name) { return inScale(tonalDictionary.chord(name)); });\n};\n\n/**\n * Given an array of notes, return the scale: a pitch class set starting from\n * the first note of the array\n *\n * @function\n * @param {Array} notes\n * @return {Array}\n * @example\n * Scale.toScale(['C4', 'c3', 'C5', 'C4', 'c4']) // => [\"C\"]\n * Scale.toScale(['D4', 'c#5', 'A5', 'F#6']) // => [\"D\", \"F#\", \"A\", \"C#\"]\n */\nvar toScale = function (notes) {\n  var pcset = tonalArray.compact(notes.map(tonalNote.pc));\n  if (!pcset.length) { return pcset; }\n  var tonic = pcset[0];\n  var scale = tonalArray.unique(pcset);\n  return tonalArray.rotate(scale.indexOf(tonic), scale);\n};\n\n/**\n * Get all scales names that are a superset of the given one\n * (has the same notes and at least one more)\n *\n * @function\n * @param {string} name\n * @return {Array} a list of scale names\n * @example\n * Scale.supersets(\"major\") // => [\"bebop\", \"bebop dominant\", \"bebop major\", \"chromatic\", \"ichikosucho\"]\n */\nvar supersets = function (name) {\n  if (!intervals(name).length) { return []; }\n  var isSuperset = tonalPcset.isSupersetOf(intervals(name));\n  return tonalDictionary.scale.names().filter(function (name) { return isSuperset(tonalDictionary.scale(name)); });\n};\n\n/**\n * Find all scales names that are a subset of the given one\n * (has less notes but all from the given scale)\n *\n * @function\n * @param {string} name\n * @return {Array} a list of scale names\n *\n * @example\n * Scale.subsets(\"major\") // => [\"ionian pentatonic\", \"major pentatonic\", \"ritusen\"]\n */\nvar subsets = function (name) {\n  var isSubset = tonalPcset.isSubsetOf(intervals(name));\n  return tonalDictionary.scale.names().filter(function (name) { return isSubset(tonalDictionary.scale(name)); });\n};\n\nexports.props = props;\nexports.names = names;\nexports.intervals = intervals;\nexports.notes = notes;\nexports.exists = exists;\nexports.tokenize = tokenize;\nexports.modeNames = modeNames;\nexports.chords = chords;\nexports.toScale = toScale;\nexports.supersets = supersets;\nexports.subsets = subsets;\n",
    "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar tonalArray = require('tonal-array');\nvar Note = require('tonal-note');\nvar tonalInterval = require('tonal-interval');\nvar Distance = require('tonal-distance');\nvar Dictionary = require('tonal-dictionary');\nvar tonalScale = require('tonal-scale');\nvar tonalChord = require('tonal-chord');\nvar tonalPcset = require('tonal-pcset');\n\n/**\n * [![npm version](https://img.shields.io/npm/v/tonal-key.svg?style=flat-square)](https://www.npmjs.com/package/tonal-key)\n *\n * The `Tonal` module is a facade to the rest of the modules. They are namespaced,\n * so for example to use `pc` function from `tonal-note` you have to write:\n * `Tonal.Note.pc`\n *\n * It exports the following modules:\n * - Note\n * - Interval\n * - Distance\n * - Scale\n * - Chord\n * - PcSet\n *\n * Additionally this facade exports some functions without namespace (see \"Methods\" below)\n *\n * @example\n * // es6 modules\n * import * as Tonal from \"tonal\"\n * Tonal.Note.name(\"cx\") // => \"C##\"\n *\n * @example\n * import { Note } from \"tonal\"\n * Note.name(\"bb\") // => \"Bb\"\n *\n * @example\n * // es5 node modules\n * var Tonal = require(\"tonal\");\n * Tonal.Distance.transpose(Tonal.Note.pc(\"C#2\"), \"M3\") // => \"E#\"\n * Tonal.Chord.notes(\"Dmaj7\") // => [\"D\", \"F#\", \"A\", \"C#\"]\n *\n * @module Tonal\n */\n\n/**\n * Transpose a note by an interval\n * @function\n * @param {String} note\n * @param {String} interval\n * @return {String} the transported note\n * @see Distance.transpose\n */\nvar transpose = Distance.transpose;\n\n/**\n * Get the interval from two notes\n * @function\n * @param {String} from\n * @param {String} to\n * @return {String} the interval in reverse shorthand notation\n * @see Distance.interval\n */\nvar interval = Distance.interval;\n\n/**\n * Get note properties\n * @function\n * @param {String} note - the note name\n * @return {Object}\n * @see Note.props\n * @example\n * Tonal.note(\"A4\").chroma // => 9\n */\nvar note = Note.props;\n\n/**\n * Get midi note number\n * @function\n * @param {String} note\n * @return {Number}\n * @see Note.midi\n * @example\n * Tonal.midi(\"A4\") // => 49\n */\nvar midi = Note.midi;\n\n/**\n * Get note frequency using equal tempered tuning at 440\n * @function\n * @param {String} note\n * @return {Number}\n * @see Note.freq\n * @example\n * Tonal.freq(\"A4\") // => 440\n */\nvar freq = Note.freq;\n\n/**\n * Get intervals from a chord type\n * @function\n * @param {String} type - the chord type (no tonic)\n * @return {Array} an array of intervals or undefined if the chord type is not known\n * @see Dictionary.chord\n * @example\n * Tonal.chord(\"m7b5\") // => [\"1P\", \"3m\", \"5d\", \"7m\"]\n */\nvar chord = Dictionary.chord;\n\n/**\n * Get intervals from scale name\n * @function\n * @param {String} name - the scale name (without tonic)\n * @return {Array} an array of intervals or undefiend if the scale is not kown\n * @example\n * Tonal.scale(\"major\") // => [\"1P\", \"2M\", \"3M\"...]\n */\nvar scale = Dictionary.scale;\n\nexports.Array = tonalArray;\nexports.Note = Note;\nexports.Interval = tonalInterval;\nexports.Distance = Distance;\nexports.Dictionary = Dictionary;\nexports.Scale = tonalScale;\nexports.Chord = tonalChord;\nexports.PcSet = tonalPcset;\nexports.transpose = transpose;\nexports.interval = interval;\nexports.note = note;\nexports.midi = midi;\nexports.freq = freq;\nexports.chord = chord;\nexports.scale = scale;\n",
    "var Tonal = require('tonal')\n\nmodule.exports = function scaleStore (state, emitter) {\n  state.scale = {\n    note: 'C',\n    type: 'major'\n  }\n  computeNotes()\n\n  emitter.on('scale:note', note => {\n    state.scale.note = note\n    computeNotes()\n    emitter.emit('render')\n  })\n\n  emitter.on('scale:type', type => {\n    state.scale.type = type\n    computeNotes()\n    emitter.emit('render')\n  })\n\n  function computeNotes () {\n    state.notes = [1, 2, 3, 4, 5, 6].reduce(\n      (sofar, octave) => [\n        ...sofar,\n        ...Tonal.Scale.notes(state.scale.note, state.scale.type).map(note => {\n          return note + octave\n        })\n      ],\n      []\n    )\n  }\n}\n",
    "var _$empty_8 = {};\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZXNDb250ZW50IjpbXX0=",
    "var topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = require('min-document');\n\nvar doccy;\n\nif (typeof document !== 'undefined') {\n    doccy = document;\n} else {\n    doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n}\n\nmodule.exports = doccy;\n",
    "/* global MutationObserver */\nvar document = require('global/document')\nvar window = require('global/window')\nvar assert = require('assert')\nvar watch = Object.create(null)\nvar KEY_ID = 'onloadid' + (new Date() % 9e6).toString(36)\nvar KEY_ATTR = 'data-' + KEY_ID\nvar INDEX = 0\n\nif (window && window.MutationObserver) {\n  var observer = new MutationObserver(function (mutations) {\n    if (Object.keys(watch).length < 1) return\n    for (var i = 0; i < mutations.length; i++) {\n      if (mutations[i].attributeName === KEY_ATTR) {\n        eachAttr(mutations[i], turnon, turnoff)\n        continue\n      }\n      eachMutation(mutations[i].removedNodes, turnoff)\n      eachMutation(mutations[i].addedNodes, turnon)\n    }\n  })\n  if (document.body) {\n    beginObserve(observer)\n  } else {\n    document.addEventListener('DOMContentLoaded', function (event) {\n      beginObserve(observer)\n    })\n  }\n}\n\nfunction beginObserve (observer) {\n  observer.observe(document.documentElement, {\n    childList: true,\n    subtree: true,\n    attributes: true,\n    attributeOldValue: true,\n    attributeFilter: [KEY_ATTR]\n  })\n}\n\nmodule.exports = function onload (el, on, off, caller) {\n  assert(document.body, 'on-load: will not work prior to DOMContentLoaded')\n  on = on || function () {}\n  off = off || function () {}\n  el.setAttribute(KEY_ATTR, 'o' + INDEX)\n  watch['o' + INDEX] = [on, off, 0, caller || onload.caller]\n  INDEX += 1\n  return el\n}\n\nmodule.exports.KEY_ATTR = KEY_ATTR\nmodule.exports.KEY_ID = KEY_ID\n\nfunction turnon (index, el) {\n  if (watch[index][0] && watch[index][2] === 0) {\n    watch[index][0](el)\n    watch[index][2] = 1\n  }\n}\n\nfunction turnoff (index, el) {\n  if (watch[index][1] && watch[index][2] === 1) {\n    watch[index][1](el)\n    watch[index][2] = 0\n  }\n}\n\nfunction eachAttr (mutation, on, off) {\n  var newValue = mutation.target.getAttribute(KEY_ATTR)\n  if (sameOrigin(mutation.oldValue, newValue)) {\n    watch[newValue] = watch[mutation.oldValue]\n    return\n  }\n  if (watch[mutation.oldValue]) {\n    off(mutation.oldValue, mutation.target)\n  }\n  if (watch[newValue]) {\n    on(newValue, mutation.target)\n  }\n}\n\nfunction sameOrigin (oldValue, newValue) {\n  if (!oldValue || !newValue) return false\n  return watch[oldValue][3] === watch[newValue][3]\n}\n\nfunction eachMutation (nodes, fn) {\n  var keys = Object.keys(watch)\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i] && nodes[i].getAttribute && nodes[i].getAttribute(KEY_ATTR)) {\n      var onloadid = nodes[i].getAttribute(KEY_ATTR)\n      keys.forEach(function (k) {\n        if (onloadid === k) {\n          fn(k, nodes[i])\n        }\n      })\n    }\n    if (nodes[i].childNodes.length > 0) {\n      eachMutation(nodes[i].childNodes, fn)\n    }\n  }\n}\n",
    "var document = require('global/document')\nvar nanotiming = require('nanotiming')\nvar morph = require('nanomorph')\nvar onload = require('on-load')\nvar OL_KEY_ID = onload.KEY_ID\nvar OL_ATTR_ID = onload.KEY_ATTR\nvar assert = require('assert')\n\nmodule.exports = Nanocomponent\n\nfunction makeID () {\n  return 'ncid-' + Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1)\n}\n\nfunction Nanocomponent (name) {\n  this._hasWindow = typeof window !== 'undefined'\n  this._id = null // represents the id of the root node\n  this._ncID = null // internal nanocomponent id\n  this._olID = null\n  this._proxy = null\n  this._loaded = false // Used to debounce on-load when child-reordering\n  this._rootNodeName = null\n  this._name = name || 'nanocomponent'\n  this._rerender = false\n\n  this._handleLoad = this._handleLoad.bind(this)\n  this._handleUnload = this._handleUnload.bind(this)\n\n  this._arguments = []\n\n  var self = this\n\n  Object.defineProperty(this, 'element', {\n    get: function () {\n      var el = document.getElementById(self._id)\n      if (el) return el.dataset.nanocomponent === self._ncID ? el : undefined\n    }\n  })\n}\n\nNanocomponent.prototype.render = function () {\n  var renderTiming = nanotiming(this._name + '.render')\n  var self = this\n  var args = new Array(arguments.length)\n  var el\n  for (var i = 0; i < arguments.length; i++) args[i] = arguments[i]\n  if (!this._hasWindow) {\n    var createTiming = nanotiming(this._name + '.create')\n    el = this.createElement.apply(this, args)\n    createTiming()\n    renderTiming()\n    return el\n  } else if (this.element) {\n    el = this.element // retain reference, as the ID might change on render\n    var updateTiming = nanotiming(this._name + '.update')\n    var shouldUpdate = this._rerender || this.update.apply(this, args)\n    updateTiming()\n    if (this._rerender) this._rerender = false\n    if (shouldUpdate) {\n      var desiredHtml = this._handleRender(args)\n      var morphTiming = nanotiming(this._name + '.morph')\n      morph(el, desiredHtml)\n      morphTiming()\n      if (this.afterupdate) this.afterupdate(el)\n    }\n    if (!this._proxy) { this._proxy = this._createProxy() }\n    renderTiming()\n    return this._proxy\n  } else {\n    this._reset()\n    el = this._handleRender(args)\n    if (this.beforerender) this.beforerender(el)\n    if (this.load || this.unload || this.afterreorder) {\n      onload(el, self._handleLoad, self._handleUnload, self._ncID)\n      this._olID = el.dataset[OL_KEY_ID]\n    }\n    renderTiming()\n    return el\n  }\n}\n\nNanocomponent.prototype.rerender = function () {\n  assert(this.element, 'nanocomponent: cant rerender on an unmounted dom node')\n  this._rerender = true\n  this.render.apply(this, this._arguments)\n}\n\nNanocomponent.prototype._handleRender = function (args) {\n  var createElementTiming = nanotiming(this._name + '.createElement')\n  var el = this.createElement.apply(this, args)\n  createElementTiming()\n  if (!this._rootNodeName) this._rootNodeName = el.nodeName\n  assert(el instanceof window.Element, 'nanocomponent: createElement should return a DOM node')\n  assert.equal(this._rootNodeName, el.nodeName, 'nanocomponent: root node types cannot differ between re-renders')\n  this._arguments = args\n  return this._brandNode(this._ensureID(el))\n}\n\nNanocomponent.prototype._createProxy = function () {\n  var proxy = document.createElement(this._rootNodeName)\n  var self = this\n  this._brandNode(proxy)\n  proxy.id = this._id\n  proxy.setAttribute('data-proxy', '')\n  proxy.isSameNode = function (el) {\n    return (el && el.dataset.nanocomponent === self._ncID)\n  }\n  return proxy\n}\n\nNanocomponent.prototype._reset = function () {\n  this._ncID = makeID()\n  this._olID = null\n  this._id = null\n  this._proxy = null\n  this._rootNodeName = null\n}\n\nNanocomponent.prototype._brandNode = function (node) {\n  node.setAttribute('data-nanocomponent', this._ncID)\n  if (this._olID) node.setAttribute(OL_ATTR_ID, this._olID)\n  return node\n}\n\nNanocomponent.prototype._ensureID = function (node) {\n  if (node.id) this._id = node.id\n  else node.id = this._id = this._ncID\n  // Update proxy node ID if it changed\n  if (this._proxy && this._proxy.id !== this._id) this._proxy.id = this._id\n  return node\n}\n\nNanocomponent.prototype._handleLoad = function (el) {\n  if (this._loaded) {\n    if (this.afterreorder) this.afterreorder(el)\n    return // Debounce child-reorders\n  }\n  this._loaded = true\n  if (this.load) this.load(el)\n}\n\nNanocomponent.prototype._handleUnload = function (el) {\n  if (this.element) return // Debounce child-reorders\n  this._loaded = false\n  if (this.unload) this.unload(el)\n}\n\nNanocomponent.prototype.createElement = function () {\n  throw new Error('nanocomponent: createElement should be implemented!')\n}\n\nNanocomponent.prototype.update = function () {\n  throw new Error('nanocomponent: update should be implemented!')\n}\n",
    "module.exports = require('nanocomponent')\n",
    "module.exports = clamp\n\nfunction clamp(value, min, max) {\n  return min < max\n    ? (value < min ? min : value > max ? max : value)\n    : (value < max ? max : value > min ? min : value)\n}\n",
    "'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n",
    "module.exports = function () {\n    for (var i = 0; i < arguments.length; i++) {\n        if (arguments[i] !== undefined) return arguments[i];\n    }\n};\n",
    "'use strict';\nvar toString = Object.prototype.toString;\n\nmodule.exports = function (x) {\n\tvar prototype;\n\treturn toString.call(x) === '[object Object]' && (prototype = Object.getPrototypeOf(x), prototype === null || prototype === Object.getPrototypeOf({}));\n};\n",
    "/**\r\n * @module color-parse\r\n */\r\n\r\n'use strict'\r\n\r\nvar names = require('color-name')\r\nvar isObject = require('is-plain-obj')\r\nvar defined = require('defined')\r\n\r\nmodule.exports = parse\r\n\r\n/**\r\n * Base hues\r\n * http://dev.w3.org/csswg/css-color/#typedef-named-hue\r\n */\r\n//FIXME: use external hue detector\r\nvar baseHues = {\r\n\tred: 0,\r\n\torange: 60,\r\n\tyellow: 120,\r\n\tgreen: 180,\r\n\tblue: 240,\r\n\tpurple: 300\r\n}\r\n\r\n/**\r\n * Parse color from the string passed\r\n *\r\n * @return {Object} A space indicator `space`, an array `values` and `alpha`\r\n */\r\nfunction parse (cstr) {\r\n\tvar m, parts = [], alpha = 1, space\r\n\r\n\tif (typeof cstr === 'string') {\r\n\t\t//keyword\r\n\t\tif (names[cstr]) {\r\n\t\t\tparts = names[cstr].slice()\r\n\t\t\tspace = 'rgb'\r\n\t\t}\r\n\r\n\t\t//reserved words\r\n\t\telse if (cstr === 'transparent') {\r\n\t\t\talpha = 0\r\n\t\t\tspace = 'rgb'\r\n\t\t\tparts = [0,0,0]\r\n\t\t}\r\n\r\n\t\t//hex\r\n\t\telse if (/^#[A-Fa-f0-9]+$/.test(cstr)) {\r\n\t\t\tvar base = cstr.slice(1)\r\n\t\t\tvar size = base.length\r\n\t\t\tvar isShort = size <= 4\r\n\t\t\talpha = 1\r\n\r\n\t\t\tif (isShort) {\r\n\t\t\t\tparts = [\r\n\t\t\t\t\tparseInt(base[0] + base[0], 16),\r\n\t\t\t\t\tparseInt(base[1] + base[1], 16),\r\n\t\t\t\t\tparseInt(base[2] + base[2], 16)\r\n\t\t\t\t]\r\n\t\t\t\tif (size === 4) {\r\n\t\t\t\t\talpha = parseInt(base[3] + base[3], 16) / 255\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tparts = [\r\n\t\t\t\t\tparseInt(base[0] + base[1], 16),\r\n\t\t\t\t\tparseInt(base[2] + base[3], 16),\r\n\t\t\t\t\tparseInt(base[4] + base[5], 16)\r\n\t\t\t\t]\r\n\t\t\t\tif (size === 8) {\r\n\t\t\t\t\talpha = parseInt(base[6] + base[7], 16) / 255\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!parts[0]) parts[0] = 0\r\n\t\t\tif (!parts[1]) parts[1] = 0\r\n\t\t\tif (!parts[2]) parts[2] = 0\r\n\r\n\t\t\tspace = 'rgb'\r\n\t\t}\r\n\r\n\t\t//color space\r\n\t\telse if (m = /^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\\s*\\(([^\\)]*)\\)/.exec(cstr)) {\r\n\t\t\tvar name = m[1]\r\n\t\t\tvar base = name.replace(/a$/, '')\r\n\t\t\tspace = base\r\n\t\t\tvar size = base === 'cmyk' ? 4 : base === 'gray' ? 1 : 3\r\n\t\t\tparts = m[2].trim()\r\n\t\t\t\t.split(/\\s*,\\s*/)\r\n\t\t\t\t.map(function (x, i) {\r\n\t\t\t\t\t//<percentage>\r\n\t\t\t\t\tif (/%$/.test(x)) {\r\n\t\t\t\t\t\t//alpha\r\n\t\t\t\t\t\tif (i === size)\treturn parseFloat(x) / 100\r\n\t\t\t\t\t\t//rgb\r\n\t\t\t\t\t\tif (base === 'rgb') return parseFloat(x) * 255 / 100\r\n\t\t\t\t\t\treturn parseFloat(x)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//hue\r\n\t\t\t\t\telse if (base[i] === 'h') {\r\n\t\t\t\t\t\t//<deg>\r\n\t\t\t\t\t\tif (/deg$/.test(x)) {\r\n\t\t\t\t\t\t\treturn parseFloat(x)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//<base-hue>\r\n\t\t\t\t\t\telse if (baseHues[x] !== undefined) {\r\n\t\t\t\t\t\t\treturn baseHues[x]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn parseFloat(x)\r\n\t\t\t\t})\r\n\r\n\t\t\tif (name === base) parts.push(1)\r\n\t\t\talpha = parts[size] === undefined ? 1 : parts[size]\r\n\t\t\tparts = parts.slice(0, size)\r\n\t\t}\r\n\r\n\t\t//named channels case\r\n\t\telse if (cstr.length > 10 && /[0-9](?:\\s|\\/)/.test(cstr)) {\r\n\t\t\tparts = cstr.match(/([0-9]+)/g).map(function (value) {\r\n\t\t\t\treturn parseFloat(value)\r\n\t\t\t})\r\n\r\n\t\t\tspace = cstr.match(/([a-z])/ig).join('').toLowerCase()\r\n\t\t}\r\n\t}\r\n\r\n\t//numeric case\r\n\telse if (!isNaN(cstr)) {\r\n\t\tspace = 'rgb'\r\n\t\tparts = [cstr >>> 16, (cstr & 0x00ff00) >>> 8, cstr & 0x0000ff]\r\n\t}\r\n\r\n\t//object case - detects css cases of rgb and hsl\r\n\telse if (isObject(cstr)) {\r\n\t\tvar r = defined(cstr.r, cstr.red, cstr.R, null)\r\n\r\n\t\tif (r !== null) {\r\n\t\t\tspace = 'rgb'\r\n\t\t\tparts = [\r\n\t\t\t\tr,\r\n\t\t\t\tdefined(cstr.g, cstr.green, cstr.G),\r\n\t\t\t\tdefined(cstr.b, cstr.blue, cstr.B)\r\n\t\t\t]\r\n\t\t}\r\n\t\telse {\r\n\t\t\tspace = 'hsl'\r\n\t\t\tparts = [\r\n\t\t\t\tdefined(cstr.h, cstr.hue, cstr.H),\r\n\t\t\t\tdefined(cstr.s, cstr.saturation, cstr.S),\r\n\t\t\t\tdefined(cstr.l, cstr.lightness, cstr.L, cstr.b, cstr.brightness)\r\n\t\t\t]\r\n\t\t}\r\n\r\n\t\talpha = defined(cstr.a, cstr.alpha, cstr.opacity, 1)\r\n\r\n\t\tif (cstr.opacity != null) alpha /= 100\r\n\t}\r\n\r\n\t//array\r\n\telse if (Array.isArray(cstr) || global.ArrayBuffer && ArrayBuffer.isView && ArrayBuffer.isView(cstr)) {\r\n\t\tparts = [cstr[0], cstr[1], cstr[2]]\r\n\t\tspace = 'rgb'\r\n\t\talpha = cstr.length === 4 ? cstr[3] : 1\r\n\t}\r\n\r\n\treturn {\r\n\t\tspace: space,\r\n\t\tvalues: parts,\r\n\t\talpha: alpha\r\n\t}\r\n}\r\n",
    "/**\n * RGB space.\n *\n * @module  color-space/rgb\n */\n'use strict'\n\nmodule.exports = {\n\tname: 'rgb',\n\tmin: [0,0,0],\n\tmax: [255,255,255],\n\tchannel: ['red', 'green', 'blue'],\n\talias: ['RGB']\n};\n",
    "/**\n * @module color-space/hsl\n */\n'use strict'\n\nvar rgb = require('./rgb');\n\nmodule.exports = {\n\tname: 'hsl',\n\tmin: [0,0,0],\n\tmax: [360,100,100],\n\tchannel: ['hue', 'saturation', 'lightness'],\n\talias: ['HSL'],\n\n\trgb: function(hsl) {\n\t\tvar h = hsl[0] / 360,\n\t\t\t\ts = hsl[1] / 100,\n\t\t\t\tl = hsl[2] / 100,\n\t\t\t\tt1, t2, t3, rgb, val;\n\n\t\tif (s === 0) {\n\t\t\tval = l * 255;\n\t\t\treturn [val, val, val];\n\t\t}\n\n\t\tif (l < 0.5) {\n\t\t\tt2 = l * (1 + s);\n\t\t}\n\t\telse {\n\t\t\tt2 = l + s - l * s;\n\t\t}\n\t\tt1 = 2 * l - t2;\n\n\t\trgb = [0, 0, 0];\n\t\tfor (var i = 0; i < 3; i++) {\n\t\t\tt3 = h + 1 / 3 * - (i - 1);\n\t\t\tif (t3 < 0) {\n\t\t\t\tt3++;\n\t\t\t}\n\t\t\telse if (t3 > 1) {\n\t\t\t\tt3--;\n\t\t\t}\n\n\t\t\tif (6 * t3 < 1) {\n\t\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t\t}\n\t\t\telse if (2 * t3 < 1) {\n\t\t\t\tval = t2;\n\t\t\t}\n\t\t\telse if (3 * t3 < 2) {\n\t\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tval = t1;\n\t\t\t}\n\n\t\t\trgb[i] = val * 255;\n\t\t}\n\n\t\treturn rgb;\n\t}\n};\n\n\n//extend rgb\nrgb.hsl = function(rgb) {\n\tvar r = rgb[0]/255,\n\t\t\tg = rgb[1]/255,\n\t\t\tb = rgb[2]/255,\n\t\t\tmin = Math.min(r, g, b),\n\t\t\tmax = Math.max(r, g, b),\n\t\t\tdelta = max - min,\n\t\t\th, s, l;\n\n\tif (max === min) {\n\t\th = 0;\n\t}\n\telse if (r === max) {\n\t\th = (g - b) / delta;\n\t}\n\telse if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t}\n\telse if (b === max) {\n\t\th = 4 + (r - g)/ delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t}\n\telse if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t}\n\telse {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n",
    "/** @module  color-rgba */\r\n\r\n'use strict'\r\n\r\nvar parse = require('color-parse')\r\nvar hsl = require('color-space/hsl')\r\nvar clamp = require('clamp')\r\n\r\nmodule.exports = function rgba (color) {\r\n\tvar values, i, l\r\n\r\n\t//attempt to parse non-array arguments\r\n\tvar parsed = parse(color)\r\n\r\n\tif (!parsed.space) return []\r\n\r\n\tvalues = Array(3)\r\n\tvalues[0] = clamp(parsed.values[0], 0, 255)\r\n\tvalues[1] = clamp(parsed.values[1], 0, 255)\r\n\tvalues[2] = clamp(parsed.values[2], 0, 255)\r\n\r\n\tif (parsed.space[0] === 'h') {\r\n\t\tvalues = hsl.rgb(values)\r\n\t}\r\n\r\n\tvalues.push(clamp(parsed.alpha, 0, 1))\r\n\r\n\treturn values\r\n}\r\n",
    "/** @module  color-normalize */\r\n\r\n'use strict'\r\n\r\nvar rgba = require('color-rgba')\r\nvar clamp = require('clamp')\r\nvar dtype = require('dtype')\r\n\r\nmodule.exports = function normalize (color, type) {\r\n\tif (type === 'float' || !type) type = 'array'\r\n\tif (type === 'uint') type = 'uint8'\r\n\tif (type === 'uint_clamped') type = 'uint8_clamped'\r\n\tvar Ctor = dtype(type)\r\n\tvar output = new Ctor(4)\r\n\r\n\tvar normalize = type !== 'uint8' && type !== 'uint8_clamped'\r\n\r\n\t// attempt to parse non-array arguments\r\n\tif (!color.length || typeof color === 'string') {\r\n\t\tcolor = rgba(color)\r\n\t\tcolor[0] /= 255\r\n\t\tcolor[1] /= 255\r\n\t\tcolor[2] /= 255\r\n\t}\r\n\r\n\t// 0, 1 are possible contradictory values for Arrays:\r\n\t// [1,1,1] input gives [1,1,1] output instead of [1/255,1/255,1/255], which may be collision if input is meant to be uint.\r\n\t// converting [1,1,1] to [1/255,1/255,1/255] in case of float input gives larger mistake since [1,1,1] float is frequent edge value, whereas [0,1,1], [1,1,1] etc. uint inputs are relatively rare\r\n\tif (isInt(color)) {\r\n\t\toutput[0] = color[0]\r\n\t\toutput[1] = color[1]\r\n\t\toutput[2] = color[2]\r\n\t\toutput[3] = color[3] != null ? color[3] : 255\r\n\r\n\t\tif (normalize) {\r\n\t\t\toutput[0] /= 255\r\n\t\t\toutput[1] /= 255\r\n\t\t\toutput[2] /= 255\r\n\t\t\toutput[3] /= 255\r\n\t\t}\r\n\r\n\t\treturn output\r\n\t}\r\n\r\n\tif (!normalize) {\r\n\t\toutput[0] = clamp(Math.floor(color[0] * 255), 0, 255)\r\n\t\toutput[1] = clamp(Math.floor(color[1] * 255), 0, 255)\r\n\t\toutput[2] = clamp(Math.floor(color[2] * 255), 0, 255)\r\n\t\toutput[3] = color[3] == null ? 255 : clamp(Math.floor(color[3] * 255), 0, 255)\r\n\t} else {\r\n\t\toutput[0] = color[0]\r\n\t\toutput[1] = color[1]\r\n\t\toutput[2] = color[2]\r\n\t\toutput[3] = color[3] != null ? color[3] : 1\r\n\t}\r\n\r\n\treturn output\r\n}\r\n\r\nfunction isInt(color) {\r\n\tif (color instanceof Uint8Array || color instanceof Uint8ClampedArray) return true\r\n\r\n\tif (Array.isArray(color) &&\r\n\t\t(color[0] > 1 || color[0] === 0) &&\r\n\t\t(color[1] > 1 || color[1] === 0) &&\r\n\t\t(color[2] > 1 || color[2] === 0) &&\r\n\t\t(!color[3] || color[3] > 1)\r\n\t) return true\r\n\r\n\treturn false\r\n}\r\n",
    "module.exports = function(dtype) {\n  switch (dtype) {\n    case 'int8':\n      return Int8Array\n    case 'int16':\n      return Int16Array\n    case 'int32':\n      return Int32Array\n    case 'uint8':\n      return Uint8Array\n    case 'uint16':\n      return Uint16Array\n    case 'uint32':\n      return Uint32Array\n    case 'float32':\n      return Float32Array\n    case 'float64':\n      return Float64Array\n    case 'array':\n      return Array\n    case 'uint8_clamped':\n      return Uint8ClampedArray\n  }\n}\n",
    "'use strict'\r\n\r\n\r\nmodule.exports = function pick (src, props, keepRest) {\r\n\tvar result = {}, prop, i\r\n\r\n\tif (typeof props === 'string') props = toList(props)\r\n\tif (Array.isArray(props)) {\r\n\t\tvar res = {}\r\n\t\tfor (i = 0; i < props.length; i++) {\r\n\t\t\tres[props[i]] = true\r\n\t\t}\r\n\t\tprops = res\r\n\t}\r\n\r\n\t// convert strings to lists\r\n\tfor (prop in props) {\r\n\t\tprops[prop] = toList(props[prop])\r\n\t}\r\n\r\n\t// keep-rest strategy requires unmatched props to be preserved\r\n\tvar occupied = {}\r\n\r\n\tfor (prop in props) {\r\n\t\tvar aliases = props[prop]\r\n\r\n\t\tif (Array.isArray(aliases)) {\r\n\t\t\tfor (i = 0; i < aliases.length; i++) {\r\n\t\t\t\tvar alias = aliases[i]\r\n\r\n\t\t\t\tif (keepRest) {\r\n\t\t\t\t\toccupied[alias] = true\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (alias in src) {\r\n\t\t\t\t\tresult[prop] = src[alias]\r\n\r\n\t\t\t\t\tif (keepRest) {\r\n\t\t\t\t\t\tfor (var j = i; j < aliases.length; j++) {\r\n\t\t\t\t\t\t\toccupied[aliases[j]] = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (prop in src) {\r\n\t\t\tif (props[prop]) {\r\n\t\t\t\tresult[prop] = src[prop]\r\n\t\t\t}\r\n\r\n\t\t\tif (keepRest) {\r\n\t\t\t\toccupied[prop] = true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (keepRest) {\r\n\t\tfor (prop in src) {\r\n\t\t\tif (occupied[prop]) continue\r\n\t\t\tresult[prop] = src[prop]\r\n\t\t}\r\n\t}\r\n\r\n\treturn result\r\n}\r\n\r\nvar CACHE = {}\r\n\r\nfunction toList(arg) {\r\n\tif (CACHE[arg]) return CACHE[arg]\r\n\tif (typeof arg === 'string') {\r\n\t\targ = CACHE[arg] = arg.split(/\\s*,\\s*|\\s+/)\r\n\t}\r\n\treturn arg\r\n}\r\n",
    "/** @module  gl-util/context */\r\n'use strict'\r\n\r\nvar pick = require('pick-by-alias')\r\n\r\nmodule.exports = function setContext (o) {\r\n\tif (!o) o = {}\r\n\telse if (typeof o === 'string') o = {container: o}\r\n\r\n\t// HTMLCanvasElement\r\n\tif (isCanvas(o)) {\r\n\t\to = {container: o}\r\n\t}\r\n\t// HTMLElement\r\n\telse if (isElement(o)) {\r\n\t\to = {container: o}\r\n\t}\r\n\t// WebGLContext\r\n\telse if (isContext(o)) {\r\n\t\to = {gl: o}\r\n\t}\r\n\t// options object\r\n\telse {\r\n\t\to = pick(o, {\r\n\t\t\tcontainer: 'container target element el canvas holder parent parentNode wrapper use ref root node',\r\n\t\t\tgl: 'gl context webgl glContext',\r\n\t\t\tattrs: 'attributes attrs contextAttributes',\r\n\t\t\tpixelRatio: 'pixelRatio pxRatio px ratio pxratio pixelratio',\r\n\t\t\twidth: 'w width',\r\n\t\t\theight: 'h height'\r\n\t\t}, true)\r\n\t}\r\n\r\n\tif (!o.pixelRatio) o.pixelRatio = global.pixelRatio || 1\r\n\r\n\t// make sure there is container and canvas\r\n\tif (o.gl) {\r\n\t\treturn o.gl\r\n\t}\r\n\tif (o.canvas) {\r\n\t\to.container = o.canvas.parentNode\r\n\t}\r\n\tif (o.container) {\r\n\t\tif (typeof o.container === 'string') {\r\n\t\t\tvar c = document.querySelector(o.container)\r\n\t\t\tif (!c) throw Error('Element ' + o.container + ' is not found')\r\n\t\t\to.container = c\r\n\t\t}\r\n\t\tif (isCanvas(o.container)) {\r\n\t\t\to.canvas = o.container\r\n\t\t\to.container = o.canvas.parentNode\r\n\t\t}\r\n\t\telse if (!o.canvas) {\r\n\t\t\to.canvas = createCanvas()\r\n\t\t\to.container.appendChild(o.canvas)\r\n\t\t\tresize(o)\r\n\t\t}\r\n\t}\r\n\t// blank new canvas\r\n\telse if (!o.canvas) {\r\n\t\tif (typeof document !== 'undefined') {\r\n\t\t\to.container = document.body || document.documentElement\r\n\t\t\to.canvas = createCanvas()\r\n\t\t\to.container.appendChild(o.canvas)\r\n\t\t\tresize(o)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow Error('Not DOM environment. Use headless-gl.')\r\n\t\t}\r\n\t}\r\n\r\n\t// make sure there is context\r\n\tif (!o.gl) {\r\n\t\ttry {\r\n\t\t\to.gl = o.canvas.getContext('webgl', o.attrs)\r\n\t\t} catch (e) {\r\n\t\t\ttry {\r\n\t\t\t\to.gl = o.canvas.getContext('experimental-webgl', o.attrs)\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\to.gl = o.canvas.getContext('webgl-experimental', o.attrs)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn o.gl\r\n}\r\n\r\n\r\nfunction resize (o) {\r\n\tif (o.container) {\r\n\t\tif (o.container == document.body) {\r\n\t\t\tif (!document.body.style.width) o.canvas.width = o.width || (o.pixelRatio * global.innerWidth)\r\n\t\t\tif (!document.body.style.height) o.canvas.height = o.height || (o.pixelRatio * global.innerHeight)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar bounds = o.container.getBoundingClientRect()\r\n\t\t\to.canvas.width = o.width || (bounds.right - bounds.left)\r\n\t\t\to.canvas.height = o.height || (bounds.bottom - bounds.top)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction isCanvas (e) {\r\n\treturn typeof e.getContext === 'function'\r\n\t\t&& 'width' in e\r\n\t\t&& 'height' in e\r\n}\r\n\r\nfunction isElement (e) {\r\n\treturn typeof e.nodeName === 'string' &&\r\n\t\ttypeof e.appendChild === 'function' &&\r\n\t\ttypeof e.getBoundingClientRect === 'function'\r\n}\r\n\r\nfunction isContext (e) {\r\n\treturn typeof e.drawArrays === 'function' ||\r\n\t\ttypeof e.drawElements === 'function'\r\n}\r\n\r\nfunction createCanvas () {\r\n\tvar canvas = document.createElement('canvas')\r\n\tcanvas.style.position = 'absolute'\r\n\tcanvas.style.top = 0\r\n\tcanvas.style.left = 0\r\n\r\n\treturn canvas\r\n}\r\n",
    "module.exports = function(strings) {\r\n  if (typeof strings === 'string') strings = [strings]\r\n  var exprs = [].slice.call(arguments,1)\r\n  var parts = []\r\n  for (var i = 0; i < strings.length-1; i++) {\r\n    parts.push(strings[i], exprs[i] || '')\r\n  }\r\n  parts.push(strings[i])\r\n  return parts.join('')\r\n}\r\n",
    "'use strict';\nmodule.exports = x => Object.is(x, -0);\n",
    "/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n",
    "(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.createREGL = factory());\n}(this, (function () { 'use strict';\n\nvar isTypedArray = function (x) {\r\n  return (\r\n    x instanceof Uint8Array ||\r\n    x instanceof Uint16Array ||\r\n    x instanceof Uint32Array ||\r\n    x instanceof Int8Array ||\r\n    x instanceof Int16Array ||\r\n    x instanceof Int32Array ||\r\n    x instanceof Float32Array ||\r\n    x instanceof Float64Array ||\r\n    x instanceof Uint8ClampedArray\r\n  )\r\n};\n\nvar extend = function (base, opts) {\r\n  var keys = Object.keys(opts);\r\n  for (var i = 0; i < keys.length; ++i) {\r\n    base[keys[i]] = opts[keys[i]];\r\n  }\r\n  return base\r\n};\n\n// Error checking and parameter validation.\r\n//\r\n// Statements for the form `check.someProcedure(...)` get removed by\r\n// a browserify transform for optimized/minified bundles.\r\n//\r\n/* globals atob */\r\nvar endl = '\\n';\r\n\r\n// only used for extracting shader names.  if atob not present, then errors\r\n// will be slightly crappier\r\nfunction decodeB64 (str) {\r\n  if (typeof atob !== 'undefined') {\r\n    return atob(str)\r\n  }\r\n  return 'base64:' + str\r\n}\r\n\r\nfunction raise (message) {\r\n  var error = new Error('(regl) ' + message);\r\n  console.error(error);\r\n  throw error\r\n}\r\n\r\nfunction check (pred, message) {\r\n  if (!pred) {\r\n    raise(message);\r\n  }\r\n}\r\n\r\nfunction encolon (message) {\r\n  if (message) {\r\n    return ': ' + message\r\n  }\r\n  return ''\r\n}\r\n\r\nfunction checkParameter (param, possibilities, message) {\r\n  if (!(param in possibilities)) {\r\n    raise('unknown parameter (' + param + ')' + encolon(message) +\r\n          '. possible values: ' + Object.keys(possibilities).join());\r\n  }\r\n}\r\n\r\nfunction checkIsTypedArray (data, message) {\r\n  if (!isTypedArray(data)) {\r\n    raise(\r\n      'invalid parameter type' + encolon(message) +\r\n      '. must be a typed array');\r\n  }\r\n}\r\n\r\nfunction checkTypeOf (value, type, message) {\r\n  if (typeof value !== type) {\r\n    raise(\r\n      'invalid parameter type' + encolon(message) +\r\n      '. expected ' + type + ', got ' + (typeof value));\r\n  }\r\n}\r\n\r\nfunction checkNonNegativeInt (value, message) {\r\n  if (!((value >= 0) &&\r\n        ((value | 0) === value))) {\r\n    raise('invalid parameter type, (' + value + ')' + encolon(message) +\r\n          '. must be a nonnegative integer');\r\n  }\r\n}\r\n\r\nfunction checkOneOf (value, list, message) {\r\n  if (list.indexOf(value) < 0) {\r\n    raise('invalid value' + encolon(message) + '. must be one of: ' + list);\r\n  }\r\n}\r\n\r\nvar constructorKeys = [\r\n  'gl',\r\n  'canvas',\r\n  'container',\r\n  'attributes',\r\n  'pixelRatio',\r\n  'extensions',\r\n  'optionalExtensions',\r\n  'profile',\r\n  'onDone'\r\n];\r\n\r\nfunction checkConstructor (obj) {\r\n  Object.keys(obj).forEach(function (key) {\r\n    if (constructorKeys.indexOf(key) < 0) {\r\n      raise('invalid regl constructor argument \"' + key + '\". must be one of ' + constructorKeys);\r\n    }\r\n  });\r\n}\r\n\r\nfunction leftPad (str, n) {\r\n  str = str + '';\r\n  while (str.length < n) {\r\n    str = ' ' + str;\r\n  }\r\n  return str\r\n}\r\n\r\nfunction ShaderFile () {\r\n  this.name = 'unknown';\r\n  this.lines = [];\r\n  this.index = {};\r\n  this.hasErrors = false;\r\n}\r\n\r\nfunction ShaderLine (number, line) {\r\n  this.number = number;\r\n  this.line = line;\r\n  this.errors = [];\r\n}\r\n\r\nfunction ShaderError (fileNumber, lineNumber, message) {\r\n  this.file = fileNumber;\r\n  this.line = lineNumber;\r\n  this.message = message;\r\n}\r\n\r\nfunction guessCommand () {\r\n  var error = new Error();\r\n  var stack = (error.stack || error).toString();\r\n  var pat = /compileProcedure.*\\n\\s*at.*\\((.*)\\)/.exec(stack);\r\n  if (pat) {\r\n    return pat[1]\r\n  }\r\n  var pat2 = /compileProcedure.*\\n\\s*at\\s+(.*)(\\n|$)/.exec(stack);\r\n  if (pat2) {\r\n    return pat2[1]\r\n  }\r\n  return 'unknown'\r\n}\r\n\r\nfunction guessCallSite () {\r\n  var error = new Error();\r\n  var stack = (error.stack || error).toString();\r\n  var pat = /at REGLCommand.*\\n\\s+at.*\\((.*)\\)/.exec(stack);\r\n  if (pat) {\r\n    return pat[1]\r\n  }\r\n  var pat2 = /at REGLCommand.*\\n\\s+at\\s+(.*)\\n/.exec(stack);\r\n  if (pat2) {\r\n    return pat2[1]\r\n  }\r\n  return 'unknown'\r\n}\r\n\r\nfunction parseSource (source, command) {\r\n  var lines = source.split('\\n');\r\n  var lineNumber = 1;\r\n  var fileNumber = 0;\r\n  var files = {\r\n    unknown: new ShaderFile(),\r\n    0: new ShaderFile()\r\n  };\r\n  files.unknown.name = files[0].name = command || guessCommand();\r\n  files.unknown.lines.push(new ShaderLine(0, ''));\r\n  for (var i = 0; i < lines.length; ++i) {\r\n    var line = lines[i];\r\n    var parts = /^\\s*\\#\\s*(\\w+)\\s+(.+)\\s*$/.exec(line);\r\n    if (parts) {\r\n      switch (parts[1]) {\r\n        case 'line':\r\n          var lineNumberInfo = /(\\d+)(\\s+\\d+)?/.exec(parts[2]);\r\n          if (lineNumberInfo) {\r\n            lineNumber = lineNumberInfo[1] | 0;\r\n            if (lineNumberInfo[2]) {\r\n              fileNumber = lineNumberInfo[2] | 0;\r\n              if (!(fileNumber in files)) {\r\n                files[fileNumber] = new ShaderFile();\r\n              }\r\n            }\r\n          }\r\n          break\r\n        case 'define':\r\n          var nameInfo = /SHADER_NAME(_B64)?\\s+(.*)$/.exec(parts[2]);\r\n          if (nameInfo) {\r\n            files[fileNumber].name = (nameInfo[1]\r\n                ? decodeB64(nameInfo[2])\r\n                : nameInfo[2]);\r\n          }\r\n          break\r\n      }\r\n    }\r\n    files[fileNumber].lines.push(new ShaderLine(lineNumber++, line));\r\n  }\r\n  Object.keys(files).forEach(function (fileNumber) {\r\n    var file = files[fileNumber];\r\n    file.lines.forEach(function (line) {\r\n      file.index[line.number] = line;\r\n    });\r\n  });\r\n  return files\r\n}\r\n\r\nfunction parseErrorLog (errLog) {\r\n  var result = [];\r\n  errLog.split('\\n').forEach(function (errMsg) {\r\n    if (errMsg.length < 5) {\r\n      return\r\n    }\r\n    var parts = /^ERROR\\:\\s+(\\d+)\\:(\\d+)\\:\\s*(.*)$/.exec(errMsg);\r\n    if (parts) {\r\n      result.push(new ShaderError(\r\n        parts[1] | 0,\r\n        parts[2] | 0,\r\n        parts[3].trim()));\r\n    } else if (errMsg.length > 0) {\r\n      result.push(new ShaderError('unknown', 0, errMsg));\r\n    }\r\n  });\r\n  return result\r\n}\r\n\r\nfunction annotateFiles (files, errors) {\r\n  errors.forEach(function (error) {\r\n    var file = files[error.file];\r\n    if (file) {\r\n      var line = file.index[error.line];\r\n      if (line) {\r\n        line.errors.push(error);\r\n        file.hasErrors = true;\r\n        return\r\n      }\r\n    }\r\n    files.unknown.hasErrors = true;\r\n    files.unknown.lines[0].errors.push(error);\r\n  });\r\n}\r\n\r\nfunction checkShaderError (gl, shader, source, type, command) {\r\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n    var errLog = gl.getShaderInfoLog(shader);\r\n    var typeName = type === gl.FRAGMENT_SHADER ? 'fragment' : 'vertex';\r\n    checkCommandType(source, 'string', typeName + ' shader source must be a string', command);\r\n    var files = parseSource(source, command);\r\n    var errors = parseErrorLog(errLog);\r\n    annotateFiles(files, errors);\r\n\r\n    Object.keys(files).forEach(function (fileNumber) {\r\n      var file = files[fileNumber];\r\n      if (!file.hasErrors) {\r\n        return\r\n      }\r\n\r\n      var strings = [''];\r\n      var styles = [''];\r\n\r\n      function push (str, style) {\r\n        strings.push(str);\r\n        styles.push(style || '');\r\n      }\r\n\r\n      push('file number ' + fileNumber + ': ' + file.name + '\\n', 'color:red;text-decoration:underline;font-weight:bold');\r\n\r\n      file.lines.forEach(function (line) {\r\n        if (line.errors.length > 0) {\r\n          push(leftPad(line.number, 4) + '|  ', 'background-color:yellow; font-weight:bold');\r\n          push(line.line + endl, 'color:red; background-color:yellow; font-weight:bold');\r\n\r\n          // try to guess token\r\n          var offset = 0;\r\n          line.errors.forEach(function (error) {\r\n            var message = error.message;\r\n            var token = /^\\s*\\'(.*)\\'\\s*\\:\\s*(.*)$/.exec(message);\r\n            if (token) {\r\n              var tokenPat = token[1];\r\n              message = token[2];\r\n              switch (tokenPat) {\r\n                case 'assign':\r\n                  tokenPat = '=';\r\n                  break\r\n              }\r\n              offset = Math.max(line.line.indexOf(tokenPat, offset), 0);\r\n            } else {\r\n              offset = 0;\r\n            }\r\n\r\n            push(leftPad('| ', 6));\r\n            push(leftPad('^^^', offset + 3) + endl, 'font-weight:bold');\r\n            push(leftPad('| ', 6));\r\n            push(message + endl, 'font-weight:bold');\r\n          });\r\n          push(leftPad('| ', 6) + endl);\r\n        } else {\r\n          push(leftPad(line.number, 4) + '|  ');\r\n          push(line.line + endl, 'color:red');\r\n        }\r\n      });\r\n      if (typeof document !== 'undefined' && !window.chrome) {\r\n        styles[0] = strings.join('%c');\r\n        console.log.apply(console, styles);\r\n      } else {\r\n        console.log(strings.join(''));\r\n      }\r\n    });\r\n\r\n    check.raise('Error compiling ' + typeName + ' shader, ' + files[0].name);\r\n  }\r\n}\r\n\r\nfunction checkLinkError (gl, program, fragShader, vertShader, command) {\r\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n    var errLog = gl.getProgramInfoLog(program);\r\n    var fragParse = parseSource(fragShader, command);\r\n    var vertParse = parseSource(vertShader, command);\r\n\r\n    var header = 'Error linking program with vertex shader, \"' +\r\n      vertParse[0].name + '\", and fragment shader \"' + fragParse[0].name + '\"';\r\n\r\n    if (typeof document !== 'undefined') {\r\n      console.log('%c' + header + endl + '%c' + errLog,\r\n        'color:red;text-decoration:underline;font-weight:bold',\r\n        'color:red');\r\n    } else {\r\n      console.log(header + endl + errLog);\r\n    }\r\n    check.raise(header);\r\n  }\r\n}\r\n\r\nfunction saveCommandRef (object) {\r\n  object._commandRef = guessCommand();\r\n}\r\n\r\nfunction saveDrawCommandInfo (opts, uniforms, attributes, stringStore) {\r\n  saveCommandRef(opts);\r\n\r\n  function id (str) {\r\n    if (str) {\r\n      return stringStore.id(str)\r\n    }\r\n    return 0\r\n  }\r\n  opts._fragId = id(opts.static.frag);\r\n  opts._vertId = id(opts.static.vert);\r\n\r\n  function addProps (dict, set) {\r\n    Object.keys(set).forEach(function (u) {\r\n      dict[stringStore.id(u)] = true;\r\n    });\r\n  }\r\n\r\n  var uniformSet = opts._uniformSet = {};\r\n  addProps(uniformSet, uniforms.static);\r\n  addProps(uniformSet, uniforms.dynamic);\r\n\r\n  var attributeSet = opts._attributeSet = {};\r\n  addProps(attributeSet, attributes.static);\r\n  addProps(attributeSet, attributes.dynamic);\r\n\r\n  opts._hasCount = (\r\n    'count' in opts.static ||\r\n    'count' in opts.dynamic ||\r\n    'elements' in opts.static ||\r\n    'elements' in opts.dynamic);\r\n}\r\n\r\nfunction commandRaise (message, command) {\r\n  var callSite = guessCallSite();\r\n  raise(message +\r\n    ' in command ' + (command || guessCommand()) +\r\n    (callSite === 'unknown' ? '' : ' called from ' + callSite));\r\n}\r\n\r\nfunction checkCommand (pred, message, command) {\r\n  if (!pred) {\r\n    commandRaise(message, command || guessCommand());\r\n  }\r\n}\r\n\r\nfunction checkParameterCommand (param, possibilities, message, command) {\r\n  if (!(param in possibilities)) {\r\n    commandRaise(\r\n      'unknown parameter (' + param + ')' + encolon(message) +\r\n      '. possible values: ' + Object.keys(possibilities).join(),\r\n      command || guessCommand());\r\n  }\r\n}\r\n\r\nfunction checkCommandType (value, type, message, command) {\r\n  if (typeof value !== type) {\r\n    commandRaise(\r\n      'invalid parameter type' + encolon(message) +\r\n      '. expected ' + type + ', got ' + (typeof value),\r\n      command || guessCommand());\r\n  }\r\n}\r\n\r\nfunction checkOptional (block) {\r\n  block();\r\n}\r\n\r\nfunction checkFramebufferFormat (attachment, texFormats, rbFormats) {\r\n  if (attachment.texture) {\r\n    checkOneOf(\r\n      attachment.texture._texture.internalformat,\r\n      texFormats,\r\n      'unsupported texture format for attachment');\r\n  } else {\r\n    checkOneOf(\r\n      attachment.renderbuffer._renderbuffer.format,\r\n      rbFormats,\r\n      'unsupported renderbuffer format for attachment');\r\n  }\r\n}\r\n\r\nvar GL_CLAMP_TO_EDGE = 0x812F;\r\n\r\nvar GL_NEAREST = 0x2600;\r\nvar GL_NEAREST_MIPMAP_NEAREST = 0x2700;\r\nvar GL_LINEAR_MIPMAP_NEAREST = 0x2701;\r\nvar GL_NEAREST_MIPMAP_LINEAR = 0x2702;\r\nvar GL_LINEAR_MIPMAP_LINEAR = 0x2703;\r\n\r\nvar GL_BYTE = 5120;\r\nvar GL_UNSIGNED_BYTE = 5121;\r\nvar GL_SHORT = 5122;\r\nvar GL_UNSIGNED_SHORT = 5123;\r\nvar GL_INT = 5124;\r\nvar GL_UNSIGNED_INT = 5125;\r\nvar GL_FLOAT = 5126;\r\n\r\nvar GL_UNSIGNED_SHORT_4_4_4_4 = 0x8033;\r\nvar GL_UNSIGNED_SHORT_5_5_5_1 = 0x8034;\r\nvar GL_UNSIGNED_SHORT_5_6_5 = 0x8363;\r\nvar GL_UNSIGNED_INT_24_8_WEBGL = 0x84FA;\r\n\r\nvar GL_HALF_FLOAT_OES = 0x8D61;\r\n\r\nvar TYPE_SIZE = {};\r\n\r\nTYPE_SIZE[GL_BYTE] =\r\nTYPE_SIZE[GL_UNSIGNED_BYTE] = 1;\r\n\r\nTYPE_SIZE[GL_SHORT] =\r\nTYPE_SIZE[GL_UNSIGNED_SHORT] =\r\nTYPE_SIZE[GL_HALF_FLOAT_OES] =\r\nTYPE_SIZE[GL_UNSIGNED_SHORT_5_6_5] =\r\nTYPE_SIZE[GL_UNSIGNED_SHORT_4_4_4_4] =\r\nTYPE_SIZE[GL_UNSIGNED_SHORT_5_5_5_1] = 2;\r\n\r\nTYPE_SIZE[GL_INT] =\r\nTYPE_SIZE[GL_UNSIGNED_INT] =\r\nTYPE_SIZE[GL_FLOAT] =\r\nTYPE_SIZE[GL_UNSIGNED_INT_24_8_WEBGL] = 4;\r\n\r\nfunction pixelSize (type, channels) {\r\n  if (type === GL_UNSIGNED_SHORT_5_5_5_1 ||\r\n      type === GL_UNSIGNED_SHORT_4_4_4_4 ||\r\n      type === GL_UNSIGNED_SHORT_5_6_5) {\r\n    return 2\r\n  } else if (type === GL_UNSIGNED_INT_24_8_WEBGL) {\r\n    return 4\r\n  } else {\r\n    return TYPE_SIZE[type] * channels\r\n  }\r\n}\r\n\r\nfunction isPow2 (v) {\r\n  return !(v & (v - 1)) && (!!v)\r\n}\r\n\r\nfunction checkTexture2D (info, mipData, limits) {\r\n  var i;\r\n  var w = mipData.width;\r\n  var h = mipData.height;\r\n  var c = mipData.channels;\r\n\r\n  // Check texture shape\r\n  check(w > 0 && w <= limits.maxTextureSize &&\r\n        h > 0 && h <= limits.maxTextureSize,\r\n        'invalid texture shape');\r\n\r\n  // check wrap mode\r\n  if (info.wrapS !== GL_CLAMP_TO_EDGE || info.wrapT !== GL_CLAMP_TO_EDGE) {\r\n    check(isPow2(w) && isPow2(h),\r\n      'incompatible wrap mode for texture, both width and height must be power of 2');\r\n  }\r\n\r\n  if (mipData.mipmask === 1) {\r\n    if (w !== 1 && h !== 1) {\r\n      check(\r\n        info.minFilter !== GL_NEAREST_MIPMAP_NEAREST &&\r\n        info.minFilter !== GL_NEAREST_MIPMAP_LINEAR &&\r\n        info.minFilter !== GL_LINEAR_MIPMAP_NEAREST &&\r\n        info.minFilter !== GL_LINEAR_MIPMAP_LINEAR,\r\n        'min filter requires mipmap');\r\n    }\r\n  } else {\r\n    // texture must be power of 2\r\n    check(isPow2(w) && isPow2(h),\r\n      'texture must be a square power of 2 to support mipmapping');\r\n    check(mipData.mipmask === (w << 1) - 1,\r\n      'missing or incomplete mipmap data');\r\n  }\r\n\r\n  if (mipData.type === GL_FLOAT) {\r\n    if (limits.extensions.indexOf('oes_texture_float_linear') < 0) {\r\n      check(info.minFilter === GL_NEAREST && info.magFilter === GL_NEAREST,\r\n        'filter not supported, must enable oes_texture_float_linear');\r\n    }\r\n    check(!info.genMipmaps,\r\n      'mipmap generation not supported with float textures');\r\n  }\r\n\r\n  // check image complete\r\n  var mipimages = mipData.images;\r\n  for (i = 0; i < 16; ++i) {\r\n    if (mipimages[i]) {\r\n      var mw = w >> i;\r\n      var mh = h >> i;\r\n      check(mipData.mipmask & (1 << i), 'missing mipmap data');\r\n\r\n      var img = mipimages[i];\r\n\r\n      check(\r\n        img.width === mw &&\r\n        img.height === mh,\r\n        'invalid shape for mip images');\r\n\r\n      check(\r\n        img.format === mipData.format &&\r\n        img.internalformat === mipData.internalformat &&\r\n        img.type === mipData.type,\r\n        'incompatible type for mip image');\r\n\r\n      if (img.compressed) {\r\n        // TODO: check size for compressed images\r\n      } else if (img.data) {\r\n        // check(img.data.byteLength === mw * mh *\r\n        // Math.max(pixelSize(img.type, c), img.unpackAlignment),\r\n        var rowSize = Math.ceil(pixelSize(img.type, c) * mw / img.unpackAlignment) * img.unpackAlignment;\r\n        check(img.data.byteLength === rowSize * mh,\r\n          'invalid data for image, buffer size is inconsistent with image format');\r\n      } else if (img.element) {\r\n        // TODO: check element can be loaded\r\n      } else if (img.copy) {\r\n        // TODO: check compatible format and type\r\n      }\r\n    } else if (!info.genMipmaps) {\r\n      check((mipData.mipmask & (1 << i)) === 0, 'extra mipmap data');\r\n    }\r\n  }\r\n\r\n  if (mipData.compressed) {\r\n    check(!info.genMipmaps,\r\n      'mipmap generation for compressed images not supported');\r\n  }\r\n}\r\n\r\nfunction checkTextureCube (texture, info, faces, limits) {\r\n  var w = texture.width;\r\n  var h = texture.height;\r\n  var c = texture.channels;\r\n\r\n  // Check texture shape\r\n  check(\r\n    w > 0 && w <= limits.maxTextureSize && h > 0 && h <= limits.maxTextureSize,\r\n    'invalid texture shape');\r\n  check(\r\n    w === h,\r\n    'cube map must be square');\r\n  check(\r\n    info.wrapS === GL_CLAMP_TO_EDGE && info.wrapT === GL_CLAMP_TO_EDGE,\r\n    'wrap mode not supported by cube map');\r\n\r\n  for (var i = 0; i < faces.length; ++i) {\r\n    var face = faces[i];\r\n    check(\r\n      face.width === w && face.height === h,\r\n      'inconsistent cube map face shape');\r\n\r\n    if (info.genMipmaps) {\r\n      check(!face.compressed,\r\n        'can not generate mipmap for compressed textures');\r\n      check(face.mipmask === 1,\r\n        'can not specify mipmaps and generate mipmaps');\r\n    } else {\r\n      // TODO: check mip and filter mode\r\n    }\r\n\r\n    var mipmaps = face.images;\r\n    for (var j = 0; j < 16; ++j) {\r\n      var img = mipmaps[j];\r\n      if (img) {\r\n        var mw = w >> j;\r\n        var mh = h >> j;\r\n        check(face.mipmask & (1 << j), 'missing mipmap data');\r\n        check(\r\n          img.width === mw &&\r\n          img.height === mh,\r\n          'invalid shape for mip images');\r\n        check(\r\n          img.format === texture.format &&\r\n          img.internalformat === texture.internalformat &&\r\n          img.type === texture.type,\r\n          'incompatible type for mip image');\r\n\r\n        if (img.compressed) {\r\n          // TODO: check size for compressed images\r\n        } else if (img.data) {\r\n          check(img.data.byteLength === mw * mh *\r\n            Math.max(pixelSize(img.type, c), img.unpackAlignment),\r\n            'invalid data for image, buffer size is inconsistent with image format');\r\n        } else if (img.element) {\r\n          // TODO: check element can be loaded\r\n        } else if (img.copy) {\r\n          // TODO: check compatible format and type\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nvar check$1 = extend(check, {\r\n  optional: checkOptional,\r\n  raise: raise,\r\n  commandRaise: commandRaise,\r\n  command: checkCommand,\r\n  parameter: checkParameter,\r\n  commandParameter: checkParameterCommand,\r\n  constructor: checkConstructor,\r\n  type: checkTypeOf,\r\n  commandType: checkCommandType,\r\n  isTypedArray: checkIsTypedArray,\r\n  nni: checkNonNegativeInt,\r\n  oneOf: checkOneOf,\r\n  shaderError: checkShaderError,\r\n  linkError: checkLinkError,\r\n  callSite: guessCallSite,\r\n  saveCommandRef: saveCommandRef,\r\n  saveDrawInfo: saveDrawCommandInfo,\r\n  framebufferFormat: checkFramebufferFormat,\r\n  guessCommand: guessCommand,\r\n  texture2D: checkTexture2D,\r\n  textureCube: checkTextureCube\r\n});\n\nvar VARIABLE_COUNTER = 0;\r\n\r\nvar DYN_FUNC = 0;\r\n\r\nfunction DynamicVariable (type, data) {\r\n  this.id = (VARIABLE_COUNTER++);\r\n  this.type = type;\r\n  this.data = data;\r\n}\r\n\r\nfunction escapeStr (str) {\r\n  return str.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"')\r\n}\r\n\r\nfunction splitParts (str) {\r\n  if (str.length === 0) {\r\n    return []\r\n  }\r\n\r\n  var firstChar = str.charAt(0);\r\n  var lastChar = str.charAt(str.length - 1);\r\n\r\n  if (str.length > 1 &&\r\n      firstChar === lastChar &&\r\n      (firstChar === '\"' || firstChar === \"'\")) {\r\n    return ['\"' + escapeStr(str.substr(1, str.length - 2)) + '\"']\r\n  }\r\n\r\n  var parts = /\\[(false|true|null|\\d+|'[^']*'|\"[^\"]*\")\\]/.exec(str);\r\n  if (parts) {\r\n    return (\r\n      splitParts(str.substr(0, parts.index))\r\n      .concat(splitParts(parts[1]))\r\n      .concat(splitParts(str.substr(parts.index + parts[0].length)))\r\n    )\r\n  }\r\n\r\n  var subparts = str.split('.');\r\n  if (subparts.length === 1) {\r\n    return ['\"' + escapeStr(str) + '\"']\r\n  }\r\n\r\n  var result = [];\r\n  for (var i = 0; i < subparts.length; ++i) {\r\n    result = result.concat(splitParts(subparts[i]));\r\n  }\r\n  return result\r\n}\r\n\r\nfunction toAccessorString (str) {\r\n  return '[' + splitParts(str).join('][') + ']'\r\n}\r\n\r\nfunction defineDynamic (type, data) {\r\n  return new DynamicVariable(type, toAccessorString(data + ''))\r\n}\r\n\r\nfunction isDynamic (x) {\r\n  return (typeof x === 'function' && !x._reglType) ||\r\n         x instanceof DynamicVariable\r\n}\r\n\r\nfunction unbox (x, path) {\r\n  if (typeof x === 'function') {\r\n    return new DynamicVariable(DYN_FUNC, x)\r\n  }\r\n  return x\r\n}\r\n\r\nvar dynamic = {\r\n  DynamicVariable: DynamicVariable,\r\n  define: defineDynamic,\r\n  isDynamic: isDynamic,\r\n  unbox: unbox,\r\n  accessor: toAccessorString\r\n};\n\n/* globals requestAnimationFrame, cancelAnimationFrame */\r\nvar raf = {\r\n  next: typeof requestAnimationFrame === 'function'\r\n    ? function (cb) { return requestAnimationFrame(cb) }\r\n    : function (cb) { return setTimeout(cb, 16) },\r\n  cancel: typeof cancelAnimationFrame === 'function'\r\n    ? function (raf) { return cancelAnimationFrame(raf) }\r\n    : clearTimeout\r\n};\n\n/* globals performance */\r\nvar clock = (typeof performance !== 'undefined' && performance.now)\r\n  ? function () { return performance.now() }\r\n  : function () { return +(new Date()) };\n\nfunction createStringStore () {\r\n  var stringIds = {'': 0};\r\n  var stringValues = [''];\r\n  return {\r\n    id: function (str) {\r\n      var result = stringIds[str];\r\n      if (result) {\r\n        return result\r\n      }\r\n      result = stringIds[str] = stringValues.length;\r\n      stringValues.push(str);\r\n      return result\r\n    },\r\n\r\n    str: function (id) {\r\n      return stringValues[id]\r\n    }\r\n  }\r\n}\n\n// Context and canvas creation helper functions\r\nfunction createCanvas (element, onDone, pixelRatio) {\r\n  var canvas = document.createElement('canvas');\r\n  extend(canvas.style, {\r\n    border: 0,\r\n    margin: 0,\r\n    padding: 0,\r\n    top: 0,\r\n    left: 0\r\n  });\r\n  element.appendChild(canvas);\r\n\r\n  if (element === document.body) {\r\n    canvas.style.position = 'absolute';\r\n    extend(element.style, {\r\n      margin: 0,\r\n      padding: 0\r\n    });\r\n  }\r\n\r\n  function resize () {\r\n    var w = window.innerWidth;\r\n    var h = window.innerHeight;\r\n    if (element !== document.body) {\r\n      var bounds = element.getBoundingClientRect();\r\n      w = bounds.right - bounds.left;\r\n      h = bounds.bottom - bounds.top;\r\n    }\r\n    canvas.width = pixelRatio * w;\r\n    canvas.height = pixelRatio * h;\r\n    extend(canvas.style, {\r\n      width: w + 'px',\r\n      height: h + 'px'\r\n    });\r\n  }\r\n\r\n  window.addEventListener('resize', resize, false);\r\n\r\n  function onDestroy () {\r\n    window.removeEventListener('resize', resize);\r\n    element.removeChild(canvas);\r\n  }\r\n\r\n  resize();\r\n\r\n  return {\r\n    canvas: canvas,\r\n    onDestroy: onDestroy\r\n  }\r\n}\r\n\r\nfunction createContext (canvas, contextAttributes) {\r\n  function get (name) {\r\n    try {\r\n      return canvas.getContext(name, contextAttributes)\r\n    } catch (e) {\r\n      return null\r\n    }\r\n  }\r\n  return (\r\n    get('webgl') ||\r\n    get('experimental-webgl') ||\r\n    get('webgl-experimental')\r\n  )\r\n}\r\n\r\nfunction isHTMLElement (obj) {\r\n  return (\r\n    typeof obj.nodeName === 'string' &&\r\n    typeof obj.appendChild === 'function' &&\r\n    typeof obj.getBoundingClientRect === 'function'\r\n  )\r\n}\r\n\r\nfunction isWebGLContext (obj) {\r\n  return (\r\n    typeof obj.drawArrays === 'function' ||\r\n    typeof obj.drawElements === 'function'\r\n  )\r\n}\r\n\r\nfunction parseExtensions (input) {\r\n  if (typeof input === 'string') {\r\n    return input.split()\r\n  }\r\n  check$1(Array.isArray(input), 'invalid extension array');\r\n  return input\r\n}\r\n\r\nfunction getElement (desc) {\r\n  if (typeof desc === 'string') {\r\n    check$1(typeof document !== 'undefined', 'not supported outside of DOM');\r\n    return document.querySelector(desc)\r\n  }\r\n  return desc\r\n}\r\n\r\nfunction parseArgs (args_) {\r\n  var args = args_ || {};\r\n  var element, container, canvas, gl;\r\n  var contextAttributes = {};\r\n  var extensions = [];\r\n  var optionalExtensions = [];\r\n  var pixelRatio = (typeof window === 'undefined' ? 1 : window.devicePixelRatio);\r\n  var profile = false;\r\n  var onDone = function (err) {\r\n    if (err) {\r\n      check$1.raise(err);\r\n    }\r\n  };\r\n  var onDestroy = function () {};\r\n  if (typeof args === 'string') {\r\n    check$1(\r\n      typeof document !== 'undefined',\r\n      'selector queries only supported in DOM enviroments');\r\n    element = document.querySelector(args);\r\n    check$1(element, 'invalid query string for element');\r\n  } else if (typeof args === 'object') {\r\n    if (isHTMLElement(args)) {\r\n      element = args;\r\n    } else if (isWebGLContext(args)) {\r\n      gl = args;\r\n      canvas = gl.canvas;\r\n    } else {\r\n      check$1.constructor(args);\r\n      if ('gl' in args) {\r\n        gl = args.gl;\r\n      } else if ('canvas' in args) {\r\n        canvas = getElement(args.canvas);\r\n      } else if ('container' in args) {\r\n        container = getElement(args.container);\r\n      }\r\n      if ('attributes' in args) {\r\n        contextAttributes = args.attributes;\r\n        check$1.type(contextAttributes, 'object', 'invalid context attributes');\r\n      }\r\n      if ('extensions' in args) {\r\n        extensions = parseExtensions(args.extensions);\r\n      }\r\n      if ('optionalExtensions' in args) {\r\n        optionalExtensions = parseExtensions(args.optionalExtensions);\r\n      }\r\n      if ('onDone' in args) {\r\n        check$1.type(\r\n          args.onDone, 'function',\r\n          'invalid or missing onDone callback');\r\n        onDone = args.onDone;\r\n      }\r\n      if ('profile' in args) {\r\n        profile = !!args.profile;\r\n      }\r\n      if ('pixelRatio' in args) {\r\n        pixelRatio = +args.pixelRatio;\r\n        check$1(pixelRatio > 0, 'invalid pixel ratio');\r\n      }\r\n    }\r\n  } else {\r\n    check$1.raise('invalid arguments to regl');\r\n  }\r\n\r\n  if (element) {\r\n    if (element.nodeName.toLowerCase() === 'canvas') {\r\n      canvas = element;\r\n    } else {\r\n      container = element;\r\n    }\r\n  }\r\n\r\n  if (!gl) {\r\n    if (!canvas) {\r\n      check$1(\r\n        typeof document !== 'undefined',\r\n        'must manually specify webgl context outside of DOM environments');\r\n      var result = createCanvas(container || document.body, onDone, pixelRatio);\r\n      if (!result) {\r\n        return null\r\n      }\r\n      canvas = result.canvas;\r\n      onDestroy = result.onDestroy;\r\n    }\r\n    gl = createContext(canvas, contextAttributes);\r\n  }\r\n\r\n  if (!gl) {\r\n    onDestroy();\r\n    onDone('webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org');\r\n    return null\r\n  }\r\n\r\n  return {\r\n    gl: gl,\r\n    canvas: canvas,\r\n    container: container,\r\n    extensions: extensions,\r\n    optionalExtensions: optionalExtensions,\r\n    pixelRatio: pixelRatio,\r\n    profile: profile,\r\n    onDone: onDone,\r\n    onDestroy: onDestroy\r\n  }\r\n}\n\nfunction createExtensionCache (gl, config) {\r\n  var extensions = {};\r\n\r\n  function tryLoadExtension (name_) {\r\n    check$1.type(name_, 'string', 'extension name must be string');\r\n    var name = name_.toLowerCase();\r\n    var ext;\r\n    try {\r\n      ext = extensions[name] = gl.getExtension(name);\r\n    } catch (e) {}\r\n    return !!ext\r\n  }\r\n\r\n  for (var i = 0; i < config.extensions.length; ++i) {\r\n    var name = config.extensions[i];\r\n    if (!tryLoadExtension(name)) {\r\n      config.onDestroy();\r\n      config.onDone('\"' + name + '\" extension is not supported by the current WebGL context, try upgrading your system or a different browser');\r\n      return null\r\n    }\r\n  }\r\n\r\n  config.optionalExtensions.forEach(tryLoadExtension);\r\n\r\n  return {\r\n    extensions: extensions,\r\n    restore: function () {\r\n      Object.keys(extensions).forEach(function (name) {\r\n        if (extensions[name] && !tryLoadExtension(name)) {\r\n          throw new Error('(regl): error restoring extension ' + name)\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\n\nfunction loop (n, f) {\r\n  var result = Array(n);\r\n  for (var i = 0; i < n; ++i) {\r\n    result[i] = f(i);\r\n  }\r\n  return result\r\n}\n\nvar GL_BYTE$1 = 5120;\r\nvar GL_UNSIGNED_BYTE$2 = 5121;\r\nvar GL_SHORT$1 = 5122;\r\nvar GL_UNSIGNED_SHORT$1 = 5123;\r\nvar GL_INT$1 = 5124;\r\nvar GL_UNSIGNED_INT$1 = 5125;\r\nvar GL_FLOAT$2 = 5126;\r\n\r\nfunction nextPow16 (v) {\r\n  for (var i = 16; i <= (1 << 28); i *= 16) {\r\n    if (v <= i) {\r\n      return i\r\n    }\r\n  }\r\n  return 0\r\n}\r\n\r\nfunction log2 (v) {\r\n  var r, shift;\r\n  r = (v > 0xFFFF) << 4;\r\n  v >>>= r;\r\n  shift = (v > 0xFF) << 3;\r\n  v >>>= shift; r |= shift;\r\n  shift = (v > 0xF) << 2;\r\n  v >>>= shift; r |= shift;\r\n  shift = (v > 0x3) << 1;\r\n  v >>>= shift; r |= shift;\r\n  return r | (v >> 1)\r\n}\r\n\r\nfunction createPool () {\r\n  var bufferPool = loop(8, function () {\r\n    return []\r\n  });\r\n\r\n  function alloc (n) {\r\n    var sz = nextPow16(n);\r\n    var bin = bufferPool[log2(sz) >> 2];\r\n    if (bin.length > 0) {\r\n      return bin.pop()\r\n    }\r\n    return new ArrayBuffer(sz)\r\n  }\r\n\r\n  function free (buf) {\r\n    bufferPool[log2(buf.byteLength) >> 2].push(buf);\r\n  }\r\n\r\n  function allocType (type, n) {\r\n    var result = null;\r\n    switch (type) {\r\n      case GL_BYTE$1:\r\n        result = new Int8Array(alloc(n), 0, n);\r\n        break\r\n      case GL_UNSIGNED_BYTE$2:\r\n        result = new Uint8Array(alloc(n), 0, n);\r\n        break\r\n      case GL_SHORT$1:\r\n        result = new Int16Array(alloc(2 * n), 0, n);\r\n        break\r\n      case GL_UNSIGNED_SHORT$1:\r\n        result = new Uint16Array(alloc(2 * n), 0, n);\r\n        break\r\n      case GL_INT$1:\r\n        result = new Int32Array(alloc(4 * n), 0, n);\r\n        break\r\n      case GL_UNSIGNED_INT$1:\r\n        result = new Uint32Array(alloc(4 * n), 0, n);\r\n        break\r\n      case GL_FLOAT$2:\r\n        result = new Float32Array(alloc(4 * n), 0, n);\r\n        break\r\n      default:\r\n        return null\r\n    }\r\n    if (result.length !== n) {\r\n      return result.subarray(0, n)\r\n    }\r\n    return result\r\n  }\r\n\r\n  function freeType (array) {\r\n    free(array.buffer);\r\n  }\r\n\r\n  return {\r\n    alloc: alloc,\r\n    free: free,\r\n    allocType: allocType,\r\n    freeType: freeType\r\n  }\r\n}\r\n\r\nvar pool = createPool();\r\n\r\n// zero pool for initial zero data\r\npool.zero = createPool();\n\nvar GL_SUBPIXEL_BITS = 0x0D50;\r\nvar GL_RED_BITS = 0x0D52;\r\nvar GL_GREEN_BITS = 0x0D53;\r\nvar GL_BLUE_BITS = 0x0D54;\r\nvar GL_ALPHA_BITS = 0x0D55;\r\nvar GL_DEPTH_BITS = 0x0D56;\r\nvar GL_STENCIL_BITS = 0x0D57;\r\n\r\nvar GL_ALIASED_POINT_SIZE_RANGE = 0x846D;\r\nvar GL_ALIASED_LINE_WIDTH_RANGE = 0x846E;\r\n\r\nvar GL_MAX_TEXTURE_SIZE = 0x0D33;\r\nvar GL_MAX_VIEWPORT_DIMS = 0x0D3A;\r\nvar GL_MAX_VERTEX_ATTRIBS = 0x8869;\r\nvar GL_MAX_VERTEX_UNIFORM_VECTORS = 0x8DFB;\r\nvar GL_MAX_VARYING_VECTORS = 0x8DFC;\r\nvar GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS = 0x8B4D;\r\nvar GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS = 0x8B4C;\r\nvar GL_MAX_TEXTURE_IMAGE_UNITS = 0x8872;\r\nvar GL_MAX_FRAGMENT_UNIFORM_VECTORS = 0x8DFD;\r\nvar GL_MAX_CUBE_MAP_TEXTURE_SIZE = 0x851C;\r\nvar GL_MAX_RENDERBUFFER_SIZE = 0x84E8;\r\n\r\nvar GL_VENDOR = 0x1F00;\r\nvar GL_RENDERER = 0x1F01;\r\nvar GL_VERSION = 0x1F02;\r\nvar GL_SHADING_LANGUAGE_VERSION = 0x8B8C;\r\n\r\nvar GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84FF;\r\n\r\nvar GL_MAX_COLOR_ATTACHMENTS_WEBGL = 0x8CDF;\r\nvar GL_MAX_DRAW_BUFFERS_WEBGL = 0x8824;\r\n\r\nvar GL_TEXTURE_2D = 0x0DE1;\r\nvar GL_TEXTURE_CUBE_MAP = 0x8513;\r\nvar GL_TEXTURE_CUBE_MAP_POSITIVE_X = 0x8515;\r\nvar GL_TEXTURE0 = 0x84C0;\r\nvar GL_RGBA = 0x1908;\r\nvar GL_FLOAT$1 = 0x1406;\r\nvar GL_UNSIGNED_BYTE$1 = 0x1401;\r\nvar GL_FRAMEBUFFER = 0x8D40;\r\nvar GL_FRAMEBUFFER_COMPLETE = 0x8CD5;\r\nvar GL_COLOR_ATTACHMENT0 = 0x8CE0;\r\nvar GL_COLOR_BUFFER_BIT$1 = 0x4000;\r\n\r\nvar wrapLimits = function (gl, extensions) {\r\n  var maxAnisotropic = 1;\r\n  if (extensions.ext_texture_filter_anisotropic) {\r\n    maxAnisotropic = gl.getParameter(GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT);\r\n  }\r\n\r\n  var maxDrawbuffers = 1;\r\n  var maxColorAttachments = 1;\r\n  if (extensions.webgl_draw_buffers) {\r\n    maxDrawbuffers = gl.getParameter(GL_MAX_DRAW_BUFFERS_WEBGL);\r\n    maxColorAttachments = gl.getParameter(GL_MAX_COLOR_ATTACHMENTS_WEBGL);\r\n  }\r\n\r\n  // detect if reading float textures is available (Safari doesn't support)\r\n  var readFloat = !!extensions.oes_texture_float;\r\n  if (readFloat) {\r\n    var readFloatTexture = gl.createTexture();\r\n    gl.bindTexture(GL_TEXTURE_2D, readFloatTexture);\r\n    gl.texImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 1, 1, 0, GL_RGBA, GL_FLOAT$1, null);\r\n\r\n    var fbo = gl.createFramebuffer();\r\n    gl.bindFramebuffer(GL_FRAMEBUFFER, fbo);\r\n    gl.framebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, readFloatTexture, 0);\r\n    gl.bindTexture(GL_TEXTURE_2D, null);\r\n\r\n    if (gl.checkFramebufferStatus(GL_FRAMEBUFFER) !== GL_FRAMEBUFFER_COMPLETE) readFloat = false;\r\n\r\n    else {\r\n      gl.viewport(0, 0, 1, 1);\r\n      gl.clearColor(1.0, 0.0, 0.0, 1.0);\r\n      gl.clear(GL_COLOR_BUFFER_BIT$1);\r\n      var pixels = pool.allocType(GL_FLOAT$1, 4);\r\n      gl.readPixels(0, 0, 1, 1, GL_RGBA, GL_FLOAT$1, pixels);\r\n\r\n      if (gl.getError()) readFloat = false;\r\n      else {\r\n        gl.deleteFramebuffer(fbo);\r\n        gl.deleteTexture(readFloatTexture);\r\n\r\n        readFloat = pixels[0] === 1.0;\r\n      }\r\n\r\n      pool.freeType(pixels);\r\n    }\r\n  }\r\n\r\n  // detect non power of two cube textures support (IE doesn't support)\r\n  var isIE = typeof navigator !== 'undefined' && (/MSIE/.test(navigator.userAgent) || /Trident\\//.test(navigator.appVersion) || /Edge/.test(navigator.userAgent));\r\n\r\n  var npotTextureCube = true;\r\n\r\n  if (!isIE) {\r\n    var cubeTexture = gl.createTexture();\r\n    var data = pool.allocType(GL_UNSIGNED_BYTE$1, 36);\r\n    gl.activeTexture(GL_TEXTURE0);\r\n    gl.bindTexture(GL_TEXTURE_CUBE_MAP, cubeTexture);\r\n    gl.texImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X, 0, GL_RGBA, 3, 3, 0, GL_RGBA, GL_UNSIGNED_BYTE$1, data);\r\n    pool.freeType(data);\r\n    gl.bindTexture(GL_TEXTURE_CUBE_MAP, null);\r\n    gl.deleteTexture(cubeTexture);\r\n    npotTextureCube = !gl.getError();\r\n  }\r\n\r\n  return {\r\n    // drawing buffer bit depth\r\n    colorBits: [\r\n      gl.getParameter(GL_RED_BITS),\r\n      gl.getParameter(GL_GREEN_BITS),\r\n      gl.getParameter(GL_BLUE_BITS),\r\n      gl.getParameter(GL_ALPHA_BITS)\r\n    ],\r\n    depthBits: gl.getParameter(GL_DEPTH_BITS),\r\n    stencilBits: gl.getParameter(GL_STENCIL_BITS),\r\n    subpixelBits: gl.getParameter(GL_SUBPIXEL_BITS),\r\n\r\n    // supported extensions\r\n    extensions: Object.keys(extensions).filter(function (ext) {\r\n      return !!extensions[ext]\r\n    }),\r\n\r\n    // max aniso samples\r\n    maxAnisotropic: maxAnisotropic,\r\n\r\n    // max draw buffers\r\n    maxDrawbuffers: maxDrawbuffers,\r\n    maxColorAttachments: maxColorAttachments,\r\n\r\n    // point and line size ranges\r\n    pointSizeDims: gl.getParameter(GL_ALIASED_POINT_SIZE_RANGE),\r\n    lineWidthDims: gl.getParameter(GL_ALIASED_LINE_WIDTH_RANGE),\r\n    maxViewportDims: gl.getParameter(GL_MAX_VIEWPORT_DIMS),\r\n    maxCombinedTextureUnits: gl.getParameter(GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS),\r\n    maxCubeMapSize: gl.getParameter(GL_MAX_CUBE_MAP_TEXTURE_SIZE),\r\n    maxRenderbufferSize: gl.getParameter(GL_MAX_RENDERBUFFER_SIZE),\r\n    maxTextureUnits: gl.getParameter(GL_MAX_TEXTURE_IMAGE_UNITS),\r\n    maxTextureSize: gl.getParameter(GL_MAX_TEXTURE_SIZE),\r\n    maxAttributes: gl.getParameter(GL_MAX_VERTEX_ATTRIBS),\r\n    maxVertexUniforms: gl.getParameter(GL_MAX_VERTEX_UNIFORM_VECTORS),\r\n    maxVertexTextureUnits: gl.getParameter(GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS),\r\n    maxVaryingVectors: gl.getParameter(GL_MAX_VARYING_VECTORS),\r\n    maxFragmentUniforms: gl.getParameter(GL_MAX_FRAGMENT_UNIFORM_VECTORS),\r\n\r\n    // vendor info\r\n    glsl: gl.getParameter(GL_SHADING_LANGUAGE_VERSION),\r\n    renderer: gl.getParameter(GL_RENDERER),\r\n    vendor: gl.getParameter(GL_VENDOR),\r\n    version: gl.getParameter(GL_VERSION),\r\n\r\n    // quirks\r\n    readFloat: readFloat,\r\n    npotTextureCube: npotTextureCube\r\n  }\r\n};\n\nfunction isNDArrayLike (obj) {\r\n  return (\r\n    !!obj &&\r\n    typeof obj === 'object' &&\r\n    Array.isArray(obj.shape) &&\r\n    Array.isArray(obj.stride) &&\r\n    typeof obj.offset === 'number' &&\r\n    obj.shape.length === obj.stride.length &&\r\n    (Array.isArray(obj.data) ||\r\n      isTypedArray(obj.data)))\r\n}\n\nvar values = function (obj) {\r\n  return Object.keys(obj).map(function (key) { return obj[key] })\r\n};\n\nvar flattenUtils = {\r\n  shape: arrayShape$1,\r\n  flatten: flattenArray\r\n};\r\n\r\nfunction flatten1D (array, nx, out) {\r\n  for (var i = 0; i < nx; ++i) {\r\n    out[i] = array[i];\r\n  }\r\n}\r\n\r\nfunction flatten2D (array, nx, ny, out) {\r\n  var ptr = 0;\r\n  for (var i = 0; i < nx; ++i) {\r\n    var row = array[i];\r\n    for (var j = 0; j < ny; ++j) {\r\n      out[ptr++] = row[j];\r\n    }\r\n  }\r\n}\r\n\r\nfunction flatten3D (array, nx, ny, nz, out, ptr_) {\r\n  var ptr = ptr_;\r\n  for (var i = 0; i < nx; ++i) {\r\n    var row = array[i];\r\n    for (var j = 0; j < ny; ++j) {\r\n      var col = row[j];\r\n      for (var k = 0; k < nz; ++k) {\r\n        out[ptr++] = col[k];\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction flattenRec (array, shape, level, out, ptr) {\r\n  var stride = 1;\r\n  for (var i = level + 1; i < shape.length; ++i) {\r\n    stride *= shape[i];\r\n  }\r\n  var n = shape[level];\r\n  if (shape.length - level === 4) {\r\n    var nx = shape[level + 1];\r\n    var ny = shape[level + 2];\r\n    var nz = shape[level + 3];\r\n    for (i = 0; i < n; ++i) {\r\n      flatten3D(array[i], nx, ny, nz, out, ptr);\r\n      ptr += stride;\r\n    }\r\n  } else {\r\n    for (i = 0; i < n; ++i) {\r\n      flattenRec(array[i], shape, level + 1, out, ptr);\r\n      ptr += stride;\r\n    }\r\n  }\r\n}\r\n\r\nfunction flattenArray (array, shape, type, out_) {\r\n  var sz = 1;\r\n  if (shape.length) {\r\n    for (var i = 0; i < shape.length; ++i) {\r\n      sz *= shape[i];\r\n    }\r\n  } else {\r\n    sz = 0;\r\n  }\r\n  var out = out_ || pool.allocType(type, sz);\r\n  switch (shape.length) {\r\n    case 0:\r\n      break\r\n    case 1:\r\n      flatten1D(array, shape[0], out);\r\n      break\r\n    case 2:\r\n      flatten2D(array, shape[0], shape[1], out);\r\n      break\r\n    case 3:\r\n      flatten3D(array, shape[0], shape[1], shape[2], out, 0);\r\n      break\r\n    default:\r\n      flattenRec(array, shape, 0, out, 0);\r\n  }\r\n  return out\r\n}\r\n\r\nfunction arrayShape$1 (array_) {\r\n  var shape = [];\r\n  for (var array = array_; array.length; array = array[0]) {\r\n    shape.push(array.length);\r\n  }\r\n  return shape\r\n}\n\nvar arrayTypes = {\n\t\"[object Int8Array]\": 5120,\n\t\"[object Int16Array]\": 5122,\n\t\"[object Int32Array]\": 5124,\n\t\"[object Uint8Array]\": 5121,\n\t\"[object Uint8ClampedArray]\": 5121,\n\t\"[object Uint16Array]\": 5123,\n\t\"[object Uint32Array]\": 5125,\n\t\"[object Float32Array]\": 5126,\n\t\"[object Float64Array]\": 5121,\n\t\"[object ArrayBuffer]\": 5121\n};\n\nvar int8 = 5120;\nvar int16 = 5122;\nvar int32 = 5124;\nvar uint8 = 5121;\nvar uint16 = 5123;\nvar uint32 = 5125;\nvar float = 5126;\nvar float32 = 5126;\nvar glTypes = {\n\tint8: int8,\n\tint16: int16,\n\tint32: int32,\n\tuint8: uint8,\n\tuint16: uint16,\n\tuint32: uint32,\n\tfloat: float,\n\tfloat32: float32\n};\n\nvar dynamic$1 = 35048;\nvar stream = 35040;\nvar usageTypes = {\n\tdynamic: dynamic$1,\n\tstream: stream,\n\t\"static\": 35044\n};\n\nvar arrayFlatten = flattenUtils.flatten;\r\nvar arrayShape = flattenUtils.shape;\r\n\r\nvar GL_STATIC_DRAW = 0x88E4;\r\nvar GL_STREAM_DRAW = 0x88E0;\r\n\r\nvar GL_UNSIGNED_BYTE$3 = 5121;\r\nvar GL_FLOAT$3 = 5126;\r\n\r\nvar DTYPES_SIZES = [];\r\nDTYPES_SIZES[5120] = 1; // int8\r\nDTYPES_SIZES[5122] = 2; // int16\r\nDTYPES_SIZES[5124] = 4; // int32\r\nDTYPES_SIZES[5121] = 1; // uint8\r\nDTYPES_SIZES[5123] = 2; // uint16\r\nDTYPES_SIZES[5125] = 4; // uint32\r\nDTYPES_SIZES[5126] = 4; // float32\r\n\r\nfunction typedArrayCode (data) {\r\n  return arrayTypes[Object.prototype.toString.call(data)] | 0\r\n}\r\n\r\nfunction copyArray (out, inp) {\r\n  for (var i = 0; i < inp.length; ++i) {\r\n    out[i] = inp[i];\r\n  }\r\n}\r\n\r\nfunction transpose (\r\n  result, data, shapeX, shapeY, strideX, strideY, offset) {\r\n  var ptr = 0;\r\n  for (var i = 0; i < shapeX; ++i) {\r\n    for (var j = 0; j < shapeY; ++j) {\r\n      result[ptr++] = data[strideX * i + strideY * j + offset];\r\n    }\r\n  }\r\n}\r\n\r\nfunction wrapBufferState (gl, stats, config, attributeState) {\r\n  var bufferCount = 0;\r\n  var bufferSet = {};\r\n\r\n  function REGLBuffer (type) {\r\n    this.id = bufferCount++;\r\n    this.buffer = gl.createBuffer();\r\n    this.type = type;\r\n    this.usage = GL_STATIC_DRAW;\r\n    this.byteLength = 0;\r\n    this.dimension = 1;\r\n    this.dtype = GL_UNSIGNED_BYTE$3;\r\n\r\n    this.persistentData = null;\r\n\r\n    if (config.profile) {\r\n      this.stats = {size: 0};\r\n    }\r\n  }\r\n\r\n  REGLBuffer.prototype.bind = function () {\r\n    gl.bindBuffer(this.type, this.buffer);\r\n  };\r\n\r\n  REGLBuffer.prototype.destroy = function () {\r\n    destroy(this);\r\n  };\r\n\r\n  var streamPool = [];\r\n\r\n  function createStream (type, data) {\r\n    var buffer = streamPool.pop();\r\n    if (!buffer) {\r\n      buffer = new REGLBuffer(type);\r\n    }\r\n    buffer.bind();\r\n    initBufferFromData(buffer, data, GL_STREAM_DRAW, 0, 1, false);\r\n    return buffer\r\n  }\r\n\r\n  function destroyStream (stream$$1) {\r\n    streamPool.push(stream$$1);\r\n  }\r\n\r\n  function initBufferFromTypedArray (buffer, data, usage) {\r\n    buffer.byteLength = data.byteLength;\r\n    gl.bufferData(buffer.type, data, usage);\r\n  }\r\n\r\n  function initBufferFromData (buffer, data, usage, dtype, dimension, persist) {\r\n    var shape;\r\n    buffer.usage = usage;\r\n    if (Array.isArray(data)) {\r\n      buffer.dtype = dtype || GL_FLOAT$3;\r\n      if (data.length > 0) {\r\n        var flatData;\r\n        if (Array.isArray(data[0])) {\r\n          shape = arrayShape(data);\r\n          var dim = 1;\r\n          for (var i = 1; i < shape.length; ++i) {\r\n            dim *= shape[i];\r\n          }\r\n          buffer.dimension = dim;\r\n          flatData = arrayFlatten(data, shape, buffer.dtype);\r\n          initBufferFromTypedArray(buffer, flatData, usage);\r\n          if (persist) {\r\n            buffer.persistentData = flatData;\r\n          } else {\r\n            pool.freeType(flatData);\r\n          }\r\n        } else if (typeof data[0] === 'number') {\r\n          buffer.dimension = dimension;\r\n          var typedData = pool.allocType(buffer.dtype, data.length);\r\n          copyArray(typedData, data);\r\n          initBufferFromTypedArray(buffer, typedData, usage);\r\n          if (persist) {\r\n            buffer.persistentData = typedData;\r\n          } else {\r\n            pool.freeType(typedData);\r\n          }\r\n        } else if (isTypedArray(data[0])) {\r\n          buffer.dimension = data[0].length;\r\n          buffer.dtype = dtype || typedArrayCode(data[0]) || GL_FLOAT$3;\r\n          flatData = arrayFlatten(\r\n            data,\r\n            [data.length, data[0].length],\r\n            buffer.dtype);\r\n          initBufferFromTypedArray(buffer, flatData, usage);\r\n          if (persist) {\r\n            buffer.persistentData = flatData;\r\n          } else {\r\n            pool.freeType(flatData);\r\n          }\r\n        } else {\r\n          check$1.raise('invalid buffer data');\r\n        }\r\n      }\r\n    } else if (isTypedArray(data)) {\r\n      buffer.dtype = dtype || typedArrayCode(data);\r\n      buffer.dimension = dimension;\r\n      initBufferFromTypedArray(buffer, data, usage);\r\n      if (persist) {\r\n        buffer.persistentData = new Uint8Array(new Uint8Array(data.buffer));\r\n      }\r\n    } else if (isNDArrayLike(data)) {\r\n      shape = data.shape;\r\n      var stride = data.stride;\r\n      var offset = data.offset;\r\n\r\n      var shapeX = 0;\r\n      var shapeY = 0;\r\n      var strideX = 0;\r\n      var strideY = 0;\r\n      if (shape.length === 1) {\r\n        shapeX = shape[0];\r\n        shapeY = 1;\r\n        strideX = stride[0];\r\n        strideY = 0;\r\n      } else if (shape.length === 2) {\r\n        shapeX = shape[0];\r\n        shapeY = shape[1];\r\n        strideX = stride[0];\r\n        strideY = stride[1];\r\n      } else {\r\n        check$1.raise('invalid shape');\r\n      }\r\n\r\n      buffer.dtype = dtype || typedArrayCode(data.data) || GL_FLOAT$3;\r\n      buffer.dimension = shapeY;\r\n\r\n      var transposeData = pool.allocType(buffer.dtype, shapeX * shapeY);\r\n      transpose(transposeData,\r\n        data.data,\r\n        shapeX, shapeY,\r\n        strideX, strideY,\r\n        offset);\r\n      initBufferFromTypedArray(buffer, transposeData, usage);\r\n      if (persist) {\r\n        buffer.persistentData = transposeData;\r\n      } else {\r\n        pool.freeType(transposeData);\r\n      }\r\n    } else {\r\n      check$1.raise('invalid buffer data');\r\n    }\r\n  }\r\n\r\n  function destroy (buffer) {\r\n    stats.bufferCount--;\r\n\r\n    for (var i = 0; i < attributeState.state.length; ++i) {\r\n      var record = attributeState.state[i];\r\n      if (record.buffer === buffer) {\r\n        gl.disableVertexAttribArray(i);\r\n        record.buffer = null;\r\n      }\r\n    }\r\n\r\n    var handle = buffer.buffer;\r\n    check$1(handle, 'buffer must not be deleted already');\r\n    gl.deleteBuffer(handle);\r\n    buffer.buffer = null;\r\n    delete bufferSet[buffer.id];\r\n  }\r\n\r\n  function createBuffer (options, type, deferInit, persistent) {\r\n    stats.bufferCount++;\r\n\r\n    var buffer = new REGLBuffer(type);\r\n    bufferSet[buffer.id] = buffer;\r\n\r\n    function reglBuffer (options) {\r\n      var usage = GL_STATIC_DRAW;\r\n      var data = null;\r\n      var byteLength = 0;\r\n      var dtype = 0;\r\n      var dimension = 1;\r\n      if (Array.isArray(options) ||\r\n          isTypedArray(options) ||\r\n          isNDArrayLike(options)) {\r\n        data = options;\r\n      } else if (typeof options === 'number') {\r\n        byteLength = options | 0;\r\n      } else if (options) {\r\n        check$1.type(\r\n          options, 'object',\r\n          'buffer arguments must be an object, a number or an array');\r\n\r\n        if ('data' in options) {\r\n          check$1(\r\n            data === null ||\r\n            Array.isArray(data) ||\r\n            isTypedArray(data) ||\r\n            isNDArrayLike(data),\r\n            'invalid data for buffer');\r\n          data = options.data;\r\n        }\r\n\r\n        if ('usage' in options) {\r\n          check$1.parameter(options.usage, usageTypes, 'invalid buffer usage');\r\n          usage = usageTypes[options.usage];\r\n        }\r\n\r\n        if ('type' in options) {\r\n          check$1.parameter(options.type, glTypes, 'invalid buffer type');\r\n          dtype = glTypes[options.type];\r\n        }\r\n\r\n        if ('dimension' in options) {\r\n          check$1.type(options.dimension, 'number', 'invalid dimension');\r\n          dimension = options.dimension | 0;\r\n        }\r\n\r\n        if ('length' in options) {\r\n          check$1.nni(byteLength, 'buffer length must be a nonnegative integer');\r\n          byteLength = options.length | 0;\r\n        }\r\n      }\r\n\r\n      buffer.bind();\r\n      if (!data) {\r\n        // #475\r\n        if (byteLength) gl.bufferData(buffer.type, byteLength, usage);\r\n        buffer.dtype = dtype || GL_UNSIGNED_BYTE$3;\r\n        buffer.usage = usage;\r\n        buffer.dimension = dimension;\r\n        buffer.byteLength = byteLength;\r\n      } else {\r\n        initBufferFromData(buffer, data, usage, dtype, dimension, persistent);\r\n      }\r\n\r\n      if (config.profile) {\r\n        buffer.stats.size = buffer.byteLength * DTYPES_SIZES[buffer.dtype];\r\n      }\r\n\r\n      return reglBuffer\r\n    }\r\n\r\n    function setSubData (data, offset) {\r\n      check$1(offset + data.byteLength <= buffer.byteLength,\r\n        'invalid buffer subdata call, buffer is too small. ' + ' Can\\'t write data of size ' + data.byteLength + ' starting from offset ' + offset + ' to a buffer of size ' + buffer.byteLength);\r\n\r\n      gl.bufferSubData(buffer.type, offset, data);\r\n    }\r\n\r\n    function subdata (data, offset_) {\r\n      var offset = (offset_ || 0) | 0;\r\n      var shape;\r\n      buffer.bind();\r\n      if (isTypedArray(data)) {\r\n        setSubData(data, offset);\r\n      } else if (Array.isArray(data)) {\r\n        if (data.length > 0) {\r\n          if (typeof data[0] === 'number') {\r\n            var converted = pool.allocType(buffer.dtype, data.length);\r\n            copyArray(converted, data);\r\n            setSubData(converted, offset);\r\n            pool.freeType(converted);\r\n          } else if (Array.isArray(data[0]) || isTypedArray(data[0])) {\r\n            shape = arrayShape(data);\r\n            var flatData = arrayFlatten(data, shape, buffer.dtype);\r\n            setSubData(flatData, offset);\r\n            pool.freeType(flatData);\r\n          } else {\r\n            check$1.raise('invalid buffer data');\r\n          }\r\n        }\r\n      } else if (isNDArrayLike(data)) {\r\n        shape = data.shape;\r\n        var stride = data.stride;\r\n\r\n        var shapeX = 0;\r\n        var shapeY = 0;\r\n        var strideX = 0;\r\n        var strideY = 0;\r\n        if (shape.length === 1) {\r\n          shapeX = shape[0];\r\n          shapeY = 1;\r\n          strideX = stride[0];\r\n          strideY = 0;\r\n        } else if (shape.length === 2) {\r\n          shapeX = shape[0];\r\n          shapeY = shape[1];\r\n          strideX = stride[0];\r\n          strideY = stride[1];\r\n        } else {\r\n          check$1.raise('invalid shape');\r\n        }\r\n        var dtype = Array.isArray(data.data)\r\n          ? buffer.dtype\r\n          : typedArrayCode(data.data);\r\n\r\n        var transposeData = pool.allocType(dtype, shapeX * shapeY);\r\n        transpose(transposeData,\r\n          data.data,\r\n          shapeX, shapeY,\r\n          strideX, strideY,\r\n          data.offset);\r\n        setSubData(transposeData, offset);\r\n        pool.freeType(transposeData);\r\n      } else {\r\n        check$1.raise('invalid data for buffer subdata');\r\n      }\r\n      return reglBuffer\r\n    }\r\n\r\n    if (!deferInit) {\r\n      reglBuffer(options);\r\n    }\r\n\r\n    reglBuffer._reglType = 'buffer';\r\n    reglBuffer._buffer = buffer;\r\n    reglBuffer.subdata = subdata;\r\n    if (config.profile) {\r\n      reglBuffer.stats = buffer.stats;\r\n    }\r\n    reglBuffer.destroy = function () { destroy(buffer); };\r\n\r\n    return reglBuffer\r\n  }\r\n\r\n  function restoreBuffers () {\r\n    values(bufferSet).forEach(function (buffer) {\r\n      buffer.buffer = gl.createBuffer();\r\n      gl.bindBuffer(buffer.type, buffer.buffer);\r\n      gl.bufferData(\r\n        buffer.type, buffer.persistentData || buffer.byteLength, buffer.usage);\r\n    });\r\n  }\r\n\r\n  if (config.profile) {\r\n    stats.getTotalBufferSize = function () {\r\n      var total = 0;\r\n      // TODO: Right now, the streams are not part of the total count.\r\n      Object.keys(bufferSet).forEach(function (key) {\r\n        total += bufferSet[key].stats.size;\r\n      });\r\n      return total\r\n    };\r\n  }\r\n\r\n  return {\r\n    create: createBuffer,\r\n\r\n    createStream: createStream,\r\n    destroyStream: destroyStream,\r\n\r\n    clear: function () {\r\n      values(bufferSet).forEach(destroy);\r\n      streamPool.forEach(destroy);\r\n    },\r\n\r\n    getBuffer: function (wrapper) {\r\n      if (wrapper && wrapper._buffer instanceof REGLBuffer) {\r\n        return wrapper._buffer\r\n      }\r\n      return null\r\n    },\r\n\r\n    restore: restoreBuffers,\r\n\r\n    _initBuffer: initBufferFromData\r\n  }\r\n}\n\nvar points = 0;\nvar point = 0;\nvar lines = 1;\nvar line = 1;\nvar triangles = 4;\nvar triangle = 4;\nvar primTypes = {\n\tpoints: points,\n\tpoint: point,\n\tlines: lines,\n\tline: line,\n\ttriangles: triangles,\n\ttriangle: triangle,\n\t\"line loop\": 2,\n\t\"line strip\": 3,\n\t\"triangle strip\": 5,\n\t\"triangle fan\": 6\n};\n\nvar GL_POINTS = 0;\r\nvar GL_LINES = 1;\r\nvar GL_TRIANGLES = 4;\r\n\r\nvar GL_BYTE$2 = 5120;\r\nvar GL_UNSIGNED_BYTE$4 = 5121;\r\nvar GL_SHORT$2 = 5122;\r\nvar GL_UNSIGNED_SHORT$2 = 5123;\r\nvar GL_INT$2 = 5124;\r\nvar GL_UNSIGNED_INT$2 = 5125;\r\n\r\nvar GL_ELEMENT_ARRAY_BUFFER = 34963;\r\n\r\nvar GL_STREAM_DRAW$1 = 0x88E0;\r\nvar GL_STATIC_DRAW$1 = 0x88E4;\r\n\r\nfunction wrapElementsState (gl, extensions, bufferState, stats) {\r\n  var elementSet = {};\r\n  var elementCount = 0;\r\n\r\n  var elementTypes = {\r\n    'uint8': GL_UNSIGNED_BYTE$4,\r\n    'uint16': GL_UNSIGNED_SHORT$2\r\n  };\r\n\r\n  if (extensions.oes_element_index_uint) {\r\n    elementTypes.uint32 = GL_UNSIGNED_INT$2;\r\n  }\r\n\r\n  function REGLElementBuffer (buffer) {\r\n    this.id = elementCount++;\r\n    elementSet[this.id] = this;\r\n    this.buffer = buffer;\r\n    this.primType = GL_TRIANGLES;\r\n    this.vertCount = 0;\r\n    this.type = 0;\r\n  }\r\n\r\n  REGLElementBuffer.prototype.bind = function () {\r\n    this.buffer.bind();\r\n  };\r\n\r\n  var bufferPool = [];\r\n\r\n  function createElementStream (data) {\r\n    var result = bufferPool.pop();\r\n    if (!result) {\r\n      result = new REGLElementBuffer(bufferState.create(\r\n        null,\r\n        GL_ELEMENT_ARRAY_BUFFER,\r\n        true,\r\n        false)._buffer);\r\n    }\r\n    initElements(result, data, GL_STREAM_DRAW$1, -1, -1, 0, 0);\r\n    return result\r\n  }\r\n\r\n  function destroyElementStream (elements) {\r\n    bufferPool.push(elements);\r\n  }\r\n\r\n  function initElements (\r\n    elements,\r\n    data,\r\n    usage,\r\n    prim,\r\n    count,\r\n    byteLength,\r\n    type) {\r\n    elements.buffer.bind();\r\n    if (data) {\r\n      var predictedType = type;\r\n      if (!type && (\r\n          !isTypedArray(data) ||\r\n         (isNDArrayLike(data) && !isTypedArray(data.data)))) {\r\n        predictedType = extensions.oes_element_index_uint\r\n          ? GL_UNSIGNED_INT$2\r\n          : GL_UNSIGNED_SHORT$2;\r\n      }\r\n      bufferState._initBuffer(\r\n        elements.buffer,\r\n        data,\r\n        usage,\r\n        predictedType,\r\n        3);\r\n    } else {\r\n      gl.bufferData(GL_ELEMENT_ARRAY_BUFFER, byteLength, usage);\r\n      elements.buffer.dtype = dtype || GL_UNSIGNED_BYTE$4;\r\n      elements.buffer.usage = usage;\r\n      elements.buffer.dimension = 3;\r\n      elements.buffer.byteLength = byteLength;\r\n    }\r\n\r\n    var dtype = type;\r\n    if (!type) {\r\n      switch (elements.buffer.dtype) {\r\n        case GL_UNSIGNED_BYTE$4:\r\n        case GL_BYTE$2:\r\n          dtype = GL_UNSIGNED_BYTE$4;\r\n          break\r\n\r\n        case GL_UNSIGNED_SHORT$2:\r\n        case GL_SHORT$2:\r\n          dtype = GL_UNSIGNED_SHORT$2;\r\n          break\r\n\r\n        case GL_UNSIGNED_INT$2:\r\n        case GL_INT$2:\r\n          dtype = GL_UNSIGNED_INT$2;\r\n          break\r\n\r\n        default:\r\n          check$1.raise('unsupported type for element array');\r\n      }\r\n      elements.buffer.dtype = dtype;\r\n    }\r\n    elements.type = dtype;\r\n\r\n    // Check oes_element_index_uint extension\r\n    check$1(\r\n      dtype !== GL_UNSIGNED_INT$2 ||\r\n      !!extensions.oes_element_index_uint,\r\n      '32 bit element buffers not supported, enable oes_element_index_uint first');\r\n\r\n    // try to guess default primitive type and arguments\r\n    var vertCount = count;\r\n    if (vertCount < 0) {\r\n      vertCount = elements.buffer.byteLength;\r\n      if (dtype === GL_UNSIGNED_SHORT$2) {\r\n        vertCount >>= 1;\r\n      } else if (dtype === GL_UNSIGNED_INT$2) {\r\n        vertCount >>= 2;\r\n      }\r\n    }\r\n    elements.vertCount = vertCount;\r\n\r\n    // try to guess primitive type from cell dimension\r\n    var primType = prim;\r\n    if (prim < 0) {\r\n      primType = GL_TRIANGLES;\r\n      var dimension = elements.buffer.dimension;\r\n      if (dimension === 1) primType = GL_POINTS;\r\n      if (dimension === 2) primType = GL_LINES;\r\n      if (dimension === 3) primType = GL_TRIANGLES;\r\n    }\r\n    elements.primType = primType;\r\n  }\r\n\r\n  function destroyElements (elements) {\r\n    stats.elementsCount--;\r\n\r\n    check$1(elements.buffer !== null, 'must not double destroy elements');\r\n    delete elementSet[elements.id];\r\n    elements.buffer.destroy();\r\n    elements.buffer = null;\r\n  }\r\n\r\n  function createElements (options, persistent) {\r\n    var buffer = bufferState.create(null, GL_ELEMENT_ARRAY_BUFFER, true);\r\n    var elements = new REGLElementBuffer(buffer._buffer);\r\n    stats.elementsCount++;\r\n\r\n    function reglElements (options) {\r\n      if (!options) {\r\n        buffer();\r\n        elements.primType = GL_TRIANGLES;\r\n        elements.vertCount = 0;\r\n        elements.type = GL_UNSIGNED_BYTE$4;\r\n      } else if (typeof options === 'number') {\r\n        buffer(options);\r\n        elements.primType = GL_TRIANGLES;\r\n        elements.vertCount = options | 0;\r\n        elements.type = GL_UNSIGNED_BYTE$4;\r\n      } else {\r\n        var data = null;\r\n        var usage = GL_STATIC_DRAW$1;\r\n        var primType = -1;\r\n        var vertCount = -1;\r\n        var byteLength = 0;\r\n        var dtype = 0;\r\n        if (Array.isArray(options) ||\r\n            isTypedArray(options) ||\r\n            isNDArrayLike(options)) {\r\n          data = options;\r\n        } else {\r\n          check$1.type(options, 'object', 'invalid arguments for elements');\r\n          if ('data' in options) {\r\n            data = options.data;\r\n            check$1(\r\n                Array.isArray(data) ||\r\n                isTypedArray(data) ||\r\n                isNDArrayLike(data),\r\n                'invalid data for element buffer');\r\n          }\r\n          if ('usage' in options) {\r\n            check$1.parameter(\r\n              options.usage,\r\n              usageTypes,\r\n              'invalid element buffer usage');\r\n            usage = usageTypes[options.usage];\r\n          }\r\n          if ('primitive' in options) {\r\n            check$1.parameter(\r\n              options.primitive,\r\n              primTypes,\r\n              'invalid element buffer primitive');\r\n            primType = primTypes[options.primitive];\r\n          }\r\n          if ('count' in options) {\r\n            check$1(\r\n              typeof options.count === 'number' && options.count >= 0,\r\n              'invalid vertex count for elements');\r\n            vertCount = options.count | 0;\r\n          }\r\n          if ('type' in options) {\r\n            check$1.parameter(\r\n              options.type,\r\n              elementTypes,\r\n              'invalid buffer type');\r\n            dtype = elementTypes[options.type];\r\n          }\r\n          if ('length' in options) {\r\n            byteLength = options.length | 0;\r\n          } else {\r\n            byteLength = vertCount;\r\n            if (dtype === GL_UNSIGNED_SHORT$2 || dtype === GL_SHORT$2) {\r\n              byteLength *= 2;\r\n            } else if (dtype === GL_UNSIGNED_INT$2 || dtype === GL_INT$2) {\r\n              byteLength *= 4;\r\n            }\r\n          }\r\n        }\r\n        initElements(\r\n          elements,\r\n          data,\r\n          usage,\r\n          primType,\r\n          vertCount,\r\n          byteLength,\r\n          dtype);\r\n      }\r\n\r\n      return reglElements\r\n    }\r\n\r\n    reglElements(options);\r\n\r\n    reglElements._reglType = 'elements';\r\n    reglElements._elements = elements;\r\n    reglElements.subdata = function (data, offset) {\r\n      buffer.subdata(data, offset);\r\n      return reglElements\r\n    };\r\n    reglElements.destroy = function () {\r\n      destroyElements(elements);\r\n    };\r\n\r\n    return reglElements\r\n  }\r\n\r\n  return {\r\n    create: createElements,\r\n    createStream: createElementStream,\r\n    destroyStream: destroyElementStream,\r\n    getElements: function (elements) {\r\n      if (typeof elements === 'function' &&\r\n          elements._elements instanceof REGLElementBuffer) {\r\n        return elements._elements\r\n      }\r\n      return null\r\n    },\r\n    clear: function () {\r\n      values(elementSet).forEach(destroyElements);\r\n    }\r\n  }\r\n}\n\nvar FLOAT = new Float32Array(1);\r\nvar INT = new Uint32Array(FLOAT.buffer);\r\n\r\nvar GL_UNSIGNED_SHORT$4 = 5123;\r\n\r\nfunction convertToHalfFloat (array) {\r\n  var ushorts = pool.allocType(GL_UNSIGNED_SHORT$4, array.length);\r\n\r\n  for (var i = 0; i < array.length; ++i) {\r\n    if (isNaN(array[i])) {\r\n      ushorts[i] = 0xffff;\r\n    } else if (array[i] === Infinity) {\r\n      ushorts[i] = 0x7c00;\r\n    } else if (array[i] === -Infinity) {\r\n      ushorts[i] = 0xfc00;\r\n    } else {\r\n      FLOAT[0] = array[i];\r\n      var x = INT[0];\r\n\r\n      var sgn = (x >>> 31) << 15;\r\n      var exp = ((x << 1) >>> 24) - 127;\r\n      var frac = (x >> 13) & ((1 << 10) - 1);\r\n\r\n      if (exp < -24) {\r\n        // round non-representable denormals to 0\r\n        ushorts[i] = sgn;\r\n      } else if (exp < -14) {\r\n        // handle denormals\r\n        var s = -14 - exp;\r\n        ushorts[i] = sgn + ((frac + (1 << 10)) >> s);\r\n      } else if (exp > 15) {\r\n        // round overflow to +/- Infinity\r\n        ushorts[i] = sgn + 0x7c00;\r\n      } else {\r\n        // otherwise convert directly\r\n        ushorts[i] = sgn + ((exp + 15) << 10) + frac;\r\n      }\r\n    }\r\n  }\r\n\r\n  return ushorts\r\n}\n\nfunction isArrayLike (s) {\r\n  return Array.isArray(s) || isTypedArray(s)\r\n}\n\nvar isPow2$1 = function (v) {\r\n  return !(v & (v - 1)) && (!!v)\r\n};\n\nvar GL_COMPRESSED_TEXTURE_FORMATS = 0x86A3;\r\n\r\nvar GL_TEXTURE_2D$1 = 0x0DE1;\r\nvar GL_TEXTURE_CUBE_MAP$1 = 0x8513;\r\nvar GL_TEXTURE_CUBE_MAP_POSITIVE_X$1 = 0x8515;\r\n\r\nvar GL_RGBA$1 = 0x1908;\r\nvar GL_ALPHA = 0x1906;\r\nvar GL_RGB = 0x1907;\r\nvar GL_LUMINANCE = 0x1909;\r\nvar GL_LUMINANCE_ALPHA = 0x190A;\r\n\r\nvar GL_RGBA4 = 0x8056;\r\nvar GL_RGB5_A1 = 0x8057;\r\nvar GL_RGB565 = 0x8D62;\r\n\r\nvar GL_UNSIGNED_SHORT_4_4_4_4$1 = 0x8033;\r\nvar GL_UNSIGNED_SHORT_5_5_5_1$1 = 0x8034;\r\nvar GL_UNSIGNED_SHORT_5_6_5$1 = 0x8363;\r\nvar GL_UNSIGNED_INT_24_8_WEBGL$1 = 0x84FA;\r\n\r\nvar GL_DEPTH_COMPONENT = 0x1902;\r\nvar GL_DEPTH_STENCIL = 0x84F9;\r\n\r\nvar GL_SRGB_EXT = 0x8C40;\r\nvar GL_SRGB_ALPHA_EXT = 0x8C42;\r\n\r\nvar GL_HALF_FLOAT_OES$1 = 0x8D61;\r\n\r\nvar GL_COMPRESSED_RGB_S3TC_DXT1_EXT = 0x83F0;\r\nvar GL_COMPRESSED_RGBA_S3TC_DXT1_EXT = 0x83F1;\r\nvar GL_COMPRESSED_RGBA_S3TC_DXT3_EXT = 0x83F2;\r\nvar GL_COMPRESSED_RGBA_S3TC_DXT5_EXT = 0x83F3;\r\n\r\nvar GL_COMPRESSED_RGB_ATC_WEBGL = 0x8C92;\r\nvar GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 0x8C93;\r\nvar GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 0x87EE;\r\n\r\nvar GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 0x8C00;\r\nvar GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 0x8C01;\r\nvar GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 0x8C02;\r\nvar GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 0x8C03;\r\n\r\nvar GL_COMPRESSED_RGB_ETC1_WEBGL = 0x8D64;\r\n\r\nvar GL_UNSIGNED_BYTE$5 = 0x1401;\r\nvar GL_UNSIGNED_SHORT$3 = 0x1403;\r\nvar GL_UNSIGNED_INT$3 = 0x1405;\r\nvar GL_FLOAT$4 = 0x1406;\r\n\r\nvar GL_TEXTURE_WRAP_S = 0x2802;\r\nvar GL_TEXTURE_WRAP_T = 0x2803;\r\n\r\nvar GL_REPEAT = 0x2901;\r\nvar GL_CLAMP_TO_EDGE$1 = 0x812F;\r\nvar GL_MIRRORED_REPEAT = 0x8370;\r\n\r\nvar GL_TEXTURE_MAG_FILTER = 0x2800;\r\nvar GL_TEXTURE_MIN_FILTER = 0x2801;\r\n\r\nvar GL_NEAREST$1 = 0x2600;\r\nvar GL_LINEAR = 0x2601;\r\nvar GL_NEAREST_MIPMAP_NEAREST$1 = 0x2700;\r\nvar GL_LINEAR_MIPMAP_NEAREST$1 = 0x2701;\r\nvar GL_NEAREST_MIPMAP_LINEAR$1 = 0x2702;\r\nvar GL_LINEAR_MIPMAP_LINEAR$1 = 0x2703;\r\n\r\nvar GL_GENERATE_MIPMAP_HINT = 0x8192;\r\nvar GL_DONT_CARE = 0x1100;\r\nvar GL_FASTEST = 0x1101;\r\nvar GL_NICEST = 0x1102;\r\n\r\nvar GL_TEXTURE_MAX_ANISOTROPY_EXT = 0x84FE;\r\n\r\nvar GL_UNPACK_ALIGNMENT = 0x0CF5;\r\nvar GL_UNPACK_FLIP_Y_WEBGL = 0x9240;\r\nvar GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL = 0x9241;\r\nvar GL_UNPACK_COLORSPACE_CONVERSION_WEBGL = 0x9243;\r\n\r\nvar GL_BROWSER_DEFAULT_WEBGL = 0x9244;\r\n\r\nvar GL_TEXTURE0$1 = 0x84C0;\r\n\r\nvar MIPMAP_FILTERS = [\r\n  GL_NEAREST_MIPMAP_NEAREST$1,\r\n  GL_NEAREST_MIPMAP_LINEAR$1,\r\n  GL_LINEAR_MIPMAP_NEAREST$1,\r\n  GL_LINEAR_MIPMAP_LINEAR$1\r\n];\r\n\r\nvar CHANNELS_FORMAT = [\r\n  0,\r\n  GL_LUMINANCE,\r\n  GL_LUMINANCE_ALPHA,\r\n  GL_RGB,\r\n  GL_RGBA$1\r\n];\r\n\r\nvar FORMAT_CHANNELS = {};\r\nFORMAT_CHANNELS[GL_LUMINANCE] =\r\nFORMAT_CHANNELS[GL_ALPHA] =\r\nFORMAT_CHANNELS[GL_DEPTH_COMPONENT] = 1;\r\nFORMAT_CHANNELS[GL_DEPTH_STENCIL] =\r\nFORMAT_CHANNELS[GL_LUMINANCE_ALPHA] = 2;\r\nFORMAT_CHANNELS[GL_RGB] =\r\nFORMAT_CHANNELS[GL_SRGB_EXT] = 3;\r\nFORMAT_CHANNELS[GL_RGBA$1] =\r\nFORMAT_CHANNELS[GL_SRGB_ALPHA_EXT] = 4;\r\n\r\nfunction objectName (str) {\r\n  return '[object ' + str + ']'\r\n}\r\n\r\nvar CANVAS_CLASS = objectName('HTMLCanvasElement');\r\nvar CONTEXT2D_CLASS = objectName('CanvasRenderingContext2D');\r\nvar BITMAP_CLASS = objectName('ImageBitmap');\r\nvar IMAGE_CLASS = objectName('HTMLImageElement');\r\nvar VIDEO_CLASS = objectName('HTMLVideoElement');\r\n\r\nvar PIXEL_CLASSES = Object.keys(arrayTypes).concat([\r\n  CANVAS_CLASS,\r\n  CONTEXT2D_CLASS,\r\n  BITMAP_CLASS,\r\n  IMAGE_CLASS,\r\n  VIDEO_CLASS\r\n]);\r\n\r\n// for every texture type, store\r\n// the size in bytes.\r\nvar TYPE_SIZES = [];\r\nTYPE_SIZES[GL_UNSIGNED_BYTE$5] = 1;\r\nTYPE_SIZES[GL_FLOAT$4] = 4;\r\nTYPE_SIZES[GL_HALF_FLOAT_OES$1] = 2;\r\n\r\nTYPE_SIZES[GL_UNSIGNED_SHORT$3] = 2;\r\nTYPE_SIZES[GL_UNSIGNED_INT$3] = 4;\r\n\r\nvar FORMAT_SIZES_SPECIAL = [];\r\nFORMAT_SIZES_SPECIAL[GL_RGBA4] = 2;\r\nFORMAT_SIZES_SPECIAL[GL_RGB5_A1] = 2;\r\nFORMAT_SIZES_SPECIAL[GL_RGB565] = 2;\r\nFORMAT_SIZES_SPECIAL[GL_DEPTH_STENCIL] = 4;\r\n\r\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_S3TC_DXT1_EXT] = 0.5;\r\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_S3TC_DXT1_EXT] = 0.5;\r\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_S3TC_DXT3_EXT] = 1;\r\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_S3TC_DXT5_EXT] = 1;\r\n\r\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_ATC_WEBGL] = 0.5;\r\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL] = 1;\r\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL] = 1;\r\n\r\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG] = 0.5;\r\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG] = 0.25;\r\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG] = 0.5;\r\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG] = 0.25;\r\n\r\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_ETC1_WEBGL] = 0.5;\r\n\r\nfunction isNumericArray (arr) {\r\n  return (\r\n    Array.isArray(arr) &&\r\n    (arr.length === 0 ||\r\n    typeof arr[0] === 'number'))\r\n}\r\n\r\nfunction isRectArray (arr) {\r\n  if (!Array.isArray(arr)) {\r\n    return false\r\n  }\r\n  var width = arr.length;\r\n  if (width === 0 || !isArrayLike(arr[0])) {\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\nfunction classString (x) {\r\n  return Object.prototype.toString.call(x)\r\n}\r\n\r\nfunction isCanvasElement (object) {\r\n  return classString(object) === CANVAS_CLASS\r\n}\r\n\r\nfunction isContext2D (object) {\r\n  return classString(object) === CONTEXT2D_CLASS\r\n}\r\n\r\nfunction isBitmap (object) {\r\n  return classString(object) === BITMAP_CLASS\r\n}\r\n\r\nfunction isImageElement (object) {\r\n  return classString(object) === IMAGE_CLASS\r\n}\r\n\r\nfunction isVideoElement (object) {\r\n  return classString(object) === VIDEO_CLASS\r\n}\r\n\r\nfunction isPixelData (object) {\r\n  if (!object) {\r\n    return false\r\n  }\r\n  var className = classString(object);\r\n  if (PIXEL_CLASSES.indexOf(className) >= 0) {\r\n    return true\r\n  }\r\n  return (\r\n    isNumericArray(object) ||\r\n    isRectArray(object) ||\r\n    isNDArrayLike(object))\r\n}\r\n\r\nfunction typedArrayCode$1 (data) {\r\n  return arrayTypes[Object.prototype.toString.call(data)] | 0\r\n}\r\n\r\nfunction convertData (result, data) {\r\n  var n = data.length;\r\n  switch (result.type) {\r\n    case GL_UNSIGNED_BYTE$5:\r\n    case GL_UNSIGNED_SHORT$3:\r\n    case GL_UNSIGNED_INT$3:\r\n    case GL_FLOAT$4:\r\n      var converted = pool.allocType(result.type, n);\r\n      converted.set(data);\r\n      result.data = converted;\r\n      break\r\n\r\n    case GL_HALF_FLOAT_OES$1:\r\n      result.data = convertToHalfFloat(data);\r\n      break\r\n\r\n    default:\r\n      check$1.raise('unsupported texture type, must specify a typed array');\r\n  }\r\n}\r\n\r\nfunction preConvert (image, n) {\r\n  return pool.allocType(\r\n    image.type === GL_HALF_FLOAT_OES$1\r\n      ? GL_FLOAT$4\r\n      : image.type, n)\r\n}\r\n\r\nfunction postConvert (image, data) {\r\n  if (image.type === GL_HALF_FLOAT_OES$1) {\r\n    image.data = convertToHalfFloat(data);\r\n    pool.freeType(data);\r\n  } else {\r\n    image.data = data;\r\n  }\r\n}\r\n\r\nfunction transposeData (image, array, strideX, strideY, strideC, offset) {\r\n  var w = image.width;\r\n  var h = image.height;\r\n  var c = image.channels;\r\n  var n = w * h * c;\r\n  var data = preConvert(image, n);\r\n\r\n  var p = 0;\r\n  for (var i = 0; i < h; ++i) {\r\n    for (var j = 0; j < w; ++j) {\r\n      for (var k = 0; k < c; ++k) {\r\n        data[p++] = array[strideX * j + strideY * i + strideC * k + offset];\r\n      }\r\n    }\r\n  }\r\n\r\n  postConvert(image, data);\r\n}\r\n\r\nfunction getTextureSize (format, type, width, height, isMipmap, isCube) {\r\n  var s;\r\n  if (typeof FORMAT_SIZES_SPECIAL[format] !== 'undefined') {\r\n    // we have a special array for dealing with weird color formats such as RGB5A1\r\n    s = FORMAT_SIZES_SPECIAL[format];\r\n  } else {\r\n    s = FORMAT_CHANNELS[format] * TYPE_SIZES[type];\r\n  }\r\n\r\n  if (isCube) {\r\n    s *= 6;\r\n  }\r\n\r\n  if (isMipmap) {\r\n    // compute the total size of all the mipmaps.\r\n    var total = 0;\r\n\r\n    var w = width;\r\n    while (w >= 1) {\r\n      // we can only use mipmaps on a square image,\r\n      // so we can simply use the width and ignore the height:\r\n      total += s * w * w;\r\n      w /= 2;\r\n    }\r\n    return total\r\n  } else {\r\n    return s * width * height\r\n  }\r\n}\r\n\r\nfunction createTextureSet (\r\n  gl, extensions, limits, reglPoll, contextState, stats, config) {\r\n  // -------------------------------------------------------\r\n  // Initialize constants and parameter tables here\r\n  // -------------------------------------------------------\r\n  var mipmapHint = {\r\n    \"don't care\": GL_DONT_CARE,\r\n    'dont care': GL_DONT_CARE,\r\n    'nice': GL_NICEST,\r\n    'fast': GL_FASTEST\r\n  };\r\n\r\n  var wrapModes = {\r\n    'repeat': GL_REPEAT,\r\n    'clamp': GL_CLAMP_TO_EDGE$1,\r\n    'mirror': GL_MIRRORED_REPEAT\r\n  };\r\n\r\n  var magFilters = {\r\n    'nearest': GL_NEAREST$1,\r\n    'linear': GL_LINEAR\r\n  };\r\n\r\n  var minFilters = extend({\r\n    'mipmap': GL_LINEAR_MIPMAP_LINEAR$1,\r\n    'nearest mipmap nearest': GL_NEAREST_MIPMAP_NEAREST$1,\r\n    'linear mipmap nearest': GL_LINEAR_MIPMAP_NEAREST$1,\r\n    'nearest mipmap linear': GL_NEAREST_MIPMAP_LINEAR$1,\r\n    'linear mipmap linear': GL_LINEAR_MIPMAP_LINEAR$1\r\n  }, magFilters);\r\n\r\n  var colorSpace = {\r\n    'none': 0,\r\n    'browser': GL_BROWSER_DEFAULT_WEBGL\r\n  };\r\n\r\n  var textureTypes = {\r\n    'uint8': GL_UNSIGNED_BYTE$5,\r\n    'rgba4': GL_UNSIGNED_SHORT_4_4_4_4$1,\r\n    'rgb565': GL_UNSIGNED_SHORT_5_6_5$1,\r\n    'rgb5 a1': GL_UNSIGNED_SHORT_5_5_5_1$1\r\n  };\r\n\r\n  var textureFormats = {\r\n    'alpha': GL_ALPHA,\r\n    'luminance': GL_LUMINANCE,\r\n    'luminance alpha': GL_LUMINANCE_ALPHA,\r\n    'rgb': GL_RGB,\r\n    'rgba': GL_RGBA$1,\r\n    'rgba4': GL_RGBA4,\r\n    'rgb5 a1': GL_RGB5_A1,\r\n    'rgb565': GL_RGB565\r\n  };\r\n\r\n  var compressedTextureFormats = {};\r\n\r\n  if (extensions.ext_srgb) {\r\n    textureFormats.srgb = GL_SRGB_EXT;\r\n    textureFormats.srgba = GL_SRGB_ALPHA_EXT;\r\n  }\r\n\r\n  if (extensions.oes_texture_float) {\r\n    textureTypes.float32 = textureTypes.float = GL_FLOAT$4;\r\n  }\r\n\r\n  if (extensions.oes_texture_half_float) {\r\n    textureTypes['float16'] = textureTypes['half float'] = GL_HALF_FLOAT_OES$1;\r\n  }\r\n\r\n  if (extensions.webgl_depth_texture) {\r\n    extend(textureFormats, {\r\n      'depth': GL_DEPTH_COMPONENT,\r\n      'depth stencil': GL_DEPTH_STENCIL\r\n    });\r\n\r\n    extend(textureTypes, {\r\n      'uint16': GL_UNSIGNED_SHORT$3,\r\n      'uint32': GL_UNSIGNED_INT$3,\r\n      'depth stencil': GL_UNSIGNED_INT_24_8_WEBGL$1\r\n    });\r\n  }\r\n\r\n  if (extensions.webgl_compressed_texture_s3tc) {\r\n    extend(compressedTextureFormats, {\r\n      'rgb s3tc dxt1': GL_COMPRESSED_RGB_S3TC_DXT1_EXT,\r\n      'rgba s3tc dxt1': GL_COMPRESSED_RGBA_S3TC_DXT1_EXT,\r\n      'rgba s3tc dxt3': GL_COMPRESSED_RGBA_S3TC_DXT3_EXT,\r\n      'rgba s3tc dxt5': GL_COMPRESSED_RGBA_S3TC_DXT5_EXT\r\n    });\r\n  }\r\n\r\n  if (extensions.webgl_compressed_texture_atc) {\r\n    extend(compressedTextureFormats, {\r\n      'rgb atc': GL_COMPRESSED_RGB_ATC_WEBGL,\r\n      'rgba atc explicit alpha': GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL,\r\n      'rgba atc interpolated alpha': GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL\r\n    });\r\n  }\r\n\r\n  if (extensions.webgl_compressed_texture_pvrtc) {\r\n    extend(compressedTextureFormats, {\r\n      'rgb pvrtc 4bppv1': GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG,\r\n      'rgb pvrtc 2bppv1': GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG,\r\n      'rgba pvrtc 4bppv1': GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,\r\n      'rgba pvrtc 2bppv1': GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG\r\n    });\r\n  }\r\n\r\n  if (extensions.webgl_compressed_texture_etc1) {\r\n    compressedTextureFormats['rgb etc1'] = GL_COMPRESSED_RGB_ETC1_WEBGL;\r\n  }\r\n\r\n  // Copy over all texture formats\r\n  var supportedCompressedFormats = Array.prototype.slice.call(\r\n    gl.getParameter(GL_COMPRESSED_TEXTURE_FORMATS));\r\n  Object.keys(compressedTextureFormats).forEach(function (name) {\r\n    var format = compressedTextureFormats[name];\r\n    if (supportedCompressedFormats.indexOf(format) >= 0) {\r\n      textureFormats[name] = format;\r\n    }\r\n  });\r\n\r\n  var supportedFormats = Object.keys(textureFormats);\r\n  limits.textureFormats = supportedFormats;\r\n\r\n  // associate with every format string its\r\n  // corresponding GL-value.\r\n  var textureFormatsInvert = [];\r\n  Object.keys(textureFormats).forEach(function (key) {\r\n    var val = textureFormats[key];\r\n    textureFormatsInvert[val] = key;\r\n  });\r\n\r\n  // associate with every type string its\r\n  // corresponding GL-value.\r\n  var textureTypesInvert = [];\r\n  Object.keys(textureTypes).forEach(function (key) {\r\n    var val = textureTypes[key];\r\n    textureTypesInvert[val] = key;\r\n  });\r\n\r\n  var magFiltersInvert = [];\r\n  Object.keys(magFilters).forEach(function (key) {\r\n    var val = magFilters[key];\r\n    magFiltersInvert[val] = key;\r\n  });\r\n\r\n  var minFiltersInvert = [];\r\n  Object.keys(minFilters).forEach(function (key) {\r\n    var val = minFilters[key];\r\n    minFiltersInvert[val] = key;\r\n  });\r\n\r\n  var wrapModesInvert = [];\r\n  Object.keys(wrapModes).forEach(function (key) {\r\n    var val = wrapModes[key];\r\n    wrapModesInvert[val] = key;\r\n  });\r\n\r\n  // colorFormats[] gives the format (channels) associated to an\r\n  // internalformat\r\n  var colorFormats = supportedFormats.reduce(function (color, key) {\r\n    var glenum = textureFormats[key];\r\n    if (glenum === GL_LUMINANCE ||\r\n        glenum === GL_ALPHA ||\r\n        glenum === GL_LUMINANCE ||\r\n        glenum === GL_LUMINANCE_ALPHA ||\r\n        glenum === GL_DEPTH_COMPONENT ||\r\n        glenum === GL_DEPTH_STENCIL) {\r\n      color[glenum] = glenum;\r\n    } else if (glenum === GL_RGB5_A1 || key.indexOf('rgba') >= 0) {\r\n      color[glenum] = GL_RGBA$1;\r\n    } else {\r\n      color[glenum] = GL_RGB;\r\n    }\r\n    return color\r\n  }, {});\r\n\r\n  function TexFlags () {\r\n    // format info\r\n    this.internalformat = GL_RGBA$1;\r\n    this.format = GL_RGBA$1;\r\n    this.type = GL_UNSIGNED_BYTE$5;\r\n    this.compressed = false;\r\n\r\n    // pixel storage\r\n    this.premultiplyAlpha = false;\r\n    this.flipY = false;\r\n    this.unpackAlignment = 1;\r\n    this.colorSpace = GL_BROWSER_DEFAULT_WEBGL;\r\n\r\n    // shape info\r\n    this.width = 0;\r\n    this.height = 0;\r\n    this.channels = 0;\r\n  }\r\n\r\n  function copyFlags (result, other) {\r\n    result.internalformat = other.internalformat;\r\n    result.format = other.format;\r\n    result.type = other.type;\r\n    result.compressed = other.compressed;\r\n\r\n    result.premultiplyAlpha = other.premultiplyAlpha;\r\n    result.flipY = other.flipY;\r\n    result.unpackAlignment = other.unpackAlignment;\r\n    result.colorSpace = other.colorSpace;\r\n\r\n    result.width = other.width;\r\n    result.height = other.height;\r\n    result.channels = other.channels;\r\n  }\r\n\r\n  function parseFlags (flags, options) {\r\n    if (typeof options !== 'object' || !options) {\r\n      return\r\n    }\r\n\r\n    if ('premultiplyAlpha' in options) {\r\n      check$1.type(options.premultiplyAlpha, 'boolean',\r\n        'invalid premultiplyAlpha');\r\n      flags.premultiplyAlpha = options.premultiplyAlpha;\r\n    }\r\n\r\n    if ('flipY' in options) {\r\n      check$1.type(options.flipY, 'boolean',\r\n        'invalid texture flip');\r\n      flags.flipY = options.flipY;\r\n    }\r\n\r\n    if ('alignment' in options) {\r\n      check$1.oneOf(options.alignment, [1, 2, 4, 8],\r\n        'invalid texture unpack alignment');\r\n      flags.unpackAlignment = options.alignment;\r\n    }\r\n\r\n    if ('colorSpace' in options) {\r\n      check$1.parameter(options.colorSpace, colorSpace,\r\n        'invalid colorSpace');\r\n      flags.colorSpace = colorSpace[options.colorSpace];\r\n    }\r\n\r\n    if ('type' in options) {\r\n      var type = options.type;\r\n      check$1(extensions.oes_texture_float ||\r\n        !(type === 'float' || type === 'float32'),\r\n        'you must enable the OES_texture_float extension in order to use floating point textures.');\r\n      check$1(extensions.oes_texture_half_float ||\r\n        !(type === 'half float' || type === 'float16'),\r\n        'you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.');\r\n      check$1(extensions.webgl_depth_texture ||\r\n        !(type === 'uint16' || type === 'uint32' || type === 'depth stencil'),\r\n        'you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.');\r\n      check$1.parameter(type, textureTypes,\r\n        'invalid texture type');\r\n      flags.type = textureTypes[type];\r\n    }\r\n\r\n    var w = flags.width;\r\n    var h = flags.height;\r\n    var c = flags.channels;\r\n    var hasChannels = false;\r\n    if ('shape' in options) {\r\n      check$1(Array.isArray(options.shape) && options.shape.length >= 2,\r\n        'shape must be an array');\r\n      w = options.shape[0];\r\n      h = options.shape[1];\r\n      if (options.shape.length === 3) {\r\n        c = options.shape[2];\r\n        check$1(c > 0 && c <= 4, 'invalid number of channels');\r\n        hasChannels = true;\r\n      }\r\n      check$1(w >= 0 && w <= limits.maxTextureSize, 'invalid width');\r\n      check$1(h >= 0 && h <= limits.maxTextureSize, 'invalid height');\r\n    } else {\r\n      if ('radius' in options) {\r\n        w = h = options.radius;\r\n        check$1(w >= 0 && w <= limits.maxTextureSize, 'invalid radius');\r\n      }\r\n      if ('width' in options) {\r\n        w = options.width;\r\n        check$1(w >= 0 && w <= limits.maxTextureSize, 'invalid width');\r\n      }\r\n      if ('height' in options) {\r\n        h = options.height;\r\n        check$1(h >= 0 && h <= limits.maxTextureSize, 'invalid height');\r\n      }\r\n      if ('channels' in options) {\r\n        c = options.channels;\r\n        check$1(c > 0 && c <= 4, 'invalid number of channels');\r\n        hasChannels = true;\r\n      }\r\n    }\r\n    flags.width = w | 0;\r\n    flags.height = h | 0;\r\n    flags.channels = c | 0;\r\n\r\n    var hasFormat = false;\r\n    if ('format' in options) {\r\n      var formatStr = options.format;\r\n      check$1(extensions.webgl_depth_texture ||\r\n        !(formatStr === 'depth' || formatStr === 'depth stencil'),\r\n        'you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.');\r\n      check$1.parameter(formatStr, textureFormats,\r\n        'invalid texture format');\r\n      var internalformat = flags.internalformat = textureFormats[formatStr];\r\n      flags.format = colorFormats[internalformat];\r\n      if (formatStr in textureTypes) {\r\n        if (!('type' in options)) {\r\n          flags.type = textureTypes[formatStr];\r\n        }\r\n      }\r\n      if (formatStr in compressedTextureFormats) {\r\n        flags.compressed = true;\r\n      }\r\n      hasFormat = true;\r\n    }\r\n\r\n    // Reconcile channels and format\r\n    if (!hasChannels && hasFormat) {\r\n      flags.channels = FORMAT_CHANNELS[flags.format];\r\n    } else if (hasChannels && !hasFormat) {\r\n      if (flags.channels !== CHANNELS_FORMAT[flags.format]) {\r\n        flags.format = flags.internalformat = CHANNELS_FORMAT[flags.channels];\r\n      }\r\n    } else if (hasFormat && hasChannels) {\r\n      check$1(\r\n        flags.channels === FORMAT_CHANNELS[flags.format],\r\n        'number of channels inconsistent with specified format');\r\n    }\r\n  }\r\n\r\n  function setFlags (flags) {\r\n    gl.pixelStorei(GL_UNPACK_FLIP_Y_WEBGL, flags.flipY);\r\n    gl.pixelStorei(GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL, flags.premultiplyAlpha);\r\n    gl.pixelStorei(GL_UNPACK_COLORSPACE_CONVERSION_WEBGL, flags.colorSpace);\r\n    gl.pixelStorei(GL_UNPACK_ALIGNMENT, flags.unpackAlignment);\r\n  }\r\n\r\n  // -------------------------------------------------------\r\n  // Tex image data\r\n  // -------------------------------------------------------\r\n  function TexImage () {\r\n    TexFlags.call(this);\r\n\r\n    this.xOffset = 0;\r\n    this.yOffset = 0;\r\n\r\n    // data\r\n    this.data = null;\r\n    this.needsFree = false;\r\n\r\n    // html element\r\n    this.element = null;\r\n\r\n    // copyTexImage info\r\n    this.needsCopy = false;\r\n  }\r\n\r\n  function parseImage (image, options) {\r\n    var data = null;\r\n    if (isPixelData(options)) {\r\n      data = options;\r\n    } else if (options) {\r\n      check$1.type(options, 'object', 'invalid pixel data type');\r\n      parseFlags(image, options);\r\n      if ('x' in options) {\r\n        image.xOffset = options.x | 0;\r\n      }\r\n      if ('y' in options) {\r\n        image.yOffset = options.y | 0;\r\n      }\r\n      if (isPixelData(options.data)) {\r\n        data = options.data;\r\n      }\r\n    }\r\n\r\n    check$1(\r\n      !image.compressed ||\r\n      data instanceof Uint8Array,\r\n      'compressed texture data must be stored in a uint8array');\r\n\r\n    if (options.copy) {\r\n      check$1(!data, 'can not specify copy and data field for the same texture');\r\n      var viewW = contextState.viewportWidth;\r\n      var viewH = contextState.viewportHeight;\r\n      image.width = image.width || (viewW - image.xOffset);\r\n      image.height = image.height || (viewH - image.yOffset);\r\n      image.needsCopy = true;\r\n      check$1(image.xOffset >= 0 && image.xOffset < viewW &&\r\n            image.yOffset >= 0 && image.yOffset < viewH &&\r\n            image.width > 0 && image.width <= viewW &&\r\n            image.height > 0 && image.height <= viewH,\r\n            'copy texture read out of bounds');\r\n    } else if (!data) {\r\n      image.width = image.width || 1;\r\n      image.height = image.height || 1;\r\n      image.channels = image.channels || 4;\r\n    } else if (isTypedArray(data)) {\r\n      image.channels = image.channels || 4;\r\n      image.data = data;\r\n      if (!('type' in options) && image.type === GL_UNSIGNED_BYTE$5) {\r\n        image.type = typedArrayCode$1(data);\r\n      }\r\n    } else if (isNumericArray(data)) {\r\n      image.channels = image.channels || 4;\r\n      convertData(image, data);\r\n      image.alignment = 1;\r\n      image.needsFree = true;\r\n    } else if (isNDArrayLike(data)) {\r\n      var array = data.data;\r\n      if (!Array.isArray(array) && image.type === GL_UNSIGNED_BYTE$5) {\r\n        image.type = typedArrayCode$1(array);\r\n      }\r\n      var shape = data.shape;\r\n      var stride = data.stride;\r\n      var shapeX, shapeY, shapeC, strideX, strideY, strideC;\r\n      if (shape.length === 3) {\r\n        shapeC = shape[2];\r\n        strideC = stride[2];\r\n      } else {\r\n        check$1(shape.length === 2, 'invalid ndarray pixel data, must be 2 or 3D');\r\n        shapeC = 1;\r\n        strideC = 1;\r\n      }\r\n      shapeX = shape[0];\r\n      shapeY = shape[1];\r\n      strideX = stride[0];\r\n      strideY = stride[1];\r\n      image.alignment = 1;\r\n      image.width = shapeX;\r\n      image.height = shapeY;\r\n      image.channels = shapeC;\r\n      image.format = image.internalformat = CHANNELS_FORMAT[shapeC];\r\n      image.needsFree = true;\r\n      transposeData(image, array, strideX, strideY, strideC, data.offset);\r\n    } else if (isCanvasElement(data) || isContext2D(data)) {\r\n      if (isCanvasElement(data)) {\r\n        image.element = data;\r\n      } else {\r\n        image.element = data.canvas;\r\n      }\r\n      image.width = image.element.width;\r\n      image.height = image.element.height;\r\n      image.channels = 4;\r\n    } else if (isBitmap(data)) {\r\n      image.element = data;\r\n      image.width = data.width;\r\n      image.height = data.height;\r\n      image.channels = 4;\r\n    } else if (isImageElement(data)) {\r\n      image.element = data;\r\n      image.width = data.naturalWidth;\r\n      image.height = data.naturalHeight;\r\n      image.channels = 4;\r\n    } else if (isVideoElement(data)) {\r\n      image.element = data;\r\n      image.width = data.videoWidth;\r\n      image.height = data.videoHeight;\r\n      image.channels = 4;\r\n    } else if (isRectArray(data)) {\r\n      var w = image.width || data[0].length;\r\n      var h = image.height || data.length;\r\n      var c = image.channels;\r\n      if (isArrayLike(data[0][0])) {\r\n        c = c || data[0][0].length;\r\n      } else {\r\n        c = c || 1;\r\n      }\r\n      var arrayShape = flattenUtils.shape(data);\r\n      var n = 1;\r\n      for (var dd = 0; dd < arrayShape.length; ++dd) {\r\n        n *= arrayShape[dd];\r\n      }\r\n      var allocData = preConvert(image, n);\r\n      flattenUtils.flatten(data, arrayShape, '', allocData);\r\n      postConvert(image, allocData);\r\n      image.alignment = 1;\r\n      image.width = w;\r\n      image.height = h;\r\n      image.channels = c;\r\n      image.format = image.internalformat = CHANNELS_FORMAT[c];\r\n      image.needsFree = true;\r\n    }\r\n\r\n    if (image.type === GL_FLOAT$4) {\r\n      check$1(limits.extensions.indexOf('oes_texture_float') >= 0,\r\n        'oes_texture_float extension not enabled');\r\n    } else if (image.type === GL_HALF_FLOAT_OES$1) {\r\n      check$1(limits.extensions.indexOf('oes_texture_half_float') >= 0,\r\n        'oes_texture_half_float extension not enabled');\r\n    }\r\n\r\n    // do compressed texture  validation here.\r\n  }\r\n\r\n  function setImage (info, target, miplevel) {\r\n    var element = info.element;\r\n    var data = info.data;\r\n    var internalformat = info.internalformat;\r\n    var format = info.format;\r\n    var type = info.type;\r\n    var width = info.width;\r\n    var height = info.height;\r\n    var channels = info.channels;\r\n\r\n    setFlags(info);\r\n\r\n    if (element) {\r\n      gl.texImage2D(target, miplevel, format, format, type, element);\r\n    } else if (info.compressed) {\r\n      gl.compressedTexImage2D(target, miplevel, internalformat, width, height, 0, data);\r\n    } else if (info.needsCopy) {\r\n      reglPoll();\r\n      gl.copyTexImage2D(\r\n        target, miplevel, format, info.xOffset, info.yOffset, width, height, 0);\r\n    } else {\r\n      var nullData = !data;\r\n      if (nullData) {\r\n        data = pool.zero.allocType(type, width * height * channels);\r\n      }\r\n\r\n      gl.texImage2D(target, miplevel, format, width, height, 0, format, type, data);\r\n\r\n      if (nullData && data) {\r\n        pool.zero.freeType(data);\r\n      }\r\n    }\r\n  }\r\n\r\n  function setSubImage (info, target, x, y, miplevel) {\r\n    var element = info.element;\r\n    var data = info.data;\r\n    var internalformat = info.internalformat;\r\n    var format = info.format;\r\n    var type = info.type;\r\n    var width = info.width;\r\n    var height = info.height;\r\n\r\n    setFlags(info);\r\n\r\n    if (element) {\r\n      gl.texSubImage2D(\r\n        target, miplevel, x, y, format, type, element);\r\n    } else if (info.compressed) {\r\n      gl.compressedTexSubImage2D(\r\n        target, miplevel, x, y, internalformat, width, height, data);\r\n    } else if (info.needsCopy) {\r\n      reglPoll();\r\n      gl.copyTexSubImage2D(\r\n        target, miplevel, x, y, info.xOffset, info.yOffset, width, height);\r\n    } else {\r\n      gl.texSubImage2D(\r\n        target, miplevel, x, y, width, height, format, type, data);\r\n    }\r\n  }\r\n\r\n  // texImage pool\r\n  var imagePool = [];\r\n\r\n  function allocImage () {\r\n    return imagePool.pop() || new TexImage()\r\n  }\r\n\r\n  function freeImage (image) {\r\n    if (image.needsFree) {\r\n      pool.freeType(image.data);\r\n    }\r\n    TexImage.call(image);\r\n    imagePool.push(image);\r\n  }\r\n\r\n  // -------------------------------------------------------\r\n  // Mip map\r\n  // -------------------------------------------------------\r\n  function MipMap () {\r\n    TexFlags.call(this);\r\n\r\n    this.genMipmaps = false;\r\n    this.mipmapHint = GL_DONT_CARE;\r\n    this.mipmask = 0;\r\n    this.images = Array(16);\r\n  }\r\n\r\n  function parseMipMapFromShape (mipmap, width, height) {\r\n    var img = mipmap.images[0] = allocImage();\r\n    mipmap.mipmask = 1;\r\n    img.width = mipmap.width = width;\r\n    img.height = mipmap.height = height;\r\n    img.channels = mipmap.channels = 4;\r\n  }\r\n\r\n  function parseMipMapFromObject (mipmap, options) {\r\n    var imgData = null;\r\n    if (isPixelData(options)) {\r\n      imgData = mipmap.images[0] = allocImage();\r\n      copyFlags(imgData, mipmap);\r\n      parseImage(imgData, options);\r\n      mipmap.mipmask = 1;\r\n    } else {\r\n      parseFlags(mipmap, options);\r\n      if (Array.isArray(options.mipmap)) {\r\n        var mipData = options.mipmap;\r\n        for (var i = 0; i < mipData.length; ++i) {\r\n          imgData = mipmap.images[i] = allocImage();\r\n          copyFlags(imgData, mipmap);\r\n          imgData.width >>= i;\r\n          imgData.height >>= i;\r\n          parseImage(imgData, mipData[i]);\r\n          mipmap.mipmask |= (1 << i);\r\n        }\r\n      } else {\r\n        imgData = mipmap.images[0] = allocImage();\r\n        copyFlags(imgData, mipmap);\r\n        parseImage(imgData, options);\r\n        mipmap.mipmask = 1;\r\n      }\r\n    }\r\n    copyFlags(mipmap, mipmap.images[0]);\r\n\r\n    // For textures of the compressed format WEBGL_compressed_texture_s3tc\r\n    // we must have that\r\n    //\r\n    // \"When level equals zero width and height must be a multiple of 4.\r\n    // When level is greater than 0 width and height must be 0, 1, 2 or a multiple of 4. \"\r\n    //\r\n    // but we do not yet support having multiple mipmap levels for compressed textures,\r\n    // so we only test for level zero.\r\n\r\n    if (mipmap.compressed &&\r\n        (mipmap.internalformat === GL_COMPRESSED_RGB_S3TC_DXT1_EXT) ||\r\n        (mipmap.internalformat === GL_COMPRESSED_RGBA_S3TC_DXT1_EXT) ||\r\n        (mipmap.internalformat === GL_COMPRESSED_RGBA_S3TC_DXT3_EXT) ||\r\n        (mipmap.internalformat === GL_COMPRESSED_RGBA_S3TC_DXT5_EXT)) {\r\n      check$1(mipmap.width % 4 === 0 &&\r\n            mipmap.height % 4 === 0,\r\n            'for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4');\r\n    }\r\n  }\r\n\r\n  function setMipMap (mipmap, target) {\r\n    var images = mipmap.images;\r\n    for (var i = 0; i < images.length; ++i) {\r\n      if (!images[i]) {\r\n        return\r\n      }\r\n      setImage(images[i], target, i);\r\n    }\r\n  }\r\n\r\n  var mipPool = [];\r\n\r\n  function allocMipMap () {\r\n    var result = mipPool.pop() || new MipMap();\r\n    TexFlags.call(result);\r\n    result.mipmask = 0;\r\n    for (var i = 0; i < 16; ++i) {\r\n      result.images[i] = null;\r\n    }\r\n    return result\r\n  }\r\n\r\n  function freeMipMap (mipmap) {\r\n    var images = mipmap.images;\r\n    for (var i = 0; i < images.length; ++i) {\r\n      if (images[i]) {\r\n        freeImage(images[i]);\r\n      }\r\n      images[i] = null;\r\n    }\r\n    mipPool.push(mipmap);\r\n  }\r\n\r\n  // -------------------------------------------------------\r\n  // Tex info\r\n  // -------------------------------------------------------\r\n  function TexInfo () {\r\n    this.minFilter = GL_NEAREST$1;\r\n    this.magFilter = GL_NEAREST$1;\r\n\r\n    this.wrapS = GL_CLAMP_TO_EDGE$1;\r\n    this.wrapT = GL_CLAMP_TO_EDGE$1;\r\n\r\n    this.anisotropic = 1;\r\n\r\n    this.genMipmaps = false;\r\n    this.mipmapHint = GL_DONT_CARE;\r\n  }\r\n\r\n  function parseTexInfo (info, options) {\r\n    if ('min' in options) {\r\n      var minFilter = options.min;\r\n      check$1.parameter(minFilter, minFilters);\r\n      info.minFilter = minFilters[minFilter];\r\n      if (MIPMAP_FILTERS.indexOf(info.minFilter) >= 0 && !('faces' in options)) {\r\n        info.genMipmaps = true;\r\n      }\r\n    }\r\n\r\n    if ('mag' in options) {\r\n      var magFilter = options.mag;\r\n      check$1.parameter(magFilter, magFilters);\r\n      info.magFilter = magFilters[magFilter];\r\n    }\r\n\r\n    var wrapS = info.wrapS;\r\n    var wrapT = info.wrapT;\r\n    if ('wrap' in options) {\r\n      var wrap = options.wrap;\r\n      if (typeof wrap === 'string') {\r\n        check$1.parameter(wrap, wrapModes);\r\n        wrapS = wrapT = wrapModes[wrap];\r\n      } else if (Array.isArray(wrap)) {\r\n        check$1.parameter(wrap[0], wrapModes);\r\n        check$1.parameter(wrap[1], wrapModes);\r\n        wrapS = wrapModes[wrap[0]];\r\n        wrapT = wrapModes[wrap[1]];\r\n      }\r\n    } else {\r\n      if ('wrapS' in options) {\r\n        var optWrapS = options.wrapS;\r\n        check$1.parameter(optWrapS, wrapModes);\r\n        wrapS = wrapModes[optWrapS];\r\n      }\r\n      if ('wrapT' in options) {\r\n        var optWrapT = options.wrapT;\r\n        check$1.parameter(optWrapT, wrapModes);\r\n        wrapT = wrapModes[optWrapT];\r\n      }\r\n    }\r\n    info.wrapS = wrapS;\r\n    info.wrapT = wrapT;\r\n\r\n    if ('anisotropic' in options) {\r\n      var anisotropic = options.anisotropic;\r\n      check$1(typeof anisotropic === 'number' &&\r\n         anisotropic >= 1 && anisotropic <= limits.maxAnisotropic,\r\n        'aniso samples must be between 1 and ');\r\n      info.anisotropic = options.anisotropic;\r\n    }\r\n\r\n    if ('mipmap' in options) {\r\n      var hasMipMap = false;\r\n      switch (typeof options.mipmap) {\r\n        case 'string':\r\n          check$1.parameter(options.mipmap, mipmapHint,\r\n            'invalid mipmap hint');\r\n          info.mipmapHint = mipmapHint[options.mipmap];\r\n          info.genMipmaps = true;\r\n          hasMipMap = true;\r\n          break\r\n\r\n        case 'boolean':\r\n          hasMipMap = info.genMipmaps = options.mipmap;\r\n          break\r\n\r\n        case 'object':\r\n          check$1(Array.isArray(options.mipmap), 'invalid mipmap type');\r\n          info.genMipmaps = false;\r\n          hasMipMap = true;\r\n          break\r\n\r\n        default:\r\n          check$1.raise('invalid mipmap type');\r\n      }\r\n      if (hasMipMap && !('min' in options)) {\r\n        info.minFilter = GL_NEAREST_MIPMAP_NEAREST$1;\r\n      }\r\n    }\r\n  }\r\n\r\n  function setTexInfo (info, target) {\r\n    gl.texParameteri(target, GL_TEXTURE_MIN_FILTER, info.minFilter);\r\n    gl.texParameteri(target, GL_TEXTURE_MAG_FILTER, info.magFilter);\r\n    gl.texParameteri(target, GL_TEXTURE_WRAP_S, info.wrapS);\r\n    gl.texParameteri(target, GL_TEXTURE_WRAP_T, info.wrapT);\r\n    if (extensions.ext_texture_filter_anisotropic) {\r\n      gl.texParameteri(target, GL_TEXTURE_MAX_ANISOTROPY_EXT, info.anisotropic);\r\n    }\r\n    if (info.genMipmaps) {\r\n      gl.hint(GL_GENERATE_MIPMAP_HINT, info.mipmapHint);\r\n      gl.generateMipmap(target);\r\n    }\r\n  }\r\n\r\n  // -------------------------------------------------------\r\n  // Full texture object\r\n  // -------------------------------------------------------\r\n  var textureCount = 0;\r\n  var textureSet = {};\r\n  var numTexUnits = limits.maxTextureUnits;\r\n  var textureUnits = Array(numTexUnits).map(function () {\r\n    return null\r\n  });\r\n\r\n  function REGLTexture (target) {\r\n    TexFlags.call(this);\r\n    this.mipmask = 0;\r\n    this.internalformat = GL_RGBA$1;\r\n\r\n    this.id = textureCount++;\r\n\r\n    this.refCount = 1;\r\n\r\n    this.target = target;\r\n    this.texture = gl.createTexture();\r\n\r\n    this.unit = -1;\r\n    this.bindCount = 0;\r\n\r\n    this.texInfo = new TexInfo();\r\n\r\n    if (config.profile) {\r\n      this.stats = {size: 0};\r\n    }\r\n  }\r\n\r\n  function tempBind (texture) {\r\n    gl.activeTexture(GL_TEXTURE0$1);\r\n    gl.bindTexture(texture.target, texture.texture);\r\n  }\r\n\r\n  function tempRestore () {\r\n    var prev = textureUnits[0];\r\n    if (prev) {\r\n      gl.bindTexture(prev.target, prev.texture);\r\n    } else {\r\n      gl.bindTexture(GL_TEXTURE_2D$1, null);\r\n    }\r\n  }\r\n\r\n  function destroy (texture) {\r\n    var handle = texture.texture;\r\n    check$1(handle, 'must not double destroy texture');\r\n    var unit = texture.unit;\r\n    var target = texture.target;\r\n    if (unit >= 0) {\r\n      gl.activeTexture(GL_TEXTURE0$1 + unit);\r\n      gl.bindTexture(target, null);\r\n      textureUnits[unit] = null;\r\n    }\r\n    gl.deleteTexture(handle);\r\n    texture.texture = null;\r\n    texture.params = null;\r\n    texture.pixels = null;\r\n    texture.refCount = 0;\r\n    delete textureSet[texture.id];\r\n    stats.textureCount--;\r\n  }\r\n\r\n  extend(REGLTexture.prototype, {\r\n    bind: function () {\r\n      var texture = this;\r\n      texture.bindCount += 1;\r\n      var unit = texture.unit;\r\n      if (unit < 0) {\r\n        for (var i = 0; i < numTexUnits; ++i) {\r\n          var other = textureUnits[i];\r\n          if (other) {\r\n            if (other.bindCount > 0) {\r\n              continue\r\n            }\r\n            other.unit = -1;\r\n          }\r\n          textureUnits[i] = texture;\r\n          unit = i;\r\n          break\r\n        }\r\n        if (unit >= numTexUnits) {\r\n          check$1.raise('insufficient number of texture units');\r\n        }\r\n        if (config.profile && stats.maxTextureUnits < (unit + 1)) {\r\n          stats.maxTextureUnits = unit + 1; // +1, since the units are zero-based\r\n        }\r\n        texture.unit = unit;\r\n        gl.activeTexture(GL_TEXTURE0$1 + unit);\r\n        gl.bindTexture(texture.target, texture.texture);\r\n      }\r\n      return unit\r\n    },\r\n\r\n    unbind: function () {\r\n      this.bindCount -= 1;\r\n    },\r\n\r\n    decRef: function () {\r\n      if (--this.refCount <= 0) {\r\n        destroy(this);\r\n      }\r\n    }\r\n  });\r\n\r\n  function createTexture2D (a, b) {\r\n    var texture = new REGLTexture(GL_TEXTURE_2D$1);\r\n    textureSet[texture.id] = texture;\r\n    stats.textureCount++;\r\n\r\n    function reglTexture2D (a, b) {\r\n      var texInfo = texture.texInfo;\r\n      TexInfo.call(texInfo);\r\n      var mipData = allocMipMap();\r\n\r\n      if (typeof a === 'number') {\r\n        if (typeof b === 'number') {\r\n          parseMipMapFromShape(mipData, a | 0, b | 0);\r\n        } else {\r\n          parseMipMapFromShape(mipData, a | 0, a | 0);\r\n        }\r\n      } else if (a) {\r\n        check$1.type(a, 'object', 'invalid arguments to regl.texture');\r\n        parseTexInfo(texInfo, a);\r\n        parseMipMapFromObject(mipData, a);\r\n      } else {\r\n        // empty textures get assigned a default shape of 1x1\r\n        parseMipMapFromShape(mipData, 1, 1);\r\n      }\r\n\r\n      if (texInfo.genMipmaps) {\r\n        mipData.mipmask = (mipData.width << 1) - 1;\r\n      }\r\n      texture.mipmask = mipData.mipmask;\r\n\r\n      copyFlags(texture, mipData);\r\n\r\n      check$1.texture2D(texInfo, mipData, limits);\r\n      texture.internalformat = mipData.internalformat;\r\n\r\n      reglTexture2D.width = mipData.width;\r\n      reglTexture2D.height = mipData.height;\r\n\r\n      tempBind(texture);\r\n      setMipMap(mipData, GL_TEXTURE_2D$1);\r\n      setTexInfo(texInfo, GL_TEXTURE_2D$1);\r\n      tempRestore();\r\n\r\n      freeMipMap(mipData);\r\n\r\n      if (config.profile) {\r\n        texture.stats.size = getTextureSize(\r\n          texture.internalformat,\r\n          texture.type,\r\n          mipData.width,\r\n          mipData.height,\r\n          texInfo.genMipmaps,\r\n          false);\r\n      }\r\n      reglTexture2D.format = textureFormatsInvert[texture.internalformat];\r\n      reglTexture2D.type = textureTypesInvert[texture.type];\r\n\r\n      reglTexture2D.mag = magFiltersInvert[texInfo.magFilter];\r\n      reglTexture2D.min = minFiltersInvert[texInfo.minFilter];\r\n\r\n      reglTexture2D.wrapS = wrapModesInvert[texInfo.wrapS];\r\n      reglTexture2D.wrapT = wrapModesInvert[texInfo.wrapT];\r\n\r\n      return reglTexture2D\r\n    }\r\n\r\n    function subimage (image, x_, y_, level_) {\r\n      check$1(!!image, 'must specify image data');\r\n\r\n      var x = x_ | 0;\r\n      var y = y_ | 0;\r\n      var level = level_ | 0;\r\n\r\n      var imageData = allocImage();\r\n      copyFlags(imageData, texture);\r\n      imageData.width = 0;\r\n      imageData.height = 0;\r\n      parseImage(imageData, image);\r\n      imageData.width = imageData.width || ((texture.width >> level) - x);\r\n      imageData.height = imageData.height || ((texture.height >> level) - y);\r\n\r\n      check$1(\r\n        texture.type === imageData.type &&\r\n        texture.format === imageData.format &&\r\n        texture.internalformat === imageData.internalformat,\r\n        'incompatible format for texture.subimage');\r\n      check$1(\r\n        x >= 0 && y >= 0 &&\r\n        x + imageData.width <= texture.width &&\r\n        y + imageData.height <= texture.height,\r\n        'texture.subimage write out of bounds');\r\n      check$1(\r\n        texture.mipmask & (1 << level),\r\n        'missing mipmap data');\r\n      check$1(\r\n        imageData.data || imageData.element || imageData.needsCopy,\r\n        'missing image data');\r\n\r\n      tempBind(texture);\r\n      setSubImage(imageData, GL_TEXTURE_2D$1, x, y, level);\r\n      tempRestore();\r\n\r\n      freeImage(imageData);\r\n\r\n      return reglTexture2D\r\n    }\r\n\r\n    function resize (w_, h_) {\r\n      var w = w_ | 0;\r\n      var h = (h_ | 0) || w;\r\n      if (w === texture.width && h === texture.height) {\r\n        return reglTexture2D\r\n      }\r\n\r\n      reglTexture2D.width = texture.width = w;\r\n      reglTexture2D.height = texture.height = h;\r\n\r\n      tempBind(texture);\r\n\r\n      var data;\r\n      var channels = texture.channels;\r\n      var type = texture.type;\r\n\r\n      for (var i = 0; texture.mipmask >> i; ++i) {\r\n        var _w = w >> i;\r\n        var _h = h >> i;\r\n        if (!_w || !_h) break\r\n        data = pool.zero.allocType(type, _w * _h * channels);\r\n        gl.texImage2D(\r\n          GL_TEXTURE_2D$1,\r\n          i,\r\n          texture.format,\r\n          _w,\r\n          _h,\r\n          0,\r\n          texture.format,\r\n          texture.type,\r\n          data);\r\n        if (data) pool.zero.freeType(data);\r\n      }\r\n      tempRestore();\r\n\r\n      // also, recompute the texture size.\r\n      if (config.profile) {\r\n        texture.stats.size = getTextureSize(\r\n          texture.internalformat,\r\n          texture.type,\r\n          w,\r\n          h,\r\n          false,\r\n          false);\r\n      }\r\n\r\n      return reglTexture2D\r\n    }\r\n\r\n    reglTexture2D(a, b);\r\n\r\n    reglTexture2D.subimage = subimage;\r\n    reglTexture2D.resize = resize;\r\n    reglTexture2D._reglType = 'texture2d';\r\n    reglTexture2D._texture = texture;\r\n    if (config.profile) {\r\n      reglTexture2D.stats = texture.stats;\r\n    }\r\n    reglTexture2D.destroy = function () {\r\n      texture.decRef();\r\n    };\r\n\r\n    return reglTexture2D\r\n  }\r\n\r\n  function createTextureCube (a0, a1, a2, a3, a4, a5) {\r\n    var texture = new REGLTexture(GL_TEXTURE_CUBE_MAP$1);\r\n    textureSet[texture.id] = texture;\r\n    stats.cubeCount++;\r\n\r\n    var faces = new Array(6);\r\n\r\n    function reglTextureCube (a0, a1, a2, a3, a4, a5) {\r\n      var i;\r\n      var texInfo = texture.texInfo;\r\n      TexInfo.call(texInfo);\r\n      for (i = 0; i < 6; ++i) {\r\n        faces[i] = allocMipMap();\r\n      }\r\n\r\n      if (typeof a0 === 'number' || !a0) {\r\n        var s = (a0 | 0) || 1;\r\n        for (i = 0; i < 6; ++i) {\r\n          parseMipMapFromShape(faces[i], s, s);\r\n        }\r\n      } else if (typeof a0 === 'object') {\r\n        if (a1) {\r\n          parseMipMapFromObject(faces[0], a0);\r\n          parseMipMapFromObject(faces[1], a1);\r\n          parseMipMapFromObject(faces[2], a2);\r\n          parseMipMapFromObject(faces[3], a3);\r\n          parseMipMapFromObject(faces[4], a4);\r\n          parseMipMapFromObject(faces[5], a5);\r\n        } else {\r\n          parseTexInfo(texInfo, a0);\r\n          parseFlags(texture, a0);\r\n          if ('faces' in a0) {\r\n            var face_input = a0.faces;\r\n            check$1(Array.isArray(face_input) && face_input.length === 6,\r\n              'cube faces must be a length 6 array');\r\n            for (i = 0; i < 6; ++i) {\r\n              check$1(typeof face_input[i] === 'object' && !!face_input[i],\r\n                'invalid input for cube map face');\r\n              copyFlags(faces[i], texture);\r\n              parseMipMapFromObject(faces[i], face_input[i]);\r\n            }\r\n          } else {\r\n            for (i = 0; i < 6; ++i) {\r\n              parseMipMapFromObject(faces[i], a0);\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        check$1.raise('invalid arguments to cube map');\r\n      }\r\n\r\n      copyFlags(texture, faces[0]);\r\n\r\n      if (!limits.npotTextureCube) {\r\n        check$1(isPow2$1(texture.width) && isPow2$1(texture.height), 'your browser does not support non power or two texture dimensions');\r\n      }\r\n\r\n      if (texInfo.genMipmaps) {\r\n        texture.mipmask = (faces[0].width << 1) - 1;\r\n      } else {\r\n        texture.mipmask = faces[0].mipmask;\r\n      }\r\n\r\n      check$1.textureCube(texture, texInfo, faces, limits);\r\n      texture.internalformat = faces[0].internalformat;\r\n\r\n      reglTextureCube.width = faces[0].width;\r\n      reglTextureCube.height = faces[0].height;\r\n\r\n      tempBind(texture);\r\n      for (i = 0; i < 6; ++i) {\r\n        setMipMap(faces[i], GL_TEXTURE_CUBE_MAP_POSITIVE_X$1 + i);\r\n      }\r\n      setTexInfo(texInfo, GL_TEXTURE_CUBE_MAP$1);\r\n      tempRestore();\r\n\r\n      if (config.profile) {\r\n        texture.stats.size = getTextureSize(\r\n          texture.internalformat,\r\n          texture.type,\r\n          reglTextureCube.width,\r\n          reglTextureCube.height,\r\n          texInfo.genMipmaps,\r\n          true);\r\n      }\r\n\r\n      reglTextureCube.format = textureFormatsInvert[texture.internalformat];\r\n      reglTextureCube.type = textureTypesInvert[texture.type];\r\n\r\n      reglTextureCube.mag = magFiltersInvert[texInfo.magFilter];\r\n      reglTextureCube.min = minFiltersInvert[texInfo.minFilter];\r\n\r\n      reglTextureCube.wrapS = wrapModesInvert[texInfo.wrapS];\r\n      reglTextureCube.wrapT = wrapModesInvert[texInfo.wrapT];\r\n\r\n      for (i = 0; i < 6; ++i) {\r\n        freeMipMap(faces[i]);\r\n      }\r\n\r\n      return reglTextureCube\r\n    }\r\n\r\n    function subimage (face, image, x_, y_, level_) {\r\n      check$1(!!image, 'must specify image data');\r\n      check$1(typeof face === 'number' && face === (face | 0) &&\r\n        face >= 0 && face < 6, 'invalid face');\r\n\r\n      var x = x_ | 0;\r\n      var y = y_ | 0;\r\n      var level = level_ | 0;\r\n\r\n      var imageData = allocImage();\r\n      copyFlags(imageData, texture);\r\n      imageData.width = 0;\r\n      imageData.height = 0;\r\n      parseImage(imageData, image);\r\n      imageData.width = imageData.width || ((texture.width >> level) - x);\r\n      imageData.height = imageData.height || ((texture.height >> level) - y);\r\n\r\n      check$1(\r\n        texture.type === imageData.type &&\r\n        texture.format === imageData.format &&\r\n        texture.internalformat === imageData.internalformat,\r\n        'incompatible format for texture.subimage');\r\n      check$1(\r\n        x >= 0 && y >= 0 &&\r\n        x + imageData.width <= texture.width &&\r\n        y + imageData.height <= texture.height,\r\n        'texture.subimage write out of bounds');\r\n      check$1(\r\n        texture.mipmask & (1 << level),\r\n        'missing mipmap data');\r\n      check$1(\r\n        imageData.data || imageData.element || imageData.needsCopy,\r\n        'missing image data');\r\n\r\n      tempBind(texture);\r\n      setSubImage(imageData, GL_TEXTURE_CUBE_MAP_POSITIVE_X$1 + face, x, y, level);\r\n      tempRestore();\r\n\r\n      freeImage(imageData);\r\n\r\n      return reglTextureCube\r\n    }\r\n\r\n    function resize (radius_) {\r\n      var radius = radius_ | 0;\r\n      if (radius === texture.width) {\r\n        return\r\n      }\r\n\r\n      reglTextureCube.width = texture.width = radius;\r\n      reglTextureCube.height = texture.height = radius;\r\n\r\n      tempBind(texture);\r\n      for (var i = 0; i < 6; ++i) {\r\n        for (var j = 0; texture.mipmask >> j; ++j) {\r\n          gl.texImage2D(\r\n            GL_TEXTURE_CUBE_MAP_POSITIVE_X$1 + i,\r\n            j,\r\n            texture.format,\r\n            radius >> j,\r\n            radius >> j,\r\n            0,\r\n            texture.format,\r\n            texture.type,\r\n            null);\r\n        }\r\n      }\r\n      tempRestore();\r\n\r\n      if (config.profile) {\r\n        texture.stats.size = getTextureSize(\r\n          texture.internalformat,\r\n          texture.type,\r\n          reglTextureCube.width,\r\n          reglTextureCube.height,\r\n          false,\r\n          true);\r\n      }\r\n\r\n      return reglTextureCube\r\n    }\r\n\r\n    reglTextureCube(a0, a1, a2, a3, a4, a5);\r\n\r\n    reglTextureCube.subimage = subimage;\r\n    reglTextureCube.resize = resize;\r\n    reglTextureCube._reglType = 'textureCube';\r\n    reglTextureCube._texture = texture;\r\n    if (config.profile) {\r\n      reglTextureCube.stats = texture.stats;\r\n    }\r\n    reglTextureCube.destroy = function () {\r\n      texture.decRef();\r\n    };\r\n\r\n    return reglTextureCube\r\n  }\r\n\r\n  // Called when regl is destroyed\r\n  function destroyTextures () {\r\n    for (var i = 0; i < numTexUnits; ++i) {\r\n      gl.activeTexture(GL_TEXTURE0$1 + i);\r\n      gl.bindTexture(GL_TEXTURE_2D$1, null);\r\n      textureUnits[i] = null;\r\n    }\r\n    values(textureSet).forEach(destroy);\r\n\r\n    stats.cubeCount = 0;\r\n    stats.textureCount = 0;\r\n  }\r\n\r\n  if (config.profile) {\r\n    stats.getTotalTextureSize = function () {\r\n      var total = 0;\r\n      Object.keys(textureSet).forEach(function (key) {\r\n        total += textureSet[key].stats.size;\r\n      });\r\n      return total\r\n    };\r\n  }\r\n\r\n  function restoreTextures () {\r\n    for (var i = 0; i < numTexUnits; ++i) {\r\n      var tex = textureUnits[i];\r\n      if (tex) {\r\n        tex.bindCount = 0;\r\n        tex.unit = -1;\r\n        textureUnits[i] = null;\r\n      }\r\n    }\r\n\r\n    values(textureSet).forEach(function (texture) {\r\n      texture.texture = gl.createTexture();\r\n      gl.bindTexture(texture.target, texture.texture);\r\n      for (var i = 0; i < 32; ++i) {\r\n        if ((texture.mipmask & (1 << i)) === 0) {\r\n          continue\r\n        }\r\n        if (texture.target === GL_TEXTURE_2D$1) {\r\n          gl.texImage2D(GL_TEXTURE_2D$1,\r\n            i,\r\n            texture.internalformat,\r\n            texture.width >> i,\r\n            texture.height >> i,\r\n            0,\r\n            texture.internalformat,\r\n            texture.type,\r\n            null);\r\n        } else {\r\n          for (var j = 0; j < 6; ++j) {\r\n            gl.texImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X$1 + j,\r\n              i,\r\n              texture.internalformat,\r\n              texture.width >> i,\r\n              texture.height >> i,\r\n              0,\r\n              texture.internalformat,\r\n              texture.type,\r\n              null);\r\n          }\r\n        }\r\n      }\r\n      setTexInfo(texture.texInfo, texture.target);\r\n    });\r\n  }\r\n\r\n  return {\r\n    create2D: createTexture2D,\r\n    createCube: createTextureCube,\r\n    clear: destroyTextures,\r\n    getTexture: function (wrapper) {\r\n      return null\r\n    },\r\n    restore: restoreTextures\r\n  }\r\n}\n\nvar GL_RENDERBUFFER = 0x8D41;\r\n\r\nvar GL_RGBA4$1 = 0x8056;\r\nvar GL_RGB5_A1$1 = 0x8057;\r\nvar GL_RGB565$1 = 0x8D62;\r\nvar GL_DEPTH_COMPONENT16 = 0x81A5;\r\nvar GL_STENCIL_INDEX8 = 0x8D48;\r\nvar GL_DEPTH_STENCIL$1 = 0x84F9;\r\n\r\nvar GL_SRGB8_ALPHA8_EXT = 0x8C43;\r\n\r\nvar GL_RGBA32F_EXT = 0x8814;\r\n\r\nvar GL_RGBA16F_EXT = 0x881A;\r\nvar GL_RGB16F_EXT = 0x881B;\r\n\r\nvar FORMAT_SIZES = [];\r\n\r\nFORMAT_SIZES[GL_RGBA4$1] = 2;\r\nFORMAT_SIZES[GL_RGB5_A1$1] = 2;\r\nFORMAT_SIZES[GL_RGB565$1] = 2;\r\n\r\nFORMAT_SIZES[GL_DEPTH_COMPONENT16] = 2;\r\nFORMAT_SIZES[GL_STENCIL_INDEX8] = 1;\r\nFORMAT_SIZES[GL_DEPTH_STENCIL$1] = 4;\r\n\r\nFORMAT_SIZES[GL_SRGB8_ALPHA8_EXT] = 4;\r\nFORMAT_SIZES[GL_RGBA32F_EXT] = 16;\r\nFORMAT_SIZES[GL_RGBA16F_EXT] = 8;\r\nFORMAT_SIZES[GL_RGB16F_EXT] = 6;\r\n\r\nfunction getRenderbufferSize (format, width, height) {\r\n  return FORMAT_SIZES[format] * width * height\r\n}\r\n\r\nvar wrapRenderbuffers = function (gl, extensions, limits, stats, config) {\r\n  var formatTypes = {\r\n    'rgba4': GL_RGBA4$1,\r\n    'rgb565': GL_RGB565$1,\r\n    'rgb5 a1': GL_RGB5_A1$1,\r\n    'depth': GL_DEPTH_COMPONENT16,\r\n    'stencil': GL_STENCIL_INDEX8,\r\n    'depth stencil': GL_DEPTH_STENCIL$1\r\n  };\r\n\r\n  if (extensions.ext_srgb) {\r\n    formatTypes['srgba'] = GL_SRGB8_ALPHA8_EXT;\r\n  }\r\n\r\n  if (extensions.ext_color_buffer_half_float) {\r\n    formatTypes['rgba16f'] = GL_RGBA16F_EXT;\r\n    formatTypes['rgb16f'] = GL_RGB16F_EXT;\r\n  }\r\n\r\n  if (extensions.webgl_color_buffer_float) {\r\n    formatTypes['rgba32f'] = GL_RGBA32F_EXT;\r\n  }\r\n\r\n  var formatTypesInvert = [];\r\n  Object.keys(formatTypes).forEach(function (key) {\r\n    var val = formatTypes[key];\r\n    formatTypesInvert[val] = key;\r\n  });\r\n\r\n  var renderbufferCount = 0;\r\n  var renderbufferSet = {};\r\n\r\n  function REGLRenderbuffer (renderbuffer) {\r\n    this.id = renderbufferCount++;\r\n    this.refCount = 1;\r\n\r\n    this.renderbuffer = renderbuffer;\r\n\r\n    this.format = GL_RGBA4$1;\r\n    this.width = 0;\r\n    this.height = 0;\r\n\r\n    if (config.profile) {\r\n      this.stats = {size: 0};\r\n    }\r\n  }\r\n\r\n  REGLRenderbuffer.prototype.decRef = function () {\r\n    if (--this.refCount <= 0) {\r\n      destroy(this);\r\n    }\r\n  };\r\n\r\n  function destroy (rb) {\r\n    var handle = rb.renderbuffer;\r\n    check$1(handle, 'must not double destroy renderbuffer');\r\n    gl.bindRenderbuffer(GL_RENDERBUFFER, null);\r\n    gl.deleteRenderbuffer(handle);\r\n    rb.renderbuffer = null;\r\n    rb.refCount = 0;\r\n    delete renderbufferSet[rb.id];\r\n    stats.renderbufferCount--;\r\n  }\r\n\r\n  function createRenderbuffer (a, b) {\r\n    var renderbuffer = new REGLRenderbuffer(gl.createRenderbuffer());\r\n    renderbufferSet[renderbuffer.id] = renderbuffer;\r\n    stats.renderbufferCount++;\r\n\r\n    function reglRenderbuffer (a, b) {\r\n      var w = 0;\r\n      var h = 0;\r\n      var format = GL_RGBA4$1;\r\n\r\n      if (typeof a === 'object' && a) {\r\n        var options = a;\r\n        if ('shape' in options) {\r\n          var shape = options.shape;\r\n          check$1(Array.isArray(shape) && shape.length >= 2,\r\n            'invalid renderbuffer shape');\r\n          w = shape[0] | 0;\r\n          h = shape[1] | 0;\r\n        } else {\r\n          if ('radius' in options) {\r\n            w = h = options.radius | 0;\r\n          }\r\n          if ('width' in options) {\r\n            w = options.width | 0;\r\n          }\r\n          if ('height' in options) {\r\n            h = options.height | 0;\r\n          }\r\n        }\r\n        if ('format' in options) {\r\n          check$1.parameter(options.format, formatTypes,\r\n            'invalid renderbuffer format');\r\n          format = formatTypes[options.format];\r\n        }\r\n      } else if (typeof a === 'number') {\r\n        w = a | 0;\r\n        if (typeof b === 'number') {\r\n          h = b | 0;\r\n        } else {\r\n          h = w;\r\n        }\r\n      } else if (!a) {\r\n        w = h = 1;\r\n      } else {\r\n        check$1.raise('invalid arguments to renderbuffer constructor');\r\n      }\r\n\r\n      // check shape\r\n      check$1(\r\n        w > 0 && h > 0 &&\r\n        w <= limits.maxRenderbufferSize && h <= limits.maxRenderbufferSize,\r\n        'invalid renderbuffer size');\r\n\r\n      if (w === renderbuffer.width &&\r\n          h === renderbuffer.height &&\r\n          format === renderbuffer.format) {\r\n        return\r\n      }\r\n\r\n      reglRenderbuffer.width = renderbuffer.width = w;\r\n      reglRenderbuffer.height = renderbuffer.height = h;\r\n      renderbuffer.format = format;\r\n\r\n      gl.bindRenderbuffer(GL_RENDERBUFFER, renderbuffer.renderbuffer);\r\n      gl.renderbufferStorage(GL_RENDERBUFFER, format, w, h);\r\n\r\n      check$1(\r\n        gl.getError() === 0,\r\n        'invalid render buffer format');\r\n\r\n      if (config.profile) {\r\n        renderbuffer.stats.size = getRenderbufferSize(renderbuffer.format, renderbuffer.width, renderbuffer.height);\r\n      }\r\n      reglRenderbuffer.format = formatTypesInvert[renderbuffer.format];\r\n\r\n      return reglRenderbuffer\r\n    }\r\n\r\n    function resize (w_, h_) {\r\n      var w = w_ | 0;\r\n      var h = (h_ | 0) || w;\r\n\r\n      if (w === renderbuffer.width && h === renderbuffer.height) {\r\n        return reglRenderbuffer\r\n      }\r\n\r\n      // check shape\r\n      check$1(\r\n        w > 0 && h > 0 &&\r\n        w <= limits.maxRenderbufferSize && h <= limits.maxRenderbufferSize,\r\n        'invalid renderbuffer size');\r\n\r\n      reglRenderbuffer.width = renderbuffer.width = w;\r\n      reglRenderbuffer.height = renderbuffer.height = h;\r\n\r\n      gl.bindRenderbuffer(GL_RENDERBUFFER, renderbuffer.renderbuffer);\r\n      gl.renderbufferStorage(GL_RENDERBUFFER, renderbuffer.format, w, h);\r\n\r\n      check$1(\r\n        gl.getError() === 0,\r\n        'invalid render buffer format');\r\n\r\n      // also, recompute size.\r\n      if (config.profile) {\r\n        renderbuffer.stats.size = getRenderbufferSize(\r\n          renderbuffer.format, renderbuffer.width, renderbuffer.height);\r\n      }\r\n\r\n      return reglRenderbuffer\r\n    }\r\n\r\n    reglRenderbuffer(a, b);\r\n\r\n    reglRenderbuffer.resize = resize;\r\n    reglRenderbuffer._reglType = 'renderbuffer';\r\n    reglRenderbuffer._renderbuffer = renderbuffer;\r\n    if (config.profile) {\r\n      reglRenderbuffer.stats = renderbuffer.stats;\r\n    }\r\n    reglRenderbuffer.destroy = function () {\r\n      renderbuffer.decRef();\r\n    };\r\n\r\n    return reglRenderbuffer\r\n  }\r\n\r\n  if (config.profile) {\r\n    stats.getTotalRenderbufferSize = function () {\r\n      var total = 0;\r\n      Object.keys(renderbufferSet).forEach(function (key) {\r\n        total += renderbufferSet[key].stats.size;\r\n      });\r\n      return total\r\n    };\r\n  }\r\n\r\n  function restoreRenderbuffers () {\r\n    values(renderbufferSet).forEach(function (rb) {\r\n      rb.renderbuffer = gl.createRenderbuffer();\r\n      gl.bindRenderbuffer(GL_RENDERBUFFER, rb.renderbuffer);\r\n      gl.renderbufferStorage(GL_RENDERBUFFER, rb.format, rb.width, rb.height);\r\n    });\r\n    gl.bindRenderbuffer(GL_RENDERBUFFER, null);\r\n  }\r\n\r\n  return {\r\n    create: createRenderbuffer,\r\n    clear: function () {\r\n      values(renderbufferSet).forEach(destroy);\r\n    },\r\n    restore: restoreRenderbuffers\r\n  }\r\n};\n\n// We store these constants so that the minifier can inline them\r\nvar GL_FRAMEBUFFER$1 = 0x8D40;\r\nvar GL_RENDERBUFFER$1 = 0x8D41;\r\n\r\nvar GL_TEXTURE_2D$2 = 0x0DE1;\r\nvar GL_TEXTURE_CUBE_MAP_POSITIVE_X$2 = 0x8515;\r\n\r\nvar GL_COLOR_ATTACHMENT0$1 = 0x8CE0;\r\nvar GL_DEPTH_ATTACHMENT = 0x8D00;\r\nvar GL_STENCIL_ATTACHMENT = 0x8D20;\r\nvar GL_DEPTH_STENCIL_ATTACHMENT = 0x821A;\r\n\r\nvar GL_FRAMEBUFFER_COMPLETE$1 = 0x8CD5;\r\nvar GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT = 0x8CD6;\r\nvar GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 0x8CD7;\r\nvar GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS = 0x8CD9;\r\nvar GL_FRAMEBUFFER_UNSUPPORTED = 0x8CDD;\r\n\r\nvar GL_HALF_FLOAT_OES$2 = 0x8D61;\r\nvar GL_UNSIGNED_BYTE$6 = 0x1401;\r\nvar GL_FLOAT$5 = 0x1406;\r\n\r\nvar GL_RGB$1 = 0x1907;\r\nvar GL_RGBA$2 = 0x1908;\r\n\r\nvar GL_DEPTH_COMPONENT$1 = 0x1902;\r\n\r\nvar colorTextureFormatEnums = [\r\n  GL_RGB$1,\r\n  GL_RGBA$2\r\n];\r\n\r\n// for every texture format, store\r\n// the number of channels\r\nvar textureFormatChannels = [];\r\ntextureFormatChannels[GL_RGBA$2] = 4;\r\ntextureFormatChannels[GL_RGB$1] = 3;\r\n\r\n// for every texture type, store\r\n// the size in bytes.\r\nvar textureTypeSizes = [];\r\ntextureTypeSizes[GL_UNSIGNED_BYTE$6] = 1;\r\ntextureTypeSizes[GL_FLOAT$5] = 4;\r\ntextureTypeSizes[GL_HALF_FLOAT_OES$2] = 2;\r\n\r\nvar GL_RGBA4$2 = 0x8056;\r\nvar GL_RGB5_A1$2 = 0x8057;\r\nvar GL_RGB565$2 = 0x8D62;\r\nvar GL_DEPTH_COMPONENT16$1 = 0x81A5;\r\nvar GL_STENCIL_INDEX8$1 = 0x8D48;\r\nvar GL_DEPTH_STENCIL$2 = 0x84F9;\r\n\r\nvar GL_SRGB8_ALPHA8_EXT$1 = 0x8C43;\r\n\r\nvar GL_RGBA32F_EXT$1 = 0x8814;\r\n\r\nvar GL_RGBA16F_EXT$1 = 0x881A;\r\nvar GL_RGB16F_EXT$1 = 0x881B;\r\n\r\nvar colorRenderbufferFormatEnums = [\r\n  GL_RGBA4$2,\r\n  GL_RGB5_A1$2,\r\n  GL_RGB565$2,\r\n  GL_SRGB8_ALPHA8_EXT$1,\r\n  GL_RGBA16F_EXT$1,\r\n  GL_RGB16F_EXT$1,\r\n  GL_RGBA32F_EXT$1\r\n];\r\n\r\nvar statusCode = {};\r\nstatusCode[GL_FRAMEBUFFER_COMPLETE$1] = 'complete';\r\nstatusCode[GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT] = 'incomplete attachment';\r\nstatusCode[GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS] = 'incomplete dimensions';\r\nstatusCode[GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT] = 'incomplete, missing attachment';\r\nstatusCode[GL_FRAMEBUFFER_UNSUPPORTED] = 'unsupported';\r\n\r\nfunction wrapFBOState (\r\n  gl,\r\n  extensions,\r\n  limits,\r\n  textureState,\r\n  renderbufferState,\r\n  stats) {\r\n  var framebufferState = {\r\n    cur: null,\r\n    next: null,\r\n    dirty: false,\r\n    setFBO: null\r\n  };\r\n\r\n  var colorTextureFormats = ['rgba'];\r\n  var colorRenderbufferFormats = ['rgba4', 'rgb565', 'rgb5 a1'];\r\n\r\n  if (extensions.ext_srgb) {\r\n    colorRenderbufferFormats.push('srgba');\r\n  }\r\n\r\n  if (extensions.ext_color_buffer_half_float) {\r\n    colorRenderbufferFormats.push('rgba16f', 'rgb16f');\r\n  }\r\n\r\n  if (extensions.webgl_color_buffer_float) {\r\n    colorRenderbufferFormats.push('rgba32f');\r\n  }\r\n\r\n  var colorTypes = ['uint8'];\r\n  if (extensions.oes_texture_half_float) {\r\n    colorTypes.push('half float', 'float16');\r\n  }\r\n  if (extensions.oes_texture_float) {\r\n    colorTypes.push('float', 'float32');\r\n  }\r\n\r\n  function FramebufferAttachment (target, texture, renderbuffer) {\r\n    this.target = target;\r\n    this.texture = texture;\r\n    this.renderbuffer = renderbuffer;\r\n\r\n    var w = 0;\r\n    var h = 0;\r\n    if (texture) {\r\n      w = texture.width;\r\n      h = texture.height;\r\n    } else if (renderbuffer) {\r\n      w = renderbuffer.width;\r\n      h = renderbuffer.height;\r\n    }\r\n    this.width = w;\r\n    this.height = h;\r\n  }\r\n\r\n  function decRef (attachment) {\r\n    if (attachment) {\r\n      if (attachment.texture) {\r\n        attachment.texture._texture.decRef();\r\n      }\r\n      if (attachment.renderbuffer) {\r\n        attachment.renderbuffer._renderbuffer.decRef();\r\n      }\r\n    }\r\n  }\r\n\r\n  function incRefAndCheckShape (attachment, width, height) {\r\n    if (!attachment) {\r\n      return\r\n    }\r\n    if (attachment.texture) {\r\n      var texture = attachment.texture._texture;\r\n      var tw = Math.max(1, texture.width);\r\n      var th = Math.max(1, texture.height);\r\n      check$1(tw === width && th === height,\r\n        'inconsistent width/height for supplied texture');\r\n      texture.refCount += 1;\r\n    } else {\r\n      var renderbuffer = attachment.renderbuffer._renderbuffer;\r\n      check$1(\r\n        renderbuffer.width === width && renderbuffer.height === height,\r\n        'inconsistent width/height for renderbuffer');\r\n      renderbuffer.refCount += 1;\r\n    }\r\n  }\r\n\r\n  function attach (location, attachment) {\r\n    if (attachment) {\r\n      if (attachment.texture) {\r\n        gl.framebufferTexture2D(\r\n          GL_FRAMEBUFFER$1,\r\n          location,\r\n          attachment.target,\r\n          attachment.texture._texture.texture,\r\n          0);\r\n      } else {\r\n        gl.framebufferRenderbuffer(\r\n          GL_FRAMEBUFFER$1,\r\n          location,\r\n          GL_RENDERBUFFER$1,\r\n          attachment.renderbuffer._renderbuffer.renderbuffer);\r\n      }\r\n    }\r\n  }\r\n\r\n  function parseAttachment (attachment) {\r\n    var target = GL_TEXTURE_2D$2;\r\n    var texture = null;\r\n    var renderbuffer = null;\r\n\r\n    var data = attachment;\r\n    if (typeof attachment === 'object') {\r\n      data = attachment.data;\r\n      if ('target' in attachment) {\r\n        target = attachment.target | 0;\r\n      }\r\n    }\r\n\r\n    check$1.type(data, 'function', 'invalid attachment data');\r\n\r\n    var type = data._reglType;\r\n    if (type === 'texture2d') {\r\n      texture = data;\r\n      check$1(target === GL_TEXTURE_2D$2);\r\n    } else if (type === 'textureCube') {\r\n      texture = data;\r\n      check$1(\r\n        target >= GL_TEXTURE_CUBE_MAP_POSITIVE_X$2 &&\r\n        target < GL_TEXTURE_CUBE_MAP_POSITIVE_X$2 + 6,\r\n        'invalid cube map target');\r\n    } else if (type === 'renderbuffer') {\r\n      renderbuffer = data;\r\n      target = GL_RENDERBUFFER$1;\r\n    } else {\r\n      check$1.raise('invalid regl object for attachment');\r\n    }\r\n\r\n    return new FramebufferAttachment(target, texture, renderbuffer)\r\n  }\r\n\r\n  function allocAttachment (\r\n    width,\r\n    height,\r\n    isTexture,\r\n    format,\r\n    type) {\r\n    if (isTexture) {\r\n      var texture = textureState.create2D({\r\n        width: width,\r\n        height: height,\r\n        format: format,\r\n        type: type\r\n      });\r\n      texture._texture.refCount = 0;\r\n      return new FramebufferAttachment(GL_TEXTURE_2D$2, texture, null)\r\n    } else {\r\n      var rb = renderbufferState.create({\r\n        width: width,\r\n        height: height,\r\n        format: format\r\n      });\r\n      rb._renderbuffer.refCount = 0;\r\n      return new FramebufferAttachment(GL_RENDERBUFFER$1, null, rb)\r\n    }\r\n  }\r\n\r\n  function unwrapAttachment (attachment) {\r\n    return attachment && (attachment.texture || attachment.renderbuffer)\r\n  }\r\n\r\n  function resizeAttachment (attachment, w, h) {\r\n    if (attachment) {\r\n      if (attachment.texture) {\r\n        attachment.texture.resize(w, h);\r\n      } else if (attachment.renderbuffer) {\r\n        attachment.renderbuffer.resize(w, h);\r\n      }\r\n      attachment.width = w;\r\n      attachment.height = h;\r\n    }\r\n  }\r\n\r\n  var framebufferCount = 0;\r\n  var framebufferSet = {};\r\n\r\n  function REGLFramebuffer () {\r\n    this.id = framebufferCount++;\r\n    framebufferSet[this.id] = this;\r\n\r\n    this.framebuffer = gl.createFramebuffer();\r\n    this.width = 0;\r\n    this.height = 0;\r\n\r\n    this.colorAttachments = [];\r\n    this.depthAttachment = null;\r\n    this.stencilAttachment = null;\r\n    this.depthStencilAttachment = null;\r\n  }\r\n\r\n  function decFBORefs (framebuffer) {\r\n    framebuffer.colorAttachments.forEach(decRef);\r\n    decRef(framebuffer.depthAttachment);\r\n    decRef(framebuffer.stencilAttachment);\r\n    decRef(framebuffer.depthStencilAttachment);\r\n  }\r\n\r\n  function destroy (framebuffer) {\r\n    var handle = framebuffer.framebuffer;\r\n    check$1(handle, 'must not double destroy framebuffer');\r\n    gl.deleteFramebuffer(handle);\r\n    framebuffer.framebuffer = null;\r\n    stats.framebufferCount--;\r\n    delete framebufferSet[framebuffer.id];\r\n  }\r\n\r\n  function updateFramebuffer (framebuffer) {\r\n    var i;\r\n\r\n    gl.bindFramebuffer(GL_FRAMEBUFFER$1, framebuffer.framebuffer);\r\n    var colorAttachments = framebuffer.colorAttachments;\r\n    for (i = 0; i < colorAttachments.length; ++i) {\r\n      attach(GL_COLOR_ATTACHMENT0$1 + i, colorAttachments[i]);\r\n    }\r\n    for (i = colorAttachments.length; i < limits.maxColorAttachments; ++i) {\r\n      gl.framebufferTexture2D(\r\n        GL_FRAMEBUFFER$1,\r\n        GL_COLOR_ATTACHMENT0$1 + i,\r\n        GL_TEXTURE_2D$2,\r\n        null,\r\n        0);\r\n    }\r\n\r\n    gl.framebufferTexture2D(\r\n      GL_FRAMEBUFFER$1,\r\n      GL_DEPTH_STENCIL_ATTACHMENT,\r\n      GL_TEXTURE_2D$2,\r\n      null,\r\n      0);\r\n    gl.framebufferTexture2D(\r\n      GL_FRAMEBUFFER$1,\r\n      GL_DEPTH_ATTACHMENT,\r\n      GL_TEXTURE_2D$2,\r\n      null,\r\n      0);\r\n    gl.framebufferTexture2D(\r\n      GL_FRAMEBUFFER$1,\r\n      GL_STENCIL_ATTACHMENT,\r\n      GL_TEXTURE_2D$2,\r\n      null,\r\n      0);\r\n\r\n    attach(GL_DEPTH_ATTACHMENT, framebuffer.depthAttachment);\r\n    attach(GL_STENCIL_ATTACHMENT, framebuffer.stencilAttachment);\r\n    attach(GL_DEPTH_STENCIL_ATTACHMENT, framebuffer.depthStencilAttachment);\r\n\r\n    // Check status code\r\n    var status = gl.checkFramebufferStatus(GL_FRAMEBUFFER$1);\r\n    if (!gl.isContextLost() && status !== GL_FRAMEBUFFER_COMPLETE$1) {\r\n      check$1.raise('framebuffer configuration not supported, status = ' +\r\n        statusCode[status]);\r\n    }\r\n\r\n    gl.bindFramebuffer(GL_FRAMEBUFFER$1, framebufferState.next ? framebufferState.next.framebuffer : null);\r\n    framebufferState.cur = framebufferState.next;\r\n\r\n    // FIXME: Clear error code here.  This is a work around for a bug in\r\n    // headless-gl\r\n    gl.getError();\r\n  }\r\n\r\n  function createFBO (a0, a1) {\r\n    var framebuffer = new REGLFramebuffer();\r\n    stats.framebufferCount++;\r\n\r\n    function reglFramebuffer (a, b) {\r\n      var i;\r\n\r\n      check$1(framebufferState.next !== framebuffer,\r\n        'can not update framebuffer which is currently in use');\r\n\r\n      var width = 0;\r\n      var height = 0;\r\n\r\n      var needsDepth = true;\r\n      var needsStencil = true;\r\n\r\n      var colorBuffer = null;\r\n      var colorTexture = true;\r\n      var colorFormat = 'rgba';\r\n      var colorType = 'uint8';\r\n      var colorCount = 1;\r\n\r\n      var depthBuffer = null;\r\n      var stencilBuffer = null;\r\n      var depthStencilBuffer = null;\r\n      var depthStencilTexture = false;\r\n\r\n      if (typeof a === 'number') {\r\n        width = a | 0;\r\n        height = (b | 0) || width;\r\n      } else if (!a) {\r\n        width = height = 1;\r\n      } else {\r\n        check$1.type(a, 'object', 'invalid arguments for framebuffer');\r\n        var options = a;\r\n\r\n        if ('shape' in options) {\r\n          var shape = options.shape;\r\n          check$1(Array.isArray(shape) && shape.length >= 2,\r\n            'invalid shape for framebuffer');\r\n          width = shape[0];\r\n          height = shape[1];\r\n        } else {\r\n          if ('radius' in options) {\r\n            width = height = options.radius;\r\n          }\r\n          if ('width' in options) {\r\n            width = options.width;\r\n          }\r\n          if ('height' in options) {\r\n            height = options.height;\r\n          }\r\n        }\r\n\r\n        if ('color' in options ||\r\n            'colors' in options) {\r\n          colorBuffer =\r\n            options.color ||\r\n            options.colors;\r\n          if (Array.isArray(colorBuffer)) {\r\n            check$1(\r\n              colorBuffer.length === 1 || extensions.webgl_draw_buffers,\r\n              'multiple render targets not supported');\r\n          }\r\n        }\r\n\r\n        if (!colorBuffer) {\r\n          if ('colorCount' in options) {\r\n            colorCount = options.colorCount | 0;\r\n            check$1(colorCount > 0, 'invalid color buffer count');\r\n          }\r\n\r\n          if ('colorTexture' in options) {\r\n            colorTexture = !!options.colorTexture;\r\n            colorFormat = 'rgba4';\r\n          }\r\n\r\n          if ('colorType' in options) {\r\n            colorType = options.colorType;\r\n            if (!colorTexture) {\r\n              if (colorType === 'half float' || colorType === 'float16') {\r\n                check$1(extensions.ext_color_buffer_half_float,\r\n                  'you must enable EXT_color_buffer_half_float to use 16-bit render buffers');\r\n                colorFormat = 'rgba16f';\r\n              } else if (colorType === 'float' || colorType === 'float32') {\r\n                check$1(extensions.webgl_color_buffer_float,\r\n                  'you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers');\r\n                colorFormat = 'rgba32f';\r\n              }\r\n            } else {\r\n              check$1(extensions.oes_texture_float ||\r\n                !(colorType === 'float' || colorType === 'float32'),\r\n                'you must enable OES_texture_float in order to use floating point framebuffer objects');\r\n              check$1(extensions.oes_texture_half_float ||\r\n                !(colorType === 'half float' || colorType === 'float16'),\r\n                'you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects');\r\n            }\r\n            check$1.oneOf(colorType, colorTypes, 'invalid color type');\r\n          }\r\n\r\n          if ('colorFormat' in options) {\r\n            colorFormat = options.colorFormat;\r\n            if (colorTextureFormats.indexOf(colorFormat) >= 0) {\r\n              colorTexture = true;\r\n            } else if (colorRenderbufferFormats.indexOf(colorFormat) >= 0) {\r\n              colorTexture = false;\r\n            } else {\r\n              if (colorTexture) {\r\n                check$1.oneOf(\r\n                  options.colorFormat, colorTextureFormats,\r\n                  'invalid color format for texture');\r\n              } else {\r\n                check$1.oneOf(\r\n                  options.colorFormat, colorRenderbufferFormats,\r\n                  'invalid color format for renderbuffer');\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        if ('depthTexture' in options || 'depthStencilTexture' in options) {\r\n          depthStencilTexture = !!(options.depthTexture ||\r\n            options.depthStencilTexture);\r\n          check$1(!depthStencilTexture || extensions.webgl_depth_texture,\r\n            'webgl_depth_texture extension not supported');\r\n        }\r\n\r\n        if ('depth' in options) {\r\n          if (typeof options.depth === 'boolean') {\r\n            needsDepth = options.depth;\r\n          } else {\r\n            depthBuffer = options.depth;\r\n            needsStencil = false;\r\n          }\r\n        }\r\n\r\n        if ('stencil' in options) {\r\n          if (typeof options.stencil === 'boolean') {\r\n            needsStencil = options.stencil;\r\n          } else {\r\n            stencilBuffer = options.stencil;\r\n            needsDepth = false;\r\n          }\r\n        }\r\n\r\n        if ('depthStencil' in options) {\r\n          if (typeof options.depthStencil === 'boolean') {\r\n            needsDepth = needsStencil = options.depthStencil;\r\n          } else {\r\n            depthStencilBuffer = options.depthStencil;\r\n            needsDepth = false;\r\n            needsStencil = false;\r\n          }\r\n        }\r\n      }\r\n\r\n      // parse attachments\r\n      var colorAttachments = null;\r\n      var depthAttachment = null;\r\n      var stencilAttachment = null;\r\n      var depthStencilAttachment = null;\r\n\r\n      // Set up color attachments\r\n      if (Array.isArray(colorBuffer)) {\r\n        colorAttachments = colorBuffer.map(parseAttachment);\r\n      } else if (colorBuffer) {\r\n        colorAttachments = [parseAttachment(colorBuffer)];\r\n      } else {\r\n        colorAttachments = new Array(colorCount);\r\n        for (i = 0; i < colorCount; ++i) {\r\n          colorAttachments[i] = allocAttachment(\r\n            width,\r\n            height,\r\n            colorTexture,\r\n            colorFormat,\r\n            colorType);\r\n        }\r\n      }\r\n\r\n      check$1(extensions.webgl_draw_buffers || colorAttachments.length <= 1,\r\n        'you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.');\r\n      check$1(colorAttachments.length <= limits.maxColorAttachments,\r\n        'too many color attachments, not supported');\r\n\r\n      width = width || colorAttachments[0].width;\r\n      height = height || colorAttachments[0].height;\r\n\r\n      if (depthBuffer) {\r\n        depthAttachment = parseAttachment(depthBuffer);\r\n      } else if (needsDepth && !needsStencil) {\r\n        depthAttachment = allocAttachment(\r\n          width,\r\n          height,\r\n          depthStencilTexture,\r\n          'depth',\r\n          'uint32');\r\n      }\r\n\r\n      if (stencilBuffer) {\r\n        stencilAttachment = parseAttachment(stencilBuffer);\r\n      } else if (needsStencil && !needsDepth) {\r\n        stencilAttachment = allocAttachment(\r\n          width,\r\n          height,\r\n          false,\r\n          'stencil',\r\n          'uint8');\r\n      }\r\n\r\n      if (depthStencilBuffer) {\r\n        depthStencilAttachment = parseAttachment(depthStencilBuffer);\r\n      } else if (!depthBuffer && !stencilBuffer && needsStencil && needsDepth) {\r\n        depthStencilAttachment = allocAttachment(\r\n          width,\r\n          height,\r\n          depthStencilTexture,\r\n          'depth stencil',\r\n          'depth stencil');\r\n      }\r\n\r\n      check$1(\r\n        (!!depthBuffer) + (!!stencilBuffer) + (!!depthStencilBuffer) <= 1,\r\n        'invalid framebuffer configuration, can specify exactly one depth/stencil attachment');\r\n\r\n      var commonColorAttachmentSize = null;\r\n\r\n      for (i = 0; i < colorAttachments.length; ++i) {\r\n        incRefAndCheckShape(colorAttachments[i], width, height);\r\n        check$1(!colorAttachments[i] ||\r\n          (colorAttachments[i].texture &&\r\n            colorTextureFormatEnums.indexOf(colorAttachments[i].texture._texture.format) >= 0) ||\r\n          (colorAttachments[i].renderbuffer &&\r\n            colorRenderbufferFormatEnums.indexOf(colorAttachments[i].renderbuffer._renderbuffer.format) >= 0),\r\n          'framebuffer color attachment ' + i + ' is invalid');\r\n\r\n        if (colorAttachments[i] && colorAttachments[i].texture) {\r\n          var colorAttachmentSize =\r\n              textureFormatChannels[colorAttachments[i].texture._texture.format] *\r\n              textureTypeSizes[colorAttachments[i].texture._texture.type];\r\n\r\n          if (commonColorAttachmentSize === null) {\r\n            commonColorAttachmentSize = colorAttachmentSize;\r\n          } else {\r\n            // We need to make sure that all color attachments have the same number of bitplanes\r\n            // (that is, the same numer of bits per pixel)\r\n            // This is required by the GLES2.0 standard. See the beginning of Chapter 4 in that document.\r\n            check$1(commonColorAttachmentSize === colorAttachmentSize,\r\n                  'all color attachments much have the same number of bits per pixel.');\r\n          }\r\n        }\r\n      }\r\n      incRefAndCheckShape(depthAttachment, width, height);\r\n      check$1(!depthAttachment ||\r\n        (depthAttachment.texture &&\r\n          depthAttachment.texture._texture.format === GL_DEPTH_COMPONENT$1) ||\r\n        (depthAttachment.renderbuffer &&\r\n          depthAttachment.renderbuffer._renderbuffer.format === GL_DEPTH_COMPONENT16$1),\r\n        'invalid depth attachment for framebuffer object');\r\n      incRefAndCheckShape(stencilAttachment, width, height);\r\n      check$1(!stencilAttachment ||\r\n        (stencilAttachment.renderbuffer &&\r\n          stencilAttachment.renderbuffer._renderbuffer.format === GL_STENCIL_INDEX8$1),\r\n        'invalid stencil attachment for framebuffer object');\r\n      incRefAndCheckShape(depthStencilAttachment, width, height);\r\n      check$1(!depthStencilAttachment ||\r\n        (depthStencilAttachment.texture &&\r\n          depthStencilAttachment.texture._texture.format === GL_DEPTH_STENCIL$2) ||\r\n        (depthStencilAttachment.renderbuffer &&\r\n          depthStencilAttachment.renderbuffer._renderbuffer.format === GL_DEPTH_STENCIL$2),\r\n        'invalid depth-stencil attachment for framebuffer object');\r\n\r\n      // decrement references\r\n      decFBORefs(framebuffer);\r\n\r\n      framebuffer.width = width;\r\n      framebuffer.height = height;\r\n\r\n      framebuffer.colorAttachments = colorAttachments;\r\n      framebuffer.depthAttachment = depthAttachment;\r\n      framebuffer.stencilAttachment = stencilAttachment;\r\n      framebuffer.depthStencilAttachment = depthStencilAttachment;\r\n\r\n      reglFramebuffer.color = colorAttachments.map(unwrapAttachment);\r\n      reglFramebuffer.depth = unwrapAttachment(depthAttachment);\r\n      reglFramebuffer.stencil = unwrapAttachment(stencilAttachment);\r\n      reglFramebuffer.depthStencil = unwrapAttachment(depthStencilAttachment);\r\n\r\n      reglFramebuffer.width = framebuffer.width;\r\n      reglFramebuffer.height = framebuffer.height;\r\n\r\n      updateFramebuffer(framebuffer);\r\n\r\n      return reglFramebuffer\r\n    }\r\n\r\n    function resize (w_, h_) {\r\n      check$1(framebufferState.next !== framebuffer,\r\n        'can not resize a framebuffer which is currently in use');\r\n\r\n      var w = Math.max(w_ | 0, 1);\r\n      var h = Math.max((h_ | 0) || w, 1);\r\n      if (w === framebuffer.width && h === framebuffer.height) {\r\n        return reglFramebuffer\r\n      }\r\n\r\n      // resize all buffers\r\n      var colorAttachments = framebuffer.colorAttachments;\r\n      for (var i = 0; i < colorAttachments.length; ++i) {\r\n        resizeAttachment(colorAttachments[i], w, h);\r\n      }\r\n      resizeAttachment(framebuffer.depthAttachment, w, h);\r\n      resizeAttachment(framebuffer.stencilAttachment, w, h);\r\n      resizeAttachment(framebuffer.depthStencilAttachment, w, h);\r\n\r\n      framebuffer.width = reglFramebuffer.width = w;\r\n      framebuffer.height = reglFramebuffer.height = h;\r\n\r\n      updateFramebuffer(framebuffer);\r\n\r\n      return reglFramebuffer\r\n    }\r\n\r\n    reglFramebuffer(a0, a1);\r\n\r\n    return extend(reglFramebuffer, {\r\n      resize: resize,\r\n      _reglType: 'framebuffer',\r\n      _framebuffer: framebuffer,\r\n      destroy: function () {\r\n        destroy(framebuffer);\r\n        decFBORefs(framebuffer);\r\n      },\r\n      use: function (block) {\r\n        framebufferState.setFBO({\r\n          framebuffer: reglFramebuffer\r\n        }, block);\r\n      }\r\n    })\r\n  }\r\n\r\n  function createCubeFBO (options) {\r\n    var faces = Array(6);\r\n\r\n    function reglFramebufferCube (a) {\r\n      var i;\r\n\r\n      check$1(faces.indexOf(framebufferState.next) < 0,\r\n        'can not update framebuffer which is currently in use');\r\n\r\n      var params = {\r\n        color: null\r\n      };\r\n\r\n      var radius = 0;\r\n\r\n      var colorBuffer = null;\r\n      var colorFormat = 'rgba';\r\n      var colorType = 'uint8';\r\n      var colorCount = 1;\r\n\r\n      if (typeof a === 'number') {\r\n        radius = a | 0;\r\n      } else if (!a) {\r\n        radius = 1;\r\n      } else {\r\n        check$1.type(a, 'object', 'invalid arguments for framebuffer');\r\n        var options = a;\r\n\r\n        if ('shape' in options) {\r\n          var shape = options.shape;\r\n          check$1(\r\n            Array.isArray(shape) && shape.length >= 2,\r\n            'invalid shape for framebuffer');\r\n          check$1(\r\n            shape[0] === shape[1],\r\n            'cube framebuffer must be square');\r\n          radius = shape[0];\r\n        } else {\r\n          if ('radius' in options) {\r\n            radius = options.radius | 0;\r\n          }\r\n          if ('width' in options) {\r\n            radius = options.width | 0;\r\n            if ('height' in options) {\r\n              check$1(options.height === radius, 'must be square');\r\n            }\r\n          } else if ('height' in options) {\r\n            radius = options.height | 0;\r\n          }\r\n        }\r\n\r\n        if ('color' in options ||\r\n            'colors' in options) {\r\n          colorBuffer =\r\n            options.color ||\r\n            options.colors;\r\n          if (Array.isArray(colorBuffer)) {\r\n            check$1(\r\n              colorBuffer.length === 1 || extensions.webgl_draw_buffers,\r\n              'multiple render targets not supported');\r\n          }\r\n        }\r\n\r\n        if (!colorBuffer) {\r\n          if ('colorCount' in options) {\r\n            colorCount = options.colorCount | 0;\r\n            check$1(colorCount > 0, 'invalid color buffer count');\r\n          }\r\n\r\n          if ('colorType' in options) {\r\n            check$1.oneOf(\r\n              options.colorType, colorTypes,\r\n              'invalid color type');\r\n            colorType = options.colorType;\r\n          }\r\n\r\n          if ('colorFormat' in options) {\r\n            colorFormat = options.colorFormat;\r\n            check$1.oneOf(\r\n              options.colorFormat, colorTextureFormats,\r\n              'invalid color format for texture');\r\n          }\r\n        }\r\n\r\n        if ('depth' in options) {\r\n          params.depth = options.depth;\r\n        }\r\n\r\n        if ('stencil' in options) {\r\n          params.stencil = options.stencil;\r\n        }\r\n\r\n        if ('depthStencil' in options) {\r\n          params.depthStencil = options.depthStencil;\r\n        }\r\n      }\r\n\r\n      var colorCubes;\r\n      if (colorBuffer) {\r\n        if (Array.isArray(colorBuffer)) {\r\n          colorCubes = [];\r\n          for (i = 0; i < colorBuffer.length; ++i) {\r\n            colorCubes[i] = colorBuffer[i];\r\n          }\r\n        } else {\r\n          colorCubes = [ colorBuffer ];\r\n        }\r\n      } else {\r\n        colorCubes = Array(colorCount);\r\n        var cubeMapParams = {\r\n          radius: radius,\r\n          format: colorFormat,\r\n          type: colorType\r\n        };\r\n        for (i = 0; i < colorCount; ++i) {\r\n          colorCubes[i] = textureState.createCube(cubeMapParams);\r\n        }\r\n      }\r\n\r\n      // Check color cubes\r\n      params.color = Array(colorCubes.length);\r\n      for (i = 0; i < colorCubes.length; ++i) {\r\n        var cube = colorCubes[i];\r\n        check$1(\r\n          typeof cube === 'function' && cube._reglType === 'textureCube',\r\n          'invalid cube map');\r\n        radius = radius || cube.width;\r\n        check$1(\r\n          cube.width === radius && cube.height === radius,\r\n          'invalid cube map shape');\r\n        params.color[i] = {\r\n          target: GL_TEXTURE_CUBE_MAP_POSITIVE_X$2,\r\n          data: colorCubes[i]\r\n        };\r\n      }\r\n\r\n      for (i = 0; i < 6; ++i) {\r\n        for (var j = 0; j < colorCubes.length; ++j) {\r\n          params.color[j].target = GL_TEXTURE_CUBE_MAP_POSITIVE_X$2 + i;\r\n        }\r\n        // reuse depth-stencil attachments across all cube maps\r\n        if (i > 0) {\r\n          params.depth = faces[0].depth;\r\n          params.stencil = faces[0].stencil;\r\n          params.depthStencil = faces[0].depthStencil;\r\n        }\r\n        if (faces[i]) {\r\n          (faces[i])(params);\r\n        } else {\r\n          faces[i] = createFBO(params);\r\n        }\r\n      }\r\n\r\n      return extend(reglFramebufferCube, {\r\n        width: radius,\r\n        height: radius,\r\n        color: colorCubes\r\n      })\r\n    }\r\n\r\n    function resize (radius_) {\r\n      var i;\r\n      var radius = radius_ | 0;\r\n      check$1(radius > 0 && radius <= limits.maxCubeMapSize,\r\n        'invalid radius for cube fbo');\r\n\r\n      if (radius === reglFramebufferCube.width) {\r\n        return reglFramebufferCube\r\n      }\r\n\r\n      var colors = reglFramebufferCube.color;\r\n      for (i = 0; i < colors.length; ++i) {\r\n        colors[i].resize(radius);\r\n      }\r\n\r\n      for (i = 0; i < 6; ++i) {\r\n        faces[i].resize(radius);\r\n      }\r\n\r\n      reglFramebufferCube.width = reglFramebufferCube.height = radius;\r\n\r\n      return reglFramebufferCube\r\n    }\r\n\r\n    reglFramebufferCube(options);\r\n\r\n    return extend(reglFramebufferCube, {\r\n      faces: faces,\r\n      resize: resize,\r\n      _reglType: 'framebufferCube',\r\n      destroy: function () {\r\n        faces.forEach(function (f) {\r\n          f.destroy();\r\n        });\r\n      }\r\n    })\r\n  }\r\n\r\n  function restoreFramebuffers () {\r\n    framebufferState.cur = null;\r\n    framebufferState.next = null;\r\n    framebufferState.dirty = true;\r\n    values(framebufferSet).forEach(function (fb) {\r\n      fb.framebuffer = gl.createFramebuffer();\r\n      updateFramebuffer(fb);\r\n    });\r\n  }\r\n\r\n  return extend(framebufferState, {\r\n    getFramebuffer: function (object) {\r\n      if (typeof object === 'function' && object._reglType === 'framebuffer') {\r\n        var fbo = object._framebuffer;\r\n        if (fbo instanceof REGLFramebuffer) {\r\n          return fbo\r\n        }\r\n      }\r\n      return null\r\n    },\r\n    create: createFBO,\r\n    createCube: createCubeFBO,\r\n    clear: function () {\r\n      values(framebufferSet).forEach(destroy);\r\n    },\r\n    restore: restoreFramebuffers\r\n  })\r\n}\n\nvar GL_FLOAT$6 = 5126;\r\n\r\nfunction AttributeRecord () {\r\n  this.state = 0;\r\n\r\n  this.x = 0.0;\r\n  this.y = 0.0;\r\n  this.z = 0.0;\r\n  this.w = 0.0;\r\n\r\n  this.buffer = null;\r\n  this.size = 0;\r\n  this.normalized = false;\r\n  this.type = GL_FLOAT$6;\r\n  this.offset = 0;\r\n  this.stride = 0;\r\n  this.divisor = 0;\r\n}\r\n\r\nfunction wrapAttributeState (\r\n  gl,\r\n  extensions,\r\n  limits,\r\n  stringStore) {\r\n  var NUM_ATTRIBUTES = limits.maxAttributes;\r\n  var attributeBindings = new Array(NUM_ATTRIBUTES);\r\n  for (var i = 0; i < NUM_ATTRIBUTES; ++i) {\r\n    attributeBindings[i] = new AttributeRecord();\r\n  }\r\n\r\n  return {\r\n    Record: AttributeRecord,\r\n    scope: {},\r\n    state: attributeBindings\r\n  }\r\n}\n\nvar GL_FRAGMENT_SHADER = 35632;\r\nvar GL_VERTEX_SHADER = 35633;\r\n\r\nvar GL_ACTIVE_UNIFORMS = 0x8B86;\r\nvar GL_ACTIVE_ATTRIBUTES = 0x8B89;\r\n\r\nfunction wrapShaderState (gl, stringStore, stats, config) {\r\n  // ===================================================\r\n  // glsl compilation and linking\r\n  // ===================================================\r\n  var fragShaders = {};\r\n  var vertShaders = {};\r\n\r\n  function ActiveInfo (name, id, location, info) {\r\n    this.name = name;\r\n    this.id = id;\r\n    this.location = location;\r\n    this.info = info;\r\n  }\r\n\r\n  function insertActiveInfo (list, info) {\r\n    for (var i = 0; i < list.length; ++i) {\r\n      if (list[i].id === info.id) {\r\n        list[i].location = info.location;\r\n        return\r\n      }\r\n    }\r\n    list.push(info);\r\n  }\r\n\r\n  function getShader (type, id, command) {\r\n    var cache = type === GL_FRAGMENT_SHADER ? fragShaders : vertShaders;\r\n    var shader = cache[id];\r\n\r\n    if (!shader) {\r\n      var source = stringStore.str(id);\r\n      shader = gl.createShader(type);\r\n      gl.shaderSource(shader, source);\r\n      gl.compileShader(shader);\r\n      check$1.shaderError(gl, shader, source, type, command);\r\n      cache[id] = shader;\r\n    }\r\n\r\n    return shader\r\n  }\r\n\r\n  // ===================================================\r\n  // program linking\r\n  // ===================================================\r\n  var programCache = {};\r\n  var programList = [];\r\n\r\n  var PROGRAM_COUNTER = 0;\r\n\r\n  function REGLProgram (fragId, vertId) {\r\n    this.id = PROGRAM_COUNTER++;\r\n    this.fragId = fragId;\r\n    this.vertId = vertId;\r\n    this.program = null;\r\n    this.uniforms = [];\r\n    this.attributes = [];\r\n\r\n    if (config.profile) {\r\n      this.stats = {\r\n        uniformsCount: 0,\r\n        attributesCount: 0\r\n      };\r\n    }\r\n  }\r\n\r\n  function linkProgram (desc, command) {\r\n    var i, info;\r\n\r\n    // -------------------------------\r\n    // compile & link\r\n    // -------------------------------\r\n    var fragShader = getShader(GL_FRAGMENT_SHADER, desc.fragId);\r\n    var vertShader = getShader(GL_VERTEX_SHADER, desc.vertId);\r\n\r\n    var program = desc.program = gl.createProgram();\r\n    gl.attachShader(program, fragShader);\r\n    gl.attachShader(program, vertShader);\r\n    gl.linkProgram(program);\r\n    check$1.linkError(\r\n      gl,\r\n      program,\r\n      stringStore.str(desc.fragId),\r\n      stringStore.str(desc.vertId),\r\n      command);\r\n\r\n    // -------------------------------\r\n    // grab uniforms\r\n    // -------------------------------\r\n    var numUniforms = gl.getProgramParameter(program, GL_ACTIVE_UNIFORMS);\r\n    if (config.profile) {\r\n      desc.stats.uniformsCount = numUniforms;\r\n    }\r\n    var uniforms = desc.uniforms;\r\n    for (i = 0; i < numUniforms; ++i) {\r\n      info = gl.getActiveUniform(program, i);\r\n      if (info) {\r\n        if (info.size > 1) {\r\n          for (var j = 0; j < info.size; ++j) {\r\n            var name = info.name.replace('[0]', '[' + j + ']');\r\n            insertActiveInfo(uniforms, new ActiveInfo(\r\n              name,\r\n              stringStore.id(name),\r\n              gl.getUniformLocation(program, name),\r\n              info));\r\n          }\r\n        } else {\r\n          insertActiveInfo(uniforms, new ActiveInfo(\r\n            info.name,\r\n            stringStore.id(info.name),\r\n            gl.getUniformLocation(program, info.name),\r\n            info));\r\n        }\r\n      }\r\n    }\r\n\r\n    // -------------------------------\r\n    // grab attributes\r\n    // -------------------------------\r\n    var numAttributes = gl.getProgramParameter(program, GL_ACTIVE_ATTRIBUTES);\r\n    if (config.profile) {\r\n      desc.stats.attributesCount = numAttributes;\r\n    }\r\n\r\n    var attributes = desc.attributes;\r\n    for (i = 0; i < numAttributes; ++i) {\r\n      info = gl.getActiveAttrib(program, i);\r\n      if (info) {\r\n        insertActiveInfo(attributes, new ActiveInfo(\r\n          info.name,\r\n          stringStore.id(info.name),\r\n          gl.getAttribLocation(program, info.name),\r\n          info));\r\n      }\r\n    }\r\n  }\r\n\r\n  if (config.profile) {\r\n    stats.getMaxUniformsCount = function () {\r\n      var m = 0;\r\n      programList.forEach(function (desc) {\r\n        if (desc.stats.uniformsCount > m) {\r\n          m = desc.stats.uniformsCount;\r\n        }\r\n      });\r\n      return m\r\n    };\r\n\r\n    stats.getMaxAttributesCount = function () {\r\n      var m = 0;\r\n      programList.forEach(function (desc) {\r\n        if (desc.stats.attributesCount > m) {\r\n          m = desc.stats.attributesCount;\r\n        }\r\n      });\r\n      return m\r\n    };\r\n  }\r\n\r\n  function restoreShaders () {\r\n    fragShaders = {};\r\n    vertShaders = {};\r\n    for (var i = 0; i < programList.length; ++i) {\r\n      linkProgram(programList[i]);\r\n    }\r\n  }\r\n\r\n  return {\r\n    clear: function () {\r\n      var deleteShader = gl.deleteShader.bind(gl);\r\n      values(fragShaders).forEach(deleteShader);\r\n      fragShaders = {};\r\n      values(vertShaders).forEach(deleteShader);\r\n      vertShaders = {};\r\n\r\n      programList.forEach(function (desc) {\r\n        gl.deleteProgram(desc.program);\r\n      });\r\n      programList.length = 0;\r\n      programCache = {};\r\n\r\n      stats.shaderCount = 0;\r\n    },\r\n\r\n    program: function (vertId, fragId, command) {\r\n      check$1.command(vertId >= 0, 'missing vertex shader', command);\r\n      check$1.command(fragId >= 0, 'missing fragment shader', command);\r\n\r\n      var cache = programCache[fragId];\r\n      if (!cache) {\r\n        cache = programCache[fragId] = {};\r\n      }\r\n      var program = cache[vertId];\r\n      if (!program) {\r\n        program = new REGLProgram(fragId, vertId);\r\n        stats.shaderCount++;\r\n\r\n        linkProgram(program, command);\r\n        cache[vertId] = program;\r\n        programList.push(program);\r\n      }\r\n      return program\r\n    },\r\n\r\n    restore: restoreShaders,\r\n\r\n    shader: getShader,\r\n\r\n    frag: -1,\r\n    vert: -1\r\n  }\r\n}\n\nvar GL_RGBA$3 = 6408;\r\nvar GL_UNSIGNED_BYTE$7 = 5121;\r\nvar GL_PACK_ALIGNMENT = 0x0D05;\r\nvar GL_FLOAT$7 = 0x1406; // 5126\r\n\r\nfunction wrapReadPixels (\r\n  gl,\r\n  framebufferState,\r\n  reglPoll,\r\n  context,\r\n  glAttributes,\r\n  extensions,\r\n  limits) {\r\n  function readPixelsImpl (input) {\r\n    var type;\r\n    if (framebufferState.next === null) {\r\n      check$1(\r\n        glAttributes.preserveDrawingBuffer,\r\n        'you must create a webgl context with \"preserveDrawingBuffer\":true in order to read pixels from the drawing buffer');\r\n      type = GL_UNSIGNED_BYTE$7;\r\n    } else {\r\n      check$1(\r\n        framebufferState.next.colorAttachments[0].texture !== null,\r\n          'You cannot read from a renderbuffer');\r\n      type = framebufferState.next.colorAttachments[0].texture._texture.type;\r\n\r\n      if (extensions.oes_texture_float) {\r\n        check$1(\r\n          type === GL_UNSIGNED_BYTE$7 || type === GL_FLOAT$7,\r\n          'Reading from a framebuffer is only allowed for the types \\'uint8\\' and \\'float\\'');\r\n\r\n        if (type === GL_FLOAT$7) {\r\n          check$1(limits.readFloat, 'Reading \\'float\\' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float');\r\n        }\r\n      } else {\r\n        check$1(\r\n          type === GL_UNSIGNED_BYTE$7,\r\n          'Reading from a framebuffer is only allowed for the type \\'uint8\\'');\r\n      }\r\n    }\r\n\r\n    var x = 0;\r\n    var y = 0;\r\n    var width = context.framebufferWidth;\r\n    var height = context.framebufferHeight;\r\n    var data = null;\r\n\r\n    if (isTypedArray(input)) {\r\n      data = input;\r\n    } else if (input) {\r\n      check$1.type(input, 'object', 'invalid arguments to regl.read()');\r\n      x = input.x | 0;\r\n      y = input.y | 0;\r\n      check$1(\r\n        x >= 0 && x < context.framebufferWidth,\r\n        'invalid x offset for regl.read');\r\n      check$1(\r\n        y >= 0 && y < context.framebufferHeight,\r\n        'invalid y offset for regl.read');\r\n      width = (input.width || (context.framebufferWidth - x)) | 0;\r\n      height = (input.height || (context.framebufferHeight - y)) | 0;\r\n      data = input.data || null;\r\n    }\r\n\r\n    // sanity check input.data\r\n    if (data) {\r\n      if (type === GL_UNSIGNED_BYTE$7) {\r\n        check$1(\r\n          data instanceof Uint8Array,\r\n          'buffer must be \\'Uint8Array\\' when reading from a framebuffer of type \\'uint8\\'');\r\n      } else if (type === GL_FLOAT$7) {\r\n        check$1(\r\n          data instanceof Float32Array,\r\n          'buffer must be \\'Float32Array\\' when reading from a framebuffer of type \\'float\\'');\r\n      }\r\n    }\r\n\r\n    check$1(\r\n      width > 0 && width + x <= context.framebufferWidth,\r\n      'invalid width for read pixels');\r\n    check$1(\r\n      height > 0 && height + y <= context.framebufferHeight,\r\n      'invalid height for read pixels');\r\n\r\n    // Update WebGL state\r\n    reglPoll();\r\n\r\n    // Compute size\r\n    var size = width * height * 4;\r\n\r\n    // Allocate data\r\n    if (!data) {\r\n      if (type === GL_UNSIGNED_BYTE$7) {\r\n        data = new Uint8Array(size);\r\n      } else if (type === GL_FLOAT$7) {\r\n        data = data || new Float32Array(size);\r\n      }\r\n    }\r\n\r\n    // Type check\r\n    check$1.isTypedArray(data, 'data buffer for regl.read() must be a typedarray');\r\n    check$1(data.byteLength >= size, 'data buffer for regl.read() too small');\r\n\r\n    // Run read pixels\r\n    gl.pixelStorei(GL_PACK_ALIGNMENT, 4);\r\n    gl.readPixels(x, y, width, height, GL_RGBA$3,\r\n                  type,\r\n                  data);\r\n\r\n    return data\r\n  }\r\n\r\n  function readPixelsFBO (options) {\r\n    var result;\r\n    framebufferState.setFBO({\r\n      framebuffer: options.framebuffer\r\n    }, function () {\r\n      result = readPixelsImpl(options);\r\n    });\r\n    return result\r\n  }\r\n\r\n  function readPixels (options) {\r\n    if (!options || !('framebuffer' in options)) {\r\n      return readPixelsImpl(options)\r\n    } else {\r\n      return readPixelsFBO(options)\r\n    }\r\n  }\r\n\r\n  return readPixels\r\n}\n\nfunction slice (x) {\r\n  return Array.prototype.slice.call(x)\r\n}\r\n\r\nfunction join (x) {\r\n  return slice(x).join('')\r\n}\r\n\r\nfunction createEnvironment () {\r\n  // Unique variable id counter\r\n  var varCounter = 0;\r\n\r\n  // Linked values are passed from this scope into the generated code block\r\n  // Calling link() passes a value into the generated scope and returns\r\n  // the variable name which it is bound to\r\n  var linkedNames = [];\r\n  var linkedValues = [];\r\n  function link (value) {\r\n    for (var i = 0; i < linkedValues.length; ++i) {\r\n      if (linkedValues[i] === value) {\r\n        return linkedNames[i]\r\n      }\r\n    }\r\n\r\n    var name = 'g' + (varCounter++);\r\n    linkedNames.push(name);\r\n    linkedValues.push(value);\r\n    return name\r\n  }\r\n\r\n  // create a code block\r\n  function block () {\r\n    var code = [];\r\n    function push () {\r\n      code.push.apply(code, slice(arguments));\r\n    }\r\n\r\n    var vars = [];\r\n    function def () {\r\n      var name = 'v' + (varCounter++);\r\n      vars.push(name);\r\n\r\n      if (arguments.length > 0) {\r\n        code.push(name, '=');\r\n        code.push.apply(code, slice(arguments));\r\n        code.push(';');\r\n      }\r\n\r\n      return name\r\n    }\r\n\r\n    return extend(push, {\r\n      def: def,\r\n      toString: function () {\r\n        return join([\r\n          (vars.length > 0 ? 'var ' + vars + ';' : ''),\r\n          join(code)\r\n        ])\r\n      }\r\n    })\r\n  }\r\n\r\n  function scope () {\r\n    var entry = block();\r\n    var exit = block();\r\n\r\n    var entryToString = entry.toString;\r\n    var exitToString = exit.toString;\r\n\r\n    function save (object, prop) {\r\n      exit(object, prop, '=', entry.def(object, prop), ';');\r\n    }\r\n\r\n    return extend(function () {\r\n      entry.apply(entry, slice(arguments));\r\n    }, {\r\n      def: entry.def,\r\n      entry: entry,\r\n      exit: exit,\r\n      save: save,\r\n      set: function (object, prop, value) {\r\n        save(object, prop);\r\n        entry(object, prop, '=', value, ';');\r\n      },\r\n      toString: function () {\r\n        return entryToString() + exitToString()\r\n      }\r\n    })\r\n  }\r\n\r\n  function conditional () {\r\n    var pred = join(arguments);\r\n    var thenBlock = scope();\r\n    var elseBlock = scope();\r\n\r\n    var thenToString = thenBlock.toString;\r\n    var elseToString = elseBlock.toString;\r\n\r\n    return extend(thenBlock, {\r\n      then: function () {\r\n        thenBlock.apply(thenBlock, slice(arguments));\r\n        return this\r\n      },\r\n      else: function () {\r\n        elseBlock.apply(elseBlock, slice(arguments));\r\n        return this\r\n      },\r\n      toString: function () {\r\n        var elseClause = elseToString();\r\n        if (elseClause) {\r\n          elseClause = 'else{' + elseClause + '}';\r\n        }\r\n        return join([\r\n          'if(', pred, '){',\r\n          thenToString(),\r\n          '}', elseClause\r\n        ])\r\n      }\r\n    })\r\n  }\r\n\r\n  // procedure list\r\n  var globalBlock = block();\r\n  var procedures = {};\r\n  function proc (name, count) {\r\n    var args = [];\r\n    function arg () {\r\n      var name = 'a' + args.length;\r\n      args.push(name);\r\n      return name\r\n    }\r\n\r\n    count = count || 0;\r\n    for (var i = 0; i < count; ++i) {\r\n      arg();\r\n    }\r\n\r\n    var body = scope();\r\n    var bodyToString = body.toString;\r\n\r\n    var result = procedures[name] = extend(body, {\r\n      arg: arg,\r\n      toString: function () {\r\n        return join([\r\n          'function(', args.join(), '){',\r\n          bodyToString(),\r\n          '}'\r\n        ])\r\n      }\r\n    });\r\n\r\n    return result\r\n  }\r\n\r\n  function compile () {\r\n    var code = ['\"use strict\";',\r\n      globalBlock,\r\n      'return {'];\r\n    Object.keys(procedures).forEach(function (name) {\r\n      code.push('\"', name, '\":', procedures[name].toString(), ',');\r\n    });\r\n    code.push('}');\r\n    var src = join(code)\r\n      .replace(/;/g, ';\\n')\r\n      .replace(/}/g, '}\\n')\r\n      .replace(/{/g, '{\\n');\r\n    var proc = Function.apply(null, linkedNames.concat(src));\r\n    return proc.apply(null, linkedValues)\r\n  }\r\n\r\n  return {\r\n    global: globalBlock,\r\n    link: link,\r\n    block: block,\r\n    proc: proc,\r\n    scope: scope,\r\n    cond: conditional,\r\n    compile: compile\r\n  }\r\n}\n\n// \"cute\" names for vector components\r\nvar CUTE_COMPONENTS = 'xyzw'.split('');\r\n\r\nvar GL_UNSIGNED_BYTE$8 = 5121;\r\n\r\nvar ATTRIB_STATE_POINTER = 1;\r\nvar ATTRIB_STATE_CONSTANT = 2;\r\n\r\nvar DYN_FUNC$1 = 0;\r\nvar DYN_PROP$1 = 1;\r\nvar DYN_CONTEXT$1 = 2;\r\nvar DYN_STATE$1 = 3;\r\nvar DYN_THUNK = 4;\r\n\r\nvar S_DITHER = 'dither';\r\nvar S_BLEND_ENABLE = 'blend.enable';\r\nvar S_BLEND_COLOR = 'blend.color';\r\nvar S_BLEND_EQUATION = 'blend.equation';\r\nvar S_BLEND_FUNC = 'blend.func';\r\nvar S_DEPTH_ENABLE = 'depth.enable';\r\nvar S_DEPTH_FUNC = 'depth.func';\r\nvar S_DEPTH_RANGE = 'depth.range';\r\nvar S_DEPTH_MASK = 'depth.mask';\r\nvar S_COLOR_MASK = 'colorMask';\r\nvar S_CULL_ENABLE = 'cull.enable';\r\nvar S_CULL_FACE = 'cull.face';\r\nvar S_FRONT_FACE = 'frontFace';\r\nvar S_LINE_WIDTH = 'lineWidth';\r\nvar S_POLYGON_OFFSET_ENABLE = 'polygonOffset.enable';\r\nvar S_POLYGON_OFFSET_OFFSET = 'polygonOffset.offset';\r\nvar S_SAMPLE_ALPHA = 'sample.alpha';\r\nvar S_SAMPLE_ENABLE = 'sample.enable';\r\nvar S_SAMPLE_COVERAGE = 'sample.coverage';\r\nvar S_STENCIL_ENABLE = 'stencil.enable';\r\nvar S_STENCIL_MASK = 'stencil.mask';\r\nvar S_STENCIL_FUNC = 'stencil.func';\r\nvar S_STENCIL_OPFRONT = 'stencil.opFront';\r\nvar S_STENCIL_OPBACK = 'stencil.opBack';\r\nvar S_SCISSOR_ENABLE = 'scissor.enable';\r\nvar S_SCISSOR_BOX = 'scissor.box';\r\nvar S_VIEWPORT = 'viewport';\r\n\r\nvar S_PROFILE = 'profile';\r\n\r\nvar S_FRAMEBUFFER = 'framebuffer';\r\nvar S_VERT = 'vert';\r\nvar S_FRAG = 'frag';\r\nvar S_ELEMENTS = 'elements';\r\nvar S_PRIMITIVE = 'primitive';\r\nvar S_COUNT = 'count';\r\nvar S_OFFSET = 'offset';\r\nvar S_INSTANCES = 'instances';\r\n\r\nvar SUFFIX_WIDTH = 'Width';\r\nvar SUFFIX_HEIGHT = 'Height';\r\n\r\nvar S_FRAMEBUFFER_WIDTH = S_FRAMEBUFFER + SUFFIX_WIDTH;\r\nvar S_FRAMEBUFFER_HEIGHT = S_FRAMEBUFFER + SUFFIX_HEIGHT;\r\nvar S_VIEWPORT_WIDTH = S_VIEWPORT + SUFFIX_WIDTH;\r\nvar S_VIEWPORT_HEIGHT = S_VIEWPORT + SUFFIX_HEIGHT;\r\nvar S_DRAWINGBUFFER = 'drawingBuffer';\r\nvar S_DRAWINGBUFFER_WIDTH = S_DRAWINGBUFFER + SUFFIX_WIDTH;\r\nvar S_DRAWINGBUFFER_HEIGHT = S_DRAWINGBUFFER + SUFFIX_HEIGHT;\r\n\r\nvar NESTED_OPTIONS = [\r\n  S_BLEND_FUNC,\r\n  S_BLEND_EQUATION,\r\n  S_STENCIL_FUNC,\r\n  S_STENCIL_OPFRONT,\r\n  S_STENCIL_OPBACK,\r\n  S_SAMPLE_COVERAGE,\r\n  S_VIEWPORT,\r\n  S_SCISSOR_BOX,\r\n  S_POLYGON_OFFSET_OFFSET\r\n];\r\n\r\nvar GL_ARRAY_BUFFER$1 = 34962;\r\nvar GL_ELEMENT_ARRAY_BUFFER$1 = 34963;\r\n\r\nvar GL_FRAGMENT_SHADER$1 = 35632;\r\nvar GL_VERTEX_SHADER$1 = 35633;\r\n\r\nvar GL_TEXTURE_2D$3 = 0x0DE1;\r\nvar GL_TEXTURE_CUBE_MAP$2 = 0x8513;\r\n\r\nvar GL_CULL_FACE = 0x0B44;\r\nvar GL_BLEND = 0x0BE2;\r\nvar GL_DITHER = 0x0BD0;\r\nvar GL_STENCIL_TEST = 0x0B90;\r\nvar GL_DEPTH_TEST = 0x0B71;\r\nvar GL_SCISSOR_TEST = 0x0C11;\r\nvar GL_POLYGON_OFFSET_FILL = 0x8037;\r\nvar GL_SAMPLE_ALPHA_TO_COVERAGE = 0x809E;\r\nvar GL_SAMPLE_COVERAGE = 0x80A0;\r\n\r\nvar GL_FLOAT$8 = 5126;\r\nvar GL_FLOAT_VEC2 = 35664;\r\nvar GL_FLOAT_VEC3 = 35665;\r\nvar GL_FLOAT_VEC4 = 35666;\r\nvar GL_INT$3 = 5124;\r\nvar GL_INT_VEC2 = 35667;\r\nvar GL_INT_VEC3 = 35668;\r\nvar GL_INT_VEC4 = 35669;\r\nvar GL_BOOL = 35670;\r\nvar GL_BOOL_VEC2 = 35671;\r\nvar GL_BOOL_VEC3 = 35672;\r\nvar GL_BOOL_VEC4 = 35673;\r\nvar GL_FLOAT_MAT2 = 35674;\r\nvar GL_FLOAT_MAT3 = 35675;\r\nvar GL_FLOAT_MAT4 = 35676;\r\nvar GL_SAMPLER_2D = 35678;\r\nvar GL_SAMPLER_CUBE = 35680;\r\n\r\nvar GL_TRIANGLES$1 = 4;\r\n\r\nvar GL_FRONT = 1028;\r\nvar GL_BACK = 1029;\r\nvar GL_CW = 0x0900;\r\nvar GL_CCW = 0x0901;\r\nvar GL_MIN_EXT = 0x8007;\r\nvar GL_MAX_EXT = 0x8008;\r\nvar GL_ALWAYS = 519;\r\nvar GL_KEEP = 7680;\r\nvar GL_ZERO = 0;\r\nvar GL_ONE = 1;\r\nvar GL_FUNC_ADD = 0x8006;\r\nvar GL_LESS = 513;\r\n\r\nvar GL_FRAMEBUFFER$2 = 0x8D40;\r\nvar GL_COLOR_ATTACHMENT0$2 = 0x8CE0;\r\n\r\nvar blendFuncs = {\r\n  '0': 0,\r\n  '1': 1,\r\n  'zero': 0,\r\n  'one': 1,\r\n  'src color': 768,\r\n  'one minus src color': 769,\r\n  'src alpha': 770,\r\n  'one minus src alpha': 771,\r\n  'dst color': 774,\r\n  'one minus dst color': 775,\r\n  'dst alpha': 772,\r\n  'one minus dst alpha': 773,\r\n  'constant color': 32769,\r\n  'one minus constant color': 32770,\r\n  'constant alpha': 32771,\r\n  'one minus constant alpha': 32772,\r\n  'src alpha saturate': 776\r\n};\r\n\r\n// There are invalid values for srcRGB and dstRGB. See:\r\n// https://www.khronos.org/registry/webgl/specs/1.0/#6.13\r\n// https://github.com/KhronosGroup/WebGL/blob/0d3201f5f7ec3c0060bc1f04077461541f1987b9/conformance-suites/1.0.3/conformance/misc/webgl-specific.html#L56\r\nvar invalidBlendCombinations = [\r\n  'constant color, constant alpha',\r\n  'one minus constant color, constant alpha',\r\n  'constant color, one minus constant alpha',\r\n  'one minus constant color, one minus constant alpha',\r\n  'constant alpha, constant color',\r\n  'constant alpha, one minus constant color',\r\n  'one minus constant alpha, constant color',\r\n  'one minus constant alpha, one minus constant color'\r\n];\r\n\r\nvar compareFuncs = {\r\n  'never': 512,\r\n  'less': 513,\r\n  '<': 513,\r\n  'equal': 514,\r\n  '=': 514,\r\n  '==': 514,\r\n  '===': 514,\r\n  'lequal': 515,\r\n  '<=': 515,\r\n  'greater': 516,\r\n  '>': 516,\r\n  'notequal': 517,\r\n  '!=': 517,\r\n  '!==': 517,\r\n  'gequal': 518,\r\n  '>=': 518,\r\n  'always': 519\r\n};\r\n\r\nvar stencilOps = {\r\n  '0': 0,\r\n  'zero': 0,\r\n  'keep': 7680,\r\n  'replace': 7681,\r\n  'increment': 7682,\r\n  'decrement': 7683,\r\n  'increment wrap': 34055,\r\n  'decrement wrap': 34056,\r\n  'invert': 5386\r\n};\r\n\r\nvar shaderType = {\r\n  'frag': GL_FRAGMENT_SHADER$1,\r\n  'vert': GL_VERTEX_SHADER$1\r\n};\r\n\r\nvar orientationType = {\r\n  'cw': GL_CW,\r\n  'ccw': GL_CCW\r\n};\r\n\r\nfunction isBufferArgs (x) {\r\n  return Array.isArray(x) ||\r\n    isTypedArray(x) ||\r\n    isNDArrayLike(x)\r\n}\r\n\r\n// Make sure viewport is processed first\r\nfunction sortState (state) {\r\n  return state.sort(function (a, b) {\r\n    if (a === S_VIEWPORT) {\r\n      return -1\r\n    } else if (b === S_VIEWPORT) {\r\n      return 1\r\n    }\r\n    return (a < b) ? -1 : 1\r\n  })\r\n}\r\n\r\nfunction Declaration (thisDep, contextDep, propDep, append) {\r\n  this.thisDep = thisDep;\r\n  this.contextDep = contextDep;\r\n  this.propDep = propDep;\r\n  this.append = append;\r\n}\r\n\r\nfunction isStatic (decl) {\r\n  return decl && !(decl.thisDep || decl.contextDep || decl.propDep)\r\n}\r\n\r\nfunction createStaticDecl (append) {\r\n  return new Declaration(false, false, false, append)\r\n}\r\n\r\nfunction createDynamicDecl (dyn, append) {\r\n  var type = dyn.type;\r\n  if (type === DYN_FUNC$1) {\r\n    var numArgs = dyn.data.length;\r\n    return new Declaration(\r\n      true,\r\n      numArgs >= 1,\r\n      numArgs >= 2,\r\n      append)\r\n  } else if (type === DYN_THUNK) {\r\n    var data = dyn.data;\r\n    return new Declaration(\r\n      data.thisDep,\r\n      data.contextDep,\r\n      data.propDep,\r\n      append)\r\n  } else {\r\n    return new Declaration(\r\n      type === DYN_STATE$1,\r\n      type === DYN_CONTEXT$1,\r\n      type === DYN_PROP$1,\r\n      append)\r\n  }\r\n}\r\n\r\nvar SCOPE_DECL = new Declaration(false, false, false, function () {});\r\n\r\nfunction reglCore (\r\n  gl,\r\n  stringStore,\r\n  extensions,\r\n  limits,\r\n  bufferState,\r\n  elementState,\r\n  textureState,\r\n  framebufferState,\r\n  uniformState,\r\n  attributeState,\r\n  shaderState,\r\n  drawState,\r\n  contextState,\r\n  timer,\r\n  config) {\r\n  var AttributeRecord = attributeState.Record;\r\n\r\n  var blendEquations = {\r\n    'add': 32774,\r\n    'subtract': 32778,\r\n    'reverse subtract': 32779\r\n  };\r\n  if (extensions.ext_blend_minmax) {\r\n    blendEquations.min = GL_MIN_EXT;\r\n    blendEquations.max = GL_MAX_EXT;\r\n  }\r\n\r\n  var extInstancing = extensions.angle_instanced_arrays;\r\n  var extDrawBuffers = extensions.webgl_draw_buffers;\r\n\r\n  // ===================================================\r\n  // ===================================================\r\n  // WEBGL STATE\r\n  // ===================================================\r\n  // ===================================================\r\n  var currentState = {\r\n    dirty: true,\r\n    profile: config.profile\r\n  };\r\n  var nextState = {};\r\n  var GL_STATE_NAMES = [];\r\n  var GL_FLAGS = {};\r\n  var GL_VARIABLES = {};\r\n\r\n  function propName (name) {\r\n    return name.replace('.', '_')\r\n  }\r\n\r\n  function stateFlag (sname, cap, init) {\r\n    var name = propName(sname);\r\n    GL_STATE_NAMES.push(sname);\r\n    nextState[name] = currentState[name] = !!init;\r\n    GL_FLAGS[name] = cap;\r\n  }\r\n\r\n  function stateVariable (sname, func, init) {\r\n    var name = propName(sname);\r\n    GL_STATE_NAMES.push(sname);\r\n    if (Array.isArray(init)) {\r\n      currentState[name] = init.slice();\r\n      nextState[name] = init.slice();\r\n    } else {\r\n      currentState[name] = nextState[name] = init;\r\n    }\r\n    GL_VARIABLES[name] = func;\r\n  }\r\n\r\n  // Dithering\r\n  stateFlag(S_DITHER, GL_DITHER);\r\n\r\n  // Blending\r\n  stateFlag(S_BLEND_ENABLE, GL_BLEND);\r\n  stateVariable(S_BLEND_COLOR, 'blendColor', [0, 0, 0, 0]);\r\n  stateVariable(S_BLEND_EQUATION, 'blendEquationSeparate',\r\n    [GL_FUNC_ADD, GL_FUNC_ADD]);\r\n  stateVariable(S_BLEND_FUNC, 'blendFuncSeparate',\r\n    [GL_ONE, GL_ZERO, GL_ONE, GL_ZERO]);\r\n\r\n  // Depth\r\n  stateFlag(S_DEPTH_ENABLE, GL_DEPTH_TEST, true);\r\n  stateVariable(S_DEPTH_FUNC, 'depthFunc', GL_LESS);\r\n  stateVariable(S_DEPTH_RANGE, 'depthRange', [0, 1]);\r\n  stateVariable(S_DEPTH_MASK, 'depthMask', true);\r\n\r\n  // Color mask\r\n  stateVariable(S_COLOR_MASK, S_COLOR_MASK, [true, true, true, true]);\r\n\r\n  // Face culling\r\n  stateFlag(S_CULL_ENABLE, GL_CULL_FACE);\r\n  stateVariable(S_CULL_FACE, 'cullFace', GL_BACK);\r\n\r\n  // Front face orientation\r\n  stateVariable(S_FRONT_FACE, S_FRONT_FACE, GL_CCW);\r\n\r\n  // Line width\r\n  stateVariable(S_LINE_WIDTH, S_LINE_WIDTH, 1);\r\n\r\n  // Polygon offset\r\n  stateFlag(S_POLYGON_OFFSET_ENABLE, GL_POLYGON_OFFSET_FILL);\r\n  stateVariable(S_POLYGON_OFFSET_OFFSET, 'polygonOffset', [0, 0]);\r\n\r\n  // Sample coverage\r\n  stateFlag(S_SAMPLE_ALPHA, GL_SAMPLE_ALPHA_TO_COVERAGE);\r\n  stateFlag(S_SAMPLE_ENABLE, GL_SAMPLE_COVERAGE);\r\n  stateVariable(S_SAMPLE_COVERAGE, 'sampleCoverage', [1, false]);\r\n\r\n  // Stencil\r\n  stateFlag(S_STENCIL_ENABLE, GL_STENCIL_TEST);\r\n  stateVariable(S_STENCIL_MASK, 'stencilMask', -1);\r\n  stateVariable(S_STENCIL_FUNC, 'stencilFunc', [GL_ALWAYS, 0, -1]);\r\n  stateVariable(S_STENCIL_OPFRONT, 'stencilOpSeparate',\r\n    [GL_FRONT, GL_KEEP, GL_KEEP, GL_KEEP]);\r\n  stateVariable(S_STENCIL_OPBACK, 'stencilOpSeparate',\r\n    [GL_BACK, GL_KEEP, GL_KEEP, GL_KEEP]);\r\n\r\n  // Scissor\r\n  stateFlag(S_SCISSOR_ENABLE, GL_SCISSOR_TEST);\r\n  stateVariable(S_SCISSOR_BOX, 'scissor',\r\n    [0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight]);\r\n\r\n  // Viewport\r\n  stateVariable(S_VIEWPORT, S_VIEWPORT,\r\n    [0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight]);\r\n\r\n  // ===================================================\r\n  // ===================================================\r\n  // ENVIRONMENT\r\n  // ===================================================\r\n  // ===================================================\r\n  var sharedState = {\r\n    gl: gl,\r\n    context: contextState,\r\n    strings: stringStore,\r\n    next: nextState,\r\n    current: currentState,\r\n    draw: drawState,\r\n    elements: elementState,\r\n    buffer: bufferState,\r\n    shader: shaderState,\r\n    attributes: attributeState.state,\r\n    uniforms: uniformState,\r\n    framebuffer: framebufferState,\r\n    extensions: extensions,\r\n\r\n    timer: timer,\r\n    isBufferArgs: isBufferArgs\r\n  };\r\n\r\n  var sharedConstants = {\r\n    primTypes: primTypes,\r\n    compareFuncs: compareFuncs,\r\n    blendFuncs: blendFuncs,\r\n    blendEquations: blendEquations,\r\n    stencilOps: stencilOps,\r\n    glTypes: glTypes,\r\n    orientationType: orientationType\r\n  };\r\n\r\n  check$1.optional(function () {\r\n    sharedState.isArrayLike = isArrayLike;\r\n  });\r\n\r\n  if (extDrawBuffers) {\r\n    sharedConstants.backBuffer = [GL_BACK];\r\n    sharedConstants.drawBuffer = loop(limits.maxDrawbuffers, function (i) {\r\n      if (i === 0) {\r\n        return [0]\r\n      }\r\n      return loop(i, function (j) {\r\n        return GL_COLOR_ATTACHMENT0$2 + j\r\n      })\r\n    });\r\n  }\r\n\r\n  var drawCallCounter = 0;\r\n  function createREGLEnvironment () {\r\n    var env = createEnvironment();\r\n    var link = env.link;\r\n    var global = env.global;\r\n    env.id = drawCallCounter++;\r\n\r\n    env.batchId = '0';\r\n\r\n    // link shared state\r\n    var SHARED = link(sharedState);\r\n    var shared = env.shared = {\r\n      props: 'a0'\r\n    };\r\n    Object.keys(sharedState).forEach(function (prop) {\r\n      shared[prop] = global.def(SHARED, '.', prop);\r\n    });\r\n\r\n    // Inject runtime assertion stuff for debug builds\r\n    check$1.optional(function () {\r\n      env.CHECK = link(check$1);\r\n      env.commandStr = check$1.guessCommand();\r\n      env.command = link(env.commandStr);\r\n      env.assert = function (block, pred, message) {\r\n        block(\r\n          'if(!(', pred, '))',\r\n          this.CHECK, '.commandRaise(', link(message), ',', this.command, ');');\r\n      };\r\n\r\n      sharedConstants.invalidBlendCombinations = invalidBlendCombinations;\r\n    });\r\n\r\n    // Copy GL state variables over\r\n    var nextVars = env.next = {};\r\n    var currentVars = env.current = {};\r\n    Object.keys(GL_VARIABLES).forEach(function (variable) {\r\n      if (Array.isArray(currentState[variable])) {\r\n        nextVars[variable] = global.def(shared.next, '.', variable);\r\n        currentVars[variable] = global.def(shared.current, '.', variable);\r\n      }\r\n    });\r\n\r\n    // Initialize shared constants\r\n    var constants = env.constants = {};\r\n    Object.keys(sharedConstants).forEach(function (name) {\r\n      constants[name] = global.def(JSON.stringify(sharedConstants[name]));\r\n    });\r\n\r\n    // Helper function for calling a block\r\n    env.invoke = function (block, x) {\r\n      switch (x.type) {\r\n        case DYN_FUNC$1:\r\n          var argList = [\r\n            'this',\r\n            shared.context,\r\n            shared.props,\r\n            env.batchId\r\n          ];\r\n          return block.def(\r\n            link(x.data), '.call(',\r\n              argList.slice(0, Math.max(x.data.length + 1, 4)),\r\n             ')')\r\n        case DYN_PROP$1:\r\n          return block.def(shared.props, x.data)\r\n        case DYN_CONTEXT$1:\r\n          return block.def(shared.context, x.data)\r\n        case DYN_STATE$1:\r\n          return block.def('this', x.data)\r\n        case DYN_THUNK:\r\n          x.data.append(env, block);\r\n          return x.data.ref\r\n      }\r\n    };\r\n\r\n    env.attribCache = {};\r\n\r\n    var scopeAttribs = {};\r\n    env.scopeAttrib = function (name) {\r\n      var id = stringStore.id(name);\r\n      if (id in scopeAttribs) {\r\n        return scopeAttribs[id]\r\n      }\r\n      var binding = attributeState.scope[id];\r\n      if (!binding) {\r\n        binding = attributeState.scope[id] = new AttributeRecord();\r\n      }\r\n      var result = scopeAttribs[id] = link(binding);\r\n      return result\r\n    };\r\n\r\n    return env\r\n  }\r\n\r\n  // ===================================================\r\n  // ===================================================\r\n  // PARSING\r\n  // ===================================================\r\n  // ===================================================\r\n  function parseProfile (options) {\r\n    var staticOptions = options.static;\r\n    var dynamicOptions = options.dynamic;\r\n\r\n    var profileEnable;\r\n    if (S_PROFILE in staticOptions) {\r\n      var value = !!staticOptions[S_PROFILE];\r\n      profileEnable = createStaticDecl(function (env, scope) {\r\n        return value\r\n      });\r\n      profileEnable.enable = value;\r\n    } else if (S_PROFILE in dynamicOptions) {\r\n      var dyn = dynamicOptions[S_PROFILE];\r\n      profileEnable = createDynamicDecl(dyn, function (env, scope) {\r\n        return env.invoke(scope, dyn)\r\n      });\r\n    }\r\n\r\n    return profileEnable\r\n  }\r\n\r\n  function parseFramebuffer (options, env) {\r\n    var staticOptions = options.static;\r\n    var dynamicOptions = options.dynamic;\r\n\r\n    if (S_FRAMEBUFFER in staticOptions) {\r\n      var framebuffer = staticOptions[S_FRAMEBUFFER];\r\n      if (framebuffer) {\r\n        framebuffer = framebufferState.getFramebuffer(framebuffer);\r\n        check$1.command(framebuffer, 'invalid framebuffer object');\r\n        return createStaticDecl(function (env, block) {\r\n          var FRAMEBUFFER = env.link(framebuffer);\r\n          var shared = env.shared;\r\n          block.set(\r\n            shared.framebuffer,\r\n            '.next',\r\n            FRAMEBUFFER);\r\n          var CONTEXT = shared.context;\r\n          block.set(\r\n            CONTEXT,\r\n            '.' + S_FRAMEBUFFER_WIDTH,\r\n            FRAMEBUFFER + '.width');\r\n          block.set(\r\n            CONTEXT,\r\n            '.' + S_FRAMEBUFFER_HEIGHT,\r\n            FRAMEBUFFER + '.height');\r\n          return FRAMEBUFFER\r\n        })\r\n      } else {\r\n        return createStaticDecl(function (env, scope) {\r\n          var shared = env.shared;\r\n          scope.set(\r\n            shared.framebuffer,\r\n            '.next',\r\n            'null');\r\n          var CONTEXT = shared.context;\r\n          scope.set(\r\n            CONTEXT,\r\n            '.' + S_FRAMEBUFFER_WIDTH,\r\n            CONTEXT + '.' + S_DRAWINGBUFFER_WIDTH);\r\n          scope.set(\r\n            CONTEXT,\r\n            '.' + S_FRAMEBUFFER_HEIGHT,\r\n            CONTEXT + '.' + S_DRAWINGBUFFER_HEIGHT);\r\n          return 'null'\r\n        })\r\n      }\r\n    } else if (S_FRAMEBUFFER in dynamicOptions) {\r\n      var dyn = dynamicOptions[S_FRAMEBUFFER];\r\n      return createDynamicDecl(dyn, function (env, scope) {\r\n        var FRAMEBUFFER_FUNC = env.invoke(scope, dyn);\r\n        var shared = env.shared;\r\n        var FRAMEBUFFER_STATE = shared.framebuffer;\r\n        var FRAMEBUFFER = scope.def(\r\n          FRAMEBUFFER_STATE, '.getFramebuffer(', FRAMEBUFFER_FUNC, ')');\r\n\r\n        check$1.optional(function () {\r\n          env.assert(scope,\r\n            '!' + FRAMEBUFFER_FUNC + '||' + FRAMEBUFFER,\r\n            'invalid framebuffer object');\r\n        });\r\n\r\n        scope.set(\r\n          FRAMEBUFFER_STATE,\r\n          '.next',\r\n          FRAMEBUFFER);\r\n        var CONTEXT = shared.context;\r\n        scope.set(\r\n          CONTEXT,\r\n          '.' + S_FRAMEBUFFER_WIDTH,\r\n          FRAMEBUFFER + '?' + FRAMEBUFFER + '.width:' +\r\n          CONTEXT + '.' + S_DRAWINGBUFFER_WIDTH);\r\n        scope.set(\r\n          CONTEXT,\r\n          '.' + S_FRAMEBUFFER_HEIGHT,\r\n          FRAMEBUFFER +\r\n          '?' + FRAMEBUFFER + '.height:' +\r\n          CONTEXT + '.' + S_DRAWINGBUFFER_HEIGHT);\r\n        return FRAMEBUFFER\r\n      })\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  function parseViewportScissor (options, framebuffer, env) {\r\n    var staticOptions = options.static;\r\n    var dynamicOptions = options.dynamic;\r\n\r\n    function parseBox (param) {\r\n      if (param in staticOptions) {\r\n        var box = staticOptions[param];\r\n        check$1.commandType(box, 'object', 'invalid ' + param, env.commandStr);\r\n\r\n        var isStatic = true;\r\n        var x = box.x | 0;\r\n        var y = box.y | 0;\r\n        var w, h;\r\n        if ('width' in box) {\r\n          w = box.width | 0;\r\n          check$1.command(w >= 0, 'invalid ' + param, env.commandStr);\r\n        } else {\r\n          isStatic = false;\r\n        }\r\n        if ('height' in box) {\r\n          h = box.height | 0;\r\n          check$1.command(h >= 0, 'invalid ' + param, env.commandStr);\r\n        } else {\r\n          isStatic = false;\r\n        }\r\n\r\n        return new Declaration(\r\n          !isStatic && framebuffer && framebuffer.thisDep,\r\n          !isStatic && framebuffer && framebuffer.contextDep,\r\n          !isStatic && framebuffer && framebuffer.propDep,\r\n          function (env, scope) {\r\n            var CONTEXT = env.shared.context;\r\n            var BOX_W = w;\r\n            if (!('width' in box)) {\r\n              BOX_W = scope.def(CONTEXT, '.', S_FRAMEBUFFER_WIDTH, '-', x);\r\n            }\r\n            var BOX_H = h;\r\n            if (!('height' in box)) {\r\n              BOX_H = scope.def(CONTEXT, '.', S_FRAMEBUFFER_HEIGHT, '-', y);\r\n            }\r\n            return [x, y, BOX_W, BOX_H]\r\n          })\r\n      } else if (param in dynamicOptions) {\r\n        var dynBox = dynamicOptions[param];\r\n        var result = createDynamicDecl(dynBox, function (env, scope) {\r\n          var BOX = env.invoke(scope, dynBox);\r\n\r\n          check$1.optional(function () {\r\n            env.assert(scope,\r\n              BOX + '&&typeof ' + BOX + '===\"object\"',\r\n              'invalid ' + param);\r\n          });\r\n\r\n          var CONTEXT = env.shared.context;\r\n          var BOX_X = scope.def(BOX, '.x|0');\r\n          var BOX_Y = scope.def(BOX, '.y|0');\r\n          var BOX_W = scope.def(\r\n            '\"width\" in ', BOX, '?', BOX, '.width|0:',\r\n            '(', CONTEXT, '.', S_FRAMEBUFFER_WIDTH, '-', BOX_X, ')');\r\n          var BOX_H = scope.def(\r\n            '\"height\" in ', BOX, '?', BOX, '.height|0:',\r\n            '(', CONTEXT, '.', S_FRAMEBUFFER_HEIGHT, '-', BOX_Y, ')');\r\n\r\n          check$1.optional(function () {\r\n            env.assert(scope,\r\n              BOX_W + '>=0&&' +\r\n              BOX_H + '>=0',\r\n              'invalid ' + param);\r\n          });\r\n\r\n          return [BOX_X, BOX_Y, BOX_W, BOX_H]\r\n        });\r\n        if (framebuffer) {\r\n          result.thisDep = result.thisDep || framebuffer.thisDep;\r\n          result.contextDep = result.contextDep || framebuffer.contextDep;\r\n          result.propDep = result.propDep || framebuffer.propDep;\r\n        }\r\n        return result\r\n      } else if (framebuffer) {\r\n        return new Declaration(\r\n          framebuffer.thisDep,\r\n          framebuffer.contextDep,\r\n          framebuffer.propDep,\r\n          function (env, scope) {\r\n            var CONTEXT = env.shared.context;\r\n            return [\r\n              0, 0,\r\n              scope.def(CONTEXT, '.', S_FRAMEBUFFER_WIDTH),\r\n              scope.def(CONTEXT, '.', S_FRAMEBUFFER_HEIGHT)]\r\n          })\r\n      } else {\r\n        return null\r\n      }\r\n    }\r\n\r\n    var viewport = parseBox(S_VIEWPORT);\r\n\r\n    if (viewport) {\r\n      var prevViewport = viewport;\r\n      viewport = new Declaration(\r\n        viewport.thisDep,\r\n        viewport.contextDep,\r\n        viewport.propDep,\r\n        function (env, scope) {\r\n          var VIEWPORT = prevViewport.append(env, scope);\r\n          var CONTEXT = env.shared.context;\r\n          scope.set(\r\n            CONTEXT,\r\n            '.' + S_VIEWPORT_WIDTH,\r\n            VIEWPORT[2]);\r\n          scope.set(\r\n            CONTEXT,\r\n            '.' + S_VIEWPORT_HEIGHT,\r\n            VIEWPORT[3]);\r\n          return VIEWPORT\r\n        });\r\n    }\r\n\r\n    return {\r\n      viewport: viewport,\r\n      scissor_box: parseBox(S_SCISSOR_BOX)\r\n    }\r\n  }\r\n\r\n  function parseProgram (options) {\r\n    var staticOptions = options.static;\r\n    var dynamicOptions = options.dynamic;\r\n\r\n    function parseShader (name) {\r\n      if (name in staticOptions) {\r\n        var id = stringStore.id(staticOptions[name]);\r\n        check$1.optional(function () {\r\n          shaderState.shader(shaderType[name], id, check$1.guessCommand());\r\n        });\r\n        var result = createStaticDecl(function () {\r\n          return id\r\n        });\r\n        result.id = id;\r\n        return result\r\n      } else if (name in dynamicOptions) {\r\n        var dyn = dynamicOptions[name];\r\n        return createDynamicDecl(dyn, function (env, scope) {\r\n          var str = env.invoke(scope, dyn);\r\n          var id = scope.def(env.shared.strings, '.id(', str, ')');\r\n          check$1.optional(function () {\r\n            scope(\r\n              env.shared.shader, '.shader(',\r\n              shaderType[name], ',',\r\n              id, ',',\r\n              env.command, ');');\r\n          });\r\n          return id\r\n        })\r\n      }\r\n      return null\r\n    }\r\n\r\n    var frag = parseShader(S_FRAG);\r\n    var vert = parseShader(S_VERT);\r\n\r\n    var program = null;\r\n    var progVar;\r\n    if (isStatic(frag) && isStatic(vert)) {\r\n      program = shaderState.program(vert.id, frag.id);\r\n      progVar = createStaticDecl(function (env, scope) {\r\n        return env.link(program)\r\n      });\r\n    } else {\r\n      progVar = new Declaration(\r\n        (frag && frag.thisDep) || (vert && vert.thisDep),\r\n        (frag && frag.contextDep) || (vert && vert.contextDep),\r\n        (frag && frag.propDep) || (vert && vert.propDep),\r\n        function (env, scope) {\r\n          var SHADER_STATE = env.shared.shader;\r\n          var fragId;\r\n          if (frag) {\r\n            fragId = frag.append(env, scope);\r\n          } else {\r\n            fragId = scope.def(SHADER_STATE, '.', S_FRAG);\r\n          }\r\n          var vertId;\r\n          if (vert) {\r\n            vertId = vert.append(env, scope);\r\n          } else {\r\n            vertId = scope.def(SHADER_STATE, '.', S_VERT);\r\n          }\r\n          var progDef = SHADER_STATE + '.program(' + vertId + ',' + fragId;\r\n          check$1.optional(function () {\r\n            progDef += ',' + env.command;\r\n          });\r\n          return scope.def(progDef + ')')\r\n        });\r\n    }\r\n\r\n    return {\r\n      frag: frag,\r\n      vert: vert,\r\n      progVar: progVar,\r\n      program: program\r\n    }\r\n  }\r\n\r\n  function parseDraw (options, env) {\r\n    var staticOptions = options.static;\r\n    var dynamicOptions = options.dynamic;\r\n\r\n    function parseElements () {\r\n      if (S_ELEMENTS in staticOptions) {\r\n        var elements = staticOptions[S_ELEMENTS];\r\n        if (isBufferArgs(elements)) {\r\n          elements = elementState.getElements(elementState.create(elements, true));\r\n        } else if (elements) {\r\n          elements = elementState.getElements(elements);\r\n          check$1.command(elements, 'invalid elements', env.commandStr);\r\n        }\r\n        var result = createStaticDecl(function (env, scope) {\r\n          if (elements) {\r\n            var result = env.link(elements);\r\n            env.ELEMENTS = result;\r\n            return result\r\n          }\r\n          env.ELEMENTS = null;\r\n          return null\r\n        });\r\n        result.value = elements;\r\n        return result\r\n      } else if (S_ELEMENTS in dynamicOptions) {\r\n        var dyn = dynamicOptions[S_ELEMENTS];\r\n        return createDynamicDecl(dyn, function (env, scope) {\r\n          var shared = env.shared;\r\n\r\n          var IS_BUFFER_ARGS = shared.isBufferArgs;\r\n          var ELEMENT_STATE = shared.elements;\r\n\r\n          var elementDefn = env.invoke(scope, dyn);\r\n          var elements = scope.def('null');\r\n          var elementStream = scope.def(IS_BUFFER_ARGS, '(', elementDefn, ')');\r\n\r\n          var ifte = env.cond(elementStream)\r\n            .then(elements, '=', ELEMENT_STATE, '.createStream(', elementDefn, ');')\r\n            .else(elements, '=', ELEMENT_STATE, '.getElements(', elementDefn, ');');\r\n\r\n          check$1.optional(function () {\r\n            env.assert(ifte.else,\r\n              '!' + elementDefn + '||' + elements,\r\n              'invalid elements');\r\n          });\r\n\r\n          scope.entry(ifte);\r\n          scope.exit(\r\n            env.cond(elementStream)\r\n              .then(ELEMENT_STATE, '.destroyStream(', elements, ');'));\r\n\r\n          env.ELEMENTS = elements;\r\n\r\n          return elements\r\n        })\r\n      }\r\n\r\n      return null\r\n    }\r\n\r\n    var elements = parseElements();\r\n\r\n    function parsePrimitive () {\r\n      if (S_PRIMITIVE in staticOptions) {\r\n        var primitive = staticOptions[S_PRIMITIVE];\r\n        check$1.commandParameter(primitive, primTypes, 'invalid primitve', env.commandStr);\r\n        return createStaticDecl(function (env, scope) {\r\n          return primTypes[primitive]\r\n        })\r\n      } else if (S_PRIMITIVE in dynamicOptions) {\r\n        var dynPrimitive = dynamicOptions[S_PRIMITIVE];\r\n        return createDynamicDecl(dynPrimitive, function (env, scope) {\r\n          var PRIM_TYPES = env.constants.primTypes;\r\n          var prim = env.invoke(scope, dynPrimitive);\r\n          check$1.optional(function () {\r\n            env.assert(scope,\r\n              prim + ' in ' + PRIM_TYPES,\r\n              'invalid primitive, must be one of ' + Object.keys(primTypes));\r\n          });\r\n          return scope.def(PRIM_TYPES, '[', prim, ']')\r\n        })\r\n      } else if (elements) {\r\n        if (isStatic(elements)) {\r\n          if (elements.value) {\r\n            return createStaticDecl(function (env, scope) {\r\n              return scope.def(env.ELEMENTS, '.primType')\r\n            })\r\n          } else {\r\n            return createStaticDecl(function () {\r\n              return GL_TRIANGLES$1\r\n            })\r\n          }\r\n        } else {\r\n          return new Declaration(\r\n            elements.thisDep,\r\n            elements.contextDep,\r\n            elements.propDep,\r\n            function (env, scope) {\r\n              var elements = env.ELEMENTS;\r\n              return scope.def(elements, '?', elements, '.primType:', GL_TRIANGLES$1)\r\n            })\r\n        }\r\n      }\r\n      return null\r\n    }\r\n\r\n    function parseParam (param, isOffset) {\r\n      if (param in staticOptions) {\r\n        var value = staticOptions[param] | 0;\r\n        check$1.command(!isOffset || value >= 0, 'invalid ' + param, env.commandStr);\r\n        return createStaticDecl(function (env, scope) {\r\n          if (isOffset) {\r\n            env.OFFSET = value;\r\n          }\r\n          return value\r\n        })\r\n      } else if (param in dynamicOptions) {\r\n        var dynValue = dynamicOptions[param];\r\n        return createDynamicDecl(dynValue, function (env, scope) {\r\n          var result = env.invoke(scope, dynValue);\r\n          if (isOffset) {\r\n            env.OFFSET = result;\r\n            check$1.optional(function () {\r\n              env.assert(scope,\r\n                result + '>=0',\r\n                'invalid ' + param);\r\n            });\r\n          }\r\n          return result\r\n        })\r\n      } else if (isOffset && elements) {\r\n        return createStaticDecl(function (env, scope) {\r\n          env.OFFSET = '0';\r\n          return 0\r\n        })\r\n      }\r\n      return null\r\n    }\r\n\r\n    var OFFSET = parseParam(S_OFFSET, true);\r\n\r\n    function parseVertCount () {\r\n      if (S_COUNT in staticOptions) {\r\n        var count = staticOptions[S_COUNT] | 0;\r\n        check$1.command(\r\n          typeof count === 'number' && count >= 0, 'invalid vertex count', env.commandStr);\r\n        return createStaticDecl(function () {\r\n          return count\r\n        })\r\n      } else if (S_COUNT in dynamicOptions) {\r\n        var dynCount = dynamicOptions[S_COUNT];\r\n        return createDynamicDecl(dynCount, function (env, scope) {\r\n          var result = env.invoke(scope, dynCount);\r\n          check$1.optional(function () {\r\n            env.assert(scope,\r\n              'typeof ' + result + '===\"number\"&&' +\r\n              result + '>=0&&' +\r\n              result + '===(' + result + '|0)',\r\n              'invalid vertex count');\r\n          });\r\n          return result\r\n        })\r\n      } else if (elements) {\r\n        if (isStatic(elements)) {\r\n          if (elements) {\r\n            if (OFFSET) {\r\n              return new Declaration(\r\n                OFFSET.thisDep,\r\n                OFFSET.contextDep,\r\n                OFFSET.propDep,\r\n                function (env, scope) {\r\n                  var result = scope.def(\r\n                    env.ELEMENTS, '.vertCount-', env.OFFSET);\r\n\r\n                  check$1.optional(function () {\r\n                    env.assert(scope,\r\n                      result + '>=0',\r\n                      'invalid vertex offset/element buffer too small');\r\n                  });\r\n\r\n                  return result\r\n                })\r\n            } else {\r\n              return createStaticDecl(function (env, scope) {\r\n                return scope.def(env.ELEMENTS, '.vertCount')\r\n              })\r\n            }\r\n          } else {\r\n            var result = createStaticDecl(function () {\r\n              return -1\r\n            });\r\n            check$1.optional(function () {\r\n              result.MISSING = true;\r\n            });\r\n            return result\r\n          }\r\n        } else {\r\n          var variable = new Declaration(\r\n            elements.thisDep || OFFSET.thisDep,\r\n            elements.contextDep || OFFSET.contextDep,\r\n            elements.propDep || OFFSET.propDep,\r\n            function (env, scope) {\r\n              var elements = env.ELEMENTS;\r\n              if (env.OFFSET) {\r\n                return scope.def(elements, '?', elements, '.vertCount-',\r\n                  env.OFFSET, ':-1')\r\n              }\r\n              return scope.def(elements, '?', elements, '.vertCount:-1')\r\n            });\r\n          check$1.optional(function () {\r\n            variable.DYNAMIC = true;\r\n          });\r\n          return variable\r\n        }\r\n      }\r\n      return null\r\n    }\r\n\r\n    return {\r\n      elements: elements,\r\n      primitive: parsePrimitive(),\r\n      count: parseVertCount(),\r\n      instances: parseParam(S_INSTANCES, false),\r\n      offset: OFFSET\r\n    }\r\n  }\r\n\r\n  function parseGLState (options, env) {\r\n    var staticOptions = options.static;\r\n    var dynamicOptions = options.dynamic;\r\n\r\n    var STATE = {};\r\n\r\n    GL_STATE_NAMES.forEach(function (prop) {\r\n      var param = propName(prop);\r\n\r\n      function parseParam (parseStatic, parseDynamic) {\r\n        if (prop in staticOptions) {\r\n          var value = parseStatic(staticOptions[prop]);\r\n          STATE[param] = createStaticDecl(function () {\r\n            return value\r\n          });\r\n        } else if (prop in dynamicOptions) {\r\n          var dyn = dynamicOptions[prop];\r\n          STATE[param] = createDynamicDecl(dyn, function (env, scope) {\r\n            return parseDynamic(env, scope, env.invoke(scope, dyn))\r\n          });\r\n        }\r\n      }\r\n\r\n      switch (prop) {\r\n        case S_CULL_ENABLE:\r\n        case S_BLEND_ENABLE:\r\n        case S_DITHER:\r\n        case S_STENCIL_ENABLE:\r\n        case S_DEPTH_ENABLE:\r\n        case S_SCISSOR_ENABLE:\r\n        case S_POLYGON_OFFSET_ENABLE:\r\n        case S_SAMPLE_ALPHA:\r\n        case S_SAMPLE_ENABLE:\r\n        case S_DEPTH_MASK:\r\n          return parseParam(\r\n            function (value) {\r\n              check$1.commandType(value, 'boolean', prop, env.commandStr);\r\n              return value\r\n            },\r\n            function (env, scope, value) {\r\n              check$1.optional(function () {\r\n                env.assert(scope,\r\n                  'typeof ' + value + '===\"boolean\"',\r\n                  'invalid flag ' + prop, env.commandStr);\r\n              });\r\n              return value\r\n            })\r\n\r\n        case S_DEPTH_FUNC:\r\n          return parseParam(\r\n            function (value) {\r\n              check$1.commandParameter(value, compareFuncs, 'invalid ' + prop, env.commandStr);\r\n              return compareFuncs[value]\r\n            },\r\n            function (env, scope, value) {\r\n              var COMPARE_FUNCS = env.constants.compareFuncs;\r\n              check$1.optional(function () {\r\n                env.assert(scope,\r\n                  value + ' in ' + COMPARE_FUNCS,\r\n                  'invalid ' + prop + ', must be one of ' + Object.keys(compareFuncs));\r\n              });\r\n              return scope.def(COMPARE_FUNCS, '[', value, ']')\r\n            })\r\n\r\n        case S_DEPTH_RANGE:\r\n          return parseParam(\r\n            function (value) {\r\n              check$1.command(\r\n                isArrayLike(value) &&\r\n                value.length === 2 &&\r\n                typeof value[0] === 'number' &&\r\n                typeof value[1] === 'number' &&\r\n                value[0] <= value[1],\r\n                'depth range is 2d array',\r\n                env.commandStr);\r\n              return value\r\n            },\r\n            function (env, scope, value) {\r\n              check$1.optional(function () {\r\n                env.assert(scope,\r\n                  env.shared.isArrayLike + '(' + value + ')&&' +\r\n                  value + '.length===2&&' +\r\n                  'typeof ' + value + '[0]===\"number\"&&' +\r\n                  'typeof ' + value + '[1]===\"number\"&&' +\r\n                  value + '[0]<=' + value + '[1]',\r\n                  'depth range must be a 2d array');\r\n              });\r\n\r\n              var Z_NEAR = scope.def('+', value, '[0]');\r\n              var Z_FAR = scope.def('+', value, '[1]');\r\n              return [Z_NEAR, Z_FAR]\r\n            })\r\n\r\n        case S_BLEND_FUNC:\r\n          return parseParam(\r\n            function (value) {\r\n              check$1.commandType(value, 'object', 'blend.func', env.commandStr);\r\n              var srcRGB = ('srcRGB' in value ? value.srcRGB : value.src);\r\n              var srcAlpha = ('srcAlpha' in value ? value.srcAlpha : value.src);\r\n              var dstRGB = ('dstRGB' in value ? value.dstRGB : value.dst);\r\n              var dstAlpha = ('dstAlpha' in value ? value.dstAlpha : value.dst);\r\n              check$1.commandParameter(srcRGB, blendFuncs, param + '.srcRGB', env.commandStr);\r\n              check$1.commandParameter(srcAlpha, blendFuncs, param + '.srcAlpha', env.commandStr);\r\n              check$1.commandParameter(dstRGB, blendFuncs, param + '.dstRGB', env.commandStr);\r\n              check$1.commandParameter(dstAlpha, blendFuncs, param + '.dstAlpha', env.commandStr);\r\n\r\n              check$1.command(\r\n                (invalidBlendCombinations.indexOf(srcRGB + ', ' + dstRGB) === -1),\r\n                'unallowed blending combination (srcRGB, dstRGB) = (' + srcRGB + ', ' + dstRGB + ')', env.commandStr);\r\n\r\n              return [\r\n                blendFuncs[srcRGB],\r\n                blendFuncs[dstRGB],\r\n                blendFuncs[srcAlpha],\r\n                blendFuncs[dstAlpha]\r\n              ]\r\n            },\r\n            function (env, scope, value) {\r\n              var BLEND_FUNCS = env.constants.blendFuncs;\r\n\r\n              check$1.optional(function () {\r\n                env.assert(scope,\r\n                  value + '&&typeof ' + value + '===\"object\"',\r\n                  'invalid blend func, must be an object');\r\n              });\r\n\r\n              function read (prefix, suffix) {\r\n                var func = scope.def(\r\n                  '\"', prefix, suffix, '\" in ', value,\r\n                  '?', value, '.', prefix, suffix,\r\n                  ':', value, '.', prefix);\r\n\r\n                check$1.optional(function () {\r\n                  env.assert(scope,\r\n                    func + ' in ' + BLEND_FUNCS,\r\n                    'invalid ' + prop + '.' + prefix + suffix + ', must be one of ' + Object.keys(blendFuncs));\r\n                });\r\n\r\n                return func\r\n              }\r\n\r\n              var srcRGB = read('src', 'RGB');\r\n              var dstRGB = read('dst', 'RGB');\r\n\r\n              check$1.optional(function () {\r\n                var INVALID_BLEND_COMBINATIONS = env.constants.invalidBlendCombinations;\r\n\r\n                env.assert(scope,\r\n                           INVALID_BLEND_COMBINATIONS +\r\n                           '.indexOf(' + srcRGB + '+\", \"+' + dstRGB + ') === -1 ',\r\n                           'unallowed blending combination for (srcRGB, dstRGB)'\r\n                          );\r\n              });\r\n\r\n              var SRC_RGB = scope.def(BLEND_FUNCS, '[', srcRGB, ']');\r\n              var SRC_ALPHA = scope.def(BLEND_FUNCS, '[', read('src', 'Alpha'), ']');\r\n              var DST_RGB = scope.def(BLEND_FUNCS, '[', dstRGB, ']');\r\n              var DST_ALPHA = scope.def(BLEND_FUNCS, '[', read('dst', 'Alpha'), ']');\r\n\r\n              return [SRC_RGB, DST_RGB, SRC_ALPHA, DST_ALPHA]\r\n            })\r\n\r\n        case S_BLEND_EQUATION:\r\n          return parseParam(\r\n            function (value) {\r\n              if (typeof value === 'string') {\r\n                check$1.commandParameter(value, blendEquations, 'invalid ' + prop, env.commandStr);\r\n                return [\r\n                  blendEquations[value],\r\n                  blendEquations[value]\r\n                ]\r\n              } else if (typeof value === 'object') {\r\n                check$1.commandParameter(\r\n                  value.rgb, blendEquations, prop + '.rgb', env.commandStr);\r\n                check$1.commandParameter(\r\n                  value.alpha, blendEquations, prop + '.alpha', env.commandStr);\r\n                return [\r\n                  blendEquations[value.rgb],\r\n                  blendEquations[value.alpha]\r\n                ]\r\n              } else {\r\n                check$1.commandRaise('invalid blend.equation', env.commandStr);\r\n              }\r\n            },\r\n            function (env, scope, value) {\r\n              var BLEND_EQUATIONS = env.constants.blendEquations;\r\n\r\n              var RGB = scope.def();\r\n              var ALPHA = scope.def();\r\n\r\n              var ifte = env.cond('typeof ', value, '===\"string\"');\r\n\r\n              check$1.optional(function () {\r\n                function checkProp (block, name, value) {\r\n                  env.assert(block,\r\n                    value + ' in ' + BLEND_EQUATIONS,\r\n                    'invalid ' + name + ', must be one of ' + Object.keys(blendEquations));\r\n                }\r\n                checkProp(ifte.then, prop, value);\r\n\r\n                env.assert(ifte.else,\r\n                  value + '&&typeof ' + value + '===\"object\"',\r\n                  'invalid ' + prop);\r\n                checkProp(ifte.else, prop + '.rgb', value + '.rgb');\r\n                checkProp(ifte.else, prop + '.alpha', value + '.alpha');\r\n              });\r\n\r\n              ifte.then(\r\n                RGB, '=', ALPHA, '=', BLEND_EQUATIONS, '[', value, '];');\r\n              ifte.else(\r\n                RGB, '=', BLEND_EQUATIONS, '[', value, '.rgb];',\r\n                ALPHA, '=', BLEND_EQUATIONS, '[', value, '.alpha];');\r\n\r\n              scope(ifte);\r\n\r\n              return [RGB, ALPHA]\r\n            })\r\n\r\n        case S_BLEND_COLOR:\r\n          return parseParam(\r\n            function (value) {\r\n              check$1.command(\r\n                isArrayLike(value) &&\r\n                value.length === 4,\r\n                'blend.color must be a 4d array', env.commandStr);\r\n              return loop(4, function (i) {\r\n                return +value[i]\r\n              })\r\n            },\r\n            function (env, scope, value) {\r\n              check$1.optional(function () {\r\n                env.assert(scope,\r\n                  env.shared.isArrayLike + '(' + value + ')&&' +\r\n                  value + '.length===4',\r\n                  'blend.color must be a 4d array');\r\n              });\r\n              return loop(4, function (i) {\r\n                return scope.def('+', value, '[', i, ']')\r\n              })\r\n            })\r\n\r\n        case S_STENCIL_MASK:\r\n          return parseParam(\r\n            function (value) {\r\n              check$1.commandType(value, 'number', param, env.commandStr);\r\n              return value | 0\r\n            },\r\n            function (env, scope, value) {\r\n              check$1.optional(function () {\r\n                env.assert(scope,\r\n                  'typeof ' + value + '===\"number\"',\r\n                  'invalid stencil.mask');\r\n              });\r\n              return scope.def(value, '|0')\r\n            })\r\n\r\n        case S_STENCIL_FUNC:\r\n          return parseParam(\r\n            function (value) {\r\n              check$1.commandType(value, 'object', param, env.commandStr);\r\n              var cmp = value.cmp || 'keep';\r\n              var ref = value.ref || 0;\r\n              var mask = 'mask' in value ? value.mask : -1;\r\n              check$1.commandParameter(cmp, compareFuncs, prop + '.cmp', env.commandStr);\r\n              check$1.commandType(ref, 'number', prop + '.ref', env.commandStr);\r\n              check$1.commandType(mask, 'number', prop + '.mask', env.commandStr);\r\n              return [\r\n                compareFuncs[cmp],\r\n                ref,\r\n                mask\r\n              ]\r\n            },\r\n            function (env, scope, value) {\r\n              var COMPARE_FUNCS = env.constants.compareFuncs;\r\n              check$1.optional(function () {\r\n                function assert () {\r\n                  env.assert(scope,\r\n                    Array.prototype.join.call(arguments, ''),\r\n                    'invalid stencil.func');\r\n                }\r\n                assert(value + '&&typeof ', value, '===\"object\"');\r\n                assert('!(\"cmp\" in ', value, ')||(',\r\n                  value, '.cmp in ', COMPARE_FUNCS, ')');\r\n              });\r\n              var cmp = scope.def(\r\n                '\"cmp\" in ', value,\r\n                '?', COMPARE_FUNCS, '[', value, '.cmp]',\r\n                ':', GL_KEEP);\r\n              var ref = scope.def(value, '.ref|0');\r\n              var mask = scope.def(\r\n                '\"mask\" in ', value,\r\n                '?', value, '.mask|0:-1');\r\n              return [cmp, ref, mask]\r\n            })\r\n\r\n        case S_STENCIL_OPFRONT:\r\n        case S_STENCIL_OPBACK:\r\n          return parseParam(\r\n            function (value) {\r\n              check$1.commandType(value, 'object', param, env.commandStr);\r\n              var fail = value.fail || 'keep';\r\n              var zfail = value.zfail || 'keep';\r\n              var zpass = value.zpass || 'keep';\r\n              check$1.commandParameter(fail, stencilOps, prop + '.fail', env.commandStr);\r\n              check$1.commandParameter(zfail, stencilOps, prop + '.zfail', env.commandStr);\r\n              check$1.commandParameter(zpass, stencilOps, prop + '.zpass', env.commandStr);\r\n              return [\r\n                prop === S_STENCIL_OPBACK ? GL_BACK : GL_FRONT,\r\n                stencilOps[fail],\r\n                stencilOps[zfail],\r\n                stencilOps[zpass]\r\n              ]\r\n            },\r\n            function (env, scope, value) {\r\n              var STENCIL_OPS = env.constants.stencilOps;\r\n\r\n              check$1.optional(function () {\r\n                env.assert(scope,\r\n                  value + '&&typeof ' + value + '===\"object\"',\r\n                  'invalid ' + prop);\r\n              });\r\n\r\n              function read (name) {\r\n                check$1.optional(function () {\r\n                  env.assert(scope,\r\n                    '!(\"' + name + '\" in ' + value + ')||' +\r\n                    '(' + value + '.' + name + ' in ' + STENCIL_OPS + ')',\r\n                    'invalid ' + prop + '.' + name + ', must be one of ' + Object.keys(stencilOps));\r\n                });\r\n\r\n                return scope.def(\r\n                  '\"', name, '\" in ', value,\r\n                  '?', STENCIL_OPS, '[', value, '.', name, ']:',\r\n                  GL_KEEP)\r\n              }\r\n\r\n              return [\r\n                prop === S_STENCIL_OPBACK ? GL_BACK : GL_FRONT,\r\n                read('fail'),\r\n                read('zfail'),\r\n                read('zpass')\r\n              ]\r\n            })\r\n\r\n        case S_POLYGON_OFFSET_OFFSET:\r\n          return parseParam(\r\n            function (value) {\r\n              check$1.commandType(value, 'object', param, env.commandStr);\r\n              var factor = value.factor | 0;\r\n              var units = value.units | 0;\r\n              check$1.commandType(factor, 'number', param + '.factor', env.commandStr);\r\n              check$1.commandType(units, 'number', param + '.units', env.commandStr);\r\n              return [factor, units]\r\n            },\r\n            function (env, scope, value) {\r\n              check$1.optional(function () {\r\n                env.assert(scope,\r\n                  value + '&&typeof ' + value + '===\"object\"',\r\n                  'invalid ' + prop);\r\n              });\r\n\r\n              var FACTOR = scope.def(value, '.factor|0');\r\n              var UNITS = scope.def(value, '.units|0');\r\n\r\n              return [FACTOR, UNITS]\r\n            })\r\n\r\n        case S_CULL_FACE:\r\n          return parseParam(\r\n            function (value) {\r\n              var face = 0;\r\n              if (value === 'front') {\r\n                face = GL_FRONT;\r\n              } else if (value === 'back') {\r\n                face = GL_BACK;\r\n              }\r\n              check$1.command(!!face, param, env.commandStr);\r\n              return face\r\n            },\r\n            function (env, scope, value) {\r\n              check$1.optional(function () {\r\n                env.assert(scope,\r\n                  value + '===\"front\"||' +\r\n                  value + '===\"back\"',\r\n                  'invalid cull.face');\r\n              });\r\n              return scope.def(value, '===\"front\"?', GL_FRONT, ':', GL_BACK)\r\n            })\r\n\r\n        case S_LINE_WIDTH:\r\n          return parseParam(\r\n            function (value) {\r\n              check$1.command(\r\n                typeof value === 'number' &&\r\n                value >= limits.lineWidthDims[0] &&\r\n                value <= limits.lineWidthDims[1],\r\n                'invalid line width, must be a positive number between ' +\r\n                limits.lineWidthDims[0] + ' and ' + limits.lineWidthDims[1], env.commandStr);\r\n              return value\r\n            },\r\n            function (env, scope, value) {\r\n              check$1.optional(function () {\r\n                env.assert(scope,\r\n                  'typeof ' + value + '===\"number\"&&' +\r\n                  value + '>=' + limits.lineWidthDims[0] + '&&' +\r\n                  value + '<=' + limits.lineWidthDims[1],\r\n                  'invalid line width');\r\n              });\r\n\r\n              return value\r\n            })\r\n\r\n        case S_FRONT_FACE:\r\n          return parseParam(\r\n            function (value) {\r\n              check$1.commandParameter(value, orientationType, param, env.commandStr);\r\n              return orientationType[value]\r\n            },\r\n            function (env, scope, value) {\r\n              check$1.optional(function () {\r\n                env.assert(scope,\r\n                  value + '===\"cw\"||' +\r\n                  value + '===\"ccw\"',\r\n                  'invalid frontFace, must be one of cw,ccw');\r\n              });\r\n              return scope.def(value + '===\"cw\"?' + GL_CW + ':' + GL_CCW)\r\n            })\r\n\r\n        case S_COLOR_MASK:\r\n          return parseParam(\r\n            function (value) {\r\n              check$1.command(\r\n                isArrayLike(value) && value.length === 4,\r\n                'color.mask must be length 4 array', env.commandStr);\r\n              return value.map(function (v) { return !!v })\r\n            },\r\n            function (env, scope, value) {\r\n              check$1.optional(function () {\r\n                env.assert(scope,\r\n                  env.shared.isArrayLike + '(' + value + ')&&' +\r\n                  value + '.length===4',\r\n                  'invalid color.mask');\r\n              });\r\n              return loop(4, function (i) {\r\n                return '!!' + value + '[' + i + ']'\r\n              })\r\n            })\r\n\r\n        case S_SAMPLE_COVERAGE:\r\n          return parseParam(\r\n            function (value) {\r\n              check$1.command(typeof value === 'object' && value, param, env.commandStr);\r\n              var sampleValue = 'value' in value ? value.value : 1;\r\n              var sampleInvert = !!value.invert;\r\n              check$1.command(\r\n                typeof sampleValue === 'number' &&\r\n                sampleValue >= 0 && sampleValue <= 1,\r\n                'sample.coverage.value must be a number between 0 and 1', env.commandStr);\r\n              return [sampleValue, sampleInvert]\r\n            },\r\n            function (env, scope, value) {\r\n              check$1.optional(function () {\r\n                env.assert(scope,\r\n                  value + '&&typeof ' + value + '===\"object\"',\r\n                  'invalid sample.coverage');\r\n              });\r\n              var VALUE = scope.def(\r\n                '\"value\" in ', value, '?+', value, '.value:1');\r\n              var INVERT = scope.def('!!', value, '.invert');\r\n              return [VALUE, INVERT]\r\n            })\r\n      }\r\n    });\r\n\r\n    return STATE\r\n  }\r\n\r\n  function parseUniforms (uniforms, env) {\r\n    var staticUniforms = uniforms.static;\r\n    var dynamicUniforms = uniforms.dynamic;\r\n\r\n    var UNIFORMS = {};\r\n\r\n    Object.keys(staticUniforms).forEach(function (name) {\r\n      var value = staticUniforms[name];\r\n      var result;\r\n      if (typeof value === 'number' ||\r\n          typeof value === 'boolean') {\r\n        result = createStaticDecl(function () {\r\n          return value\r\n        });\r\n      } else if (typeof value === 'function') {\r\n        var reglType = value._reglType;\r\n        if (reglType === 'texture2d' ||\r\n            reglType === 'textureCube') {\r\n          result = createStaticDecl(function (env) {\r\n            return env.link(value)\r\n          });\r\n        } else if (reglType === 'framebuffer' ||\r\n                   reglType === 'framebufferCube') {\r\n          check$1.command(value.color.length > 0,\r\n            'missing color attachment for framebuffer sent to uniform \"' + name + '\"', env.commandStr);\r\n          result = createStaticDecl(function (env) {\r\n            return env.link(value.color[0])\r\n          });\r\n        } else {\r\n          check$1.commandRaise('invalid data for uniform \"' + name + '\"', env.commandStr);\r\n        }\r\n      } else if (isArrayLike(value)) {\r\n        result = createStaticDecl(function (env) {\r\n          var ITEM = env.global.def('[',\r\n            loop(value.length, function (i) {\r\n              check$1.command(\r\n                typeof value[i] === 'number' ||\r\n                typeof value[i] === 'boolean',\r\n                'invalid uniform ' + name, env.commandStr);\r\n              return value[i]\r\n            }), ']');\r\n          return ITEM\r\n        });\r\n      } else {\r\n        check$1.commandRaise('invalid or missing data for uniform \"' + name + '\"', env.commandStr);\r\n      }\r\n      result.value = value;\r\n      UNIFORMS[name] = result;\r\n    });\r\n\r\n    Object.keys(dynamicUniforms).forEach(function (key) {\r\n      var dyn = dynamicUniforms[key];\r\n      UNIFORMS[key] = createDynamicDecl(dyn, function (env, scope) {\r\n        return env.invoke(scope, dyn)\r\n      });\r\n    });\r\n\r\n    return UNIFORMS\r\n  }\r\n\r\n  function parseAttributes (attributes, env) {\r\n    var staticAttributes = attributes.static;\r\n    var dynamicAttributes = attributes.dynamic;\r\n\r\n    var attributeDefs = {};\r\n\r\n    Object.keys(staticAttributes).forEach(function (attribute) {\r\n      var value = staticAttributes[attribute];\r\n      var id = stringStore.id(attribute);\r\n\r\n      var record = new AttributeRecord();\r\n      if (isBufferArgs(value)) {\r\n        record.state = ATTRIB_STATE_POINTER;\r\n        record.buffer = bufferState.getBuffer(\r\n          bufferState.create(value, GL_ARRAY_BUFFER$1, false, true));\r\n        record.type = 0;\r\n      } else {\r\n        var buffer = bufferState.getBuffer(value);\r\n        if (buffer) {\r\n          record.state = ATTRIB_STATE_POINTER;\r\n          record.buffer = buffer;\r\n          record.type = 0;\r\n        } else {\r\n          check$1.command(typeof value === 'object' && value,\r\n            'invalid data for attribute ' + attribute, env.commandStr);\r\n          if ('constant' in value) {\r\n            var constant = value.constant;\r\n            record.buffer = 'null';\r\n            record.state = ATTRIB_STATE_CONSTANT;\r\n            if (typeof constant === 'number') {\r\n              record.x = constant;\r\n            } else {\r\n              check$1.command(\r\n                isArrayLike(constant) &&\r\n                constant.length > 0 &&\r\n                constant.length <= 4,\r\n                'invalid constant for attribute ' + attribute, env.commandStr);\r\n              CUTE_COMPONENTS.forEach(function (c, i) {\r\n                if (i < constant.length) {\r\n                  record[c] = constant[i];\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            if (isBufferArgs(value.buffer)) {\r\n              buffer = bufferState.getBuffer(\r\n                bufferState.create(value.buffer, GL_ARRAY_BUFFER$1, false, true));\r\n            } else {\r\n              buffer = bufferState.getBuffer(value.buffer);\r\n            }\r\n            check$1.command(!!buffer, 'missing buffer for attribute \"' + attribute + '\"', env.commandStr);\r\n\r\n            var offset = value.offset | 0;\r\n            check$1.command(offset >= 0,\r\n              'invalid offset for attribute \"' + attribute + '\"', env.commandStr);\r\n\r\n            var stride = value.stride | 0;\r\n            check$1.command(stride >= 0 && stride < 256,\r\n              'invalid stride for attribute \"' + attribute + '\", must be integer betweeen [0, 255]', env.commandStr);\r\n\r\n            var size = value.size | 0;\r\n            check$1.command(!('size' in value) || (size > 0 && size <= 4),\r\n              'invalid size for attribute \"' + attribute + '\", must be 1,2,3,4', env.commandStr);\r\n\r\n            var normalized = !!value.normalized;\r\n\r\n            var type = 0;\r\n            if ('type' in value) {\r\n              check$1.commandParameter(\r\n                value.type, glTypes,\r\n                'invalid type for attribute ' + attribute, env.commandStr);\r\n              type = glTypes[value.type];\r\n            }\r\n\r\n            var divisor = value.divisor | 0;\r\n            if ('divisor' in value) {\r\n              check$1.command(divisor === 0 || extInstancing,\r\n                'cannot specify divisor for attribute \"' + attribute + '\", instancing not supported', env.commandStr);\r\n              check$1.command(divisor >= 0,\r\n                'invalid divisor for attribute \"' + attribute + '\"', env.commandStr);\r\n            }\r\n\r\n            check$1.optional(function () {\r\n              var command = env.commandStr;\r\n\r\n              var VALID_KEYS = [\r\n                'buffer',\r\n                'offset',\r\n                'divisor',\r\n                'normalized',\r\n                'type',\r\n                'size',\r\n                'stride'\r\n              ];\r\n\r\n              Object.keys(value).forEach(function (prop) {\r\n                check$1.command(\r\n                  VALID_KEYS.indexOf(prop) >= 0,\r\n                  'unknown parameter \"' + prop + '\" for attribute pointer \"' + attribute + '\" (valid parameters are ' + VALID_KEYS + ')',\r\n                  command);\r\n              });\r\n            });\r\n\r\n            record.buffer = buffer;\r\n            record.state = ATTRIB_STATE_POINTER;\r\n            record.size = size;\r\n            record.normalized = normalized;\r\n            record.type = type || buffer.dtype;\r\n            record.offset = offset;\r\n            record.stride = stride;\r\n            record.divisor = divisor;\r\n          }\r\n        }\r\n      }\r\n\r\n      attributeDefs[attribute] = createStaticDecl(function (env, scope) {\r\n        var cache = env.attribCache;\r\n        if (id in cache) {\r\n          return cache[id]\r\n        }\r\n        var result = {\r\n          isStream: false\r\n        };\r\n        Object.keys(record).forEach(function (key) {\r\n          result[key] = record[key];\r\n        });\r\n        if (record.buffer) {\r\n          result.buffer = env.link(record.buffer);\r\n          result.type = result.type || (result.buffer + '.dtype');\r\n        }\r\n        cache[id] = result;\r\n        return result\r\n      });\r\n    });\r\n\r\n    Object.keys(dynamicAttributes).forEach(function (attribute) {\r\n      var dyn = dynamicAttributes[attribute];\r\n\r\n      function appendAttributeCode (env, block) {\r\n        var VALUE = env.invoke(block, dyn);\r\n\r\n        var shared = env.shared;\r\n\r\n        var IS_BUFFER_ARGS = shared.isBufferArgs;\r\n        var BUFFER_STATE = shared.buffer;\r\n\r\n        // Perform validation on attribute\r\n        check$1.optional(function () {\r\n          env.assert(block,\r\n            VALUE + '&&(typeof ' + VALUE + '===\"object\"||typeof ' +\r\n            VALUE + '===\"function\")&&(' +\r\n            IS_BUFFER_ARGS + '(' + VALUE + ')||' +\r\n            BUFFER_STATE + '.getBuffer(' + VALUE + ')||' +\r\n            BUFFER_STATE + '.getBuffer(' + VALUE + '.buffer)||' +\r\n            IS_BUFFER_ARGS + '(' + VALUE + '.buffer)||' +\r\n            '(\"constant\" in ' + VALUE +\r\n            '&&(typeof ' + VALUE + '.constant===\"number\"||' +\r\n            shared.isArrayLike + '(' + VALUE + '.constant))))',\r\n            'invalid dynamic attribute \"' + attribute + '\"');\r\n        });\r\n\r\n        // allocate names for result\r\n        var result = {\r\n          isStream: block.def(false)\r\n        };\r\n        var defaultRecord = new AttributeRecord();\r\n        defaultRecord.state = ATTRIB_STATE_POINTER;\r\n        Object.keys(defaultRecord).forEach(function (key) {\r\n          result[key] = block.def('' + defaultRecord[key]);\r\n        });\r\n\r\n        var BUFFER = result.buffer;\r\n        var TYPE = result.type;\r\n        block(\r\n          'if(', IS_BUFFER_ARGS, '(', VALUE, ')){',\r\n          result.isStream, '=true;',\r\n          BUFFER, '=', BUFFER_STATE, '.createStream(', GL_ARRAY_BUFFER$1, ',', VALUE, ');',\r\n          TYPE, '=', BUFFER, '.dtype;',\r\n          '}else{',\r\n          BUFFER, '=', BUFFER_STATE, '.getBuffer(', VALUE, ');',\r\n          'if(', BUFFER, '){',\r\n          TYPE, '=', BUFFER, '.dtype;',\r\n          '}else if(\"constant\" in ', VALUE, '){',\r\n          result.state, '=', ATTRIB_STATE_CONSTANT, ';',\r\n          'if(typeof ' + VALUE + '.constant === \"number\"){',\r\n          result[CUTE_COMPONENTS[0]], '=', VALUE, '.constant;',\r\n          CUTE_COMPONENTS.slice(1).map(function (n) {\r\n            return result[n]\r\n          }).join('='), '=0;',\r\n          '}else{',\r\n          CUTE_COMPONENTS.map(function (name, i) {\r\n            return (\r\n              result[name] + '=' + VALUE + '.constant.length>' + i +\r\n              '?' + VALUE + '.constant[' + i + ']:0;'\r\n            )\r\n          }).join(''),\r\n          '}}else{',\r\n          'if(', IS_BUFFER_ARGS, '(', VALUE, '.buffer)){',\r\n          BUFFER, '=', BUFFER_STATE, '.createStream(', GL_ARRAY_BUFFER$1, ',', VALUE, '.buffer);',\r\n          '}else{',\r\n          BUFFER, '=', BUFFER_STATE, '.getBuffer(', VALUE, '.buffer);',\r\n          '}',\r\n          TYPE, '=\"type\" in ', VALUE, '?',\r\n          shared.glTypes, '[', VALUE, '.type]:', BUFFER, '.dtype;',\r\n          result.normalized, '=!!', VALUE, '.normalized;');\r\n        function emitReadRecord (name) {\r\n          block(result[name], '=', VALUE, '.', name, '|0;');\r\n        }\r\n        emitReadRecord('size');\r\n        emitReadRecord('offset');\r\n        emitReadRecord('stride');\r\n        emitReadRecord('divisor');\r\n\r\n        block('}}');\r\n\r\n        block.exit(\r\n          'if(', result.isStream, '){',\r\n          BUFFER_STATE, '.destroyStream(', BUFFER, ');',\r\n          '}');\r\n\r\n        return result\r\n      }\r\n\r\n      attributeDefs[attribute] = createDynamicDecl(dyn, appendAttributeCode);\r\n    });\r\n\r\n    return attributeDefs\r\n  }\r\n\r\n  function parseContext (context) {\r\n    var staticContext = context.static;\r\n    var dynamicContext = context.dynamic;\r\n    var result = {};\r\n\r\n    Object.keys(staticContext).forEach(function (name) {\r\n      var value = staticContext[name];\r\n      result[name] = createStaticDecl(function (env, scope) {\r\n        if (typeof value === 'number' || typeof value === 'boolean') {\r\n          return '' + value\r\n        } else {\r\n          return env.link(value)\r\n        }\r\n      });\r\n    });\r\n\r\n    Object.keys(dynamicContext).forEach(function (name) {\r\n      var dyn = dynamicContext[name];\r\n      result[name] = createDynamicDecl(dyn, function (env, scope) {\r\n        return env.invoke(scope, dyn)\r\n      });\r\n    });\r\n\r\n    return result\r\n  }\r\n\r\n  function parseArguments (options, attributes, uniforms, context, env) {\r\n    var staticOptions = options.static;\r\n    var dynamicOptions = options.dynamic;\r\n\r\n    check$1.optional(function () {\r\n      var KEY_NAMES = [\r\n        S_FRAMEBUFFER,\r\n        S_VERT,\r\n        S_FRAG,\r\n        S_ELEMENTS,\r\n        S_PRIMITIVE,\r\n        S_OFFSET,\r\n        S_COUNT,\r\n        S_INSTANCES,\r\n        S_PROFILE\r\n      ].concat(GL_STATE_NAMES);\r\n\r\n      function checkKeys (dict) {\r\n        Object.keys(dict).forEach(function (key) {\r\n          check$1.command(\r\n            KEY_NAMES.indexOf(key) >= 0,\r\n            'unknown parameter \"' + key + '\"',\r\n            env.commandStr);\r\n        });\r\n      }\r\n\r\n      checkKeys(staticOptions);\r\n      checkKeys(dynamicOptions);\r\n    });\r\n\r\n    var framebuffer = parseFramebuffer(options, env);\r\n    var viewportAndScissor = parseViewportScissor(options, framebuffer, env);\r\n    var draw = parseDraw(options, env);\r\n    var state = parseGLState(options, env);\r\n    var shader = parseProgram(options, env);\r\n\r\n    function copyBox (name) {\r\n      var defn = viewportAndScissor[name];\r\n      if (defn) {\r\n        state[name] = defn;\r\n      }\r\n    }\r\n    copyBox(S_VIEWPORT);\r\n    copyBox(propName(S_SCISSOR_BOX));\r\n\r\n    var dirty = Object.keys(state).length > 0;\r\n\r\n    var result = {\r\n      framebuffer: framebuffer,\r\n      draw: draw,\r\n      shader: shader,\r\n      state: state,\r\n      dirty: dirty\r\n    };\r\n\r\n    result.profile = parseProfile(options, env);\r\n    result.uniforms = parseUniforms(uniforms, env);\r\n    result.attributes = parseAttributes(attributes, env);\r\n    result.context = parseContext(context, env);\r\n    return result\r\n  }\r\n\r\n  // ===================================================\r\n  // ===================================================\r\n  // COMMON UPDATE FUNCTIONS\r\n  // ===================================================\r\n  // ===================================================\r\n  function emitContext (env, scope, context) {\r\n    var shared = env.shared;\r\n    var CONTEXT = shared.context;\r\n\r\n    var contextEnter = env.scope();\r\n\r\n    Object.keys(context).forEach(function (name) {\r\n      scope.save(CONTEXT, '.' + name);\r\n      var defn = context[name];\r\n      contextEnter(CONTEXT, '.', name, '=', defn.append(env, scope), ';');\r\n    });\r\n\r\n    scope(contextEnter);\r\n  }\r\n\r\n  // ===================================================\r\n  // ===================================================\r\n  // COMMON DRAWING FUNCTIONS\r\n  // ===================================================\r\n  // ===================================================\r\n  function emitPollFramebuffer (env, scope, framebuffer, skipCheck) {\r\n    var shared = env.shared;\r\n\r\n    var GL = shared.gl;\r\n    var FRAMEBUFFER_STATE = shared.framebuffer;\r\n    var EXT_DRAW_BUFFERS;\r\n    if (extDrawBuffers) {\r\n      EXT_DRAW_BUFFERS = scope.def(shared.extensions, '.webgl_draw_buffers');\r\n    }\r\n\r\n    var constants = env.constants;\r\n\r\n    var DRAW_BUFFERS = constants.drawBuffer;\r\n    var BACK_BUFFER = constants.backBuffer;\r\n\r\n    var NEXT;\r\n    if (framebuffer) {\r\n      NEXT = framebuffer.append(env, scope);\r\n    } else {\r\n      NEXT = scope.def(FRAMEBUFFER_STATE, '.next');\r\n    }\r\n\r\n    if (!skipCheck) {\r\n      scope('if(', NEXT, '!==', FRAMEBUFFER_STATE, '.cur){');\r\n    }\r\n    scope(\r\n      'if(', NEXT, '){',\r\n      GL, '.bindFramebuffer(', GL_FRAMEBUFFER$2, ',', NEXT, '.framebuffer);');\r\n    if (extDrawBuffers) {\r\n      scope(EXT_DRAW_BUFFERS, '.drawBuffersWEBGL(',\r\n        DRAW_BUFFERS, '[', NEXT, '.colorAttachments.length]);');\r\n    }\r\n    scope('}else{',\r\n      GL, '.bindFramebuffer(', GL_FRAMEBUFFER$2, ',null);');\r\n    if (extDrawBuffers) {\r\n      scope(EXT_DRAW_BUFFERS, '.drawBuffersWEBGL(', BACK_BUFFER, ');');\r\n    }\r\n    scope(\r\n      '}',\r\n      FRAMEBUFFER_STATE, '.cur=', NEXT, ';');\r\n    if (!skipCheck) {\r\n      scope('}');\r\n    }\r\n  }\r\n\r\n  function emitPollState (env, scope, args) {\r\n    var shared = env.shared;\r\n\r\n    var GL = shared.gl;\r\n\r\n    var CURRENT_VARS = env.current;\r\n    var NEXT_VARS = env.next;\r\n    var CURRENT_STATE = shared.current;\r\n    var NEXT_STATE = shared.next;\r\n\r\n    var block = env.cond(CURRENT_STATE, '.dirty');\r\n\r\n    GL_STATE_NAMES.forEach(function (prop) {\r\n      var param = propName(prop);\r\n      if (param in args.state) {\r\n        return\r\n      }\r\n\r\n      var NEXT, CURRENT;\r\n      if (param in NEXT_VARS) {\r\n        NEXT = NEXT_VARS[param];\r\n        CURRENT = CURRENT_VARS[param];\r\n        var parts = loop(currentState[param].length, function (i) {\r\n          return block.def(NEXT, '[', i, ']')\r\n        });\r\n        block(env.cond(parts.map(function (p, i) {\r\n          return p + '!==' + CURRENT + '[' + i + ']'\r\n        }).join('||'))\r\n          .then(\r\n            GL, '.', GL_VARIABLES[param], '(', parts, ');',\r\n            parts.map(function (p, i) {\r\n              return CURRENT + '[' + i + ']=' + p\r\n            }).join(';'), ';'));\r\n      } else {\r\n        NEXT = block.def(NEXT_STATE, '.', param);\r\n        var ifte = env.cond(NEXT, '!==', CURRENT_STATE, '.', param);\r\n        block(ifte);\r\n        if (param in GL_FLAGS) {\r\n          ifte(\r\n            env.cond(NEXT)\r\n                .then(GL, '.enable(', GL_FLAGS[param], ');')\r\n                .else(GL, '.disable(', GL_FLAGS[param], ');'),\r\n            CURRENT_STATE, '.', param, '=', NEXT, ';');\r\n        } else {\r\n          ifte(\r\n            GL, '.', GL_VARIABLES[param], '(', NEXT, ');',\r\n            CURRENT_STATE, '.', param, '=', NEXT, ';');\r\n        }\r\n      }\r\n    });\r\n    if (Object.keys(args.state).length === 0) {\r\n      block(CURRENT_STATE, '.dirty=false;');\r\n    }\r\n    scope(block);\r\n  }\r\n\r\n  function emitSetOptions (env, scope, options, filter) {\r\n    var shared = env.shared;\r\n    var CURRENT_VARS = env.current;\r\n    var CURRENT_STATE = shared.current;\r\n    var GL = shared.gl;\r\n    sortState(Object.keys(options)).forEach(function (param) {\r\n      var defn = options[param];\r\n      if (filter && !filter(defn)) {\r\n        return\r\n      }\r\n      var variable = defn.append(env, scope);\r\n      if (GL_FLAGS[param]) {\r\n        var flag = GL_FLAGS[param];\r\n        if (isStatic(defn)) {\r\n          if (variable) {\r\n            scope(GL, '.enable(', flag, ');');\r\n          } else {\r\n            scope(GL, '.disable(', flag, ');');\r\n          }\r\n        } else {\r\n          scope(env.cond(variable)\r\n            .then(GL, '.enable(', flag, ');')\r\n            .else(GL, '.disable(', flag, ');'));\r\n        }\r\n        scope(CURRENT_STATE, '.', param, '=', variable, ';');\r\n      } else if (isArrayLike(variable)) {\r\n        var CURRENT = CURRENT_VARS[param];\r\n        scope(\r\n          GL, '.', GL_VARIABLES[param], '(', variable, ');',\r\n          variable.map(function (v, i) {\r\n            return CURRENT + '[' + i + ']=' + v\r\n          }).join(';'), ';');\r\n      } else {\r\n        scope(\r\n          GL, '.', GL_VARIABLES[param], '(', variable, ');',\r\n          CURRENT_STATE, '.', param, '=', variable, ';');\r\n      }\r\n    });\r\n  }\r\n\r\n  function injectExtensions (env, scope) {\r\n    if (extInstancing) {\r\n      env.instancing = scope.def(\r\n        env.shared.extensions, '.angle_instanced_arrays');\r\n    }\r\n  }\r\n\r\n  function emitProfile (env, scope, args, useScope, incrementCounter) {\r\n    var shared = env.shared;\r\n    var STATS = env.stats;\r\n    var CURRENT_STATE = shared.current;\r\n    var TIMER = shared.timer;\r\n    var profileArg = args.profile;\r\n\r\n    function perfCounter () {\r\n      if (typeof performance === 'undefined') {\r\n        return 'Date.now()'\r\n      } else {\r\n        return 'performance.now()'\r\n      }\r\n    }\r\n\r\n    var CPU_START, QUERY_COUNTER;\r\n    function emitProfileStart (block) {\r\n      CPU_START = scope.def();\r\n      block(CPU_START, '=', perfCounter(), ';');\r\n      if (typeof incrementCounter === 'string') {\r\n        block(STATS, '.count+=', incrementCounter, ';');\r\n      } else {\r\n        block(STATS, '.count++;');\r\n      }\r\n      if (timer) {\r\n        if (useScope) {\r\n          QUERY_COUNTER = scope.def();\r\n          block(QUERY_COUNTER, '=', TIMER, '.getNumPendingQueries();');\r\n        } else {\r\n          block(TIMER, '.beginQuery(', STATS, ');');\r\n        }\r\n      }\r\n    }\r\n\r\n    function emitProfileEnd (block) {\r\n      block(STATS, '.cpuTime+=', perfCounter(), '-', CPU_START, ';');\r\n      if (timer) {\r\n        if (useScope) {\r\n          block(TIMER, '.pushScopeStats(',\r\n            QUERY_COUNTER, ',',\r\n            TIMER, '.getNumPendingQueries(),',\r\n            STATS, ');');\r\n        } else {\r\n          block(TIMER, '.endQuery();');\r\n        }\r\n      }\r\n    }\r\n\r\n    function scopeProfile (value) {\r\n      var prev = scope.def(CURRENT_STATE, '.profile');\r\n      scope(CURRENT_STATE, '.profile=', value, ';');\r\n      scope.exit(CURRENT_STATE, '.profile=', prev, ';');\r\n    }\r\n\r\n    var USE_PROFILE;\r\n    if (profileArg) {\r\n      if (isStatic(profileArg)) {\r\n        if (profileArg.enable) {\r\n          emitProfileStart(scope);\r\n          emitProfileEnd(scope.exit);\r\n          scopeProfile('true');\r\n        } else {\r\n          scopeProfile('false');\r\n        }\r\n        return\r\n      }\r\n      USE_PROFILE = profileArg.append(env, scope);\r\n      scopeProfile(USE_PROFILE);\r\n    } else {\r\n      USE_PROFILE = scope.def(CURRENT_STATE, '.profile');\r\n    }\r\n\r\n    var start = env.block();\r\n    emitProfileStart(start);\r\n    scope('if(', USE_PROFILE, '){', start, '}');\r\n    var end = env.block();\r\n    emitProfileEnd(end);\r\n    scope.exit('if(', USE_PROFILE, '){', end, '}');\r\n  }\r\n\r\n  function emitAttributes (env, scope, args, attributes, filter) {\r\n    var shared = env.shared;\r\n\r\n    function typeLength (x) {\r\n      switch (x) {\r\n        case GL_FLOAT_VEC2:\r\n        case GL_INT_VEC2:\r\n        case GL_BOOL_VEC2:\r\n          return 2\r\n        case GL_FLOAT_VEC3:\r\n        case GL_INT_VEC3:\r\n        case GL_BOOL_VEC3:\r\n          return 3\r\n        case GL_FLOAT_VEC4:\r\n        case GL_INT_VEC4:\r\n        case GL_BOOL_VEC4:\r\n          return 4\r\n        default:\r\n          return 1\r\n      }\r\n    }\r\n\r\n    function emitBindAttribute (ATTRIBUTE, size, record) {\r\n      var GL = shared.gl;\r\n\r\n      var LOCATION = scope.def(ATTRIBUTE, '.location');\r\n      var BINDING = scope.def(shared.attributes, '[', LOCATION, ']');\r\n\r\n      var STATE = record.state;\r\n      var BUFFER = record.buffer;\r\n      var CONST_COMPONENTS = [\r\n        record.x,\r\n        record.y,\r\n        record.z,\r\n        record.w\r\n      ];\r\n\r\n      var COMMON_KEYS = [\r\n        'buffer',\r\n        'normalized',\r\n        'offset',\r\n        'stride'\r\n      ];\r\n\r\n      function emitBuffer () {\r\n        scope(\r\n          'if(!', BINDING, '.buffer){',\r\n          GL, '.enableVertexAttribArray(', LOCATION, ');}');\r\n\r\n        var TYPE = record.type;\r\n        var SIZE;\r\n        if (!record.size) {\r\n          SIZE = size;\r\n        } else {\r\n          SIZE = scope.def(record.size, '||', size);\r\n        }\r\n\r\n        scope('if(',\r\n          BINDING, '.type!==', TYPE, '||',\r\n          BINDING, '.size!==', SIZE, '||',\r\n          COMMON_KEYS.map(function (key) {\r\n            return BINDING + '.' + key + '!==' + record[key]\r\n          }).join('||'),\r\n          '){',\r\n          GL, '.bindBuffer(', GL_ARRAY_BUFFER$1, ',', BUFFER, '.buffer);',\r\n          GL, '.vertexAttribPointer(', [\r\n            LOCATION,\r\n            SIZE,\r\n            TYPE,\r\n            record.normalized,\r\n            record.stride,\r\n            record.offset\r\n          ], ');',\r\n          BINDING, '.type=', TYPE, ';',\r\n          BINDING, '.size=', SIZE, ';',\r\n          COMMON_KEYS.map(function (key) {\r\n            return BINDING + '.' + key + '=' + record[key] + ';'\r\n          }).join(''),\r\n          '}');\r\n\r\n        if (extInstancing) {\r\n          var DIVISOR = record.divisor;\r\n          scope(\r\n            'if(', BINDING, '.divisor!==', DIVISOR, '){',\r\n            env.instancing, '.vertexAttribDivisorANGLE(', [LOCATION, DIVISOR], ');',\r\n            BINDING, '.divisor=', DIVISOR, ';}');\r\n        }\r\n      }\r\n\r\n      function emitConstant () {\r\n        scope(\r\n          'if(', BINDING, '.buffer){',\r\n          GL, '.disableVertexAttribArray(', LOCATION, ');',\r\n          '}if(', CUTE_COMPONENTS.map(function (c, i) {\r\n            return BINDING + '.' + c + '!==' + CONST_COMPONENTS[i]\r\n          }).join('||'), '){',\r\n          GL, '.vertexAttrib4f(', LOCATION, ',', CONST_COMPONENTS, ');',\r\n          CUTE_COMPONENTS.map(function (c, i) {\r\n            return BINDING + '.' + c + '=' + CONST_COMPONENTS[i] + ';'\r\n          }).join(''),\r\n          '}');\r\n      }\r\n\r\n      if (STATE === ATTRIB_STATE_POINTER) {\r\n        emitBuffer();\r\n      } else if (STATE === ATTRIB_STATE_CONSTANT) {\r\n        emitConstant();\r\n      } else {\r\n        scope('if(', STATE, '===', ATTRIB_STATE_POINTER, '){');\r\n        emitBuffer();\r\n        scope('}else{');\r\n        emitConstant();\r\n        scope('}');\r\n      }\r\n    }\r\n\r\n    attributes.forEach(function (attribute) {\r\n      var name = attribute.name;\r\n      var arg = args.attributes[name];\r\n      var record;\r\n      if (arg) {\r\n        if (!filter(arg)) {\r\n          return\r\n        }\r\n        record = arg.append(env, scope);\r\n      } else {\r\n        if (!filter(SCOPE_DECL)) {\r\n          return\r\n        }\r\n        var scopeAttrib = env.scopeAttrib(name);\r\n        check$1.optional(function () {\r\n          env.assert(scope,\r\n            scopeAttrib + '.state',\r\n            'missing attribute ' + name);\r\n        });\r\n        record = {};\r\n        Object.keys(new AttributeRecord()).forEach(function (key) {\r\n          record[key] = scope.def(scopeAttrib, '.', key);\r\n        });\r\n      }\r\n      emitBindAttribute(\r\n        env.link(attribute), typeLength(attribute.info.type), record);\r\n    });\r\n  }\r\n\r\n  function emitUniforms (env, scope, args, uniforms, filter) {\r\n    var shared = env.shared;\r\n    var GL = shared.gl;\r\n\r\n    var infix;\r\n    for (var i = 0; i < uniforms.length; ++i) {\r\n      var uniform = uniforms[i];\r\n      var name = uniform.name;\r\n      var type = uniform.info.type;\r\n      var arg = args.uniforms[name];\r\n      var UNIFORM = env.link(uniform);\r\n      var LOCATION = UNIFORM + '.location';\r\n\r\n      var VALUE;\r\n      if (arg) {\r\n        if (!filter(arg)) {\r\n          continue\r\n        }\r\n        if (isStatic(arg)) {\r\n          var value = arg.value;\r\n          check$1.command(\r\n            value !== null && typeof value !== 'undefined',\r\n            'missing uniform \"' + name + '\"', env.commandStr);\r\n          if (type === GL_SAMPLER_2D || type === GL_SAMPLER_CUBE) {\r\n            check$1.command(\r\n              typeof value === 'function' &&\r\n              ((type === GL_SAMPLER_2D &&\r\n                (value._reglType === 'texture2d' ||\r\n                value._reglType === 'framebuffer')) ||\r\n              (type === GL_SAMPLER_CUBE &&\r\n                (value._reglType === 'textureCube' ||\r\n                value._reglType === 'framebufferCube'))),\r\n              'invalid texture for uniform ' + name, env.commandStr);\r\n            var TEX_VALUE = env.link(value._texture || value.color[0]._texture);\r\n            scope(GL, '.uniform1i(', LOCATION, ',', TEX_VALUE + '.bind());');\r\n            scope.exit(TEX_VALUE, '.unbind();');\r\n          } else if (\r\n            type === GL_FLOAT_MAT2 ||\r\n            type === GL_FLOAT_MAT3 ||\r\n            type === GL_FLOAT_MAT4) {\r\n            check$1.optional(function () {\r\n              check$1.command(isArrayLike(value),\r\n                'invalid matrix for uniform ' + name, env.commandStr);\r\n              check$1.command(\r\n                (type === GL_FLOAT_MAT2 && value.length === 4) ||\r\n                (type === GL_FLOAT_MAT3 && value.length === 9) ||\r\n                (type === GL_FLOAT_MAT4 && value.length === 16),\r\n                'invalid length for matrix uniform ' + name, env.commandStr);\r\n            });\r\n            var MAT_VALUE = env.global.def('new Float32Array([' +\r\n              Array.prototype.slice.call(value) + '])');\r\n            var dim = 2;\r\n            if (type === GL_FLOAT_MAT3) {\r\n              dim = 3;\r\n            } else if (type === GL_FLOAT_MAT4) {\r\n              dim = 4;\r\n            }\r\n            scope(\r\n              GL, '.uniformMatrix', dim, 'fv(',\r\n              LOCATION, ',false,', MAT_VALUE, ');');\r\n          } else {\r\n            switch (type) {\r\n              case GL_FLOAT$8:\r\n                check$1.commandType(value, 'number', 'uniform ' + name, env.commandStr);\r\n                infix = '1f';\r\n                break\r\n              case GL_FLOAT_VEC2:\r\n                check$1.command(\r\n                  isArrayLike(value) && value.length === 2,\r\n                  'uniform ' + name, env.commandStr);\r\n                infix = '2f';\r\n                break\r\n              case GL_FLOAT_VEC3:\r\n                check$1.command(\r\n                  isArrayLike(value) && value.length === 3,\r\n                  'uniform ' + name, env.commandStr);\r\n                infix = '3f';\r\n                break\r\n              case GL_FLOAT_VEC4:\r\n                check$1.command(\r\n                  isArrayLike(value) && value.length === 4,\r\n                  'uniform ' + name, env.commandStr);\r\n                infix = '4f';\r\n                break\r\n              case GL_BOOL:\r\n                check$1.commandType(value, 'boolean', 'uniform ' + name, env.commandStr);\r\n                infix = '1i';\r\n                break\r\n              case GL_INT$3:\r\n                check$1.commandType(value, 'number', 'uniform ' + name, env.commandStr);\r\n                infix = '1i';\r\n                break\r\n              case GL_BOOL_VEC2:\r\n                check$1.command(\r\n                  isArrayLike(value) && value.length === 2,\r\n                  'uniform ' + name, env.commandStr);\r\n                infix = '2i';\r\n                break\r\n              case GL_INT_VEC2:\r\n                check$1.command(\r\n                  isArrayLike(value) && value.length === 2,\r\n                  'uniform ' + name, env.commandStr);\r\n                infix = '2i';\r\n                break\r\n              case GL_BOOL_VEC3:\r\n                check$1.command(\r\n                  isArrayLike(value) && value.length === 3,\r\n                  'uniform ' + name, env.commandStr);\r\n                infix = '3i';\r\n                break\r\n              case GL_INT_VEC3:\r\n                check$1.command(\r\n                  isArrayLike(value) && value.length === 3,\r\n                  'uniform ' + name, env.commandStr);\r\n                infix = '3i';\r\n                break\r\n              case GL_BOOL_VEC4:\r\n                check$1.command(\r\n                  isArrayLike(value) && value.length === 4,\r\n                  'uniform ' + name, env.commandStr);\r\n                infix = '4i';\r\n                break\r\n              case GL_INT_VEC4:\r\n                check$1.command(\r\n                  isArrayLike(value) && value.length === 4,\r\n                  'uniform ' + name, env.commandStr);\r\n                infix = '4i';\r\n                break\r\n            }\r\n            scope(GL, '.uniform', infix, '(', LOCATION, ',',\r\n              isArrayLike(value) ? Array.prototype.slice.call(value) : value,\r\n              ');');\r\n          }\r\n          continue\r\n        } else {\r\n          VALUE = arg.append(env, scope);\r\n        }\r\n      } else {\r\n        if (!filter(SCOPE_DECL)) {\r\n          continue\r\n        }\r\n        VALUE = scope.def(shared.uniforms, '[', stringStore.id(name), ']');\r\n      }\r\n\r\n      if (type === GL_SAMPLER_2D) {\r\n        scope(\r\n          'if(', VALUE, '&&', VALUE, '._reglType===\"framebuffer\"){',\r\n          VALUE, '=', VALUE, '.color[0];',\r\n          '}');\r\n      } else if (type === GL_SAMPLER_CUBE) {\r\n        scope(\r\n          'if(', VALUE, '&&', VALUE, '._reglType===\"framebufferCube\"){',\r\n          VALUE, '=', VALUE, '.color[0];',\r\n          '}');\r\n      }\r\n\r\n      // perform type validation\r\n      check$1.optional(function () {\r\n        function check (pred, message) {\r\n          env.assert(scope, pred,\r\n            'bad data or missing for uniform \"' + name + '\".  ' + message);\r\n        }\r\n\r\n        function checkType (type) {\r\n          check(\r\n            'typeof ' + VALUE + '===\"' + type + '\"',\r\n            'invalid type, expected ' + type);\r\n        }\r\n\r\n        function checkVector (n, type) {\r\n          check(\r\n            shared.isArrayLike + '(' + VALUE + ')&&' + VALUE + '.length===' + n,\r\n            'invalid vector, should have length ' + n, env.commandStr);\r\n        }\r\n\r\n        function checkTexture (target) {\r\n          check(\r\n            'typeof ' + VALUE + '===\"function\"&&' +\r\n            VALUE + '._reglType===\"texture' +\r\n            (target === GL_TEXTURE_2D$3 ? '2d' : 'Cube') + '\"',\r\n            'invalid texture type', env.commandStr);\r\n        }\r\n\r\n        switch (type) {\r\n          case GL_INT$3:\r\n            checkType('number');\r\n            break\r\n          case GL_INT_VEC2:\r\n            checkVector(2, 'number');\r\n            break\r\n          case GL_INT_VEC3:\r\n            checkVector(3, 'number');\r\n            break\r\n          case GL_INT_VEC4:\r\n            checkVector(4, 'number');\r\n            break\r\n          case GL_FLOAT$8:\r\n            checkType('number');\r\n            break\r\n          case GL_FLOAT_VEC2:\r\n            checkVector(2, 'number');\r\n            break\r\n          case GL_FLOAT_VEC3:\r\n            checkVector(3, 'number');\r\n            break\r\n          case GL_FLOAT_VEC4:\r\n            checkVector(4, 'number');\r\n            break\r\n          case GL_BOOL:\r\n            checkType('boolean');\r\n            break\r\n          case GL_BOOL_VEC2:\r\n            checkVector(2, 'boolean');\r\n            break\r\n          case GL_BOOL_VEC3:\r\n            checkVector(3, 'boolean');\r\n            break\r\n          case GL_BOOL_VEC4:\r\n            checkVector(4, 'boolean');\r\n            break\r\n          case GL_FLOAT_MAT2:\r\n            checkVector(4, 'number');\r\n            break\r\n          case GL_FLOAT_MAT3:\r\n            checkVector(9, 'number');\r\n            break\r\n          case GL_FLOAT_MAT4:\r\n            checkVector(16, 'number');\r\n            break\r\n          case GL_SAMPLER_2D:\r\n            checkTexture(GL_TEXTURE_2D$3);\r\n            break\r\n          case GL_SAMPLER_CUBE:\r\n            checkTexture(GL_TEXTURE_CUBE_MAP$2);\r\n            break\r\n        }\r\n      });\r\n\r\n      var unroll = 1;\r\n      switch (type) {\r\n        case GL_SAMPLER_2D:\r\n        case GL_SAMPLER_CUBE:\r\n          var TEX = scope.def(VALUE, '._texture');\r\n          scope(GL, '.uniform1i(', LOCATION, ',', TEX, '.bind());');\r\n          scope.exit(TEX, '.unbind();');\r\n          continue\r\n\r\n        case GL_INT$3:\r\n        case GL_BOOL:\r\n          infix = '1i';\r\n          break\r\n\r\n        case GL_INT_VEC2:\r\n        case GL_BOOL_VEC2:\r\n          infix = '2i';\r\n          unroll = 2;\r\n          break\r\n\r\n        case GL_INT_VEC3:\r\n        case GL_BOOL_VEC3:\r\n          infix = '3i';\r\n          unroll = 3;\r\n          break\r\n\r\n        case GL_INT_VEC4:\r\n        case GL_BOOL_VEC4:\r\n          infix = '4i';\r\n          unroll = 4;\r\n          break\r\n\r\n        case GL_FLOAT$8:\r\n          infix = '1f';\r\n          break\r\n\r\n        case GL_FLOAT_VEC2:\r\n          infix = '2f';\r\n          unroll = 2;\r\n          break\r\n\r\n        case GL_FLOAT_VEC3:\r\n          infix = '3f';\r\n          unroll = 3;\r\n          break\r\n\r\n        case GL_FLOAT_VEC4:\r\n          infix = '4f';\r\n          unroll = 4;\r\n          break\r\n\r\n        case GL_FLOAT_MAT2:\r\n          infix = 'Matrix2fv';\r\n          break\r\n\r\n        case GL_FLOAT_MAT3:\r\n          infix = 'Matrix3fv';\r\n          break\r\n\r\n        case GL_FLOAT_MAT4:\r\n          infix = 'Matrix4fv';\r\n          break\r\n      }\r\n\r\n      scope(GL, '.uniform', infix, '(', LOCATION, ',');\r\n      if (infix.charAt(0) === 'M') {\r\n        var matSize = Math.pow(type - GL_FLOAT_MAT2 + 2, 2);\r\n        var STORAGE = env.global.def('new Float32Array(', matSize, ')');\r\n        scope(\r\n          'false,(Array.isArray(', VALUE, ')||', VALUE, ' instanceof Float32Array)?', VALUE, ':(',\r\n          loop(matSize, function (i) {\r\n            return STORAGE + '[' + i + ']=' + VALUE + '[' + i + ']'\r\n          }), ',', STORAGE, ')');\r\n      } else if (unroll > 1) {\r\n        scope(loop(unroll, function (i) {\r\n          return VALUE + '[' + i + ']'\r\n        }));\r\n      } else {\r\n        scope(VALUE);\r\n      }\r\n      scope(');');\r\n    }\r\n  }\r\n\r\n  function emitDraw (env, outer, inner, args) {\r\n    var shared = env.shared;\r\n    var GL = shared.gl;\r\n    var DRAW_STATE = shared.draw;\r\n\r\n    var drawOptions = args.draw;\r\n\r\n    function emitElements () {\r\n      var defn = drawOptions.elements;\r\n      var ELEMENTS;\r\n      var scope = outer;\r\n      if (defn) {\r\n        if ((defn.contextDep && args.contextDynamic) || defn.propDep) {\r\n          scope = inner;\r\n        }\r\n        ELEMENTS = defn.append(env, scope);\r\n      } else {\r\n        ELEMENTS = scope.def(DRAW_STATE, '.', S_ELEMENTS);\r\n      }\r\n      if (ELEMENTS) {\r\n        scope(\r\n          'if(' + ELEMENTS + ')' +\r\n          GL + '.bindBuffer(' + GL_ELEMENT_ARRAY_BUFFER$1 + ',' + ELEMENTS + '.buffer.buffer);');\r\n      }\r\n      return ELEMENTS\r\n    }\r\n\r\n    function emitCount () {\r\n      var defn = drawOptions.count;\r\n      var COUNT;\r\n      var scope = outer;\r\n      if (defn) {\r\n        if ((defn.contextDep && args.contextDynamic) || defn.propDep) {\r\n          scope = inner;\r\n        }\r\n        COUNT = defn.append(env, scope);\r\n        check$1.optional(function () {\r\n          if (defn.MISSING) {\r\n            env.assert(outer, 'false', 'missing vertex count');\r\n          }\r\n          if (defn.DYNAMIC) {\r\n            env.assert(scope, COUNT + '>=0', 'missing vertex count');\r\n          }\r\n        });\r\n      } else {\r\n        COUNT = scope.def(DRAW_STATE, '.', S_COUNT);\r\n        check$1.optional(function () {\r\n          env.assert(scope, COUNT + '>=0', 'missing vertex count');\r\n        });\r\n      }\r\n      return COUNT\r\n    }\r\n\r\n    var ELEMENTS = emitElements();\r\n    function emitValue (name) {\r\n      var defn = drawOptions[name];\r\n      if (defn) {\r\n        if ((defn.contextDep && args.contextDynamic) || defn.propDep) {\r\n          return defn.append(env, inner)\r\n        } else {\r\n          return defn.append(env, outer)\r\n        }\r\n      } else {\r\n        return outer.def(DRAW_STATE, '.', name)\r\n      }\r\n    }\r\n\r\n    var PRIMITIVE = emitValue(S_PRIMITIVE);\r\n    var OFFSET = emitValue(S_OFFSET);\r\n\r\n    var COUNT = emitCount();\r\n    if (typeof COUNT === 'number') {\r\n      if (COUNT === 0) {\r\n        return\r\n      }\r\n    } else {\r\n      inner('if(', COUNT, '){');\r\n      inner.exit('}');\r\n    }\r\n\r\n    var INSTANCES, EXT_INSTANCING;\r\n    if (extInstancing) {\r\n      INSTANCES = emitValue(S_INSTANCES);\r\n      EXT_INSTANCING = env.instancing;\r\n    }\r\n\r\n    var ELEMENT_TYPE = ELEMENTS + '.type';\r\n\r\n    var elementsStatic = drawOptions.elements && isStatic(drawOptions.elements);\r\n\r\n    function emitInstancing () {\r\n      function drawElements () {\r\n        inner(EXT_INSTANCING, '.drawElementsInstancedANGLE(', [\r\n          PRIMITIVE,\r\n          COUNT,\r\n          ELEMENT_TYPE,\r\n          OFFSET + '<<((' + ELEMENT_TYPE + '-' + GL_UNSIGNED_BYTE$8 + ')>>1)',\r\n          INSTANCES\r\n        ], ');');\r\n      }\r\n\r\n      function drawArrays () {\r\n        inner(EXT_INSTANCING, '.drawArraysInstancedANGLE(',\r\n          [PRIMITIVE, OFFSET, COUNT, INSTANCES], ');');\r\n      }\r\n\r\n      if (ELEMENTS) {\r\n        if (!elementsStatic) {\r\n          inner('if(', ELEMENTS, '){');\r\n          drawElements();\r\n          inner('}else{');\r\n          drawArrays();\r\n          inner('}');\r\n        } else {\r\n          drawElements();\r\n        }\r\n      } else {\r\n        drawArrays();\r\n      }\r\n    }\r\n\r\n    function emitRegular () {\r\n      function drawElements () {\r\n        inner(GL + '.drawElements(' + [\r\n          PRIMITIVE,\r\n          COUNT,\r\n          ELEMENT_TYPE,\r\n          OFFSET + '<<((' + ELEMENT_TYPE + '-' + GL_UNSIGNED_BYTE$8 + ')>>1)'\r\n        ] + ');');\r\n      }\r\n\r\n      function drawArrays () {\r\n        inner(GL + '.drawArrays(' + [PRIMITIVE, OFFSET, COUNT] + ');');\r\n      }\r\n\r\n      if (ELEMENTS) {\r\n        if (!elementsStatic) {\r\n          inner('if(', ELEMENTS, '){');\r\n          drawElements();\r\n          inner('}else{');\r\n          drawArrays();\r\n          inner('}');\r\n        } else {\r\n          drawElements();\r\n        }\r\n      } else {\r\n        drawArrays();\r\n      }\r\n    }\r\n\r\n    if (extInstancing && (typeof INSTANCES !== 'number' || INSTANCES >= 0)) {\r\n      if (typeof INSTANCES === 'string') {\r\n        inner('if(', INSTANCES, '>0){');\r\n        emitInstancing();\r\n        inner('}else if(', INSTANCES, '<0){');\r\n        emitRegular();\r\n        inner('}');\r\n      } else {\r\n        emitInstancing();\r\n      }\r\n    } else {\r\n      emitRegular();\r\n    }\r\n  }\r\n\r\n  function createBody (emitBody, parentEnv, args, program, count) {\r\n    var env = createREGLEnvironment();\r\n    var scope = env.proc('body', count);\r\n    check$1.optional(function () {\r\n      env.commandStr = parentEnv.commandStr;\r\n      env.command = env.link(parentEnv.commandStr);\r\n    });\r\n    if (extInstancing) {\r\n      env.instancing = scope.def(\r\n        env.shared.extensions, '.angle_instanced_arrays');\r\n    }\r\n    emitBody(env, scope, args, program);\r\n    return env.compile().body\r\n  }\r\n\r\n  // ===================================================\r\n  // ===================================================\r\n  // DRAW PROC\r\n  // ===================================================\r\n  // ===================================================\r\n  function emitDrawBody (env, draw, args, program) {\r\n    injectExtensions(env, draw);\r\n    emitAttributes(env, draw, args, program.attributes, function () {\r\n      return true\r\n    });\r\n    emitUniforms(env, draw, args, program.uniforms, function () {\r\n      return true\r\n    });\r\n    emitDraw(env, draw, draw, args);\r\n  }\r\n\r\n  function emitDrawProc (env, args) {\r\n    var draw = env.proc('draw', 1);\r\n\r\n    injectExtensions(env, draw);\r\n\r\n    emitContext(env, draw, args.context);\r\n    emitPollFramebuffer(env, draw, args.framebuffer);\r\n\r\n    emitPollState(env, draw, args);\r\n    emitSetOptions(env, draw, args.state);\r\n\r\n    emitProfile(env, draw, args, false, true);\r\n\r\n    var program = args.shader.progVar.append(env, draw);\r\n    draw(env.shared.gl, '.useProgram(', program, '.program);');\r\n\r\n    if (args.shader.program) {\r\n      emitDrawBody(env, draw, args, args.shader.program);\r\n    } else {\r\n      var drawCache = env.global.def('{}');\r\n      var PROG_ID = draw.def(program, '.id');\r\n      var CACHED_PROC = draw.def(drawCache, '[', PROG_ID, ']');\r\n      draw(\r\n        env.cond(CACHED_PROC)\r\n          .then(CACHED_PROC, '.call(this,a0);')\r\n          .else(\r\n            CACHED_PROC, '=', drawCache, '[', PROG_ID, ']=',\r\n            env.link(function (program) {\r\n              return createBody(emitDrawBody, env, args, program, 1)\r\n            }), '(', program, ');',\r\n            CACHED_PROC, '.call(this,a0);'));\r\n    }\r\n\r\n    if (Object.keys(args.state).length > 0) {\r\n      draw(env.shared.current, '.dirty=true;');\r\n    }\r\n  }\r\n\r\n  // ===================================================\r\n  // ===================================================\r\n  // BATCH PROC\r\n  // ===================================================\r\n  // ===================================================\r\n\r\n  function emitBatchDynamicShaderBody (env, scope, args, program) {\r\n    env.batchId = 'a1';\r\n\r\n    injectExtensions(env, scope);\r\n\r\n    function all () {\r\n      return true\r\n    }\r\n\r\n    emitAttributes(env, scope, args, program.attributes, all);\r\n    emitUniforms(env, scope, args, program.uniforms, all);\r\n    emitDraw(env, scope, scope, args);\r\n  }\r\n\r\n  function emitBatchBody (env, scope, args, program) {\r\n    injectExtensions(env, scope);\r\n\r\n    var contextDynamic = args.contextDep;\r\n\r\n    var BATCH_ID = scope.def();\r\n    var PROP_LIST = 'a0';\r\n    var NUM_PROPS = 'a1';\r\n    var PROPS = scope.def();\r\n    env.shared.props = PROPS;\r\n    env.batchId = BATCH_ID;\r\n\r\n    var outer = env.scope();\r\n    var inner = env.scope();\r\n\r\n    scope(\r\n      outer.entry,\r\n      'for(', BATCH_ID, '=0;', BATCH_ID, '<', NUM_PROPS, ';++', BATCH_ID, '){',\r\n      PROPS, '=', PROP_LIST, '[', BATCH_ID, '];',\r\n      inner,\r\n      '}',\r\n      outer.exit);\r\n\r\n    function isInnerDefn (defn) {\r\n      return ((defn.contextDep && contextDynamic) || defn.propDep)\r\n    }\r\n\r\n    function isOuterDefn (defn) {\r\n      return !isInnerDefn(defn)\r\n    }\r\n\r\n    if (args.needsContext) {\r\n      emitContext(env, inner, args.context);\r\n    }\r\n    if (args.needsFramebuffer) {\r\n      emitPollFramebuffer(env, inner, args.framebuffer);\r\n    }\r\n    emitSetOptions(env, inner, args.state, isInnerDefn);\r\n\r\n    if (args.profile && isInnerDefn(args.profile)) {\r\n      emitProfile(env, inner, args, false, true);\r\n    }\r\n\r\n    if (!program) {\r\n      var progCache = env.global.def('{}');\r\n      var PROGRAM = args.shader.progVar.append(env, inner);\r\n      var PROG_ID = inner.def(PROGRAM, '.id');\r\n      var CACHED_PROC = inner.def(progCache, '[', PROG_ID, ']');\r\n      inner(\r\n        env.shared.gl, '.useProgram(', PROGRAM, '.program);',\r\n        'if(!', CACHED_PROC, '){',\r\n        CACHED_PROC, '=', progCache, '[', PROG_ID, ']=',\r\n        env.link(function (program) {\r\n          return createBody(\r\n            emitBatchDynamicShaderBody, env, args, program, 2)\r\n        }), '(', PROGRAM, ');}',\r\n        CACHED_PROC, '.call(this,a0[', BATCH_ID, '],', BATCH_ID, ');');\r\n    } else {\r\n      emitAttributes(env, outer, args, program.attributes, isOuterDefn);\r\n      emitAttributes(env, inner, args, program.attributes, isInnerDefn);\r\n      emitUniforms(env, outer, args, program.uniforms, isOuterDefn);\r\n      emitUniforms(env, inner, args, program.uniforms, isInnerDefn);\r\n      emitDraw(env, outer, inner, args);\r\n    }\r\n  }\r\n\r\n  function emitBatchProc (env, args) {\r\n    var batch = env.proc('batch', 2);\r\n    env.batchId = '0';\r\n\r\n    injectExtensions(env, batch);\r\n\r\n    // Check if any context variables depend on props\r\n    var contextDynamic = false;\r\n    var needsContext = true;\r\n    Object.keys(args.context).forEach(function (name) {\r\n      contextDynamic = contextDynamic || args.context[name].propDep;\r\n    });\r\n    if (!contextDynamic) {\r\n      emitContext(env, batch, args.context);\r\n      needsContext = false;\r\n    }\r\n\r\n    // framebuffer state affects framebufferWidth/height context vars\r\n    var framebuffer = args.framebuffer;\r\n    var needsFramebuffer = false;\r\n    if (framebuffer) {\r\n      if (framebuffer.propDep) {\r\n        contextDynamic = needsFramebuffer = true;\r\n      } else if (framebuffer.contextDep && contextDynamic) {\r\n        needsFramebuffer = true;\r\n      }\r\n      if (!needsFramebuffer) {\r\n        emitPollFramebuffer(env, batch, framebuffer);\r\n      }\r\n    } else {\r\n      emitPollFramebuffer(env, batch, null);\r\n    }\r\n\r\n    // viewport is weird because it can affect context vars\r\n    if (args.state.viewport && args.state.viewport.propDep) {\r\n      contextDynamic = true;\r\n    }\r\n\r\n    function isInnerDefn (defn) {\r\n      return (defn.contextDep && contextDynamic) || defn.propDep\r\n    }\r\n\r\n    // set webgl options\r\n    emitPollState(env, batch, args);\r\n    emitSetOptions(env, batch, args.state, function (defn) {\r\n      return !isInnerDefn(defn)\r\n    });\r\n\r\n    if (!args.profile || !isInnerDefn(args.profile)) {\r\n      emitProfile(env, batch, args, false, 'a1');\r\n    }\r\n\r\n    // Save these values to args so that the batch body routine can use them\r\n    args.contextDep = contextDynamic;\r\n    args.needsContext = needsContext;\r\n    args.needsFramebuffer = needsFramebuffer;\r\n\r\n    // determine if shader is dynamic\r\n    var progDefn = args.shader.progVar;\r\n    if ((progDefn.contextDep && contextDynamic) || progDefn.propDep) {\r\n      emitBatchBody(\r\n        env,\r\n        batch,\r\n        args,\r\n        null);\r\n    } else {\r\n      var PROGRAM = progDefn.append(env, batch);\r\n      batch(env.shared.gl, '.useProgram(', PROGRAM, '.program);');\r\n      if (args.shader.program) {\r\n        emitBatchBody(\r\n          env,\r\n          batch,\r\n          args,\r\n          args.shader.program);\r\n      } else {\r\n        var batchCache = env.global.def('{}');\r\n        var PROG_ID = batch.def(PROGRAM, '.id');\r\n        var CACHED_PROC = batch.def(batchCache, '[', PROG_ID, ']');\r\n        batch(\r\n          env.cond(CACHED_PROC)\r\n            .then(CACHED_PROC, '.call(this,a0,a1);')\r\n            .else(\r\n              CACHED_PROC, '=', batchCache, '[', PROG_ID, ']=',\r\n              env.link(function (program) {\r\n                return createBody(emitBatchBody, env, args, program, 2)\r\n              }), '(', PROGRAM, ');',\r\n              CACHED_PROC, '.call(this,a0,a1);'));\r\n      }\r\n    }\r\n\r\n    if (Object.keys(args.state).length > 0) {\r\n      batch(env.shared.current, '.dirty=true;');\r\n    }\r\n  }\r\n\r\n  // ===================================================\r\n  // ===================================================\r\n  // SCOPE COMMAND\r\n  // ===================================================\r\n  // ===================================================\r\n  function emitScopeProc (env, args) {\r\n    var scope = env.proc('scope', 3);\r\n    env.batchId = 'a2';\r\n\r\n    var shared = env.shared;\r\n    var CURRENT_STATE = shared.current;\r\n\r\n    emitContext(env, scope, args.context);\r\n\r\n    if (args.framebuffer) {\r\n      args.framebuffer.append(env, scope);\r\n    }\r\n\r\n    sortState(Object.keys(args.state)).forEach(function (name) {\r\n      var defn = args.state[name];\r\n      var value = defn.append(env, scope);\r\n      if (isArrayLike(value)) {\r\n        value.forEach(function (v, i) {\r\n          scope.set(env.next[name], '[' + i + ']', v);\r\n        });\r\n      } else {\r\n        scope.set(shared.next, '.' + name, value);\r\n      }\r\n    });\r\n\r\n    emitProfile(env, scope, args, true, true)\r\n\r\n    ;[S_ELEMENTS, S_OFFSET, S_COUNT, S_INSTANCES, S_PRIMITIVE].forEach(\r\n      function (opt) {\r\n        var variable = args.draw[opt];\r\n        if (!variable) {\r\n          return\r\n        }\r\n        scope.set(shared.draw, '.' + opt, '' + variable.append(env, scope));\r\n      });\r\n\r\n    Object.keys(args.uniforms).forEach(function (opt) {\r\n      scope.set(\r\n        shared.uniforms,\r\n        '[' + stringStore.id(opt) + ']',\r\n        args.uniforms[opt].append(env, scope));\r\n    });\r\n\r\n    Object.keys(args.attributes).forEach(function (name) {\r\n      var record = args.attributes[name].append(env, scope);\r\n      var scopeAttrib = env.scopeAttrib(name);\r\n      Object.keys(new AttributeRecord()).forEach(function (prop) {\r\n        scope.set(scopeAttrib, '.' + prop, record[prop]);\r\n      });\r\n    });\r\n\r\n    function saveShader (name) {\r\n      var shader = args.shader[name];\r\n      if (shader) {\r\n        scope.set(shared.shader, '.' + name, shader.append(env, scope));\r\n      }\r\n    }\r\n    saveShader(S_VERT);\r\n    saveShader(S_FRAG);\r\n\r\n    if (Object.keys(args.state).length > 0) {\r\n      scope(CURRENT_STATE, '.dirty=true;');\r\n      scope.exit(CURRENT_STATE, '.dirty=true;');\r\n    }\r\n\r\n    scope('a1(', env.shared.context, ',a0,', env.batchId, ');');\r\n  }\r\n\r\n  function isDynamicObject (object) {\r\n    if (typeof object !== 'object' || isArrayLike(object)) {\r\n      return\r\n    }\r\n    var props = Object.keys(object);\r\n    for (var i = 0; i < props.length; ++i) {\r\n      if (dynamic.isDynamic(object[props[i]])) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  function splatObject (env, options, name) {\r\n    var object = options.static[name];\r\n    if (!object || !isDynamicObject(object)) {\r\n      return\r\n    }\r\n\r\n    var globals = env.global;\r\n    var keys = Object.keys(object);\r\n    var thisDep = false;\r\n    var contextDep = false;\r\n    var propDep = false;\r\n    var objectRef = env.global.def('{}');\r\n    keys.forEach(function (key) {\r\n      var value = object[key];\r\n      if (dynamic.isDynamic(value)) {\r\n        if (typeof value === 'function') {\r\n          value = object[key] = dynamic.unbox(value);\r\n        }\r\n        var deps = createDynamicDecl(value, null);\r\n        thisDep = thisDep || deps.thisDep;\r\n        propDep = propDep || deps.propDep;\r\n        contextDep = contextDep || deps.contextDep;\r\n      } else {\r\n        globals(objectRef, '.', key, '=');\r\n        switch (typeof value) {\r\n          case 'number':\r\n            globals(value);\r\n            break\r\n          case 'string':\r\n            globals('\"', value, '\"');\r\n            break\r\n          case 'object':\r\n            if (Array.isArray(value)) {\r\n              globals('[', value.join(), ']');\r\n            }\r\n            break\r\n          default:\r\n            globals(env.link(value));\r\n            break\r\n        }\r\n        globals(';');\r\n      }\r\n    });\r\n\r\n    function appendBlock (env, block) {\r\n      keys.forEach(function (key) {\r\n        var value = object[key];\r\n        if (!dynamic.isDynamic(value)) {\r\n          return\r\n        }\r\n        var ref = env.invoke(block, value);\r\n        block(objectRef, '.', key, '=', ref, ';');\r\n      });\r\n    }\r\n\r\n    options.dynamic[name] = new dynamic.DynamicVariable(DYN_THUNK, {\r\n      thisDep: thisDep,\r\n      contextDep: contextDep,\r\n      propDep: propDep,\r\n      ref: objectRef,\r\n      append: appendBlock\r\n    });\r\n    delete options.static[name];\r\n  }\r\n\r\n  // ===========================================================================\r\n  // ===========================================================================\r\n  // MAIN DRAW COMMAND\r\n  // ===========================================================================\r\n  // ===========================================================================\r\n  function compileCommand (options, attributes, uniforms, context, stats) {\r\n    var env = createREGLEnvironment();\r\n\r\n    // link stats, so that we can easily access it in the program.\r\n    env.stats = env.link(stats);\r\n\r\n    // splat options and attributes to allow for dynamic nested properties\r\n    Object.keys(attributes.static).forEach(function (key) {\r\n      splatObject(env, attributes, key);\r\n    });\r\n    NESTED_OPTIONS.forEach(function (name) {\r\n      splatObject(env, options, name);\r\n    });\r\n\r\n    var args = parseArguments(options, attributes, uniforms, context, env);\r\n\r\n    emitDrawProc(env, args);\r\n    emitScopeProc(env, args);\r\n    emitBatchProc(env, args);\r\n\r\n    return env.compile()\r\n  }\r\n\r\n  // ===========================================================================\r\n  // ===========================================================================\r\n  // POLL / REFRESH\r\n  // ===========================================================================\r\n  // ===========================================================================\r\n  return {\r\n    next: nextState,\r\n    current: currentState,\r\n    procs: (function () {\r\n      var env = createREGLEnvironment();\r\n      var poll = env.proc('poll');\r\n      var refresh = env.proc('refresh');\r\n      var common = env.block();\r\n      poll(common);\r\n      refresh(common);\r\n\r\n      var shared = env.shared;\r\n      var GL = shared.gl;\r\n      var NEXT_STATE = shared.next;\r\n      var CURRENT_STATE = shared.current;\r\n\r\n      common(CURRENT_STATE, '.dirty=false;');\r\n\r\n      emitPollFramebuffer(env, poll);\r\n      emitPollFramebuffer(env, refresh, null, true);\r\n\r\n      // Refresh updates all attribute state changes\r\n      var INSTANCING;\r\n      if (extInstancing) {\r\n        INSTANCING = env.link(extInstancing);\r\n      }\r\n      for (var i = 0; i < limits.maxAttributes; ++i) {\r\n        var BINDING = refresh.def(shared.attributes, '[', i, ']');\r\n        var ifte = env.cond(BINDING, '.buffer');\r\n        ifte.then(\r\n          GL, '.enableVertexAttribArray(', i, ');',\r\n          GL, '.bindBuffer(',\r\n            GL_ARRAY_BUFFER$1, ',',\r\n            BINDING, '.buffer.buffer);',\r\n          GL, '.vertexAttribPointer(',\r\n            i, ',',\r\n            BINDING, '.size,',\r\n            BINDING, '.type,',\r\n            BINDING, '.normalized,',\r\n            BINDING, '.stride,',\r\n            BINDING, '.offset);'\r\n        ).else(\r\n          GL, '.disableVertexAttribArray(', i, ');',\r\n          GL, '.vertexAttrib4f(',\r\n            i, ',',\r\n            BINDING, '.x,',\r\n            BINDING, '.y,',\r\n            BINDING, '.z,',\r\n            BINDING, '.w);',\r\n          BINDING, '.buffer=null;');\r\n        refresh(ifte);\r\n        if (extInstancing) {\r\n          refresh(\r\n            INSTANCING, '.vertexAttribDivisorANGLE(',\r\n            i, ',',\r\n            BINDING, '.divisor);');\r\n        }\r\n      }\r\n\r\n      Object.keys(GL_FLAGS).forEach(function (flag) {\r\n        var cap = GL_FLAGS[flag];\r\n        var NEXT = common.def(NEXT_STATE, '.', flag);\r\n        var block = env.block();\r\n        block('if(', NEXT, '){',\r\n          GL, '.enable(', cap, ')}else{',\r\n          GL, '.disable(', cap, ')}',\r\n          CURRENT_STATE, '.', flag, '=', NEXT, ';');\r\n        refresh(block);\r\n        poll(\r\n          'if(', NEXT, '!==', CURRENT_STATE, '.', flag, '){',\r\n          block,\r\n          '}');\r\n      });\r\n\r\n      Object.keys(GL_VARIABLES).forEach(function (name) {\r\n        var func = GL_VARIABLES[name];\r\n        var init = currentState[name];\r\n        var NEXT, CURRENT;\r\n        var block = env.block();\r\n        block(GL, '.', func, '(');\r\n        if (isArrayLike(init)) {\r\n          var n = init.length;\r\n          NEXT = env.global.def(NEXT_STATE, '.', name);\r\n          CURRENT = env.global.def(CURRENT_STATE, '.', name);\r\n          block(\r\n            loop(n, function (i) {\r\n              return NEXT + '[' + i + ']'\r\n            }), ');',\r\n            loop(n, function (i) {\r\n              return CURRENT + '[' + i + ']=' + NEXT + '[' + i + '];'\r\n            }).join(''));\r\n          poll(\r\n            'if(', loop(n, function (i) {\r\n              return NEXT + '[' + i + ']!==' + CURRENT + '[' + i + ']'\r\n            }).join('||'), '){',\r\n            block,\r\n            '}');\r\n        } else {\r\n          NEXT = common.def(NEXT_STATE, '.', name);\r\n          CURRENT = common.def(CURRENT_STATE, '.', name);\r\n          block(\r\n            NEXT, ');',\r\n            CURRENT_STATE, '.', name, '=', NEXT, ';');\r\n          poll(\r\n            'if(', NEXT, '!==', CURRENT, '){',\r\n            block,\r\n            '}');\r\n        }\r\n        refresh(block);\r\n      });\r\n\r\n      return env.compile()\r\n    })(),\r\n    compile: compileCommand\r\n  }\r\n}\n\nfunction stats () {\r\n  return {\r\n    bufferCount: 0,\r\n    elementsCount: 0,\r\n    framebufferCount: 0,\r\n    shaderCount: 0,\r\n    textureCount: 0,\r\n    cubeCount: 0,\r\n    renderbufferCount: 0,\r\n    maxTextureUnits: 0\r\n  }\r\n}\n\nvar GL_QUERY_RESULT_EXT = 0x8866;\r\nvar GL_QUERY_RESULT_AVAILABLE_EXT = 0x8867;\r\nvar GL_TIME_ELAPSED_EXT = 0x88BF;\r\n\r\nvar createTimer = function (gl, extensions) {\r\n  if (!extensions.ext_disjoint_timer_query) {\r\n    return null\r\n  }\r\n\r\n  // QUERY POOL BEGIN\r\n  var queryPool = [];\r\n  function allocQuery () {\r\n    return queryPool.pop() || extensions.ext_disjoint_timer_query.createQueryEXT()\r\n  }\r\n  function freeQuery (query) {\r\n    queryPool.push(query);\r\n  }\r\n  // QUERY POOL END\r\n\r\n  var pendingQueries = [];\r\n  function beginQuery (stats) {\r\n    var query = allocQuery();\r\n    extensions.ext_disjoint_timer_query.beginQueryEXT(GL_TIME_ELAPSED_EXT, query);\r\n    pendingQueries.push(query);\r\n    pushScopeStats(pendingQueries.length - 1, pendingQueries.length, stats);\r\n  }\r\n\r\n  function endQuery () {\r\n    extensions.ext_disjoint_timer_query.endQueryEXT(GL_TIME_ELAPSED_EXT);\r\n  }\r\n\r\n  //\r\n  // Pending stats pool.\r\n  //\r\n  function PendingStats () {\r\n    this.startQueryIndex = -1;\r\n    this.endQueryIndex = -1;\r\n    this.sum = 0;\r\n    this.stats = null;\r\n  }\r\n  var pendingStatsPool = [];\r\n  function allocPendingStats () {\r\n    return pendingStatsPool.pop() || new PendingStats()\r\n  }\r\n  function freePendingStats (pendingStats) {\r\n    pendingStatsPool.push(pendingStats);\r\n  }\r\n  // Pending stats pool end\r\n\r\n  var pendingStats = [];\r\n  function pushScopeStats (start, end, stats) {\r\n    var ps = allocPendingStats();\r\n    ps.startQueryIndex = start;\r\n    ps.endQueryIndex = end;\r\n    ps.sum = 0;\r\n    ps.stats = stats;\r\n    pendingStats.push(ps);\r\n  }\r\n\r\n  // we should call this at the beginning of the frame,\r\n  // in order to update gpuTime\r\n  var timeSum = [];\r\n  var queryPtr = [];\r\n  function update () {\r\n    var ptr, i;\r\n\r\n    var n = pendingQueries.length;\r\n    if (n === 0) {\r\n      return\r\n    }\r\n\r\n    // Reserve space\r\n    queryPtr.length = Math.max(queryPtr.length, n + 1);\r\n    timeSum.length = Math.max(timeSum.length, n + 1);\r\n    timeSum[0] = 0;\r\n    queryPtr[0] = 0;\r\n\r\n    // Update all pending timer queries\r\n    var queryTime = 0;\r\n    ptr = 0;\r\n    for (i = 0; i < pendingQueries.length; ++i) {\r\n      var query = pendingQueries[i];\r\n      if (extensions.ext_disjoint_timer_query.getQueryObjectEXT(query, GL_QUERY_RESULT_AVAILABLE_EXT)) {\r\n        queryTime += extensions.ext_disjoint_timer_query.getQueryObjectEXT(query, GL_QUERY_RESULT_EXT);\r\n        freeQuery(query);\r\n      } else {\r\n        pendingQueries[ptr++] = query;\r\n      }\r\n      timeSum[i + 1] = queryTime;\r\n      queryPtr[i + 1] = ptr;\r\n    }\r\n    pendingQueries.length = ptr;\r\n\r\n    // Update all pending stat queries\r\n    ptr = 0;\r\n    for (i = 0; i < pendingStats.length; ++i) {\r\n      var stats = pendingStats[i];\r\n      var start = stats.startQueryIndex;\r\n      var end = stats.endQueryIndex;\r\n      stats.sum += timeSum[end] - timeSum[start];\r\n      var startPtr = queryPtr[start];\r\n      var endPtr = queryPtr[end];\r\n      if (endPtr === startPtr) {\r\n        stats.stats.gpuTime += stats.sum / 1e6;\r\n        freePendingStats(stats);\r\n      } else {\r\n        stats.startQueryIndex = startPtr;\r\n        stats.endQueryIndex = endPtr;\r\n        pendingStats[ptr++] = stats;\r\n      }\r\n    }\r\n    pendingStats.length = ptr;\r\n  }\r\n\r\n  return {\r\n    beginQuery: beginQuery,\r\n    endQuery: endQuery,\r\n    pushScopeStats: pushScopeStats,\r\n    update: update,\r\n    getNumPendingQueries: function () {\r\n      return pendingQueries.length\r\n    },\r\n    clear: function () {\r\n      queryPool.push.apply(queryPool, pendingQueries);\r\n      for (var i = 0; i < queryPool.length; i++) {\r\n        extensions.ext_disjoint_timer_query.deleteQueryEXT(queryPool[i]);\r\n      }\r\n      pendingQueries.length = 0;\r\n      queryPool.length = 0;\r\n    },\r\n    restore: function () {\r\n      pendingQueries.length = 0;\r\n      queryPool.length = 0;\r\n    }\r\n  }\r\n};\n\nvar GL_COLOR_BUFFER_BIT = 16384;\r\nvar GL_DEPTH_BUFFER_BIT = 256;\r\nvar GL_STENCIL_BUFFER_BIT = 1024;\r\n\r\nvar GL_ARRAY_BUFFER = 34962;\r\n\r\nvar CONTEXT_LOST_EVENT = 'webglcontextlost';\r\nvar CONTEXT_RESTORED_EVENT = 'webglcontextrestored';\r\n\r\nvar DYN_PROP = 1;\r\nvar DYN_CONTEXT = 2;\r\nvar DYN_STATE = 3;\r\n\r\nfunction find (haystack, needle) {\r\n  for (var i = 0; i < haystack.length; ++i) {\r\n    if (haystack[i] === needle) {\r\n      return i\r\n    }\r\n  }\r\n  return -1\r\n}\r\n\r\nfunction wrapREGL (args) {\r\n  var config = parseArgs(args);\r\n  if (!config) {\r\n    return null\r\n  }\r\n\r\n  var gl = config.gl;\r\n  var glAttributes = gl.getContextAttributes();\r\n  var contextLost = gl.isContextLost();\r\n\r\n  var extensionState = createExtensionCache(gl, config);\r\n  if (!extensionState) {\r\n    return null\r\n  }\r\n\r\n  var stringStore = createStringStore();\r\n  var stats$$1 = stats();\r\n  var extensions = extensionState.extensions;\r\n  var timer = createTimer(gl, extensions);\r\n\r\n  var START_TIME = clock();\r\n  var WIDTH = gl.drawingBufferWidth;\r\n  var HEIGHT = gl.drawingBufferHeight;\r\n\r\n  var contextState = {\r\n    tick: 0,\r\n    time: 0,\r\n    viewportWidth: WIDTH,\r\n    viewportHeight: HEIGHT,\r\n    framebufferWidth: WIDTH,\r\n    framebufferHeight: HEIGHT,\r\n    drawingBufferWidth: WIDTH,\r\n    drawingBufferHeight: HEIGHT,\r\n    pixelRatio: config.pixelRatio\r\n  };\r\n  var uniformState = {};\r\n  var drawState = {\r\n    elements: null,\r\n    primitive: 4, // GL_TRIANGLES\r\n    count: -1,\r\n    offset: 0,\r\n    instances: -1\r\n  };\r\n\r\n  var limits = wrapLimits(gl, extensions);\r\n  var attributeState = wrapAttributeState(\r\n    gl,\r\n    extensions,\r\n    limits,\r\n    stringStore);\r\n  var bufferState = wrapBufferState(\r\n    gl,\r\n    stats$$1,\r\n    config,\r\n    attributeState);\r\n  var elementState = wrapElementsState(gl, extensions, bufferState, stats$$1);\r\n  var shaderState = wrapShaderState(gl, stringStore, stats$$1, config);\r\n  var textureState = createTextureSet(\r\n    gl,\r\n    extensions,\r\n    limits,\r\n    function () { core.procs.poll(); },\r\n    contextState,\r\n    stats$$1,\r\n    config);\r\n  var renderbufferState = wrapRenderbuffers(gl, extensions, limits, stats$$1, config);\r\n  var framebufferState = wrapFBOState(\r\n    gl,\r\n    extensions,\r\n    limits,\r\n    textureState,\r\n    renderbufferState,\r\n    stats$$1);\r\n  var core = reglCore(\r\n    gl,\r\n    stringStore,\r\n    extensions,\r\n    limits,\r\n    bufferState,\r\n    elementState,\r\n    textureState,\r\n    framebufferState,\r\n    uniformState,\r\n    attributeState,\r\n    shaderState,\r\n    drawState,\r\n    contextState,\r\n    timer,\r\n    config);\r\n  var readPixels = wrapReadPixels(\r\n    gl,\r\n    framebufferState,\r\n    core.procs.poll,\r\n    contextState,\r\n    glAttributes, extensions, limits);\r\n\r\n  var nextState = core.next;\r\n  var canvas = gl.canvas;\r\n\r\n  var rafCallbacks = [];\r\n  var lossCallbacks = [];\r\n  var restoreCallbacks = [];\r\n  var destroyCallbacks = [config.onDestroy];\r\n\r\n  var activeRAF = null;\r\n  function handleRAF () {\r\n    if (rafCallbacks.length === 0) {\r\n      if (timer) {\r\n        timer.update();\r\n      }\r\n      activeRAF = null;\r\n      return\r\n    }\r\n\r\n    // schedule next animation frame\r\n    activeRAF = raf.next(handleRAF);\r\n\r\n    // poll for changes\r\n    poll();\r\n\r\n    // fire a callback for all pending rafs\r\n    for (var i = rafCallbacks.length - 1; i >= 0; --i) {\r\n      var cb = rafCallbacks[i];\r\n      if (cb) {\r\n        cb(contextState, null, 0);\r\n      }\r\n    }\r\n\r\n    // flush all pending webgl calls\r\n    gl.flush();\r\n\r\n    // poll GPU timers *after* gl.flush so we don't delay command dispatch\r\n    if (timer) {\r\n      timer.update();\r\n    }\r\n  }\r\n\r\n  function startRAF () {\r\n    if (!activeRAF && rafCallbacks.length > 0) {\r\n      activeRAF = raf.next(handleRAF);\r\n    }\r\n  }\r\n\r\n  function stopRAF () {\r\n    if (activeRAF) {\r\n      raf.cancel(handleRAF);\r\n      activeRAF = null;\r\n    }\r\n  }\r\n\r\n  function handleContextLoss (event) {\r\n    event.preventDefault();\r\n\r\n    // set context lost flag\r\n    contextLost = true;\r\n\r\n    // pause request animation frame\r\n    stopRAF();\r\n\r\n    // lose context\r\n    lossCallbacks.forEach(function (cb) {\r\n      cb();\r\n    });\r\n  }\r\n\r\n  function handleContextRestored (event) {\r\n    // clear error code\r\n    gl.getError();\r\n\r\n    // clear context lost flag\r\n    contextLost = false;\r\n\r\n    // refresh state\r\n    extensionState.restore();\r\n    shaderState.restore();\r\n    bufferState.restore();\r\n    textureState.restore();\r\n    renderbufferState.restore();\r\n    framebufferState.restore();\r\n    if (timer) {\r\n      timer.restore();\r\n    }\r\n\r\n    // refresh state\r\n    core.procs.refresh();\r\n\r\n    // restart RAF\r\n    startRAF();\r\n\r\n    // restore context\r\n    restoreCallbacks.forEach(function (cb) {\r\n      cb();\r\n    });\r\n  }\r\n\r\n  if (canvas) {\r\n    canvas.addEventListener(CONTEXT_LOST_EVENT, handleContextLoss, false);\r\n    canvas.addEventListener(CONTEXT_RESTORED_EVENT, handleContextRestored, false);\r\n  }\r\n\r\n  function destroy () {\r\n    rafCallbacks.length = 0;\r\n    stopRAF();\r\n\r\n    if (canvas) {\r\n      canvas.removeEventListener(CONTEXT_LOST_EVENT, handleContextLoss);\r\n      canvas.removeEventListener(CONTEXT_RESTORED_EVENT, handleContextRestored);\r\n    }\r\n\r\n    shaderState.clear();\r\n    framebufferState.clear();\r\n    renderbufferState.clear();\r\n    textureState.clear();\r\n    elementState.clear();\r\n    bufferState.clear();\r\n\r\n    if (timer) {\r\n      timer.clear();\r\n    }\r\n\r\n    destroyCallbacks.forEach(function (cb) {\r\n      cb();\r\n    });\r\n  }\r\n\r\n  function compileProcedure (options) {\r\n    check$1(!!options, 'invalid args to regl({...})');\r\n    check$1.type(options, 'object', 'invalid args to regl({...})');\r\n\r\n    function flattenNestedOptions (options) {\r\n      var result = extend({}, options);\r\n      delete result.uniforms;\r\n      delete result.attributes;\r\n      delete result.context;\r\n\r\n      if ('stencil' in result && result.stencil.op) {\r\n        result.stencil.opBack = result.stencil.opFront = result.stencil.op;\r\n        delete result.stencil.op;\r\n      }\r\n\r\n      function merge (name) {\r\n        if (name in result) {\r\n          var child = result[name];\r\n          delete result[name];\r\n          Object.keys(child).forEach(function (prop) {\r\n            result[name + '.' + prop] = child[prop];\r\n          });\r\n        }\r\n      }\r\n      merge('blend');\r\n      merge('depth');\r\n      merge('cull');\r\n      merge('stencil');\r\n      merge('polygonOffset');\r\n      merge('scissor');\r\n      merge('sample');\r\n\r\n      return result\r\n    }\r\n\r\n    function separateDynamic (object) {\r\n      var staticItems = {};\r\n      var dynamicItems = {};\r\n      Object.keys(object).forEach(function (option) {\r\n        var value = object[option];\r\n        if (dynamic.isDynamic(value)) {\r\n          dynamicItems[option] = dynamic.unbox(value, option);\r\n        } else {\r\n          staticItems[option] = value;\r\n        }\r\n      });\r\n      return {\r\n        dynamic: dynamicItems,\r\n        static: staticItems\r\n      }\r\n    }\r\n\r\n    // Treat context variables separate from other dynamic variables\r\n    var context = separateDynamic(options.context || {});\r\n    var uniforms = separateDynamic(options.uniforms || {});\r\n    var attributes = separateDynamic(options.attributes || {});\r\n    var opts = separateDynamic(flattenNestedOptions(options));\r\n\r\n    var stats$$1 = {\r\n      gpuTime: 0.0,\r\n      cpuTime: 0.0,\r\n      count: 0\r\n    };\r\n\r\n    var compiled = core.compile(opts, attributes, uniforms, context, stats$$1);\r\n\r\n    var draw = compiled.draw;\r\n    var batch = compiled.batch;\r\n    var scope = compiled.scope;\r\n\r\n    // FIXME: we should modify code generation for batch commands so this\r\n    // isn't necessary\r\n    var EMPTY_ARRAY = [];\r\n    function reserve (count) {\r\n      while (EMPTY_ARRAY.length < count) {\r\n        EMPTY_ARRAY.push(null);\r\n      }\r\n      return EMPTY_ARRAY\r\n    }\r\n\r\n    function REGLCommand (args, body) {\r\n      var i;\r\n      if (contextLost) {\r\n        check$1.raise('context lost');\r\n      }\r\n      if (typeof args === 'function') {\r\n        return scope.call(this, null, args, 0)\r\n      } else if (typeof body === 'function') {\r\n        if (typeof args === 'number') {\r\n          for (i = 0; i < args; ++i) {\r\n            scope.call(this, null, body, i);\r\n          }\r\n          return\r\n        } else if (Array.isArray(args)) {\r\n          for (i = 0; i < args.length; ++i) {\r\n            scope.call(this, args[i], body, i);\r\n          }\r\n          return\r\n        } else {\r\n          return scope.call(this, args, body, 0)\r\n        }\r\n      } else if (typeof args === 'number') {\r\n        if (args > 0) {\r\n          return batch.call(this, reserve(args | 0), args | 0)\r\n        }\r\n      } else if (Array.isArray(args)) {\r\n        if (args.length) {\r\n          return batch.call(this, args, args.length)\r\n        }\r\n      } else {\r\n        return draw.call(this, args)\r\n      }\r\n    }\r\n\r\n    return extend(REGLCommand, {\r\n      stats: stats$$1\r\n    })\r\n  }\r\n\r\n  var setFBO = framebufferState.setFBO = compileProcedure({\r\n    framebuffer: dynamic.define.call(null, DYN_PROP, 'framebuffer')\r\n  });\r\n\r\n  function clearImpl (_, options) {\r\n    var clearFlags = 0;\r\n    core.procs.poll();\r\n\r\n    var c = options.color;\r\n    if (c) {\r\n      gl.clearColor(+c[0] || 0, +c[1] || 0, +c[2] || 0, +c[3] || 0);\r\n      clearFlags |= GL_COLOR_BUFFER_BIT;\r\n    }\r\n    if ('depth' in options) {\r\n      gl.clearDepth(+options.depth);\r\n      clearFlags |= GL_DEPTH_BUFFER_BIT;\r\n    }\r\n    if ('stencil' in options) {\r\n      gl.clearStencil(options.stencil | 0);\r\n      clearFlags |= GL_STENCIL_BUFFER_BIT;\r\n    }\r\n\r\n    check$1(!!clearFlags, 'called regl.clear with no buffer specified');\r\n    gl.clear(clearFlags);\r\n  }\r\n\r\n  function clear (options) {\r\n    check$1(\r\n      typeof options === 'object' && options,\r\n      'regl.clear() takes an object as input');\r\n    if ('framebuffer' in options) {\r\n      if (options.framebuffer &&\r\n          options.framebuffer_reglType === 'framebufferCube') {\r\n        for (var i = 0; i < 6; ++i) {\r\n          setFBO(extend({\r\n            framebuffer: options.framebuffer.faces[i]\r\n          }, options), clearImpl);\r\n        }\r\n      } else {\r\n        setFBO(options, clearImpl);\r\n      }\r\n    } else {\r\n      clearImpl(null, options);\r\n    }\r\n  }\r\n\r\n  function frame (cb) {\r\n    check$1.type(cb, 'function', 'regl.frame() callback must be a function');\r\n    rafCallbacks.push(cb);\r\n\r\n    function cancel () {\r\n      // FIXME:  should we check something other than equals cb here?\r\n      // what if a user calls frame twice with the same callback...\r\n      //\r\n      var i = find(rafCallbacks, cb);\r\n      check$1(i >= 0, 'cannot cancel a frame twice');\r\n      function pendingCancel () {\r\n        var index = find(rafCallbacks, pendingCancel);\r\n        rafCallbacks[index] = rafCallbacks[rafCallbacks.length - 1];\r\n        rafCallbacks.length -= 1;\r\n        if (rafCallbacks.length <= 0) {\r\n          stopRAF();\r\n        }\r\n      }\r\n      rafCallbacks[i] = pendingCancel;\r\n    }\r\n\r\n    startRAF();\r\n\r\n    return {\r\n      cancel: cancel\r\n    }\r\n  }\r\n\r\n  // poll viewport\r\n  function pollViewport () {\r\n    var viewport = nextState.viewport;\r\n    var scissorBox = nextState.scissor_box;\r\n    viewport[0] = viewport[1] = scissorBox[0] = scissorBox[1] = 0;\r\n    contextState.viewportWidth =\r\n      contextState.framebufferWidth =\r\n      contextState.drawingBufferWidth =\r\n      viewport[2] =\r\n      scissorBox[2] = gl.drawingBufferWidth;\r\n    contextState.viewportHeight =\r\n      contextState.framebufferHeight =\r\n      contextState.drawingBufferHeight =\r\n      viewport[3] =\r\n      scissorBox[3] = gl.drawingBufferHeight;\r\n  }\r\n\r\n  function poll () {\r\n    contextState.tick += 1;\r\n    contextState.time = now();\r\n    pollViewport();\r\n    core.procs.poll();\r\n  }\r\n\r\n  function refresh () {\r\n    pollViewport();\r\n    core.procs.refresh();\r\n    if (timer) {\r\n      timer.update();\r\n    }\r\n  }\r\n\r\n  function now () {\r\n    return (clock() - START_TIME) / 1000.0\r\n  }\r\n\r\n  refresh();\r\n\r\n  function addListener (event, callback) {\r\n    check$1.type(callback, 'function', 'listener callback must be a function');\r\n\r\n    var callbacks;\r\n    switch (event) {\r\n      case 'frame':\r\n        return frame(callback)\r\n      case 'lost':\r\n        callbacks = lossCallbacks;\r\n        break\r\n      case 'restore':\r\n        callbacks = restoreCallbacks;\r\n        break\r\n      case 'destroy':\r\n        callbacks = destroyCallbacks;\r\n        break\r\n      default:\r\n        check$1.raise('invalid event, must be one of frame,lost,restore,destroy');\r\n    }\r\n\r\n    callbacks.push(callback);\r\n    return {\r\n      cancel: function () {\r\n        for (var i = 0; i < callbacks.length; ++i) {\r\n          if (callbacks[i] === callback) {\r\n            callbacks[i] = callbacks[callbacks.length - 1];\r\n            callbacks.pop();\r\n            return\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  var regl = extend(compileProcedure, {\r\n    // Clear current FBO\r\n    clear: clear,\r\n\r\n    // Short cuts for dynamic variables\r\n    prop: dynamic.define.bind(null, DYN_PROP),\r\n    context: dynamic.define.bind(null, DYN_CONTEXT),\r\n    this: dynamic.define.bind(null, DYN_STATE),\r\n\r\n    // executes an empty draw command\r\n    draw: compileProcedure({}),\r\n\r\n    // Resources\r\n    buffer: function (options) {\r\n      return bufferState.create(options, GL_ARRAY_BUFFER, false, false)\r\n    },\r\n    elements: function (options) {\r\n      return elementState.create(options, false)\r\n    },\r\n    texture: textureState.create2D,\r\n    cube: textureState.createCube,\r\n    renderbuffer: renderbufferState.create,\r\n    framebuffer: framebufferState.create,\r\n    framebufferCube: framebufferState.createCube,\r\n\r\n    // Expose context attributes\r\n    attributes: glAttributes,\r\n\r\n    // Frame rendering\r\n    frame: frame,\r\n    on: addListener,\r\n\r\n    // System limits\r\n    limits: limits,\r\n    hasExtension: function (name) {\r\n      return limits.extensions.indexOf(name.toLowerCase()) >= 0\r\n    },\r\n\r\n    // Read pixels\r\n    read: readPixels,\r\n\r\n    // Destroy regl and all associated resources\r\n    destroy: destroy,\r\n\r\n    // Direct GL state manipulation\r\n    _gl: gl,\r\n    _refresh: refresh,\r\n\r\n    poll: function () {\r\n      poll();\r\n      if (timer) {\r\n        timer.update();\r\n      }\r\n    },\r\n\r\n    // Current time\r\n    now: now,\r\n\r\n    // regl Statistics Information\r\n    stats: stats$$1\r\n  });\r\n\r\n  config.onDone(null, regl);\r\n\r\n  return regl\r\n}\n\nreturn wrapREGL;\n\n})));\n//# sourceMappingURL=regl.js.map\n",
    "var assert = require('assert')\n\nvar dftOpts = {}\nvar hasWindow = typeof window !== 'undefined'\nvar hasIdle = hasWindow && window.requestIdleCallback\n\nmodule.exports = onIdle\n\nfunction onIdle (cb, opts) {\n  opts = opts || dftOpts\n  var timerId\n\n  assert.equal(typeof cb, 'function', 'on-idle: cb should be type function')\n  assert.equal(typeof opts, 'object', 'on-idle: opts should be type object')\n\n  if (hasIdle) {\n    timerId = window.requestIdleCallback(function (idleDeadline) {\n      // reschedule if there's less than 1ms remaining on the tick\n      // and a timer did not expire\n      if (idleDeadline.timeRemaining() <= 1 && !idleDeadline.didTimeout) {\n        return onIdle(cb, opts)\n      } else {\n        cb(idleDeadline)\n      }\n    }, opts)\n    return window.cancelIdleCallback.bind(window, timerId)\n  } else if (hasWindow) {\n    timerId = setTimeout(cb, 0)\n    return clearTimeout.bind(window, timerId)\n  }\n}\n",
    "module.exports = function parseUnit(str, out) {\n    if (!out)\n        out = [ 0, '' ]\n\n    str = String(str)\n    var num = parseFloat(str, 10)\n    out[0] = num\n    out[1] = str.match(/[\\d.\\-\\+]*\\s*(.*)/)[1] || ''\n    return out\n}",
    "/* @module to-float32 */\r\n\r\n'use strict'\r\n\r\nmodule.exports = float32\r\nmodule.exports.float32 =\r\nmodule.exports.float = float32\r\nmodule.exports.fract32 =\r\nmodule.exports.fract = fract32\r\n\r\nvar narr = new Float32Array(1)\r\n\r\n// return fractional part of float32 array\r\nfunction fract32 (arr) {\r\n\tif (arr.length) {\r\n\t\tvar fract = float32(arr)\r\n\t\tfor (var i = 0, l = fract.length; i < l; i++) {\r\n\t\t\tfract[i] = arr[i] - fract[i]\r\n\t\t}\r\n\t\treturn fract\r\n\t}\r\n\r\n\t// number\r\n\treturn float32(arr - float32(arr))\r\n}\r\n\r\n// make sure data is float32 array\r\nfunction float32 (arr) {\r\n\tif (arr.length) {\r\n\t\tif (arr instanceof Float32Array) return arr\r\n\t\tvar float = new Float32Array(arr)\r\n\t\tfloat.set(arr)\r\n\t\treturn float\r\n\t}\r\n\r\n\t// number\r\n\tnarr[0] = arr\r\n\treturn narr[0]\r\n}\r\n",
    "'use strict'\n\nvar parseUnit = require('parse-unit')\n\nmodule.exports = toPX\n\nvar PIXELS_PER_INCH = getSizeBrutal('in', document.body) // 96\n\n\nfunction getPropertyInPX(element, prop) {\n  var parts = parseUnit(getComputedStyle(element).getPropertyValue(prop))\n  return parts[0] * toPX(parts[1], element)\n}\n\n//This brutal hack is needed\nfunction getSizeBrutal(unit, element) {\n  var testDIV = document.createElement('div')\n  testDIV.style['height'] = '128' + unit\n  element.appendChild(testDIV)\n  var size = getPropertyInPX(testDIV, 'height') / 128\n  element.removeChild(testDIV)\n  return size\n}\n\nfunction toPX(str, element) {\n  if (!str) return null\n\n  element = element || document.body\n  str = (str + '' || 'px').trim().toLowerCase()\n  if(element === window || element === document) {\n    element = document.body\n  }\n\n  switch(str) {\n    case '%':  //Ambiguous, not sure if we should use width or height\n      return element.clientHeight / 100.0\n    case 'ch':\n    case 'ex':\n      return getSizeBrutal(str, element)\n    case 'em':\n      return getPropertyInPX(element, 'font-size')\n    case 'rem':\n      return getPropertyInPX(document.body, 'font-size')\n    case 'vw':\n      return window.innerWidth/100\n    case 'vh':\n      return window.innerHeight/100\n    case 'vmin':\n      return Math.min(window.innerWidth, window.innerHeight) / 100\n    case 'vmax':\n      return Math.max(window.innerWidth, window.innerHeight) / 100\n    case 'in':\n      return PIXELS_PER_INCH\n    case 'cm':\n      return PIXELS_PER_INCH / 2.54\n    case 'mm':\n      return PIXELS_PER_INCH / 25.4\n    case 'pt':\n      return PIXELS_PER_INCH / 72\n    case 'pc':\n      return PIXELS_PER_INCH / 6\n    case 'px':\n      return 1\n  }\n\n  // detect number of units\n  var parts = parseUnit(str)\n  if (!isNaN(parts[0]) && parts[1]) {\n    var px = toPX(parts[1], element)\n    return typeof px === 'number' ? parts[0] * px : null\n  }\n\n  return null\n}\n",
    "/**\n * Bit twiddling hacks for JavaScript.\n *\n * Author: Mikola Lysenko\n *\n * Ported from Stanford bit twiddling hack library:\n *    http://graphics.stanford.edu/~seander/bithacks.html\n */\n\n\"use strict\"; \"use restrict\";\n\n//Number of bits in an integer\nvar INT_BITS = 32;\n\n//Constants\nexports.INT_BITS  = INT_BITS;\nexports.INT_MAX   =  0x7fffffff;\nexports.INT_MIN   = -1<<(INT_BITS-1);\n\n//Returns -1, 0, +1 depending on sign of x\nexports.sign = function(v) {\n  return (v > 0) - (v < 0);\n}\n\n//Computes absolute value of integer\nexports.abs = function(v) {\n  var mask = v >> (INT_BITS-1);\n  return (v ^ mask) - mask;\n}\n\n//Computes minimum of integers x and y\nexports.min = function(x, y) {\n  return y ^ ((x ^ y) & -(x < y));\n}\n\n//Computes maximum of integers x and y\nexports.max = function(x, y) {\n  return x ^ ((x ^ y) & -(x < y));\n}\n\n//Checks if a number is a power of two\nexports.isPow2 = function(v) {\n  return !(v & (v-1)) && (!!v);\n}\n\n//Computes log base 2 of v\nexports.log2 = function(v) {\n  var r, shift;\n  r =     (v > 0xFFFF) << 4; v >>>= r;\n  shift = (v > 0xFF  ) << 3; v >>>= shift; r |= shift;\n  shift = (v > 0xF   ) << 2; v >>>= shift; r |= shift;\n  shift = (v > 0x3   ) << 1; v >>>= shift; r |= shift;\n  return r | (v >> 1);\n}\n\n//Computes log base 10 of v\nexports.log10 = function(v) {\n  return  (v >= 1000000000) ? 9 : (v >= 100000000) ? 8 : (v >= 10000000) ? 7 :\n          (v >= 1000000) ? 6 : (v >= 100000) ? 5 : (v >= 10000) ? 4 :\n          (v >= 1000) ? 3 : (v >= 100) ? 2 : (v >= 10) ? 1 : 0;\n}\n\n//Counts number of bits\nexports.popCount = function(v) {\n  v = v - ((v >>> 1) & 0x55555555);\n  v = (v & 0x33333333) + ((v >>> 2) & 0x33333333);\n  return ((v + (v >>> 4) & 0xF0F0F0F) * 0x1010101) >>> 24;\n}\n\n//Counts number of trailing zeros\nfunction countTrailingZeros(v) {\n  var c = 32;\n  v &= -v;\n  if (v) c--;\n  if (v & 0x0000FFFF) c -= 16;\n  if (v & 0x00FF00FF) c -= 8;\n  if (v & 0x0F0F0F0F) c -= 4;\n  if (v & 0x33333333) c -= 2;\n  if (v & 0x55555555) c -= 1;\n  return c;\n}\nexports.countTrailingZeros = countTrailingZeros;\n\n//Rounds to next power of 2\nexports.nextPow2 = function(v) {\n  v += v === 0;\n  --v;\n  v |= v >>> 1;\n  v |= v >>> 2;\n  v |= v >>> 4;\n  v |= v >>> 8;\n  v |= v >>> 16;\n  return v + 1;\n}\n\n//Rounds down to previous power of 2\nexports.prevPow2 = function(v) {\n  v |= v >>> 1;\n  v |= v >>> 2;\n  v |= v >>> 4;\n  v |= v >>> 8;\n  v |= v >>> 16;\n  return v - (v>>>1);\n}\n\n//Computes parity of word\nexports.parity = function(v) {\n  v ^= v >>> 16;\n  v ^= v >>> 8;\n  v ^= v >>> 4;\n  v &= 0xf;\n  return (0x6996 >>> v) & 1;\n}\n\nvar REVERSE_TABLE = new Array(256);\n\n(function(tab) {\n  for(var i=0; i<256; ++i) {\n    var v = i, r = i, s = 7;\n    for (v >>>= 1; v; v >>>= 1) {\n      r <<= 1;\n      r |= v & 1;\n      --s;\n    }\n    tab[i] = (r << s) & 0xff;\n  }\n})(REVERSE_TABLE);\n\n//Reverse bits in a 32 bit word\nexports.reverse = function(v) {\n  return  (REVERSE_TABLE[ v         & 0xff] << 24) |\n          (REVERSE_TABLE[(v >>> 8)  & 0xff] << 16) |\n          (REVERSE_TABLE[(v >>> 16) & 0xff] << 8)  |\n           REVERSE_TABLE[(v >>> 24) & 0xff];\n}\n\n//Interleave bits of 2 coordinates with 16 bits.  Useful for fast quadtree codes\nexports.interleave2 = function(x, y) {\n  x &= 0xFFFF;\n  x = (x | (x << 8)) & 0x00FF00FF;\n  x = (x | (x << 4)) & 0x0F0F0F0F;\n  x = (x | (x << 2)) & 0x33333333;\n  x = (x | (x << 1)) & 0x55555555;\n\n  y &= 0xFFFF;\n  y = (y | (y << 8)) & 0x00FF00FF;\n  y = (y | (y << 4)) & 0x0F0F0F0F;\n  y = (y | (y << 2)) & 0x33333333;\n  y = (y | (y << 1)) & 0x55555555;\n\n  return x | (y << 1);\n}\n\n//Extracts the nth interleaved component\nexports.deinterleave2 = function(v, n) {\n  v = (v >>> n) & 0x55555555;\n  v = (v | (v >>> 1))  & 0x33333333;\n  v = (v | (v >>> 2))  & 0x0F0F0F0F;\n  v = (v | (v >>> 4))  & 0x00FF00FF;\n  v = (v | (v >>> 16)) & 0x000FFFF;\n  return (v << 16) >> 16;\n}\n\n\n//Interleave bits of 3 coordinates, each with 10 bits.  Useful for fast octree codes\nexports.interleave3 = function(x, y, z) {\n  x &= 0x3FF;\n  x  = (x | (x<<16)) & 4278190335;\n  x  = (x | (x<<8))  & 251719695;\n  x  = (x | (x<<4))  & 3272356035;\n  x  = (x | (x<<2))  & 1227133513;\n\n  y &= 0x3FF;\n  y  = (y | (y<<16)) & 4278190335;\n  y  = (y | (y<<8))  & 251719695;\n  y  = (y | (y<<4))  & 3272356035;\n  y  = (y | (y<<2))  & 1227133513;\n  x |= (y << 1);\n  \n  z &= 0x3FF;\n  z  = (z | (z<<16)) & 4278190335;\n  z  = (z | (z<<8))  & 251719695;\n  z  = (z | (z<<4))  & 3272356035;\n  z  = (z | (z<<2))  & 1227133513;\n  \n  return x | (z << 2);\n}\n\n//Extracts nth interleaved component of a 3-tuple\nexports.deinterleave3 = function(v, n) {\n  v = (v >>> n)       & 1227133513;\n  v = (v | (v>>>2))   & 3272356035;\n  v = (v | (v>>>4))   & 251719695;\n  v = (v | (v>>>8))   & 4278190335;\n  v = (v | (v>>>16))  & 0x3FF;\n  return (v<<22)>>22;\n}\n\n//Computes next combination in colexicographic order (this is mistakenly called nextPermutation on the bit twiddling hacks page)\nexports.nextCombination = function(v) {\n  var t = v | (v - 1);\n  return (t + 1) | (((~t & -~t) - 1) >>> (countTrailingZeros(v) + 1));\n}\n\n",
    "\"use strict\"\n\nfunction dupe_array(count, value, i) {\n  var c = count[i]|0\n  if(c <= 0) {\n    return []\n  }\n  var result = new Array(c), j\n  if(i === count.length-1) {\n    for(j=0; j<c; ++j) {\n      result[j] = value\n    }\n  } else {\n    for(j=0; j<c; ++j) {\n      result[j] = dupe_array(count, value, i+1)\n    }\n  }\n  return result\n}\n\nfunction dupe_number(count, value) {\n  var result, i\n  result = new Array(count)\n  for(i=0; i<count; ++i) {\n    result[i] = value\n  }\n  return result\n}\n\nfunction dupe(count, value) {\n  if(typeof value === \"undefined\") {\n    value = 0\n  }\n  switch(typeof count) {\n    case \"number\":\n      if(count > 0) {\n        return dupe_number(count|0, value)\n      }\n    break\n    case \"object\":\n      if(typeof (count.length) === \"number\") {\n        return dupe_array(count, value, 0)\n      }\n    break\n  }\n  return []\n}\n\nmodule.exports = dupe",
    "'use strict'\n\nvar bits = require('bit-twiddle')\nvar dup = require('dup')\n\n//Legacy pool support\nif(!global.__TYPEDARRAY_POOL) {\n  global.__TYPEDARRAY_POOL = {\n      UINT8   : dup([32, 0])\n    , UINT16  : dup([32, 0])\n    , UINT32  : dup([32, 0])\n    , INT8    : dup([32, 0])\n    , INT16   : dup([32, 0])\n    , INT32   : dup([32, 0])\n    , FLOAT   : dup([32, 0])\n    , DOUBLE  : dup([32, 0])\n    , DATA    : dup([32, 0])\n    , UINT8C  : dup([32, 0])\n    , BUFFER  : dup([32, 0])\n  }\n}\n\nvar hasUint8C = (typeof Uint8ClampedArray) !== 'undefined'\nvar POOL = global.__TYPEDARRAY_POOL\n\n//Upgrade pool\nif(!POOL.UINT8C) {\n  POOL.UINT8C = dup([32, 0])\n}\nif(!POOL.BUFFER) {\n  POOL.BUFFER = dup([32, 0])\n}\n\n//New technique: Only allocate from ArrayBufferView and Buffer\nvar DATA    = POOL.DATA\n  , BUFFER  = POOL.BUFFER\n\nexports.free = function free(array) {\n  if(Buffer.isBuffer(array)) {\n    BUFFER[bits.log2(array.length)].push(array)\n  } else {\n    if(Object.prototype.toString.call(array) !== '[object ArrayBuffer]') {\n      array = array.buffer\n    }\n    if(!array) {\n      return\n    }\n    var n = array.length || array.byteLength\n    var log_n = bits.log2(n)|0\n    DATA[log_n].push(array)\n  }\n}\n\nfunction freeArrayBuffer(buffer) {\n  if(!buffer) {\n    return\n  }\n  var n = buffer.length || buffer.byteLength\n  var log_n = bits.log2(n)\n  DATA[log_n].push(buffer)\n}\n\nfunction freeTypedArray(array) {\n  freeArrayBuffer(array.buffer)\n}\n\nexports.freeUint8 =\nexports.freeUint16 =\nexports.freeUint32 =\nexports.freeInt8 =\nexports.freeInt16 =\nexports.freeInt32 =\nexports.freeFloat32 = \nexports.freeFloat =\nexports.freeFloat64 = \nexports.freeDouble = \nexports.freeUint8Clamped = \nexports.freeDataView = freeTypedArray\n\nexports.freeArrayBuffer = freeArrayBuffer\n\nexports.freeBuffer = function freeBuffer(array) {\n  BUFFER[bits.log2(array.length)].push(array)\n}\n\nexports.malloc = function malloc(n, dtype) {\n  if(dtype === undefined || dtype === 'arraybuffer') {\n    return mallocArrayBuffer(n)\n  } else {\n    switch(dtype) {\n      case 'uint8':\n        return mallocUint8(n)\n      case 'uint16':\n        return mallocUint16(n)\n      case 'uint32':\n        return mallocUint32(n)\n      case 'int8':\n        return mallocInt8(n)\n      case 'int16':\n        return mallocInt16(n)\n      case 'int32':\n        return mallocInt32(n)\n      case 'float':\n      case 'float32':\n        return mallocFloat(n)\n      case 'double':\n      case 'float64':\n        return mallocDouble(n)\n      case 'uint8_clamped':\n        return mallocUint8Clamped(n)\n      case 'buffer':\n        return mallocBuffer(n)\n      case 'data':\n      case 'dataview':\n        return mallocDataView(n)\n\n      default:\n        return null\n    }\n  }\n  return null\n}\n\nfunction mallocArrayBuffer(n) {\n  var n = bits.nextPow2(n)\n  var log_n = bits.log2(n)\n  var d = DATA[log_n]\n  if(d.length > 0) {\n    return d.pop()\n  }\n  return new ArrayBuffer(n)\n}\nexports.mallocArrayBuffer = mallocArrayBuffer\n\nfunction mallocUint8(n) {\n  return new Uint8Array(mallocArrayBuffer(n), 0, n)\n}\nexports.mallocUint8 = mallocUint8\n\nfunction mallocUint16(n) {\n  return new Uint16Array(mallocArrayBuffer(2*n), 0, n)\n}\nexports.mallocUint16 = mallocUint16\n\nfunction mallocUint32(n) {\n  return new Uint32Array(mallocArrayBuffer(4*n), 0, n)\n}\nexports.mallocUint32 = mallocUint32\n\nfunction mallocInt8(n) {\n  return new Int8Array(mallocArrayBuffer(n), 0, n)\n}\nexports.mallocInt8 = mallocInt8\n\nfunction mallocInt16(n) {\n  return new Int16Array(mallocArrayBuffer(2*n), 0, n)\n}\nexports.mallocInt16 = mallocInt16\n\nfunction mallocInt32(n) {\n  return new Int32Array(mallocArrayBuffer(4*n), 0, n)\n}\nexports.mallocInt32 = mallocInt32\n\nfunction mallocFloat(n) {\n  return new Float32Array(mallocArrayBuffer(4*n), 0, n)\n}\nexports.mallocFloat32 = exports.mallocFloat = mallocFloat\n\nfunction mallocDouble(n) {\n  return new Float64Array(mallocArrayBuffer(8*n), 0, n)\n}\nexports.mallocFloat64 = exports.mallocDouble = mallocDouble\n\nfunction mallocUint8Clamped(n) {\n  if(hasUint8C) {\n    return new Uint8ClampedArray(mallocArrayBuffer(n), 0, n)\n  } else {\n    return mallocUint8(n)\n  }\n}\nexports.mallocUint8Clamped = mallocUint8Clamped\n\nfunction mallocDataView(n) {\n  return new DataView(mallocArrayBuffer(n), 0, n)\n}\nexports.mallocDataView = mallocDataView\n\nfunction mallocBuffer(n) {\n  n = bits.nextPow2(n)\n  var log_n = bits.log2(n)\n  var cache = BUFFER[log_n]\n  if(cache.length > 0) {\n    return cache.pop()\n  }\n  return new Buffer(n)\n}\nexports.mallocBuffer = mallocBuffer\n\nexports.clearCache = function clearCache() {\n  for(var i=0; i<32; ++i) {\n    POOL.UINT8[i].length = 0\n    POOL.UINT16[i].length = 0\n    POOL.UINT32[i].length = 0\n    POOL.INT8[i].length = 0\n    POOL.INT16[i].length = 0\n    POOL.INT32[i].length = 0\n    POOL.FLOAT[i].length = 0\n    POOL.DOUBLE[i].length = 0\n    POOL.UINT8C[i].length = 0\n    DATA[i].length = 0\n    BUFFER[i].length = 0\n  }\n}",
    "// Copyright (C) 2011 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Install a leaky WeakMap emulation on platforms that\n * don't provide a built-in one.\n *\n * <p>Assumes that an ES5 platform where, if {@code WeakMap} is\n * already present, then it conforms to the anticipated ES6\n * specification. To run this file on an ES5 or almost ES5\n * implementation where the {@code WeakMap} specification does not\n * quite conform, run <code>repairES5.js</code> first.\n *\n * <p>Even though WeakMapModule is not global, the linter thinks it\n * is, which is why it is in the overrides list below.\n *\n * <p>NOTE: Before using this WeakMap emulation in a non-SES\n * environment, see the note below about hiddenRecord.\n *\n * @author Mark S. Miller\n * @requires crypto, ArrayBuffer, Uint8Array, navigator, console\n * @overrides WeakMap, ses, Proxy\n * @overrides WeakMapModule\n */\n\n/**\n * This {@code WeakMap} emulation is observably equivalent to the\n * ES-Harmony WeakMap, but with leakier garbage collection properties.\n *\n * <p>As with true WeakMaps, in this emulation, a key does not\n * retain maps indexed by that key and (crucially) a map does not\n * retain the keys it indexes. A map by itself also does not retain\n * the values associated with that map.\n *\n * <p>However, the values associated with a key in some map are\n * retained so long as that key is retained and those associations are\n * not overridden. For example, when used to support membranes, all\n * values exported from a given membrane will live for the lifetime\n * they would have had in the absence of an interposed membrane. Even\n * when the membrane is revoked, all objects that would have been\n * reachable in the absence of revocation will still be reachable, as\n * far as the GC can tell, even though they will no longer be relevant\n * to ongoing computation.\n *\n * <p>The API implemented here is approximately the API as implemented\n * in FF6.0a1 and agreed to by MarkM, Andreas Gal, and Dave Herman,\n * rather than the offially approved proposal page. TODO(erights):\n * upgrade the ecmascript WeakMap proposal page to explain this API\n * change and present to EcmaScript committee for their approval.\n *\n * <p>The first difference between the emulation here and that in\n * FF6.0a1 is the presence of non enumerable {@code get___, has___,\n * set___, and delete___} methods on WeakMap instances to represent\n * what would be the hidden internal properties of a primitive\n * implementation. Whereas the FF6.0a1 WeakMap.prototype methods\n * require their {@code this} to be a genuine WeakMap instance (i.e.,\n * an object of {@code [[Class]]} \"WeakMap}), since there is nothing\n * unforgeable about the pseudo-internal method names used here,\n * nothing prevents these emulated prototype methods from being\n * applied to non-WeakMaps with pseudo-internal methods of the same\n * names.\n *\n * <p>Another difference is that our emulated {@code\n * WeakMap.prototype} is not itself a WeakMap. A problem with the\n * current FF6.0a1 API is that WeakMap.prototype is itself a WeakMap\n * providing ambient mutability and an ambient communications\n * channel. Thus, if a WeakMap is already present and has this\n * problem, repairES5.js wraps it in a safe wrappper in order to\n * prevent access to this channel. (See\n * PATCH_MUTABLE_FROZEN_WEAKMAP_PROTO in repairES5.js).\n */\n\n/**\n * If this is a full <a href=\n * \"http://code.google.com/p/es-lab/wiki/SecureableES5\"\n * >secureable ES5</a> platform and the ES-Harmony {@code WeakMap} is\n * absent, install an approximate emulation.\n *\n * <p>If WeakMap is present but cannot store some objects, use our approximate\n * emulation as a wrapper.\n *\n * <p>If this is almost a secureable ES5 platform, then WeakMap.js\n * should be run after repairES5.js.\n *\n * <p>See {@code WeakMap} for documentation of the garbage collection\n * properties of this WeakMap emulation.\n */\n(function WeakMapModule() {\n  \"use strict\";\n\n  if (typeof ses !== 'undefined' && ses.ok && !ses.ok()) {\n    // already too broken, so give up\n    return;\n  }\n\n  /**\n   * In some cases (current Firefox), we must make a choice betweeen a\n   * WeakMap which is capable of using all varieties of host objects as\n   * keys and one which is capable of safely using proxies as keys. See\n   * comments below about HostWeakMap and DoubleWeakMap for details.\n   *\n   * This function (which is a global, not exposed to guests) marks a\n   * WeakMap as permitted to do what is necessary to index all host\n   * objects, at the cost of making it unsafe for proxies.\n   *\n   * Do not apply this function to anything which is not a genuine\n   * fresh WeakMap.\n   */\n  function weakMapPermitHostObjects(map) {\n    // identity of function used as a secret -- good enough and cheap\n    if (map.permitHostObjects___) {\n      map.permitHostObjects___(weakMapPermitHostObjects);\n    }\n  }\n  if (typeof ses !== 'undefined') {\n    ses.weakMapPermitHostObjects = weakMapPermitHostObjects;\n  }\n\n  // IE 11 has no Proxy but has a broken WeakMap such that we need to patch\n  // it using DoubleWeakMap; this flag tells DoubleWeakMap so.\n  var doubleWeakMapCheckSilentFailure = false;\n\n  // Check if there is already a good-enough WeakMap implementation, and if so\n  // exit without replacing it.\n  if (typeof WeakMap === 'function') {\n    var HostWeakMap = WeakMap;\n    // There is a WeakMap -- is it good enough?\n    if (typeof navigator !== 'undefined' &&\n        /Firefox/.test(navigator.userAgent)) {\n      // We're now *assuming not*, because as of this writing (2013-05-06)\n      // Firefox's WeakMaps have a miscellany of objects they won't accept, and\n      // we don't want to make an exhaustive list, and testing for just one\n      // will be a problem if that one is fixed alone (as they did for Event).\n\n      // If there is a platform that we *can* reliably test on, here's how to\n      // do it:\n      //  var problematic = ... ;\n      //  var testHostMap = new HostWeakMap();\n      //  try {\n      //    testHostMap.set(problematic, 1);  // Firefox 20 will throw here\n      //    if (testHostMap.get(problematic) === 1) {\n      //      return;\n      //    }\n      //  } catch (e) {}\n\n    } else {\n      // IE 11 bug: WeakMaps silently fail to store frozen objects.\n      var testMap = new HostWeakMap();\n      var testObject = Object.freeze({});\n      testMap.set(testObject, 1);\n      if (testMap.get(testObject) !== 1) {\n        doubleWeakMapCheckSilentFailure = true;\n        // Fall through to installing our WeakMap.\n      } else {\n        module.exports = WeakMap;\n        return;\n      }\n    }\n  }\n\n  var hop = Object.prototype.hasOwnProperty;\n  var gopn = Object.getOwnPropertyNames;\n  var defProp = Object.defineProperty;\n  var isExtensible = Object.isExtensible;\n\n  /**\n   * Security depends on HIDDEN_NAME being both <i>unguessable</i> and\n   * <i>undiscoverable</i> by untrusted code.\n   *\n   * <p>Given the known weaknesses of Math.random() on existing\n   * browsers, it does not generate unguessability we can be confident\n   * of.\n   *\n   * <p>It is the monkey patching logic in this file that is intended\n   * to ensure undiscoverability. The basic idea is that there are\n   * three fundamental means of discovering properties of an object:\n   * The for/in loop, Object.keys(), and Object.getOwnPropertyNames(),\n   * as well as some proposed ES6 extensions that appear on our\n   * whitelist. The first two only discover enumerable properties, and\n   * we only use HIDDEN_NAME to name a non-enumerable property, so the\n   * only remaining threat should be getOwnPropertyNames and some\n   * proposed ES6 extensions that appear on our whitelist. We monkey\n   * patch them to remove HIDDEN_NAME from the list of properties they\n   * returns.\n   *\n   * <p>TODO(erights): On a platform with built-in Proxies, proxies\n   * could be used to trap and thereby discover the HIDDEN_NAME, so we\n   * need to monkey patch Proxy.create, Proxy.createFunction, etc, in\n   * order to wrap the provided handler with the real handler which\n   * filters out all traps using HIDDEN_NAME.\n   *\n   * <p>TODO(erights): Revisit Mike Stay's suggestion that we use an\n   * encapsulated function at a not-necessarily-secret name, which\n   * uses the Stiegler shared-state rights amplification pattern to\n   * reveal the associated value only to the WeakMap in which this key\n   * is associated with that value. Since only the key retains the\n   * function, the function can also remember the key without causing\n   * leakage of the key, so this doesn't violate our general gc\n   * goals. In addition, because the name need not be a guarded\n   * secret, we could efficiently handle cross-frame frozen keys.\n   */\n  var HIDDEN_NAME_PREFIX = 'weakmap:';\n  var HIDDEN_NAME = HIDDEN_NAME_PREFIX + 'ident:' + Math.random() + '___';\n\n  if (typeof crypto !== 'undefined' &&\n      typeof crypto.getRandomValues === 'function' &&\n      typeof ArrayBuffer === 'function' &&\n      typeof Uint8Array === 'function') {\n    var ab = new ArrayBuffer(25);\n    var u8s = new Uint8Array(ab);\n    crypto.getRandomValues(u8s);\n    HIDDEN_NAME = HIDDEN_NAME_PREFIX + 'rand:' +\n      Array.prototype.map.call(u8s, function(u8) {\n        return (u8 % 36).toString(36);\n      }).join('') + '___';\n  }\n\n  function isNotHiddenName(name) {\n    return !(\n        name.substr(0, HIDDEN_NAME_PREFIX.length) == HIDDEN_NAME_PREFIX &&\n        name.substr(name.length - 3) === '___');\n  }\n\n  /**\n   * Monkey patch getOwnPropertyNames to avoid revealing the\n   * HIDDEN_NAME.\n   *\n   * <p>The ES5.1 spec requires each name to appear only once, but as\n   * of this writing, this requirement is controversial for ES6, so we\n   * made this code robust against this case. If the resulting extra\n   * search turns out to be expensive, we can probably relax this once\n   * ES6 is adequately supported on all major browsers, iff no browser\n   * versions we support at that time have relaxed this constraint\n   * without providing built-in ES6 WeakMaps.\n   */\n  defProp(Object, 'getOwnPropertyNames', {\n    value: function fakeGetOwnPropertyNames(obj) {\n      return gopn(obj).filter(isNotHiddenName);\n    }\n  });\n\n  /**\n   * getPropertyNames is not in ES5 but it is proposed for ES6 and\n   * does appear in our whitelist, so we need to clean it too.\n   */\n  if ('getPropertyNames' in Object) {\n    var originalGetPropertyNames = Object.getPropertyNames;\n    defProp(Object, 'getPropertyNames', {\n      value: function fakeGetPropertyNames(obj) {\n        return originalGetPropertyNames(obj).filter(isNotHiddenName);\n      }\n    });\n  }\n\n  /**\n   * <p>To treat objects as identity-keys with reasonable efficiency\n   * on ES5 by itself (i.e., without any object-keyed collections), we\n   * need to add a hidden property to such key objects when we\n   * can. This raises several issues:\n   * <ul>\n   * <li>Arranging to add this property to objects before we lose the\n   *     chance, and\n   * <li>Hiding the existence of this new property from most\n   *     JavaScript code.\n   * <li>Preventing <i>certification theft</i>, where one object is\n   *     created falsely claiming to be the key of an association\n   *     actually keyed by another object.\n   * <li>Preventing <i>value theft</i>, where untrusted code with\n   *     access to a key object but not a weak map nevertheless\n   *     obtains access to the value associated with that key in that\n   *     weak map.\n   * </ul>\n   * We do so by\n   * <ul>\n   * <li>Making the name of the hidden property unguessable, so \"[]\"\n   *     indexing, which we cannot intercept, cannot be used to access\n   *     a property without knowing the name.\n   * <li>Making the hidden property non-enumerable, so we need not\n   *     worry about for-in loops or {@code Object.keys},\n   * <li>monkey patching those reflective methods that would\n   *     prevent extensions, to add this hidden property first,\n   * <li>monkey patching those methods that would reveal this\n   *     hidden property.\n   * </ul>\n   * Unfortunately, because of same-origin iframes, we cannot reliably\n   * add this hidden property before an object becomes\n   * non-extensible. Instead, if we encounter a non-extensible object\n   * without a hidden record that we can detect (whether or not it has\n   * a hidden record stored under a name secret to us), then we just\n   * use the key object itself to represent its identity in a brute\n   * force leaky map stored in the weak map, losing all the advantages\n   * of weakness for these.\n   */\n  function getHiddenRecord(key) {\n    if (key !== Object(key)) {\n      throw new TypeError('Not an object: ' + key);\n    }\n    var hiddenRecord = key[HIDDEN_NAME];\n    if (hiddenRecord && hiddenRecord.key === key) { return hiddenRecord; }\n    if (!isExtensible(key)) {\n      // Weak map must brute force, as explained in doc-comment above.\n      return void 0;\n    }\n\n    // The hiddenRecord and the key point directly at each other, via\n    // the \"key\" and HIDDEN_NAME properties respectively. The key\n    // field is for quickly verifying that this hidden record is an\n    // own property, not a hidden record from up the prototype chain.\n    //\n    // NOTE: Because this WeakMap emulation is meant only for systems like\n    // SES where Object.prototype is frozen without any numeric\n    // properties, it is ok to use an object literal for the hiddenRecord.\n    // This has two advantages:\n    // * It is much faster in a performance critical place\n    // * It avoids relying on Object.create(null), which had been\n    //   problematic on Chrome 28.0.1480.0. See\n    //   https://code.google.com/p/google-caja/issues/detail?id=1687\n    hiddenRecord = { key: key };\n\n    // When using this WeakMap emulation on platforms where\n    // Object.prototype might not be frozen and Object.create(null) is\n    // reliable, use the following two commented out lines instead.\n    // hiddenRecord = Object.create(null);\n    // hiddenRecord.key = key;\n\n    // Please contact us if you need this to work on platforms where\n    // Object.prototype might not be frozen and\n    // Object.create(null) might not be reliable.\n\n    try {\n      defProp(key, HIDDEN_NAME, {\n        value: hiddenRecord,\n        writable: false,\n        enumerable: false,\n        configurable: false\n      });\n      return hiddenRecord;\n    } catch (error) {\n      // Under some circumstances, isExtensible seems to misreport whether\n      // the HIDDEN_NAME can be defined.\n      // The circumstances have not been isolated, but at least affect\n      // Node.js v0.10.26 on TravisCI / Linux, but not the same version of\n      // Node.js on OS X.\n      return void 0;\n    }\n  }\n\n  /**\n   * Monkey patch operations that would make their argument\n   * non-extensible.\n   *\n   * <p>The monkey patched versions throw a TypeError if their\n   * argument is not an object, so it should only be done to functions\n   * that should throw a TypeError anyway if their argument is not an\n   * object.\n   */\n  (function(){\n    var oldFreeze = Object.freeze;\n    defProp(Object, 'freeze', {\n      value: function identifyingFreeze(obj) {\n        getHiddenRecord(obj);\n        return oldFreeze(obj);\n      }\n    });\n    var oldSeal = Object.seal;\n    defProp(Object, 'seal', {\n      value: function identifyingSeal(obj) {\n        getHiddenRecord(obj);\n        return oldSeal(obj);\n      }\n    });\n    var oldPreventExtensions = Object.preventExtensions;\n    defProp(Object, 'preventExtensions', {\n      value: function identifyingPreventExtensions(obj) {\n        getHiddenRecord(obj);\n        return oldPreventExtensions(obj);\n      }\n    });\n  })();\n\n  function constFunc(func) {\n    func.prototype = null;\n    return Object.freeze(func);\n  }\n\n  var calledAsFunctionWarningDone = false;\n  function calledAsFunctionWarning() {\n    // Future ES6 WeakMap is currently (2013-09-10) expected to reject WeakMap()\n    // but we used to permit it and do it ourselves, so warn only.\n    if (!calledAsFunctionWarningDone && typeof console !== 'undefined') {\n      calledAsFunctionWarningDone = true;\n      console.warn('WeakMap should be invoked as new WeakMap(), not ' +\n          'WeakMap(). This will be an error in the future.');\n    }\n  }\n\n  var nextId = 0;\n\n  var OurWeakMap = function() {\n    if (!(this instanceof OurWeakMap)) {  // approximate test for new ...()\n      calledAsFunctionWarning();\n    }\n\n    // We are currently (12/25/2012) never encountering any prematurely\n    // non-extensible keys.\n    var keys = []; // brute force for prematurely non-extensible keys.\n    var values = []; // brute force for corresponding values.\n    var id = nextId++;\n\n    function get___(key, opt_default) {\n      var index;\n      var hiddenRecord = getHiddenRecord(key);\n      if (hiddenRecord) {\n        return id in hiddenRecord ? hiddenRecord[id] : opt_default;\n      } else {\n        index = keys.indexOf(key);\n        return index >= 0 ? values[index] : opt_default;\n      }\n    }\n\n    function has___(key) {\n      var hiddenRecord = getHiddenRecord(key);\n      if (hiddenRecord) {\n        return id in hiddenRecord;\n      } else {\n        return keys.indexOf(key) >= 0;\n      }\n    }\n\n    function set___(key, value) {\n      var index;\n      var hiddenRecord = getHiddenRecord(key);\n      if (hiddenRecord) {\n        hiddenRecord[id] = value;\n      } else {\n        index = keys.indexOf(key);\n        if (index >= 0) {\n          values[index] = value;\n        } else {\n          // Since some browsers preemptively terminate slow turns but\n          // then continue computing with presumably corrupted heap\n          // state, we here defensively get keys.length first and then\n          // use it to update both the values and keys arrays, keeping\n          // them in sync.\n          index = keys.length;\n          values[index] = value;\n          // If we crash here, values will be one longer than keys.\n          keys[index] = key;\n        }\n      }\n      return this;\n    }\n\n    function delete___(key) {\n      var hiddenRecord = getHiddenRecord(key);\n      var index, lastIndex;\n      if (hiddenRecord) {\n        return id in hiddenRecord && delete hiddenRecord[id];\n      } else {\n        index = keys.indexOf(key);\n        if (index < 0) {\n          return false;\n        }\n        // Since some browsers preemptively terminate slow turns but\n        // then continue computing with potentially corrupted heap\n        // state, we here defensively get keys.length first and then use\n        // it to update both the keys and the values array, keeping\n        // them in sync. We update the two with an order of assignments,\n        // such that any prefix of these assignments will preserve the\n        // key/value correspondence, either before or after the delete.\n        // Note that this needs to work correctly when index === lastIndex.\n        lastIndex = keys.length - 1;\n        keys[index] = void 0;\n        // If we crash here, there's a void 0 in the keys array, but\n        // no operation will cause a \"keys.indexOf(void 0)\", since\n        // getHiddenRecord(void 0) will always throw an error first.\n        values[index] = values[lastIndex];\n        // If we crash here, values[index] cannot be found here,\n        // because keys[index] is void 0.\n        keys[index] = keys[lastIndex];\n        // If index === lastIndex and we crash here, then keys[index]\n        // is still void 0, since the aliasing killed the previous key.\n        keys.length = lastIndex;\n        // If we crash here, keys will be one shorter than values.\n        values.length = lastIndex;\n        return true;\n      }\n    }\n\n    return Object.create(OurWeakMap.prototype, {\n      get___:    { value: constFunc(get___) },\n      has___:    { value: constFunc(has___) },\n      set___:    { value: constFunc(set___) },\n      delete___: { value: constFunc(delete___) }\n    });\n  };\n\n  OurWeakMap.prototype = Object.create(Object.prototype, {\n    get: {\n      /**\n       * Return the value most recently associated with key, or\n       * opt_default if none.\n       */\n      value: function get(key, opt_default) {\n        return this.get___(key, opt_default);\n      },\n      writable: true,\n      configurable: true\n    },\n\n    has: {\n      /**\n       * Is there a value associated with key in this WeakMap?\n       */\n      value: function has(key) {\n        return this.has___(key);\n      },\n      writable: true,\n      configurable: true\n    },\n\n    set: {\n      /**\n       * Associate value with key in this WeakMap, overwriting any\n       * previous association if present.\n       */\n      value: function set(key, value) {\n        return this.set___(key, value);\n      },\n      writable: true,\n      configurable: true\n    },\n\n    'delete': {\n      /**\n       * Remove any association for key in this WeakMap, returning\n       * whether there was one.\n       *\n       * <p>Note that the boolean return here does not work like the\n       * {@code delete} operator. The {@code delete} operator returns\n       * whether the deletion succeeds at bringing about a state in\n       * which the deleted property is absent. The {@code delete}\n       * operator therefore returns true if the property was already\n       * absent, whereas this {@code delete} method returns false if\n       * the association was already absent.\n       */\n      value: function remove(key) {\n        return this.delete___(key);\n      },\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (typeof HostWeakMap === 'function') {\n    (function() {\n      // If we got here, then the platform has a WeakMap but we are concerned\n      // that it may refuse to store some key types. Therefore, make a map\n      // implementation which makes use of both as possible.\n\n      // In this mode we are always using double maps, so we are not proxy-safe.\n      // This combination does not occur in any known browser, but we had best\n      // be safe.\n      if (doubleWeakMapCheckSilentFailure && typeof Proxy !== 'undefined') {\n        Proxy = undefined;\n      }\n\n      function DoubleWeakMap() {\n        if (!(this instanceof OurWeakMap)) {  // approximate test for new ...()\n          calledAsFunctionWarning();\n        }\n\n        // Preferable, truly weak map.\n        var hmap = new HostWeakMap();\n\n        // Our hidden-property-based pseudo-weak-map. Lazily initialized in the\n        // 'set' implementation; thus we can avoid performing extra lookups if\n        // we know all entries actually stored are entered in 'hmap'.\n        var omap = undefined;\n\n        // Hidden-property maps are not compatible with proxies because proxies\n        // can observe the hidden name and either accidentally expose it or fail\n        // to allow the hidden property to be set. Therefore, we do not allow\n        // arbitrary WeakMaps to switch to using hidden properties, but only\n        // those which need the ability, and unprivileged code is not allowed\n        // to set the flag.\n        //\n        // (Except in doubleWeakMapCheckSilentFailure mode in which case we\n        // disable proxies.)\n        var enableSwitching = false;\n\n        function dget(key, opt_default) {\n          if (omap) {\n            return hmap.has(key) ? hmap.get(key)\n                : omap.get___(key, opt_default);\n          } else {\n            return hmap.get(key, opt_default);\n          }\n        }\n\n        function dhas(key) {\n          return hmap.has(key) || (omap ? omap.has___(key) : false);\n        }\n\n        var dset;\n        if (doubleWeakMapCheckSilentFailure) {\n          dset = function(key, value) {\n            hmap.set(key, value);\n            if (!hmap.has(key)) {\n              if (!omap) { omap = new OurWeakMap(); }\n              omap.set(key, value);\n            }\n            return this;\n          };\n        } else {\n          dset = function(key, value) {\n            if (enableSwitching) {\n              try {\n                hmap.set(key, value);\n              } catch (e) {\n                if (!omap) { omap = new OurWeakMap(); }\n                omap.set___(key, value);\n              }\n            } else {\n              hmap.set(key, value);\n            }\n            return this;\n          };\n        }\n\n        function ddelete(key) {\n          var result = !!hmap['delete'](key);\n          if (omap) { return omap.delete___(key) || result; }\n          return result;\n        }\n\n        return Object.create(OurWeakMap.prototype, {\n          get___:    { value: constFunc(dget) },\n          has___:    { value: constFunc(dhas) },\n          set___:    { value: constFunc(dset) },\n          delete___: { value: constFunc(ddelete) },\n          permitHostObjects___: { value: constFunc(function(token) {\n            if (token === weakMapPermitHostObjects) {\n              enableSwitching = true;\n            } else {\n              throw new Error('bogus call to permitHostObjects___');\n            }\n          })}\n        });\n      }\n      DoubleWeakMap.prototype = OurWeakMap.prototype;\n      module.exports = DoubleWeakMap;\n\n      // define .constructor to hide OurWeakMap ctor\n      Object.defineProperty(WeakMap.prototype, 'constructor', {\n        value: WeakMap,\n        enumerable: false,  // as default .constructor is\n        configurable: true,\n        writable: true\n      });\n    })();\n  } else {\n    // There is no host WeakMap, so we must use the emulation.\n\n    // Emulated WeakMaps are incompatible with native proxies (because proxies\n    // can observe the hidden name), so we must disable Proxy usage (in\n    // ArrayLike and Domado, currently).\n    if (typeof Proxy !== 'undefined') {\n      Proxy = undefined;\n    }\n\n    module.exports = OurWeakMap;\n  }\n})();\n",
    "'use strict'\r\n\r\nlet pick = require('pick-by-alias')\r\nlet extend = require('object-assign')\r\nlet WeakMap = require('weak-map')\r\nlet createRegl = require('regl')\r\nlet parseRect = require('parse-rect')\r\nlet createGl = require('gl-util/context')\r\nlet isObj = require('is-plain-obj')\r\nlet pool = require('typedarray-pool')\r\nlet glsl = require('glslify')\r\nlet rgba = require('color-normalize')\r\nlet neg0 = require('negative-zero')\r\nlet f32 = require('to-float32')\r\nlet parseUnit = require('parse-unit')\r\nlet px = require('to-px')\r\nlet lerp = require('lerp')\r\nlet isBrowser = require('is-browser')\r\nlet elOffset = require('offset')\r\nlet idle = require('on-idle')\r\nlet nidx = require('negative-index')\r\n\r\nconst MAX_ARGUMENTS = 1024\r\n\r\n\r\n// FIXME: it is possible to oversample thick lines by scaling them with projected limit to vertical instead of creating creases\r\n\r\n// FIXME: shring 4th NaN channel by putting it to one of fract channels\r\n\r\nlet shaderCache = new WeakMap()\r\n\r\n\r\nfunction Waveform (o) {\r\n\tif (!(this instanceof Waveform)) return new Waveform(o)\r\n\r\n\t// create a view for existing waveform\r\n\tif (o instanceof Waveform) {\r\n\t\tmirrorProperty(this, 'textures', o)\r\n\t\tmirrorProperty(this, 'textures2', o)\r\n\t\tmirrorProperty(this, 'lastY', o)\r\n\t\tmirrorProperty(this, 'minY', o)\r\n\t\tmirrorProperty(this, 'maxY', o)\r\n\t\tmirrorProperty(this, 'total', o)\r\n\t\tmirrorProperty(this, 'shader', o)\r\n\t\tmirrorProperty(this, 'gl', o)\r\n\t\tmirrorProperty(this, 'regl', o)\r\n\t\tmirrorProperty(this, 'canvas', o)\r\n\t\tmirrorProperty(this, 'blankTexture', o)\r\n\t\tmirrorProperty(this, 'NaNTexture', o)\r\n\t\tmirrorProperty(this, 'pushQueue', o)\r\n\t\tmirrorProperty(this, 'textureLength', o)\r\n\t\tmirrorProperty(this, 'textureShape', o)\r\n\r\n\t\tObject.defineProperty(this, 'dirty', {\r\n\t\t\tget: () => this._dirty || o.dirty || o.drawOptions.total !== this.drawOptions.total,\r\n\t\t\tset: v => this._dirty = v\r\n\t\t})\r\n\r\n\t\tthis.dirty = true\r\n\t\tthis.drawOptions = {}\r\n\t\tthis.isClone = true\r\n\r\n\t\tthis.update({\r\n\t\t\tcolor: o.color,\r\n\t\t\tthickness: o.thickness\r\n\t\t})\r\n\r\n\t\treturn this\r\n\t}\r\n\r\n\t// stack of textures with sample data\r\n\t// for a single pass we provide 2 textures, covering the screen\r\n\t// every new texture resets accumulated sum/sum2 values\r\n\t// textures store [amp, sum, sum2] values\r\n\t// textures2 store [ampFract, sumFract, sum2Fract, _] values\r\n\t// ampFract has util values: -1 for NaN amplitude\r\n\tthis.textures = []\r\n\tthis.textures2 = []\r\n\r\n\t// pointer to the first/last x values, detected from the first data\r\n\t// used for organizing data gaps\r\n\tthis.lastY\r\n\tthis.minY = Infinity, this.maxY = -Infinity\r\n\tthis.total = 0\r\n\r\n\t// find a good name for runtime draw state\r\n\tthis.drawOptions = {}\r\n\r\n\tthis.shader = this.createShader(o)\r\n\r\n\tthis.gl = this.shader.gl\r\n\tthis.regl = this.shader.regl\r\n\tthis.canvas = this.gl.canvas\r\n\tthis.blankTexture = this.shader.blankTexture\r\n\tthis.NaNTexture = this.shader.NaNTexture\r\n\r\n\t// tick processes accumulated samples to push in the next render frame\r\n\t// to avoid overpushing per-single value (also dangerous for wrong step detection or network delays)\r\n\tthis.pushQueue = []\r\n\tthis.dirty = true\r\n\r\n\t// FIXME: add beter recognition\r\n\t// if (o.pick != null) this.storeData = !!o.pick\r\n\t// if (o.fade != null) this.fade = !!o.fade\r\n\r\n\tif (isObj(o)) this.update(o)\r\n}\r\n\r\n// create waveform shader, called once per gl context\r\nWaveform.prototype.createShader = function (o) {\r\n\tlet regl, gl, shader\r\n\tif (!o) o = {}\r\n\r\n\t// check shader cache\r\n\tshader = shaderCache.get(o)\r\n\tif (shader) return shader\r\n\r\n\tif (isRegl(o)) o = {regl: o}\r\n\r\n\r\n\t// we let regl init window/container in default case\r\n\t// because it binds resize event to window\r\n\tif (isObj(o) && !o.canvas && !o.gl && !o.regl) {\r\n\t\tregl = createRegl({\r\n\t\t\textensions: 'OES_texture_float'\r\n\t\t})\r\n\t\tgl = regl._gl\r\n\r\n\t\tshader = shaderCache.get(gl)\r\n\t\tif (shader) return shader\r\n\t}\r\n\telse {\r\n\t\tgl = createGl(o)\r\n\t\tshader = shaderCache.get(gl)\r\n\t\tif (shader) return shader\r\n\r\n\t\tregl = createRegl({\r\n\t\t\tgl, extensions: 'OES_texture_float'\r\n\t\t})\r\n\t}\r\n\r\n\t//    id    0     1\r\n\t//  side -1 +1 -1 +1\r\n\t//         **    **          +1\r\n\t//        /||   /||   ...\r\n\t//    .../ ||  / ||  /       sign\r\n\t//         || /  || /\r\n\t//         **    **          -1\r\n\tlet idBuffer = regl.buffer({\r\n\t\tusage: 'static',\r\n\t\ttype: 'int16',\r\n\t\tdata: (N => {\r\n\t\t\tlet x = Array()\r\n\r\n\t\t\t// prepend -1 and -2 ids at the head\r\n\t\t\t// to over-render for multipass overlay\r\n\t\t\tx.push(-2, 1, 1, -2, -1, 1)\r\n\r\n\t\t\tfor (let i = -1; i < N; i++) {\r\n\t\t\t\t// id, sign, side, id, sign, side\r\n\t\t\t\tx.push(i, 1, -1, i, -1, -1)\r\n\t\t\t\tx.push(i, 1, 1, i, -1, 1)\r\n\t\t\t}\r\n\r\n\t\t\treturn x\r\n\t\t})(this.maxSampleCount)\r\n\t})\r\n\r\n\tlet shaderOptions = {\r\n\t\tprimitive: (c, p) => p.primitive || 'triangle strip',\r\n\t\toffset: regl.prop('offset'),\r\n\t\tcount: regl.prop('count'),\r\n\r\n\t\tfrag: glsl([\"// fragment shader with fading based on distance from average\\n\\nprecision highp float;\\n#define GLSLIFY 1\\n\\nuniform vec4 viewport;\\nuniform float thickness;\\n\\nvarying vec4 fragColor;\\nvarying float normThickness;\\nvarying vec3 statsLeft, statsRight, statsPrevRight, statsNextLeft;\\n\\nconst float TAU = 6.283185307179586;\\n\\nfloat pdf (float x, float mean, float variance) {\\n\\tif (variance == 0.) return x == mean ? 9999. : 0.;\\n\\telse return exp(-.5 * pow(x - mean, 2.) / variance) / sqrt(TAU * variance);\\n}\\n\\nfloat fade(float y, vec3 stats) {\\n\\tfloat avg = stats.x;\\n\\tfloat sdev = stats.y;\\n\\tfloat nan = stats.z;\\n\\tif (nan == -1.) return 0.;\\n\\tfloat dist = abs(y - avg);\\n\\tfloat pdfCoef = pdf(0., 0., sdev * sdev );\\n\\t// pdfCoef makes sure pdf is normalized - has 1. value at the max\\n\\tdist = pdf(dist, 0., sdev * sdev  ) / pdfCoef;\\n\\treturn dist;\\n}\\n\\nvoid main() {\\n\\tfloat halfThickness = normThickness * .5;\\n\\n\\tfloat x = (gl_FragCoord.x - viewport.x) / viewport.z;\\n\\tfloat y = (gl_FragCoord.y - viewport.y) / viewport.w;\\n\\n\\tgl_FragColor = fragColor;\\n\\n\\tfloat avgRight = statsRight.x;\\n\\tfloat avgLeft = statsLeft.x;\\n\\tfloat avgNextLeft = statsNextLeft.x;\\n\\tfloat avgPrevRight = statsPrevRight.x;\\n\\tfloat sdevRight = statsRight.y;\\n\\tfloat sdevLeft = statsLeft.y;\\n\\tfloat sdevNextLeft = statsNextLeft.y;\\n\\tfloat sdevPrevRight = statsPrevRight.y;\\n\\n\\tif (y > avgRight + halfThickness) {\\n\\t\\tif (avgRight > avgLeft) {\\n\\t\\t\\t// local max\\n\\t\\t\\tif (avgRight > avgNextLeft) {\\n\\t\\t\\t\\tgl_FragColor.a *= fade(y, statsRight);\\n\\t\\t\\t}\\n\\t\\t\\t// sdev can make y go over the\\n\\t\\t\\telse if (sdevRight > 0. && y > avgNextLeft + halfThickness) {\\n\\t\\t\\t\\tgl_FragColor.a *= fade(y, statsNextLeft);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\tif (y > avgLeft + halfThickness) {\\n\\t\\t// local max\\n\\t\\tif (avgLeft > avgRight) {\\n\\t\\t\\t// local max\\n\\t\\t\\tif (avgLeft > avgPrevRight) {\\n\\t\\t\\t\\tgl_FragColor.a *= fade(y, statsLeft);\\n\\t\\t\\t}\\n\\t\\t\\t// sdev can make y go over the\\n\\t\\t\\telse if (sdevLeft > 0. && y > avgPrevRight + halfThickness) {\\n\\t\\t\\t\\tgl_FragColor.a *= fade(y, statsPrevRight);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\tif (y < avgRight - halfThickness) {\\n\\t\\tif (avgRight < avgLeft) {\\n\\t\\t\\t// local min\\n\\t\\t\\tif (avgRight < avgNextLeft) {\\n\\t\\t\\t\\tgl_FragColor.a *= fade(y, statsRight);\\n\\t\\t\\t}\\n\\t\\t\\t// sdev can make y go over the\\n\\t\\t\\telse if (sdevRight > 0. && y < avgNextLeft - halfThickness) {\\n\\t\\t\\t\\tgl_FragColor.a *= fade(y, statsNextLeft);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\tif (y < avgLeft - halfThickness) {\\n\\t\\t// local min\\n\\t\\tif (avgLeft < avgRight) {\\n\\t\\t\\t// local min\\n\\t\\t\\tif (avgLeft < avgPrevRight) {\\n\\t\\t\\t\\tgl_FragColor.a *= fade(y, statsLeft);\\n\\t\\t\\t}\\n\\t\\t\\t// sdev can make y go over the\\n\\t\\t\\telse if (sdevLeft > 0. && y < avgPrevRight - halfThickness) {\\n\\t\\t\\t\\tgl_FragColor.a *= fade(y, statsPrevRight);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t// if (dist == 0.) { discard; return; }\\n\\n\\t// gl_FragColor.a *= dist;\\n}\\n\"]),\r\n\t\t// frag: glsl('./shader/fill-frag.glsl'),\r\n\r\n\t\tuniforms: {\r\n\t\t\t'samples.id': regl.prop('textureId'),\r\n\t\t\t// 'samples.data': regl.prop('samples'),\r\n\t\t\t'samplesData': regl.prop('samples'),\r\n\t\t\t'samples.prev': regl.prop('prevSamples'),\r\n\t\t\t'samples.next': regl.prop('nextSamples'),\r\n\t\t\t'samples.shape': regl.prop('dataShape'),\r\n\t\t\t'samples.length': regl.prop('dataLength'),\r\n\t\t\t'samples.sum': (c, p) => f32.float(p.samples.sum),\r\n\t\t\t'samples.sum2': (c, p) => f32.float(p.samples.sum2),\r\n\t\t\t'samples.prevSum': (c, p) => f32.float(p.prevSamples.sum),\r\n\t\t\t'samples.prevSum2': (c, p) => f32.float(p.prevSamples.sum2),\r\n\r\n\t\t\t// float32 sample fractions for precision\r\n\t\t\t'fractions.id': regl.prop('textureId'),\r\n\t\t\t// FIXME: some really weird thing happens on iPhone with writing sampler data to struct\r\n\t\t\t// it just considers that the same as the samples.data\r\n\t\t\t// so we store sampler as a separate uniform\r\n\t\t\t// 'fractions.data': regl.prop('fractions'),\r\n\t\t\t'fractionsData': regl.prop('fractions'),\r\n\t\t\t'fractions.prev': regl.prop('prevFractions'),\r\n\t\t\t'fractions.next': regl.prop('nextFractions'),\r\n\t\t\t'fractions.shape': regl.prop('dataShape'),\r\n\t\t\t'fractions.length': regl.prop('dataLength'),\r\n\t\t\t'fractions.sum': (c, p) => f32.fract(p.samples.sum),\r\n\t\t\t'fractions.sum2': (c, p) => f32.fract(p.samples.sum2),\r\n\t\t\t'fractions.prevSum': (c, p) => f32.fract(p.prevSamples.sum),\r\n\t\t\t'fractions.prevSum2': (c, p) => f32.fract(p.prevSamples.sum2),\r\n\r\n\t\t\tpassNum: regl.prop('passNum'),\r\n\t\t\tpassId: regl.prop('passId'),\r\n\t\t\tpassOffset: regl.prop('passOffset'),\r\n\r\n\t\t\t// total number of samples\r\n\t\t\ttotal: regl.prop('total'),\r\n\t\t\trange: regl.prop('range'),\r\n\r\n\t\t\t// number of pixels between vertices\r\n\t\t\tpxStep: regl.prop('pxStep'),\r\n\t\t\tposShift: regl.prop('posShift'),\r\n\r\n\t\t\t// number of samples between vertices\r\n\t\t\tsampleStep: regl.prop('sampleStep'),\r\n\t\t\ttranslate: regl.prop('translate'),\r\n\r\n\t\t\t// min/max amplitude\r\n\t\t\tamplitude: regl.prop('amplitude'),\r\n\r\n\t\t\tviewport: regl.prop('viewport'),\r\n\t\t\topacity: regl.prop('opacity'),\r\n\t\t\tcolor: regl.prop('color'),\r\n\t\t\tthickness: (c, p) => p.thickness * c.pixelRatio //regl.prop('thickness')\r\n\t\t},\r\n\r\n\t\tattributes: {\r\n\t\t\tid: {\r\n\t\t\t\tbuffer: idBuffer,\r\n\t\t\t\tstride: 6,\r\n\t\t\t\toffset: 0\r\n\t\t\t},\r\n\t\t\tsign: {\r\n\t\t\t\tbuffer: idBuffer,\r\n\t\t\t\tstride: 6,\r\n\t\t\t\toffset: 2\r\n\t\t\t},\r\n\t\t\tside: {\r\n\t\t\t\tbuffer: idBuffer,\r\n\t\t\t\tstride: 6,\r\n\t\t\t\toffset: 4\r\n\t\t\t}\r\n\t\t},\r\n\t\tblend: {\r\n\t\t\tenable: true,\r\n\t\t\tcolor: [0,0,0,0],\r\n\t\t\tequation: {\r\n\t\t\t\trgb: 'add',\r\n\t\t\t\talpha: 'add'\r\n\t\t\t},\r\n\t\t\tfunc: {\r\n\t\t\t\tsrcRGB: 'src alpha',\r\n\t\t\t\tdstRGB: 'one minus src alpha',\r\n\t\t\t\tsrcAlpha: 'one minus dst alpha',\r\n\t\t\t\tdstAlpha: 'one'\r\n\t\t\t}\r\n\t\t},\r\n\t\tdepth: {\r\n\t\t\t// FIXME: disable for the case of null folding\r\n\t\t\tenable: false\r\n\t\t},\r\n\t\tscissor: {\r\n\t\t\tenable: true,\r\n\t\t\tbox: (c, {clip, viewport}) => clip ? ({x: clip[0], y: clip[1], width: clip[2], height: clip[3]}) : ({x: viewport[0], y: viewport[1], width: viewport[2], height: viewport[3]})\r\n\t\t},\r\n\t\tviewport: (c, {viewport}) => ({x: viewport[0], y: viewport[1], width: viewport[2], height: viewport[3]}),\r\n\t\tstencil: false\r\n\t}\r\n\r\n\tlet drawRanges = regl(extend({\r\n\t\tvert: glsl([\"// output range-average samples line with sdev weighting\\n\\nprecision highp float;\\n#define GLSLIFY 1\\n\\n// linear interpolation\\nvec4 lerp(vec4 a, vec4 b, float t) {\\n\\treturn t * b + (1. - t) * a;\\n}\\nvec2 lerp(vec2 a, vec2 b, float t) {\\n\\treturn t * b + (1. - t) * a;\\n}\\n\\n// bring sample value to 0..1 from amplitude range\\nfloat reamp(float v, vec2 amp) {\\n\\treturn (v - amp.x) / (amp.y - amp.x);\\n}\\n\\nstruct Samples {\\n\\tfloat id;\\n\\t// sampler2D data;\\n\\tsampler2D prev;\\n\\tsampler2D next;\\n\\tvec2 shape;\\n\\tfloat length;\\n\\tfloat sum, prevSum, sum2, prevSum2;\\n};\\n\\nattribute float id, sign, side;\\n\\nuniform Samples samples, fractions;\\nuniform sampler2D samplesData, fractionsData;\\nuniform float opacity, thickness, pxStep, sampleStep, total, translate, passNum, passId;\\nuniform vec4 viewport, color;\\nuniform vec2 amplitude;\\n\\nvarying vec4 fragColor;\\nvarying vec3 statsLeft, statsRight, statsPrevRight, statsNextLeft;\\nvarying float normThickness;\\n\\nconst float FLT_EPSILON = 1.19209290e-7;\\n\\n// returns sample picked from the texture\\nvec4 picki (Samples samples, sampler2D data, float offset) {\\n\\t// translate is here in order to remove float32 error (at the latest stage)\\n\\toffset += translate;\\n\\n\\tvec2 uv = vec2(\\n\\t\\tfloor(mod(offset, samples.shape.x)) + .5,\\n\\t\\tfloor(offset / samples.shape.x) + .5\\n\\t) / samples.shape;\\n\\n\\tvec4 sample;\\n\\n\\t// prev texture\\n\\tif (uv.y < 0.) {\\n\\t\\tuv.y += 1.;\\n\\t\\tsample = texture2D(samples.prev, uv);\\n\\t\\tsample.y -= samples.prevSum;\\n\\t\\tsample.z -= samples.prevSum2;\\n\\t}\\n\\t// next texture\\n\\telse if (uv.y > 1.) {\\n\\t\\tuv.y -= 1.;\\n\\t\\tsample = texture2D(samples.next, uv);\\n\\t\\tsample.y += samples.sum;\\n\\t\\tsample.z += samples.sum2;\\n\\t}\\n\\t// curr texture\\n\\telse {\\n\\t\\tsample = texture2D(data, uv);\\n\\t}\\n\\n\\treturn sample;\\n}\\n\\n// returns {avg, sdev, isNaN}\\nvec3 stats (float offset) {\\n\\tfloat sampleStep = sampleStep;\\n\\n\\tfloat offset0 = offset - sampleStep * .5;\\n\\tfloat offset1 = offset + sampleStep * .5;\\n\\tfloat offset0l = floor(offset0);\\n\\tfloat offset1l = floor(offset1);\\n\\tfloat offset0r = ceil(offset0);\\n\\tfloat offset1r = ceil(offset1);\\n\\n\\tvec4 sample = picki(samples, samplesData, offset);\\n\\t// if (sample.w == -1.) return vec3(0,0,-1);\\n\\n\\t// head picks half the first sample\\n\\tvec4 sample0l = picki(samples, samplesData, offset0l);\\n\\tvec4 sample1l = picki(samples, samplesData, offset1l);\\n\\tvec4 sample0r = picki(samples, samplesData, offset0r);\\n\\tvec4 sample1r = picki(samples, samplesData, offset1r);\\n\\n\\tvec4 sample0lf = picki(fractions, fractionsData, offset0l);\\n\\tvec4 sample1lf = picki(fractions, fractionsData, offset1l);\\n\\tvec4 sample0rf = picki(fractions, fractionsData, offset0r);\\n\\tvec4 sample1rf = picki(fractions, fractionsData, offset1r);\\n\\n\\tfloat t0 = 0., t1 = 0.;\\n\\n\\t// partial sample steps require precision\\n\\t// WARN: we removed lerp in order to  precision\\n\\t// if (mod(sampleStep, 1.) != 0. && sample0l.w != -1. && sample1r.w != -1.) {\\n\\t// \\tt0 = offset0 - offset0l, t1 = offset1 - offset1l;\\n\\t// }\\n\\n\\tif (sample0l.w == -1.) {\\n\\t\\t// return vec3(0,0,-1);\\n\\t\\t// sample0l.y = 0.;\\n\\t}\\n\\n\\tfloat n = (offset1l - offset0l);\\n\\n\\tfloat avg = (\\n\\t\\t+ sample1l.y\\n\\t\\t- sample0l.y\\n\\t\\t+ sample1lf.y\\n\\t\\t- sample0lf.y\\n\\t\\t// + t1 * (sample1r.y - sample1l.y)\\n\\t\\t// - t0 * (sample0r.y - sample0l.y)\\n\\t\\t// + t1 * (sample1rf.y - sample1lf.y)\\n\\t\\t// - t0 * (sample0rf.y - sample0lf.y)\\n\\t);\\n\\tavg /= n;\\n\\n\\tfloat mx2 = (\\n\\t\\t+ sample1l.z\\n\\t\\t- sample0l.z\\n\\t\\t+ sample1lf.z\\n\\t\\t- sample0lf.z\\n\\t\\t// + t1 * (sample1r.z - sample1l.z)\\n\\t\\t// - t0 * (sample0r.z - sample0l.z)\\n\\t\\t// + t1 * (sample1rf.z - sample1lf.z)\\n\\t\\t// - t0 * (sample0rf.z - sample0lf.z)\\n\\t);\\n\\tmx2 /= n;\\n\\n\\t// (x) = M(x) - M(x)\\n\\tfloat m2 = avg * avg;\\n\\tfloat variance = abs(mx2 - m2);\\n\\n\\t// get float32 tolerance for the power of mx2/m2\\n\\t// float tol = FLT_EPSILON * pow(2., ceil(9. + log2(max(mx2, m2))));\\n\\n\\t// float sdev = variance <= tol ? 0. : sqrt(variance);\\n\\tfloat sdev = sqrt(variance);\\n\\n\\treturn vec3(avg, sdev, min(sample0r.w, sample1l.w));\\n}\\n\\nvoid main() {\\n\\tgl_PointSize = 3.5;\\n\\tif (color.a == 0.) return;\\n\\n\\tnormThickness = thickness / viewport.w;\\n\\n\\tfragColor = color / 255.;\\n\\tfragColor.a *= opacity;\\n\\n\\tfloat offset = id * sampleStep;\\n\\n\\t// compensate snapping for low scale levels\\n\\tfloat posShift = 0.;\\n\\n\\tvec3 statsCurr = stats(offset);\\n\\n\\t// ignore NaN amplitudes\\n\\tif (statsCurr.z == -1.) return;\\n\\n\\tvec3 statsPrev = stats(offset - sampleStep);\\n\\tvec3 statsPrev2 = stats(offset - 2. * sampleStep);\\n\\tvec3 statsNext = stats(offset + sampleStep);\\n\\tvec3 statsNext2 = stats(offset + 2. * sampleStep);\\n\\n\\tfloat avgCurr = statsCurr.x;\\n\\tfloat avgPrev = statsPrev.x;\\n\\tfloat avgPrev2 = statsPrev2.z != -1. ? statsPrev2.x : avgPrev;\\n\\tfloat avgNext = statsNext.x;\\n\\tfloat avgNext2 = statsNext2.z != -1. ? statsNext2.x : avgNext;\\n\\n\\tfloat ampRange = abs(\\n\\t\\t+ amplitude.y - amplitude.x\\n\\t);\\n\\tfloat sdevCurr = statsCurr.y / ampRange;\\n\\tfloat sdevPrev = statsPrev.y / ampRange;\\n\\tfloat sdevPrev2 = statsPrev2.y / ampRange;\\n\\tfloat sdevNext = statsNext.y / ampRange;\\n\\tfloat sdevNext2 = statsNext2.y / ampRange;\\n\\n\\tfloat sdev = sdevCurr;\\n\\n\\tavgCurr = reamp(avgCurr, amplitude);\\n\\tavgNext = reamp(avgNext, amplitude);\\n\\tavgNext2 = reamp(avgNext2, amplitude);\\n\\tavgPrev = reamp(avgPrev, amplitude);\\n\\tavgPrev2 = reamp(avgPrev2, amplitude);\\n\\n\\t// compensate for sampling rounding\\n\\tvec2 position = vec2(\\n\\t\\t(pxStep * (id + .5)) / viewport.z,\\n\\t\\tavgCurr\\n\\t);\\n\\n\\tvec2 normalLeft = normalize(vec2(\\n\\t\\t-(avgCurr - avgPrev), pxStep / viewport.w\\n\\t));\\n\\tvec2 normalRight = normalize(vec2(\\n\\t\\t-(avgNext - avgCurr), pxStep / viewport.w\\n\\t));\\n\\n\\tvec2 bisec = normalize(normalLeft + normalRight);\\n\\tvec2 vert = vec2(0, 1);\\n\\tfloat bisecLen = abs(1. / dot(normalLeft, bisec));\\n\\tfloat vertRightLen = abs(1. / dot(normalRight, vert));\\n\\tfloat vertLeftLen = abs(1. / dot(normalLeft, vert));\\n\\tfloat maxVertLen = max(vertLeftLen, vertRightLen);\\n\\tfloat minVertLen = min(vertLeftLen, vertRightLen);\\n\\n\\t// 2 covers 68% of a line. 4 covers 95% of line\\n\\tfloat vertSdev = 2. * sdev * viewport.w / thickness;\\n\\n\\tvec2 join;\\n\\n\\tif (statsPrev.z == -1.) {\\n\\t\\tjoin = normalRight;\\n\\t}\\n\\telse if (statsNext.z == -1.) {\\n\\t\\tjoin = normalLeft;\\n\\t}\\n\\t// sdev less than projected to vertical shows simple line\\n\\t// FIXME: sdev should be compensated by curve bend\\n\\telse if (vertSdev < maxVertLen) {\\n\\t\\t// sdev more than normal but less than vertical threshold\\n\\t\\t// rotates join towards vertical\\n\\t\\tif (vertSdev > minVertLen) {\\n\\t\\t\\tfloat t = (vertSdev - minVertLen) / (maxVertLen - minVertLen);\\n\\t\\t\\tjoin = lerp(bisec * bisecLen, vert * maxVertLen, t);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tjoin = bisec * bisecLen;\\n\\t\\t}\\n\\t}\\n\\t// sdev more than projected to vertical modifies only y coord\\n\\telse {\\n\\t\\tjoin = vert * vertSdev;\\n\\t}\\n\\n\\t// figure out segment varyings\\n\\tstatsCurr = vec3(avgCurr, sdevCurr, statsCurr.z);\\n\\tstatsPrev = vec3(avgPrev, sdevPrev, statsPrev.z);\\n\\tstatsNext = vec3(avgNext, sdevNext, statsNext.z);\\n\\tstatsNext2 = vec3(avgNext2, sdevNext2, statsNext2.z);\\n\\tstatsPrev2 = vec3(avgPrev2, sdevPrev2, statsPrev2.z);\\n\\tstatsRight = side < 0. ? statsCurr : statsNext;\\n\\tstatsLeft = side < 0. ? statsPrev : statsCurr;\\n\\tstatsPrevRight = side < 0. ? statsPrev2 : statsPrev;\\n\\tstatsNextLeft = side < 0. ? statsNext : statsNext2;\\n\\n\\tposition += sign * join * .5 * thickness / viewport.zw;\\n\\n\\t// shift position by the clip offset\\n\\tposition.x += passId * pxStep * samples.length / sampleStep / viewport.z;\\n\\n\\tgl_Position = vec4(position * 2. - 1., 0, 1);\\n}\\n\"])\r\n\t}, shaderOptions))\r\n\tlet drawLine = regl(extend({\r\n\t\tvert: glsl([\"// direct sample output, connected by line, to the contrary to range\\n\\nprecision highp float;\\n#define GLSLIFY 1\\n\\n// bring sample value to 0..1 from amplitude range\\nfloat reamp(float v, vec2 amp) {\\n\\treturn (v - amp.x) / (amp.y - amp.x);\\n}\\n\\nstruct Samples {\\n\\tfloat id;\\n\\t// sampler2D data;\\n\\tsampler2D prev;\\n\\tsampler2D next;\\n\\tvec2 shape;\\n\\tfloat length;\\n\\tfloat sum, prevSum, sum2, prevSum2;\\n};\\n\\nattribute float id, sign, side;\\n\\nuniform Samples samples;\\nuniform sampler2D samplesData;\\nuniform float opacity, thickness, pxStep, sampleStep, total, translate, posShift;\\nuniform vec4 viewport, color;\\nuniform vec2 amplitude, range;\\nuniform float passNum, passId, passOffset;\\n\\nvarying vec4 fragColor;\\nvarying vec3 statsLeft, statsRight, statsPrevRight, statsNextLeft;\\nvarying float normThickness;\\n\\nbool isNaN (vec4 sample) {\\n\\treturn sample.w == -1.;\\n}\\n\\nvec4 stats (float offset) {\\n\\t// translate is here in order to remove float32 error (at the latest stage)\\n\\toffset += translate;\\n\\n\\tvec2 uv = vec2(\\n\\t\\tfloor(mod(offset, samples.shape.x)) + .5,\\n\\t\\tfloor((offset) / samples.shape.x) + .5\\n\\t) / samples.shape;\\n\\n\\tvec4 sample;\\n\\n\\t// prev texture\\n\\tif (uv.y < 0.) {\\n\\t\\tuv.y += 1.;\\n\\t\\tsample = texture2D(samples.prev, uv);\\n\\t}\\n\\t// next texture\\n\\telse if (uv.y > 1.) {\\n\\t\\tuv.y -= 1.;\\n\\t\\tsample = texture2D(samples.next, uv);\\n\\t}\\n\\t// curr texture\\n\\telse {\\n\\t\\tsample = texture2D(samplesData, uv);\\n\\t}\\n\\n\\treturn sample;\\n}\\n\\nvoid main () {\\n\\tgl_PointSize = 4.5;\\n\\tif (color.a == 0.) return;\\n\\n\\tfragColor = color / 255.;\\n\\tfragColor.a *= opacity;\\n\\n\\tnormThickness = thickness / viewport.w;\\n\\n\\tfloat offset = id * sampleStep;\\n\\n\\t// calc average of curr..next sampling points\\n\\tvec4 sampleCurr = stats(offset);\\n\\tif (isNaN(sampleCurr)) return;\\n\\n\\tvec4 sampleNext = stats(offset + sampleStep);\\n\\tvec4 sampleNext2 = stats(offset + 2. * sampleStep);\\n\\tvec4 samplePrev = stats(offset - sampleStep);\\n\\tvec4 samplePrev2 = stats(offset - 2. * sampleStep);\\n\\n\\tbool isStart = isNaN(samplePrev);\\n\\tbool isEnd = isNaN(sampleNext);\\n\\n\\tfloat avgCurr = reamp(sampleCurr.x, amplitude);\\n\\tfloat avgNext = reamp(isEnd ? sampleCurr.x : sampleNext.x, amplitude);\\n\\tfloat avgNext2 = reamp(sampleNext2.x, amplitude);\\n\\tfloat avgPrev = reamp(isStart ? sampleCurr.x : samplePrev.x, amplitude);\\n\\tfloat avgPrev2 = reamp(samplePrev2.x, amplitude);\\n\\n\\t// fake sdev 2 = thickness\\n\\t// sdev = normThickness / 2.;\\n\\tfloat sdev = 0.;\\n\\n\\tvec2 position = vec2(\\n\\t\\tpxStep * (id + .5) / (viewport.z),\\n\\t\\tavgCurr\\n\\t);\\n\\n\\tfloat x = (pxStep) / viewport.z;\\n\\tvec2 normalLeft = normalize(vec2(\\n\\t\\t-(avgCurr - avgPrev), x\\n\\t) / viewport.zw);\\n\\tvec2 normalRight = normalize(vec2(\\n\\t\\t-(avgNext - avgCurr), x\\n\\t) / viewport.zw);\\n\\n\\tvec2 join;\\n\\tif (isStart || isStart) {\\n\\t\\tjoin = normalRight;\\n\\t}\\n\\telse if (isEnd || isEnd) {\\n\\t\\tjoin = normalLeft;\\n\\t}\\n\\telse {\\n\\t\\tvec2 bisec = normalLeft * .5 + normalRight * .5;\\n\\t\\tfloat bisecLen = abs(1. / dot(normalLeft, bisec));\\n\\t\\tjoin = bisec * bisecLen;\\n\\t}\\n\\n\\t// FIXME: limit join by prev vertical\\n\\t// float maxJoinX = min(abs(join.x * thickness), 40.) / thickness;\\n\\t// join.x *= maxJoinX / join.x;\\n\\n\\t// figure out closest to current min/max\\n\\tvec3 statsCurr = vec3(avgCurr, 0, sampleCurr.z);\\n\\tvec3 statsPrev = vec3(avgPrev, 0, samplePrev.z);\\n\\tvec3 statsNext = vec3(avgNext, 0, sampleNext.z);\\n\\tvec3 statsNext2 = vec3(avgNext2, 0, sampleNext2.z);\\n\\tvec3 statsPrev2 = vec3(avgPrev2, 0, samplePrev2.z);\\n\\n\\tstatsRight = side < 0. ? statsCurr : statsNext;\\n\\tstatsLeft = side < 0. ? statsPrev : statsCurr;\\n\\tstatsPrevRight = side < 0. ? statsPrev2 : statsPrev;\\n\\tstatsNextLeft = side < 0. ? statsNext : statsNext2;\\n\\n\\tposition += sign * join * .5 * thickness / viewport.zw;\\n\\n\\t// compensate snapped sampleStep to enable smooth zoom\\n\\tposition.x += posShift / viewport.z;\\n\\n\\t// shift position by the clip offset\\n\\t// FIXME: move to uniform\\n\\tposition.x += passId * pxStep * samples.length / sampleStep / viewport.z;\\n\\n\\tgl_Position = vec4(position * 2. - 1., 0, 1);\\n}\\n\"])\r\n\t}, shaderOptions))\r\n\r\n\r\n\t// let drawPick = regl(extend({\r\n\t// \tfrag: glsl('./shader/pick-frag.glsl')\r\n\t// }))\r\n\r\n\tlet blankTexture = regl.texture({\r\n\t\twidth: 1,\r\n\t\theight: 1,\r\n\t\tchannels: this.textureChannels,\r\n\t\ttype: 'float'\r\n\t})\r\n\tblankTexture.sum = 0\r\n\tblankTexture.sum2 = 0\r\n\tlet NaNTexture = regl.texture({\r\n\t\twidth: 1,\r\n\t\theight: 1,\r\n\t\tchannels: this.textureChannels,\r\n\t\ttype: 'float',\r\n\t\tdata: new Float32Array([NaN, 0, 0, -1])\r\n\t})\r\n\tNaNTexture.sum = 0\r\n\tNaNTexture.sum2 = 0\r\n\tshader = { drawRanges, drawLine, regl, idBuffer, NaNTexture, blankTexture, gl }\r\n\tshaderCache.set( gl, shader )\r\n\treturn shader\r\n}\r\n\r\nObject.defineProperties(Waveform.prototype, {\r\n\tviewport: {\r\n\t\tget: function () {\r\n\t\t\tif (!this.dirty) return this.drawOptions.viewport\r\n\r\n\t\t\tvar viewport\r\n\r\n\t\t\tif (!this._viewport) viewport = [0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight]\r\n\t\t\telse viewport = [this._viewport.x, this._viewport.y, this._viewport.width, this._viewport.height]\r\n\r\n\t\t\t// invert viewport if necessary\r\n\t\t\tif (!this.flip) {\r\n\t\t\t\tviewport[1] = this.gl.drawingBufferHeight - viewport[1] - viewport[3]\r\n\t\t\t}\r\n\r\n\t\t\treturn viewport\r\n\t\t},\r\n\t\tset: function (v) {\r\n\t\t\tthis._viewport = v ? parseRect(v) : v\r\n\t\t}\r\n\t},\r\n\r\n\tcolor: {\r\n\t\tget: function () {\r\n\t\t\tif (!this.dirty) return this.drawOptions.color\r\n\r\n\t\t\treturn this._color || [0, 0, 0, 255]\r\n\t\t},\r\n\t\t// flatten colors to a single uint8 array\r\n\t\tset: function (v) {\r\n\t\t\tif (!v) v = 'transparent'\r\n\r\n\t\t\t// single color\r\n\t\t\tif (typeof v === 'string') {\r\n\t\t\t\tthis._color = rgba(v, 'uint8')\r\n\t\t\t}\r\n\t\t\t// flat array\r\n\t\t\telse if (typeof v[0] === 'number') {\r\n\t\t\t\tlet l = Math.max(v.length, 4)\r\n\t\t\t\tif (this._color) pool.freeUint8(this._color)\r\n\t\t\t\tthis._color = pool.mallocUint8(l)\r\n\t\t\t\tlet sub = (v.subarray || v.slice).bind(v)\r\n\t\t\t\tfor (let i = 0; i < l; i += 4) {\r\n\t\t\t\t\tthis._color.set(rgba(sub(i, i + 4), 'uint8'), i)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// nested array\r\n\t\t\telse {\r\n\t\t\t\tlet l = v.length\r\n\t\t\t\tif (this._color) pool.freeUint8(this._color)\r\n\t\t\t\tthis._color = pool.mallocUint8(l * 4)\r\n\t\t\t\tfor (let i = 0; i < l; i++) {\r\n\t\t\t\t\tthis._color.set(rgba(v[i], 'uint8'), i * 4)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tamplitude: {\r\n\t\tget: function () {\r\n\t\t\tif (!this.dirty) return this.drawOptions.amplitude\r\n\t\t\treturn this._amplitude || [this.minY, this.maxY]\r\n\t\t},\r\n\t\tset: function (amplitude) {\r\n\t\t\tif (typeof amplitude === 'number') {\r\n\t\t\t\tthis._amplitude = [-amplitude, +amplitude]\r\n\t\t\t}\r\n\t\t\telse if (amplitude.length) {\r\n\t\t\t\tthis._amplitude = [amplitude[0], amplitude[1]]\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._amplitude = amplitude\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\trange: {\r\n\t\tget: function () {\r\n\t\t\tif (!this.dirty) return this.drawOptions.range\r\n\t\t\tif (this._range != null) {\r\n\t\t\t\tif (typeof this._range === 'number') {\r\n\t\t\t\t\treturn [\r\n\t\t\t\t\t\tnidx(this._range, this.total), this.total\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this._range\r\n\t\t\t}\r\n\t\t\treturn [0, this.total]\r\n\t\t},\r\n\t\tset: function (range) {\r\n\t\t\tif (!range) return this._range = null\r\n\r\n\t\t\tif (range.length) {\r\n\t\t\t\t// support vintage 4-value range\r\n\t\t\t\tif (range.length === 4) {\r\n\t\t\t\t\tthis._range = [range[0], range[2]]\r\n\t\t\t\t\tthis.amplitude = [range[1], range[3]]\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._range = [range[0], range[1]]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (typeof range === 'number') {\r\n\t\t\t\tthis._range = range\r\n\t\t\t}\r\n\r\n\t\t\tthis.dirty = true\r\n\t\t}\r\n\t}\r\n})\r\n\r\n// update visual state\r\nWaveform.prototype.update = function (o) {\r\n\tif (!o) return this\r\n\tif (o.length != null) o = {data: o}\r\n\r\n\telse if (typeof o !== 'object') throw Error('Argument must be a data or valid object')\r\n\r\n\tthis.dirty = true\r\n\r\n\to = pick(o, {\r\n\t\tdata: 'data value values sample samples',\r\n\t\t// push: 'add append push insert concat',\r\n\t\trange: 'range dataRange dataBox dataBounds dataLimits',\r\n\t\tamplitude: 'amp amplitude amplitudes ampRange bounds limits maxAmplitude maxAmp',\r\n\t\tthickness: 'thickness width linewidth lineWidth line-width',\r\n\t\tpxStep: 'step pxStep',\r\n\t\tcolor: 'color colour colors colours fill fillColor fill-color',\r\n\t\tline: 'line line-style lineStyle linestyle',\r\n\t\tviewport: 'clip vp viewport viewBox viewbox viewPort area',\r\n\t\topacity: 'opacity alpha transparency visible visibility opaque',\r\n\t\tflip: 'flip iviewport invertViewport inverseViewport',\r\n\t\tmode: 'mode',\r\n\t\tshape: 'shape textureShape',\r\n\t\tsampleStep: 'sampleStep'\r\n\t})\r\n\r\n\t// forcing rendering mode is mostly used for debugging purposes\r\n\tif (o.mode !== undefined) this.mode = o.mode\r\n\r\n\tif (o.shape !== undefined) {\r\n\t\tif (this.textures.length) throw Error('Cannot set texture shape because textures are initialized already')\r\n\t\tthis.textureShape = o.shape\r\n\t\tthis.textureLength = this.textureShape[0] * this.textureShape[1]\r\n\t}\r\n\r\n\t// parse line style\r\n\tif (o.line) {\r\n\t\tif (typeof o.line === 'string') {\r\n\t\t\tlet parts = o.line.split(/\\s+/)\r\n\r\n\t\t\t// 12px black\r\n\t\t\tif (/0-9/.test(parts[0][0])) {\r\n\t\t\t\tif (!o.thickness) o.thickness = parts[0]\r\n\t\t\t\tif (!o.color && parts[1]) o.color = parts[1]\r\n\t\t\t}\r\n\t\t\t// black 12px\r\n\t\t\telse {\r\n\t\t\t\tif (!o.thickness && parts[1]) o.thickness = parts[1]\r\n\t\t\t\tif (!o.color) o.color = parts[0]\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\to.color = o.line\r\n\t\t}\r\n\t}\r\n\r\n\tif (o.thickness !== undefined) {\r\n\t\tthis.thickness = toPx(o.thickness)\r\n\t}\r\n\r\n\tif (o.pxStep !== undefined) {\r\n\t\tthis.pxStep = toPx(o.pxStep)\r\n\t}\r\n\r\n\tif (o.opacity !== undefined) {\r\n\t\tthis.opacity = parseFloat(o.opacity)\r\n\t}\r\n\r\n\tif (o.viewport !== undefined) {\r\n\t\tthis.viewport = o.viewport\r\n\t}\r\n\r\n\tif (o.flip) {\r\n\t\tthis.flip = !!o.flip\r\n\t}\r\n\r\n\tif (o.range !== undefined) {\r\n\t\tthis.range = o.range\r\n\t}\r\n\r\n\tif (o.color !== undefined) {\r\n\t\tthis.color = o.color\r\n\t}\r\n\r\n\tif (o.amplitude !== undefined) {\r\n\t\tthis.amplitude = o.amplitude\r\n\t}\r\n\r\n\t// reset sample textures if new samples data passed\r\n\tif (o.data) {\r\n\t\tthis.total = 0\r\n\t\tthis.lastY = null\r\n\t\tthis.minY = Infinity\r\n\t\tthis.maxY = -Infinity\r\n\t\tthis.push(o.data)\r\n\t}\r\n\r\n\t// call push method\r\n\tif (o.push) {\r\n\t\tthis.push(o.push)\r\n\t}\r\n\r\n\t// rather debugging-purpose param, not supposed to be used\r\n\tif (o.sampleStep) this.sampleStep = o.sampleStep\r\n\r\n\treturn this\r\n}\r\n\r\n// calculate draw options\r\nWaveform.prototype.calc = function () {\r\n\tif (!this.dirty) return this.drawOptions\r\n\r\n\tthis.flush()\r\n\r\n\tlet {total, opacity, amplitude, viewport, range} = this\r\n\r\n\tlet color = this.color\r\n\tlet thickness = this.thickness\r\n\r\n\t// calc runtime props\r\n\tlet span = Math.abs(range[1] - range[0]) || 1\r\n\r\n\t// init pxStep as max number of stops on the screen to cover the range\r\n\tlet pxStep = Math.max(\r\n\t\t// width / span = how many pixels per sample to fit the range\r\n\t\tviewport[2] / span,\r\n\t\t// pxStep affects jittering on panning, .5 is good value\r\n\t\tthis.pxStep || .5//Math.pow(thickness, .1) * .1\r\n\t)\r\n\r\n\t// init sampleStep as sample interval to fit the data range into viewport\r\n\tlet sampleStep = pxStep * span / viewport[2]\r\n\r\n\t// remove float64 residual\r\n\tsampleStep = f32.float(sampleStep)\r\n\r\n\t// snap sample step to 2^n grid: still smooth, but reduces float32 error\r\n\t// FIXME: make sampleStep snap step detection based on the span\r\n\t// round is better than ceil: ceil generates jittering\r\n\tsampleStep = Math.max(Math.round(sampleStep), 1)\r\n\r\n\tif (this.sampleStep) sampleStep = this.sampleStep\r\n\r\n\t// recalc pxStep to adjust changed sampleStep, to fit initial the range\r\n\tpxStep = viewport[2] * sampleStep / span\r\n\t// FIXME:  pxStep is close to 0.5, but can vary here somewhat\r\n\t// pxStep = Math.ceil(pxStep * 16) / 16\r\n\r\n\tlet pxPerSample = pxStep / sampleStep\r\n\r\n\t// translate is calculated so to meet conditions:\r\n\t// - sampling always starts at 0 sample of 0 texture\r\n\t// - panning never breaks that rule\r\n\t// - changing sampling step never breaks that rule\r\n\t// - to reduce error for big translate, it is rotated by textureLength\r\n\t// - panning is always perceived smooth\r\n\r\n\t// translate snapped to samplesteps makes sure 0 sample is picked pefrectly\r\n\t// let translate =  Math.floor(range[0] / sampleStep) * sampleStep\r\n\t// let translate = Math.floor((-range[0] % (this.textureLength * 3)) / sampleStep) * sampleStep\r\n\t// if (translate < 0) translate += this.textureLength\r\n\r\n\t// compensate snapping for low scale levels\r\n\tlet posShift = 0.\r\n\tif (pxPerSample > 1) {\r\n\t\tposShift = (Math.round(range[0]) - range[0]) * pxPerSample;\r\n\t}\r\n\r\n\tlet mode = this.mode\r\n\r\n\t// detect passes number needed to render full waveform\r\n\tlet passNum = Math.ceil(Math.floor(span * 1000) / 1000 / this.textureLength)\r\n\tlet passes = Array(passNum)\r\n\tlet firstTextureId = Math.round(range[0] / this.textureLength)\r\n\tlet clipWidth = Math.min(this.textureLength / sampleStep * pxStep, viewport[2])\r\n\r\n\tfor (let i = 0; i < passNum; i++) {\r\n\t\tlet textureId = firstTextureId + i;\r\n\r\n\t\t// ignore negative textures\r\n\t\tif (textureId < -1) continue;\r\n\t\tif (textureId > this.textures.length) continue;\r\n\r\n\t\tlet clipLeft = Math.round(i * clipWidth)\r\n\t\tlet clipRight = Math.round((i + 1) * clipWidth)\r\n\t\tlet clip = [\r\n\t\t\tclipLeft + viewport[0],\r\n\t\t\tviewport[1],\r\n\t\t\t// clipWidth here may fluctuate due to rounding\r\n\t\t\tclipRight - clipLeft,\r\n\t\t\tviewport[3]\r\n\t\t]\r\n\t\t// offset within the pass\r\n\t\tlet passOffset = Math.round(range[0] / this.textureLength) * this.textureLength\r\n\t\tlet translate = Math.round(range[0]) - passOffset\r\n\r\n\t\tlet samplesNumber = Math.min(\r\n\t\t\t// number of visible points\r\n\t\t\tMath.ceil(clipWidth / pxStep),\r\n\r\n\t\t\t// max number of samples per pass\r\n\t\t\tMath.ceil(this.textureLength / sampleStep)\r\n\t\t)\r\n\r\n\t\tpasses[i] = {\r\n\t\t\tpassId: i,\r\n\t\t\ttextureId: textureId,\r\n\t\t\tclip: clip,\r\n\t\t\tpassOffset: passOffset,\r\n\r\n\t\t\t// translate depends on pass\r\n\t\t\ttranslate: translate,\r\n\r\n\t\t\t// FIXME: reduce 3 to 2 or less\r\n\t\t\t// number of vertices to fill the clip width, including l/r overlay\r\n\t\t\tcount: Math.min(4 + 4 * samplesNumber * 3 + 4, this.maxSampleCount),\r\n\r\n\t\t\toffset: 0,\r\n\r\n\t\t\tsamples: this.textures[textureId] || this.NaNTexture,\r\n\t\t\tfractions: this.textures2[textureId] || this.blankTexture,\r\n\t\t\tprevSamples: this.textures[textureId - 1] || this.NaNTexture,\r\n\t\t\tnextSamples: this.textures[textureId + 1] || this.NaNTexture,\r\n\t\t\tprevFractions: this.textures2[textureId - 1] || this.blankTexture,\r\n\t\t\tnextFractions: this.textures2[textureId + 1] || this.blankTexture,\r\n\r\n\t\t\t// position shift to compensate sampleStep snapping\r\n\t\t\tshift: 0\r\n\t\t}\r\n\t}\r\n\r\n\t// use more complicated range draw only for sample intervals\r\n\t// note that rangeDraw gives sdev error for high values dataLength\r\n\tthis.drawOptions = {\r\n\t\tthickness, color, pxStep, pxPerSample, viewport,\r\n\t\tsampleStep, span, total, opacity, amplitude, range, mode, passes,\r\n\t\tpassNum,\r\n\t\tposShift,\r\n\t\tdataShape: this.textureShape,\r\n\t\tdataLength: this.textureLength\r\n\t}\r\n\tthis.dirty = false\r\n\r\n\treturn this.drawOptions\r\n}\r\n\r\n// draw frame according to state\r\nWaveform.prototype.render = function () {\r\n\tthis.flush()\r\n\r\n\tif (this.total < 2) return this\r\n\r\n\tlet o = this.calc()\r\n\r\n\t// multipass renders different textures to adjacent clip areas\r\n\to.passes.forEach((pass) => {\r\n\t\t// o  {count, offset, clip, texture, shift}\r\n\t\textend(o, pass)\r\n\r\n\t\t// in order to avoid glitch switching range/line mode on rezoom\r\n\t\t// we always render every range with transparent color\r\n\t\tlet color = o.color\r\n\r\n\t\t// range case\r\n\t\tif (o.pxPerSample <= 1. || (o.mode === 'range' && o.mode != 'line')) {\r\n\t\t\tthis.shader.drawRanges.call(this, o)\r\n\r\n\t\t\t// o.color = [0,0,0,0]\r\n\t\t\t// this.shader.drawLine.call(this, o)\r\n\t\t\t// o.color = color\r\n\r\n\t\t\t// this.shader.drawRanges.call(this, extend({}, o, {\r\n\t\t\t// \tcolor: [255,0,0,255],\r\n\t\t\t// \tprimitive: 'points'\r\n\t\t\t// }))\r\n\t\t}\r\n\r\n\t\t// line case\r\n\t\telse {\r\n\t\t\tthis.shader.drawLine.call(this, o)\r\n\r\n\t\t\t// o.color = [0,0,0,0]\r\n\t\t\t// this.shader.drawRanges.call(this, o)\r\n\t\t\t// o.color = color\r\n\t\t}\r\n\t})\r\n\r\n\r\n\treturn this\r\n}\r\n\r\n// append samples, will be put into texture at the next frame or idle\r\nWaveform.prototype.push = function (...samples) {\r\n\tif (!samples || !samples.length) return this\r\n\r\n\tfor (let i = 0; i < samples.length; i++) {\r\n\t\tif (samples[i].length) {\r\n\t\t\tif (samples[i].length > MAX_ARGUMENTS) {\r\n\t\t\t\tfor (let j = 0; j < samples[i].length; j++) {\r\n\t\t\t\t\tthis.pushQueue.push(samples[i][j])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse this.pushQueue.push(...samples[i])\r\n\t\t}\r\n\t\telse this.pushQueue.push(samples[i])\r\n\t}\r\n\r\n\tif (this.cancelFlush) this.cancelFlush(), this.cancelFlush = null\r\n\tthis.dirty = true\r\n\tthis.cancelFlush = idle(() => {\r\n\t\tthis.cancelFlush = null\r\n\t\tthis.flush()\r\n\t})\r\n\r\n\treturn this\r\n}\r\n\r\n// drain pushQueue\r\nWaveform.prototype.flush = function () {\r\n\t// cancel planned callback\r\n\tif (this.cancelFlush) this.cancelFlush(), this.cancelFlush = null\r\n\tif (this.pushQueue.length) {\r\n\t\tlet arr = this.pushQueue\r\n\t\tthis.set(arr, this.total)\r\n\t\tthis.pushQueue.length = 0\r\n\t}\r\n\treturn this\r\n}\r\n\r\n// write samples into texture\r\nWaveform.prototype.set = function (samples, at=0) {\r\n\tif (!samples || !samples.length) return this\r\n\r\n\t// draing queue, if possible overlap with total\r\n\tif (at + samples.length > this.total + this.pushQueue.length) {\r\n\t\tthis.flush()\r\n\t}\r\n\r\n\t// future fill: provide NaN data\r\n\tif (at > this.total) {\r\n\t\tthis.set(Array(at - this.total), this.total)\r\n\t}\r\n\r\n\tthis.dirty = true\r\n\r\n\t// carefully handle array\r\n\tif (Array.isArray(samples)) {\r\n\t\tlet floatSamples = pool.mallocFloat64(samples.length)\r\n\r\n\t\tfor (let i = 0; i < samples.length; i++) {\r\n\t\t\t// put NaN samples as indicators of blank samples\r\n\t\t\tif (samples[i] == null || isNaN(samples[i])) {\r\n\t\t\t\tfloatSamples[i] = NaN\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tfloatSamples[i] = samples[i]\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsamples = floatSamples\r\n\t}\r\n\r\n\t// detect min/maxY\r\n\tfor (let i = 0; i < samples.length; i++) {\r\n\t\tif (this.minY > samples[i]) this.minY = samples[i]\r\n\t\tif (this.maxY < samples[i]) this.maxY = samples[i]\r\n\t}\r\n\r\n\t// detect textureShape based on limits\r\n\t// in order to reset sum2 more frequently to reduce error\r\n\tif (!this.textureShape) {\r\n\t\tthis.textureShape = [512, 512]\r\n\t\tthis.textureLength = this.textureShape[0] * this.textureShape[1]\r\n\t}\r\n\r\n\tlet [txtW, txtH] = this.textureShape\r\n\tlet txtLen = this.textureLength\r\n\r\n\tlet offset = at % txtLen\r\n\tlet id = Math.floor(at / txtLen)\r\n\tlet y = Math.floor(offset / txtW)\r\n\tlet x = offset % txtW\r\n\tlet tillEndOfTxt = txtLen - offset\r\n\tlet ch = this.textureChannels\r\n\r\n\t// get current texture\r\n\tlet txt = this.textures[id]\r\n\tlet txtFract = this.textures2[id]\r\n\r\n\tif (!txt) {\r\n\t\tlet txtData = pool.mallocFloat64(txtLen * ch)\r\n\r\n\t\t// fill txt data with NaNs for proper start/end/gap detection\r\n\t\tfor (let i = 0; i < txtData.length; i+=ch) {\r\n\t\t\ttxtData[i + 0] =\r\n\t\t\ttxtData[i + 1] =\r\n\t\t\ttxtData[i + 2] = 0\r\n\t\t\ttxtData[i + 3] = -1\r\n\t\t}\r\n\r\n\t\ttxt = this.textures[id] = this.regl.texture({\r\n\t\t\twidth: this.textureShape[0],\r\n\t\t\theight: this.textureShape[1],\r\n\t\t\tchannels: ch,\r\n\t\t\ttype: 'float',\r\n\t\t\tmin: 'nearest',\r\n\t\t\tmag: 'nearest',\r\n\t\t\t// min: 'linear',\r\n\t\t\t// mag: 'linear',\r\n\t\t\twrap: ['clamp', 'clamp'],\r\n\t\t\tdata: f32.float(txtData)\r\n\t\t})\r\n\t\tthis.lastY = txt.sum = txt.sum2 = 0\r\n\r\n\t\ttxtFract = this.textures2[id] = this.regl.texture({\r\n\t\t\twidth: this.textureShape[0],\r\n\t\t\theight: this.textureShape[1],\r\n\t\t\tchannels: ch,\r\n\t\t\ttype: 'float',\r\n\t\t\tmin: 'nearest',\r\n\t\t\tmag: 'nearest',\r\n\t\t\t// min: 'linear',\r\n\t\t\t// mag: 'linear',\r\n\t\t\twrap: ['clamp', 'clamp']\r\n\t\t})\r\n\r\n\t\ttxt.data = txtData\r\n\t}\r\n\r\n\t// calc sum, sum2 and form data for the samples\r\n\tlet dataLen = Math.min(tillEndOfTxt, samples.length)\r\n\tlet data = txt.data.subarray(offset * ch, offset * ch + dataLen * ch)\r\n\tfor (let i = 0, l = dataLen; i < l; i++) {\r\n\t\t// put NaN samples as indicators of blank samples\r\n\t\tif (!isNaN(samples[i])) {\r\n\t\t\tdata[i * ch] = this.lastY = samples[i]\r\n\t\t\tdata[i * ch + 3] = 0\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdata[i * ch] = NaN\r\n\r\n\t\t\t// write NaN values as a definite flag\r\n\t\t\tdata[i * ch + 3] = -1\r\n\t\t}\r\n\r\n\t\ttxt.sum += this.lastY\r\n\t\ttxt.sum2 += this.lastY * this.lastY\r\n\r\n\t\t// we cannot rotate sums here because there can be any number of rotations between two edge samples\r\n\t\t// also that is hard to guess correct rotation limit, that can change at any new data\r\n\t\t// so we just keep precise secondary texture and hope the sum is not huge enough to reset at the next texture\r\n\t\tdata[i * ch + 1] = txt.sum\r\n\t\tdata[i * ch + 2] = txt.sum2\r\n\t}\r\n\t// increase total by the number of new samples\r\n\tif (this.total - at < dataLen) this.total += dataLen - (this.total - at)\r\n\r\n\t// fullfill last unfinished row\r\n\tlet firstRowWidth = 0\r\n\tif (x) {\r\n\t\tfirstRowWidth = Math.min(txtW - x, dataLen)\r\n\r\n\t\twriteTexture(x, y, firstRowWidth, 1, data.subarray(0, firstRowWidth * ch))\r\n\r\n\t\t// if data is shorter than the texture row - skip the rest\r\n\t\tif (x + samples.length <= txtW) {\r\n\t\t\tpool.freeFloat64(samples)\r\n\t\t\tpool.freeFloat64(data)\r\n\t\t\treturn this\r\n\t\t}\r\n\r\n\t\ty++\r\n\r\n\t\t// shortcut next texture block\r\n\t\tif (y === txtH) {\r\n\t\t\tpool.freeFloat64(data)\r\n\t\t\tthis.push(samples.subarray(firstRowWidth))\r\n\t\t\tpool.freeFloat64(samples)\r\n\t\t\treturn this\r\n\t\t}\r\n\r\n\t\toffset += firstRowWidth\r\n\t}\r\n\r\n\t// put rect with data\r\n\tlet h = Math.floor((dataLen - firstRowWidth) / txtW)\r\n\tlet blockLen = 0\r\n\tif (h) {\r\n\t\tblockLen = h * txtW\r\n\r\n\t\twriteTexture(0, y, txtW, h, data.subarray(firstRowWidth * ch, (firstRowWidth + blockLen) * ch))\r\n\t\ty += h\r\n\t}\r\n\r\n\t// put last row\r\n\tlet lastRowWidth = dataLen - firstRowWidth - blockLen\r\n\tif (lastRowWidth) {\r\n\t\twriteTexture(0, y, lastRowWidth, 1, data.subarray(-lastRowWidth * ch))\r\n\t}\r\n\r\n\t// shorten block till the end of texture\r\n\tif (tillEndOfTxt < samples.length) {\r\n\t\tthis.set(samples.subarray(tillEndOfTxt), this.total)\r\n\r\n\t\tpool.freeFloat64(samples)\r\n\t\tpool.freeFloat64(data)\r\n\r\n\t\treturn this\r\n\t}\r\n\r\n\t// put data to texture, provide NaN transport & performant fractions calc\r\n\tfunction writeTexture (x, y, w, h, data) {\r\n\t\tlet f32data = pool.mallocFloat32(data.length)\r\n\t\tlet f32fract = pool.mallocFloat32(data.length)\r\n\r\n\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\tf32data[i] = data[i]\r\n\t\t\tf32fract[i] = data[i] - f32data[i]\r\n\t\t}\r\n\r\n\t\ttxt.subimage({\r\n\t\t\twidth: w,\r\n\t\t\theight: h,\r\n\t\t\tdata: f32data\r\n\t\t}, x, y)\r\n\t\ttxtFract.subimage({\r\n\t\t\twidth: w,\r\n\t\t\theight: h,\r\n\t\t\tdata: f32fract\r\n\t\t}, x, y)\r\n\r\n\t\tpool.freeFloat32(f32data)\r\n\t\tpool.freeFloat32(f32fract)\r\n\t}\r\n\r\n\treturn this\r\n}\r\n\r\n// get data at a point\r\nWaveform.prototype.pick = function (x) {\r\n\tif (!this.storeData) throw Error('Picking is disabled. Enable it via constructor options.')\r\n\r\n\tif (typeof x !== 'number') {\r\n\t\tx = Math.max(x.clientX - elOffset(this.canvas).left, 0)\r\n\t}\r\n\r\n\tlet {span, translater, translateri, viewport, currTexture, sampleStep, pxPerSample, pxStep, amplitude} = this.calc()\r\n\r\n\tlet txt = this.textures[currTexture]\r\n\r\n\tif (!txt) return null\r\n\r\n\tlet xOffset = Math.floor(span * x / viewport[2])\r\n\tlet offset = Math.floor(translater + xOffset)\r\n\tlet xShift = translater - translateri\r\n\r\n\tif (offset < 0 || offset > this.total) return null\r\n\r\n\tlet ch = this.textureChannels\r\n\t// FIXME: use samples array\r\n\tlet data = txt.data\r\n\r\n\tlet samples = data.subarray(offset * ch, offset * ch + ch)\r\n\r\n\t// single-value pick\r\n\t// if (pxPerSample >= 1) {\r\n\t\tlet avg = samples[0]\r\n\t\treturn {\r\n\t\t\taverage: avg,\r\n\t\t\tsdev: 0,\r\n\t\t\toffset: [offset, offset],\r\n\t\t\tx: viewport[2] * (xOffset - xShift) / span + this.viewport.x,\r\n\t\t\ty: ((-avg - amplitude[0]) / (amplitude[1] - amplitude[0])) * this.viewport.height + this.viewport.y\r\n\t\t}\r\n\t// }\r\n\r\n\t// FIXME: multi-value pick\r\n}\r\n\r\n// clear viewport area occupied by the renderer\r\nWaveform.prototype.clear = function () {\r\n\tif (!this.drawOptions) return this\r\n\r\n\tlet {gl, regl} = this\r\n\tlet {x, y, width, height} = this.viewport\r\n    gl.enable(gl.SCISSOR_TEST)\r\n    gl.scissor(x, y, width, height)\r\n\r\n\t// FIXME: avoid depth here\r\n    regl.clear({color: [0, 0, 0, 0], depth: 1})\r\n    gl.clear(gl.COLOR_BUFFRE_BIT | gl.DEPTH_BUFFER_BIT)\r\n\r\n    gl.disable(gl.SCISSOR_TEST)\r\n\r\n    return this\r\n}\r\n\r\n// dispose all resources\r\nWaveform.prototype.destroy = function () {\r\n\tthis.textures.forEach(txt => {\r\n\t\ttxt.destroy()\r\n\t})\r\n\tthis.textures2.forEach(txt => {\r\n\t\ttxt.destroy()\r\n\t})\r\n}\r\n\r\n\r\n// style\r\n// Waveform.prototype.color\r\nWaveform.prototype.opacity = 1\r\nWaveform.prototype.thickness = 1\r\nWaveform.prototype.mode = null\r\n// Waveform.prototype.fade = true\r\n\r\nWaveform.prototype.flip = false\r\n\r\n// Texture size affects\r\n// - sdev error: bigger texture accumulate sum2 error so signal looks more fluffy\r\n// - performance: bigger texture is slower to create\r\n// - zoom level: only 2 textures per screen are available, so zoom is limited\r\n// - max number of textures\r\nWaveform.prototype.textureShape\r\nWaveform.prototype.textureLength\r\nWaveform.prototype.textureChannels = 4\r\nWaveform.prototype.maxSampleCount = 8192 * 2\r\n\r\n\r\nfunction isRegl (o) {\r\n\treturn typeof o === 'function' &&\r\n\to._gl &&\r\n\to.prop &&\r\n\to.texture &&\r\n\to.buffer\r\n}\r\n\r\nfunction isNeg(v) {\r\n\treturn v < 0 || neg0(v)\r\n}\r\n\r\nfunction toPx(str) {\r\n\tif (typeof str === 'number') return str\r\n\tif (!isBrowser) return parseFloat(str)\r\n\tlet unit = parseUnit(str)\r\n\treturn unit[0] * px(unit[1])\r\n}\r\n\r\nfunction mirrorProperty(a, name, b) {\r\n\tObject.defineProperty(a, name, {\r\n\t\tget: () => b[name],\r\n\t\tset: (v) => b[name] = v\r\n\t})\r\n}\r\n\r\nmodule.exports = Waveform\r\n",
    "module.exports = true;",
    "'use strict'\r\n\r\nvar pick = require('pick-by-alias')\r\n\r\nmodule.exports = parseRect\r\n\r\nfunction parseRect (arg) {\r\n  var rect\r\n\r\n  // direct arguments sequence\r\n  if (arguments.length > 1) {\r\n    arg = arguments\r\n  }\r\n\r\n  // svg viewbox\r\n  if (typeof arg === 'string') {\r\n    arg = arg.split(/\\s/).map(parseFloat)\r\n  }\r\n  else if (typeof arg === 'number') {\r\n    arg = [arg]\r\n  }\r\n\r\n  // 0, 0, 100, 100 - array-like\r\n  if (arg.length && typeof arg[0] === 'number') {\r\n    // [w, w]\r\n    if (arg.length === 1) {\r\n      rect = {\r\n        width: arg[0],\r\n        height: arg[0],\r\n        x: 0, y: 0\r\n      }\r\n    }\r\n    // [w, h]\r\n    else if (arg.length === 2) {\r\n      rect = {\r\n        width: arg[0],\r\n        height: arg[1],\r\n        x: 0, y: 0\r\n      }\r\n    }\r\n    // [l, t, r, b]\r\n    else {\r\n      rect = {\r\n        x: arg[0],\r\n        y: arg[1],\r\n        width: (arg[2] - arg[0]) || 0,\r\n        height: (arg[3] - arg[1]) || 0\r\n      }\r\n    }\r\n  }\r\n  // {x, y, w, h} or {l, t, b, r}\r\n  else if (arg) {\r\n    arg = pick(arg, {\r\n      left: 'x l left Left',\r\n      top: 'y t top Top',\r\n      width: 'w width W Width',\r\n      height: 'h height W Width',\r\n      bottom: 'b bottom Bottom',\r\n      right: 'r right Right'\r\n    })\r\n\r\n    rect = {\r\n      x: arg.left || 0,\r\n      y: arg.top || 0\r\n    }\r\n\r\n    if (arg.width == null) {\r\n      if (arg.right) rect.width = arg.right - rect.x\r\n      else rect.width = 0\r\n    }\r\n    else {\r\n      rect.width = arg.width\r\n    }\r\n\r\n    if (arg.height == null) {\r\n      if (arg.bottom) rect.height = arg.bottom - rect.y\r\n      else rect.height = 0\r\n    }\r\n    else {\r\n      rect.height = arg.height\r\n    }\r\n  }\r\n\r\n  return rect\r\n}\r\n",
    "/** @module negative-index */\r\nvar isNeg = require('negative-zero');\r\n\r\nmodule.exports = function negIdx (idx, length) {\r\n\treturn idx == null ? 0 : isNeg(idx) ? length : idx <= -length ? 0 : idx < 0 ? (length + (idx % length)) : Math.min(length, idx);\r\n}\r\n",
    "// http://stackoverflow.com/questions/442404/dynamically-retrieve-the-position-x-y-of-an-html-element\nmodule.exports = function(el) {\n  if (el.getBoundingClientRect) {\n      return el.getBoundingClientRect();\n  }\n  else {\n    var x = 0, y = 0;\n    do {\n        x += el.offsetLeft - el.scrollLeft;\n        y += el.offsetTop - el.scrollTop;\n    } \n    while (el = el.offsetParent);\n\n    return { \"left\": x, \"top\": y }\n  }\n}",
    "var html = require('choo/html')\nvar Component = require('choo/component')\nvar GlWaveform = require('gl-waveform')\n\nmodule.exports = class Waveform extends Component {\n  constructor (id, state, emit) {\n    super(id)\n    this.local = state.components[id] = {}\n  }\n\n  load (element) {\n    this.waveform = new GlWaveform()\n  }\n\n  update (options) {\n    return false\n  }\n\n  createElement (options) {\n    this.local.options = options\n    return html`<div></div>`\n  }\n}\n",
    "var trailingNewlineRegex = /\\n[\\s]+$/\nvar leadingNewlineRegex = /^\\n[\\s]+/\nvar trailingSpaceRegex = /[\\s]+$/\nvar leadingSpaceRegex = /^[\\s]+/\nvar multiSpaceRegex = /[\\n\\s]+/g\n\nvar TEXT_TAGS = [\n  'a', 'abbr', 'b', 'bdi', 'bdo', 'br', 'cite', 'data', 'dfn', 'em', 'i',\n  'kbd', 'mark', 'q', 'rp', 'rt', 'rtc', 'ruby', 's', 'amp', 'small', 'span',\n  'strong', 'sub', 'sup', 'time', 'u', 'var', 'wbr'\n]\n\nvar VERBATIM_TAGS = [\n  'code', 'pre', 'textarea'\n]\n\nmodule.exports = function appendChild (el, childs) {\n  if (!Array.isArray(childs)) return\n\n  var nodeName = el.nodeName.toLowerCase()\n\n  var hadText = false\n  var value, leader\n\n  for (var i = 0, len = childs.length; i < len; i++) {\n    var node = childs[i]\n    if (Array.isArray(node)) {\n      appendChild(el, node)\n      continue\n    }\n\n    if (typeof node === 'number' ||\n      typeof node === 'boolean' ||\n      typeof node === 'function' ||\n      node instanceof Date ||\n      node instanceof RegExp) {\n      node = node.toString()\n    }\n\n    var lastChild = el.childNodes[el.childNodes.length - 1]\n\n    // Iterate over text nodes\n    if (typeof node === 'string') {\n      hadText = true\n\n      // If we already had text, append to the existing text\n      if (lastChild && lastChild.nodeName === '#text') {\n        lastChild.nodeValue += node\n\n      // We didn't have a text node yet, create one\n      } else {\n        node = document.createTextNode(node)\n        el.appendChild(node)\n        lastChild = node\n      }\n\n      // If this is the last of the child nodes, make sure we close it out\n      // right\n      if (i === len - 1) {\n        hadText = false\n        // Trim the child text nodes if the current node isn't a\n        // node where whitespace matters.\n        if (TEXT_TAGS.indexOf(nodeName) === -1 &&\n          VERBATIM_TAGS.indexOf(nodeName) === -1) {\n          value = lastChild.nodeValue\n            .replace(leadingNewlineRegex, '')\n            .replace(trailingSpaceRegex, '')\n            .replace(trailingNewlineRegex, '')\n            .replace(multiSpaceRegex, ' ')\n          if (value === '') {\n            el.removeChild(lastChild)\n          } else {\n            lastChild.nodeValue = value\n          }\n        } else if (VERBATIM_TAGS.indexOf(nodeName) === -1) {\n          // The very first node in the list should not have leading\n          // whitespace. Sibling text nodes should have whitespace if there\n          // was any.\n          leader = i === 0 ? '' : ' '\n          value = lastChild.nodeValue\n            .replace(leadingNewlineRegex, leader)\n            .replace(leadingSpaceRegex, ' ')\n            .replace(trailingSpaceRegex, '')\n            .replace(trailingNewlineRegex, '')\n            .replace(multiSpaceRegex, ' ')\n          lastChild.nodeValue = value\n        }\n      }\n\n    // Iterate over DOM nodes\n    } else if (node && node.nodeType) {\n      // If the last node was a text node, make sure it is properly closed out\n      if (hadText) {\n        hadText = false\n\n        // Trim the child text nodes if the current node isn't a\n        // text node or a code node\n        if (TEXT_TAGS.indexOf(nodeName) === -1 &&\n          VERBATIM_TAGS.indexOf(nodeName) === -1) {\n          value = lastChild.nodeValue\n            .replace(leadingNewlineRegex, '')\n            .replace(trailingNewlineRegex, '')\n            .replace(multiSpaceRegex, ' ')\n\n          // Remove empty text nodes, append otherwise\n          if (value === '') {\n            el.removeChild(lastChild)\n          } else {\n            lastChild.nodeValue = value\n          }\n        // Trim the child nodes if the current node is not a node\n        // where all whitespace must be preserved\n        } else if (VERBATIM_TAGS.indexOf(nodeName) === -1) {\n          value = lastChild.nodeValue\n            .replace(leadingSpaceRegex, ' ')\n            .replace(leadingNewlineRegex, '')\n            .replace(trailingNewlineRegex, '')\n            .replace(multiSpaceRegex, ' ')\n          lastChild.nodeValue = value\n        }\n      }\n\n      // Store the last nodename\n      var _nodeName = node.nodeName\n      if (_nodeName) nodeName = _nodeName.toLowerCase()\n\n      // Append the node to the DOM\n      el.appendChild(node)\n    }\n  }\n}\n",
    "module.exports = function keyboardStore (state, emitter) {\n  state.keyboards = [\n    { name: 'colemak', keys: '1234567890-=qwfpgjluy;[]arstdhneio\\'zxcvbkm,./' },\n    { name: 'qwerty', keys: '1234567890-=qwertyuiop[]asdfghjkl;\\'zxcvbnm,./' }\n  ]\n\n  state.keyboard = state.keyboards[0]\n  emitter.on('keyboard', keyboard => {\n    state.keyboard = keyboard\n    emitter.emit('render')\n  })\n\n  document.body.addEventListener('keydown', ev => {\n    var keyIndex = state.keyboard.keys.indexOf(ev.key)\n    if (keyIndex === -1) return\n    var note = state.notes[keyIndex]\n    if (note == null) return\n    emitter.emit('player:note', note)\n  })\n}\n",
    "module.exports = function playerStore (state, emitter) {\n  var audioContext = new window.AudioContext()\n\n  var merger = audioContext.createChannelMerger(1)\n  var analyser = audioContext.createAnalyser()\n\n  state.player = {\n    audioContext,\n    merger,\n    analyser\n  }\n\n  merger.connect(analyser)\n  analyser.connect(audioContext.destination)\n\n  emitter.on('player:note', function (note) {\n    if (state.instrument == null) return\n    state.player.lastNote = note\n    state.instrument.play(note)\n  })\n}\n",
    "var Waveform = require('../components/waveform')\nvar Tonal = require('tonal')\n\nmodule.exports = function waveformStore (state, emitter) {\n  var analyser = state.player.analyser\n  var bufferLength = 2048\n  var data = new Float32Array(bufferLength)\n\n  state.waveform = {\n    data,\n    range: [0, bufferLength],\n    amplitude: [-0.1, +0.1],\n    color: [0, 0, 1, 1],\n    thickness: '2px'\n  }\n\n  window.requestAnimationFrame(analyse)\n  function analyse () {\n    window.requestAnimationFrame(analyse)\n\n    analyser.getFloatTimeDomainData(data)\n\n    var waveformComponent = state.cache(Waveform, 'waveform')\n    var waveform = waveformComponent.waveform\n\n    // try to render a number of samples that is a multiple\n    // of the number of the samples from the frequency of the last note.\n    if (state.player.lastNote) {\n      var noteFreq = Tonal.Note.freq(state.player.lastNote)\n      var noteLength = state.player.audioContext.sampleRate / noteFreq\n      var noteRepeats = bufferLength / noteLength\n      var numSamples = Math.round(Math.floor(noteRepeats) * noteLength)\n      state.waveform.range = [bufferLength - numSamples, bufferLength]\n    }\n\n    waveform.update(state.waveform)\n    waveform.render()\n\n    waveformComponent.render(state.waveform)\n  }\n}\n",
    "module.exports = function microphoneStore (state, emitter) {\n  var constraints = { audio: true }\n  var source\n  state.microphone = false\n\n  emitter.on('microphone:on', () => {\n    state.microphone = true\n    navigator.mediaDevices.getUserMedia(constraints)\n      .then(stream => {\n        source = state.player.audioContext.createMediaStreamSource(stream)\n        source.connect(state.player.merger)\n      })\n  })\n\n  emitter.on('microphone:off', () => {\n    if (source) source.disconnect(state.player.merger)\n    source = null\n  })\n}\n",
    "var html = require('choo/html')\n\nvar keyboardView = require('./keyboard')\nvar scaleView = require('./scale')\nvar instrumentView = require('./instrument')\nvar playerView = require('./player')\nvar microphoneView = require('./microphone')\nvar waveformView = require('./waveform')\n\nmodule.exports = function mainView (state, emit) {\n  return html`\n    <div>\n      ${keyboardView(state, emit)}\n      ${scaleView(state, emit)}\n      ${instrumentView(state, emit)}\n      ${playerView(state, emit)}\n      ${microphoneView(state, emit)}\n      ${waveformView(state, emit)}\n    </div>\n  `\n}\n",
    "var html = require('choo/html')\n\nmodule.exports = function keyboardView (state, emit) {\n  var keyboards = state.keyboards\n\n  return html`\n    <div>\n      keyboard:\n      <select id=\"keyboard\" onchange=${onKeyboardChange}>\n        ${keyboards.map(keyboard => html`\n          <option\n            value=\"${keyboard.name}\"\n            id=\"${keyboard.name}\"\n            selected=${keyboard === state.keyboard}\n          >\n            ${keyboard.name}\n          </option>\n        `)}\n      </select>\n    </div>\n  `\n\n  function onKeyboardChange (ev) {\n    var name = ev.target.value\n    var keyboard = keyboards.find(keyboard => keyboard.name === name)\n    emit('keyboard', keyboard)\n  }\n}\n",
    "var html = require('choo/html')\nvar Tonal = require('tonal')\n\nmodule.exports = function scaleView (state, emit) {\n  return html`\n    <div>\n      scale:\n      <select id=\"scaleNote\" onchange=${onScaleNoteChange}>\n        ${Tonal.Note.names().map(name => html`\n          <option\n            value=\"${name}\"\n            id=\"${name}\"\n            selected=${state.scale.note === name}\n          >\n            ${name}\n          </option>\n        `)}\n      </select>\n      <select id=\"scaleType\" onchange=${onScaleTypeChange}>\n        ${Tonal.Scale.names().map(name => html`\n          <option\n            value=\"${name}\"\n            id=\"${name}\"\n            selected=${state.scale.type === name}\n          >\n            ${name}\n          </option>\n        `)}\n      </select>\n    </div>\n  `\n\n  function onScaleNoteChange (ev) {\n    emit('scale:note', ev.target.value)\n  }\n\n  function onScaleTypeChange (ev) {\n    emit('scale:type', ev.target.value)\n  }\n}\n",
    "var html = require('choo/html')\n\nmodule.exports = function instrumentView (state, emit) {\n  return html`\n    <div>\n      instrument:\n      <select id=\"instrument\" onchange=${onInstrumentChange}>\n        ${state.instruments.map(instrumentId => html`\n          <option\n            value=\"${instrumentId}\"\n            id=\"${instrumentId}\"\n            selected=${instrumentId === state.instrumentId}\n          >\n            ${instrumentId}\n          </option>\n        `)}\n      </select>\n    </div>\n  `\n\n  function onInstrumentChange (ev) {\n    emit('instrument', ev.target.value)\n  }\n}\n",
    "var html = require('choo/html')\n\nmodule.exports = function playerView (state, emit) {\n  return html`\n    <div>\n      notes:\n      ${state.notes.map(note => {\n    return html`\n          <button\n            onclick=${onPlay(note)}\n          >\n            ${note}\n          </button>\n        `\n  })}\n    </div>\n  `\n\n  function onPlay (note) {\n    return ev => emit('player:note', note)\n  }\n}\n",
    "var html = require('choo/html')\n\nmodule.exports = function microphoneView (state, emit) {\n  return html`\n    <div>\n      microphone:\n      <input\n        type=\"checkbox\"\n        checked=${state.microphone}\n        onchange=${onMicrophoneChange}\n      />\n    </div>\n  `\n\n  function onMicrophoneChange (ev) {\n    var status = ev.target.checked\n    if (status) emit('microphone:on')\n    else emit('microphone:off')\n  }\n}\n",
    "var Waveform = require('../components/waveform')\n\nmodule.exports = function waveformView (state, emit) {\n  console.log('waveform', typeof Waveform)\n\n  return state.cache(Waveform, 'waveform').render(state.waveform)\n}\n"
  ],
  "sourceRoot": ""
}